(self["webpackChunkolliearrison_github_io"]=self["webpackChunkolliearrison_github_io"]||[]).push([[504],{34:function(e,t,n){"use strict";var i=n(4901);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},38:function(e,t,n){var i=n(7874),r=Object.prototype,a=r.hasOwnProperty,s=r.toString,o=i?i.toStringTag:void 0;function l(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var i=!0}catch(l){}var r=s.call(e);return i&&(t?e[o]=n:delete e[o]),r}e.exports=l},81:function(e,t,n){"use strict";var i=n(9565),r=n(9306),a=n(8551),s=n(6823),o=n(851),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?o(e):t;if(r(n))return a(i(n,e));throw new l(s(e)+" is not iterable")}},100:function(e,t,n){var i=n(9476),r=i();e.exports=r},116:function(e,t,n){"use strict";var i=n(6518),r=n(9565),a=n(2652),s=n(9306),o=n(8551),l=n(1767),c=n(9539),u=n(4549),d=u("find",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(e){o(this);try{s(e)}catch(i){c(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;return a(t,function(t,i){if(e(t,n++))return i(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},144:function(e,t,n){"use strict";n.d(t,{BA:function(){return Fe},C4:function(){return T},EW:function(){return Xe},Gc:function(){return be},IG:function(){return Ce},IJ:function(){return De},KR:function(){return Ie},Kh:function(){return _e},Pr:function(){return Be},QW:function(){return Ve},R1:function(){return ke},Tm:function(){return we},X2:function(){return d},a1:function(){return Le},bl:function(){return A},fE:function(){return Ee},g8:function(){return Me},hV:function(){return Je},hZ:function(){return U},i9:function(){return Pe},jr:function(){return c},ju:function(){return Te},lJ:function(){return Re},lW:function(){return He},o5:function(){return l},qA:function(){return z},tB:function(){return xe},u4:function(){return F},uY:function(){return o},ux:function(){return Ae},wB:function(){return Ze},yC:function(){return s}});n(4114),n(8111),n(2489),n(7588),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(4232);let r,a;class s{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=r,!e&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=r;try{return r=this,e()}finally{r=t}}else 0}on(){1===++this._on&&(this.prevScope=r,r=this)}off(){this._on>0&&0===--this._on&&(r=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function o(e){return new s(e)}function l(){return r}function c(e,t=!1){r&&r.cleanups.push(e)}const u=new WeakSet;class d{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,r&&r.active&&r.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,u.has(this)&&(u.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||m(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,C(this),y(this);const e=a,t=w;a=this,w=!0;try{return this.fn()}finally{0,_(this),a=e,w=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)S(e);this.deps=this.depsTail=void 0,C(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?u.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){b(this)&&this.run()}get dirty(){return b(this)}}let h,p,f=0;function m(e,t=!1){if(e.flags|=8,t)return e.next=p,void(p=e);e.next=h,h=e}function v(){f++}function g(){if(--f>0)return;if(p){let e=p;p=void 0;while(e){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;while(h){let n=h;h=void 0;while(n){const i=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(t){e||(e=t)}n=i}}if(e)throw e}function y(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function _(e){let t,n=e.depsTail,i=n;while(i){const e=i.prevDep;-1===i.version?(i===n&&(n=e),S(i),M(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=e}e.deps=t,e.depsTail=n}function b(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(x(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function x(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===R)return;if(e.globalVersion=R,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!b(e)))return;e.flags|=2;const t=e.dep,n=a,r=w;a=e,w=!0;try{y(e);const n=e.fn(e._value);(0===t.version||(0,i.$H)(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(s){throw t.version++,s}finally{a=n,w=r,_(e),e.flags&=-3}}function S(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)S(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function M(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let w=!0;const E=[];function T(){E.push(w),w=!1}function A(){const e=E.pop();w=void 0===e||e}function C(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=a;a=void 0;try{t()}finally{a=e}}}let R=0;class L{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class P{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!a||!w||a===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==a)t=this.activeLink=new L(a,this),a.deps?(t.prevDep=a.depsTail,a.depsTail.nextDep=t,a.depsTail=t):a.deps=a.depsTail=t,I(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=a.depsTail,t.nextDep=void 0,a.depsTail.nextDep=t,a.depsTail=t,a.deps===t&&(a.deps=e)}return t}trigger(e){this.version++,R++,this.notify(e)}notify(e){v();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{g()}}}function I(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)I(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const D=new WeakMap,O=Symbol(""),N=Symbol(""),k=Symbol("");function F(e,t,n){if(w&&a){let t=D.get(e);t||D.set(e,t=new Map);let i=t.get(n);i||(t.set(n,i=new P),i.map=t,i.key=n),i.track()}}function U(e,t,n,r,a,s){const o=D.get(e);if(!o)return void R++;const l=e=>{e&&e.trigger()};if(v(),"clear"===t)o.forEach(l);else{const a=(0,i.cy)(e),s=a&&(0,i.yI)(n);if(a&&"length"===n){const e=Number(r);o.forEach((t,n)=>{("length"===n||n===k||!(0,i.Bm)(n)&&n>=e)&&l(t)})}else switch((void 0!==n||o.has(void 0))&&l(o.get(n)),s&&l(o.get(k)),t){case"add":a?s&&l(o.get("length")):(l(o.get(O)),(0,i.CE)(e)&&l(o.get(N)));break;case"delete":a||(l(o.get(O)),(0,i.CE)(e)&&l(o.get(N)));break;case"set":(0,i.CE)(e)&&l(o.get(O));break}}g()}function B(e,t){const n=D.get(e);return n&&n.get(t)}function V(e){const t=Ae(e);return t===e?t:(F(t,"iterate",k),Ee(e)?t:t.map(Re))}function z(e){return F(e=Ae(e),"iterate",k),e}const W={__proto__:null,[Symbol.iterator](){return H(this,Symbol.iterator,Re)},concat(...e){return V(this).concat(...e.map(e=>(0,i.cy)(e)?V(e):e))},entries(){return H(this,"entries",e=>(e[1]=Re(e[1]),e))},every(e,t){return j(this,"every",e,t,void 0,arguments)},filter(e,t){return j(this,"filter",e,t,e=>e.map(Re),arguments)},find(e,t){return j(this,"find",e,t,Re,arguments)},findIndex(e,t){return j(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return j(this,"findLast",e,t,Re,arguments)},findLastIndex(e,t){return j(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return j(this,"forEach",e,t,void 0,arguments)},includes(...e){return q(this,"includes",e)},indexOf(...e){return q(this,"indexOf",e)},join(e){return V(this).join(e)},lastIndexOf(...e){return q(this,"lastIndexOf",e)},map(e,t){return j(this,"map",e,t,void 0,arguments)},pop(){return $(this,"pop")},push(...e){return $(this,"push",e)},reduce(e,...t){return X(this,"reduce",e,t)},reduceRight(e,...t){return X(this,"reduceRight",e,t)},shift(){return $(this,"shift")},some(e,t){return j(this,"some",e,t,void 0,arguments)},splice(...e){return $(this,"splice",e)},toReversed(){return V(this).toReversed()},toSorted(e){return V(this).toSorted(e)},toSpliced(...e){return V(this).toSpliced(...e)},unshift(...e){return $(this,"unshift",e)},values(){return H(this,"values",Re)}};function H(e,t,n){const i=z(e),r=i[t]();return i===e||Ee(e)||(r._next=r.next,r.next=()=>{const e=r._next();return e.value&&(e.value=n(e.value)),e}),r}const G=Array.prototype;function j(e,t,n,i,r,a){const s=z(e),o=s!==e&&!Ee(e),l=s[t];if(l!==G[t]){const t=l.apply(e,a);return o?Re(t):t}let c=n;s!==e&&(o?c=function(t,i){return n.call(this,Re(t),i,e)}:n.length>2&&(c=function(t,i){return n.call(this,t,i,e)}));const u=l.call(s,c,i);return o&&r?r(u):u}function X(e,t,n,i){const r=z(e);let a=n;return r!==e&&(Ee(e)?n.length>3&&(a=function(t,i,r){return n.call(this,t,i,r,e)}):a=function(t,i,r){return n.call(this,t,Re(i),r,e)}),r[t](a,...i)}function q(e,t,n){const i=Ae(e);F(i,"iterate",k);const r=i[t](...n);return-1!==r&&!1!==r||!Te(n[0])?r:(n[0]=Ae(n[0]),i[t](...n))}function $(e,t,n=[]){T(),v();const i=Ae(e)[t].apply(e,n);return g(),A(),i}const Y=(0,i.pD)("__proto__,__v_isRef,__isVue"),K=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(i.Bm));function Z(e){(0,i.Bm)(e)||(e=String(e));const t=Ae(this);return F(t,"has",e),t.hasOwnProperty(e)}class J{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e["__v_skip"];const r=this._isReadonly,a=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return a;if("__v_raw"===t)return n===(r?a?ve:me:a?fe:pe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const s=(0,i.cy)(e);if(!r){let e;if(s&&(e=W[t]))return e;if("hasOwnProperty"===t)return Z}const o=Reflect.get(e,t,Pe(e)?e:n);return((0,i.Bm)(t)?K.has(t):Y(t))?o:(r||F(e,"get",t),a?o:Pe(o)?s&&(0,i.yI)(t)?o:o.value:(0,i.Gv)(o)?r?xe(o):_e(o):o)}}class Q extends J{constructor(e=!1){super(!1,e)}set(e,t,n,r){let a=e[t];if(!this._isShallow){const t=we(a);if(Ee(n)||we(n)||(a=Ae(a),n=Ae(n)),!(0,i.cy)(e)&&Pe(a)&&!Pe(n))return t||(a.value=n),!0}const s=(0,i.cy)(e)&&(0,i.yI)(t)?Number(t)<e.length:(0,i.$3)(e,t),o=Reflect.set(e,t,n,Pe(e)?e:r);return e===Ae(r)&&(s?(0,i.$H)(n,a)&&U(e,"set",t,n,a):U(e,"add",t,n)),o}deleteProperty(e,t){const n=(0,i.$3)(e,t),r=e[t],a=Reflect.deleteProperty(e,t);return a&&n&&U(e,"delete",t,void 0,r),a}has(e,t){const n=Reflect.has(e,t);return(0,i.Bm)(t)&&K.has(t)||F(e,"has",t),n}ownKeys(e){return F(e,"iterate",(0,i.cy)(e)?"length":O),Reflect.ownKeys(e)}}class ee extends J{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const te=new Q,ne=new ee,ie=new Q(!0),re=e=>e,ae=e=>Reflect.getPrototypeOf(e);function se(e,t,n){return function(...r){const a=this["__v_raw"],s=Ae(a),o=(0,i.CE)(s),l="entries"===e||e===Symbol.iterator&&o,c="keys"===e&&o,u=a[e](...r),d=n?re:t?Le:Re;return!t&&F(s,"iterate",c?N:O),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:l?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function oe(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function le(e,t){const n={get(n){const r=this["__v_raw"],a=Ae(r),s=Ae(n);e||((0,i.$H)(n,s)&&F(a,"get",n),F(a,"get",s));const{has:o}=ae(a),l=t?re:e?Le:Re;return o.call(a,n)?l(r.get(n)):o.call(a,s)?l(r.get(s)):void(r!==a&&r.get(n))},get size(){const t=this["__v_raw"];return!e&&F(Ae(t),"iterate",O),t.size},has(t){const n=this["__v_raw"],r=Ae(n),a=Ae(t);return e||((0,i.$H)(t,a)&&F(r,"has",t),F(r,"has",a)),t===a?n.has(t):n.has(t)||n.has(a)},forEach(n,i){const r=this,a=r["__v_raw"],s=Ae(a),o=t?re:e?Le:Re;return!e&&F(s,"iterate",O),a.forEach((e,t)=>n.call(i,o(e),o(t),r))}};(0,i.X$)(n,e?{add:oe("add"),set:oe("set"),delete:oe("delete"),clear:oe("clear")}:{add(e){t||Ee(e)||we(e)||(e=Ae(e));const n=Ae(this),i=ae(n),r=i.has.call(n,e);return r||(n.add(e),U(n,"add",e,e)),this},set(e,n){t||Ee(n)||we(n)||(n=Ae(n));const r=Ae(this),{has:a,get:s}=ae(r);let o=a.call(r,e);o||(e=Ae(e),o=a.call(r,e));const l=s.call(r,e);return r.set(e,n),o?(0,i.$H)(n,l)&&U(r,"set",e,n,l):U(r,"add",e,n),this},delete(e){const t=Ae(this),{has:n,get:i}=ae(t);let r=n.call(t,e);r||(e=Ae(e),r=n.call(t,e));const a=i?i.call(t,e):void 0,s=t.delete(e);return r&&U(t,"delete",e,void 0,a),s},clear(){const e=Ae(this),t=0!==e.size,n=void 0,i=e.clear();return t&&U(e,"clear",void 0,void 0,n),i}});const r=["keys","values","entries",Symbol.iterator];return r.forEach(i=>{n[i]=se(i,e,t)}),n}function ce(e,t){const n=le(e,t);return(t,r,a)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,i.$3)(n,r)&&r in t?n:t,r,a)}const ue={get:ce(!1,!1)},de={get:ce(!1,!0)},he={get:ce(!0,!1)};const pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ve=new WeakMap;function ge(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ye(e){return e["__v_skip"]||!Object.isExtensible(e)?0:ge((0,i.Zf)(e))}function _e(e){return we(e)?e:Se(e,!1,te,ue,pe)}function be(e){return Se(e,!1,ie,de,fe)}function xe(e){return Se(e,!0,ne,he,me)}function Se(e,t,n,r,a){if(!(0,i.Gv)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const s=ye(e);if(0===s)return e;const o=a.get(e);if(o)return o;const l=new Proxy(e,2===s?r:n);return a.set(e,l),l}function Me(e){return we(e)?Me(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function we(e){return!(!e||!e["__v_isReadonly"])}function Ee(e){return!(!e||!e["__v_isShallow"])}function Te(e){return!!e&&!!e["__v_raw"]}function Ae(e){const t=e&&e["__v_raw"];return t?Ae(t):e}function Ce(e){return!(0,i.$3)(e,"__v_skip")&&Object.isExtensible(e)&&(0,i.yQ)(e,"__v_skip",!0),e}const Re=e=>(0,i.Gv)(e)?_e(e):e,Le=e=>(0,i.Gv)(e)?xe(e):e;function Pe(e){return!!e&&!0===e["__v_isRef"]}function Ie(e){return Oe(e,!1)}function De(e){return Oe(e,!0)}function Oe(e,t){return Pe(e)?e:new Ne(e,t)}class Ne{constructor(e,t){this.dep=new P,this["__v_isRef"]=!0,this["__v_isShallow"]=!1,this._rawValue=t?e:Ae(e),this._value=t?e:Re(e),this["__v_isShallow"]=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this["__v_isShallow"]||Ee(e)||we(e);e=n?e:Ae(e),(0,i.$H)(e,t)&&(this._rawValue=e,this._value=n?e:Re(e),this.dep.trigger())}}function ke(e){return Pe(e)?e.value:e}function Fe(e){return(0,i.Tn)(e)?e():ke(e)}const Ue={get:(e,t,n)=>"__v_raw"===t?e:ke(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Pe(r)&&!Pe(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Be(e){return Me(e)?e:new Proxy(e,Ue)}function Ve(e){const t=(0,i.cy)(e)?new Array(e.length):{};for(const n in e)t[n]=Ge(e,n);return t}class ze{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this["__v_isRef"]=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return B(Ae(this._object),this._key)}}class We{constructor(e){this._getter=e,this["__v_isRef"]=!0,this["__v_isReadonly"]=!0,this._value=void 0}get value(){return this._value=this._getter()}}function He(e,t,n){return Pe(e)?e:(0,i.Tn)(e)?new We(e):(0,i.Gv)(e)&&arguments.length>1?Ge(e,t,n):Ie(e)}function Ge(e,t,n){const i=e[t];return Pe(i)?i:new ze(e,t,n)}class je{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new P(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=R-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags||a===this))return m(this,!0),!0}get value(){const e=this.dep.track();return x(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Xe(e,t,n=!1){let r,a;(0,i.Tn)(e)?r=e:(r=e.get,a=e.set);const s=new je(r,a,n);return s}const qe={},$e=new WeakMap;let Ye;function Ke(e,t=!1,n=Ye){if(n){let t=$e.get(n);t||$e.set(n,t=[]),t.push(e)}else 0}function Ze(e,t,n=i.MZ){const{immediate:r,deep:a,once:s,scheduler:o,augmentJob:c,call:u}=n,h=e=>a?e:Ee(e)||!1===a||0===a?Je(e,1):Je(e);let p,f,m,v,g=!1,y=!1;if(Pe(e)?(f=()=>e.value,g=Ee(e)):Me(e)?(f=()=>h(e),g=!0):(0,i.cy)(e)?(y=!0,g=e.some(e=>Me(e)||Ee(e)),f=()=>e.map(e=>Pe(e)?e.value:Me(e)?h(e):(0,i.Tn)(e)?u?u(e,2):e():void 0)):f=(0,i.Tn)(e)?t?u?()=>u(e,2):e:()=>{if(m){T();try{m()}finally{A()}}const t=Ye;Ye=p;try{return u?u(e,3,[v]):e(v)}finally{Ye=t}}:i.tE,t&&a){const e=f,t=!0===a?1/0:a;f=()=>Je(e(),t)}const _=l(),b=()=>{p.stop(),_&&_.active&&(0,i.TF)(_.effects,p)};if(s&&t){const e=t;t=(...t)=>{e(...t),b()}}let x=y?new Array(e.length).fill(qe):qe;const S=e=>{if(1&p.flags&&(p.dirty||e))if(t){const e=p.run();if(a||g||(y?e.some((e,t)=>(0,i.$H)(e,x[t])):(0,i.$H)(e,x))){m&&m();const n=Ye;Ye=p;try{const n=[e,x===qe?void 0:y&&x[0]===qe?[]:x,v];x=e,u?u(t,3,n):t(...n)}finally{Ye=n}}}else p.run()};return c&&c(S),p=new d(f),p.scheduler=o?()=>o(S,!1):S,v=e=>Ke(e,!1,p),m=p.onStop=()=>{const e=$e.get(p);if(e){if(u)u(e,4);else for(const t of e)t();$e.delete(p)}},t?r?S(!0):x=p.run():o?o(S.bind(null,!0),!0):p.run(),b.pause=p.pause.bind(p),b.resume=p.resume.bind(p),b.stop=b,b}function Je(e,t=1/0,n){if(t<=0||!(0,i.Gv)(e)||e["__v_skip"])return e;if(n=n||new Set,n.has(e))return e;if(n.add(e),t--,Pe(e))Je(e.value,t,n);else if((0,i.cy)(e))for(let i=0;i<e.length;i++)Je(e[i],t,n);else if((0,i.vM)(e)||(0,i.CE)(e))e.forEach(e=>{Je(e,t,n)});else if((0,i.Qd)(e)){for(const i in e)Je(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Je(e[i],t,n)}return e}},283:function(e,t,n){"use strict";var i=n(9504),r=n(9039),a=n(4901),s=n(9297),o=n(3724),l=n(350).CONFIGURABLE,c=n(3706),u=n(1181),d=u.enforce,h=u.get,p=String,f=Object.defineProperty,m=i("".slice),v=i("".replace),g=i([].join),y=o&&!r(function(){return 8!==f(function(){},"length",{value:8}).length}),_=String(String).split("String"),b=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+v(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||l&&e.name!==t)&&(o?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&s(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?o&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(r){}var i=d(e);return s(i,"source")||(i.source=g(_,"string"==typeof t?t:"")),e};Function.prototype.toString=b(function(){return a(this)&&h(this).source||c(this)},"toString")},288:function(e){function t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=t},317:function(e,t,n){e=n.nmd(e);var i=n(8606),r=n(3236),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?i.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u},350:function(e,t,n){"use strict";var i=n(3724),r=n(9297),a=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,o=r(a,"name"),l=o&&"something"===function(){}.name,c=o&&(!i||i&&s(a,"name").configurable);e.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},397:function(e,t,n){"use strict";var i=n(7751);e.exports=i("document","documentElement")},421:function(e){"use strict";e.exports={}},456:function(e,t,n){"use strict";var i=n(6518),r=n(4576),a=n(9504),s=n(4154),o=n(5169),l=a(1.1.toString),c=r.Uint8Array,u=!c||!c.prototype.toHex||!function(){try{var e=new c([255,255,255,255,255,255,255,255]);return"ffffffffffffffff"===e.toHex()}catch(t){return!1}}();c&&i({target:"Uint8Array",proto:!0,forced:u},{toHex:function(){s(this),o(this.buffer);for(var e="",t=0,n=this.length;t<n;t++){var i=l(this[t],16);e+=1===i.length?"0"+i:i}return e}})},507:function(e,t,n){"use strict";var i=n(9565);e.exports=function(e,t,n){var r,a,s=n?e:e.iterator,o=e.next;while(!(r=i(o,s)).done)if(a=t(r.value),void 0!==a)return a}},531:function(e,t,n){"use strict";var i=n(6518),r=n(9565),a=n(9306),s=n(8551),o=n(1767),l=n(8646),c=n(9462),u=n(9539),d=n(6395),h=n(684),p=n(4549),f=!d&&!h("flatMap",function(){}),m=!d&&!f&&p("flatMap",TypeError),v=d||f||m,g=c(function(){var e,t,n=this.iterator,i=this.mapper;while(1){if(t=this.inner)try{if(e=s(r(t.next,t.iterator)),!e.done)return e.value;this.inner=null}catch(a){u(n,"throw",a)}if(e=s(r(this.next,n)),this.done=!!e.done)return;try{this.inner=l(i(e.value,this.counter++),!1)}catch(a){u(n,"throw",a)}}});i({target:"Iterator",proto:!0,real:!0,forced:v},{flatMap:function(e){s(this);try{a(e)}catch(t){u(this,"throw",t)}return m?r(m,this,e):new g(o(this),{mapper:e,inner:null})}})},616:function(e,t,n){"use strict";var i=n(9039);e.exports=!i(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},655:function(e,t,n){"use strict";var i=n(6955),r=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},658:function(e,t,n){var i=n(9315),r=n(9851),a=n(5091),s="[object Arguments]",o="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",f="[object Object]",m="[object RegExp]",v="[object Set]",g="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",S="[object Float64Array]",M="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",R="[object Uint32Array]",L={};function P(e){return a(e)&&r(e.length)&&!!L[i(e)]}L[x]=L[S]=L[M]=L[w]=L[E]=L[T]=L[A]=L[C]=L[R]=!0,L[s]=L[o]=L[_]=L[l]=L[b]=L[c]=L[u]=L[d]=L[h]=L[p]=L[f]=L[m]=L[v]=L[g]=L[y]=!1,e.exports=P},679:function(e,t,n){"use strict";var i=n(1625),r=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw new r("Incorrect invocation")}},684:function(e){"use strict";e.exports=function(e,t){var n="function"==typeof Iterator&&Iterator.prototype[e];if(n)try{n.call({next:null},t).next()}catch(i){return!0}}},710:function(e,t,n){n(6573),n(8100),n(7936);var i=n(1567),r=n(7546),a=n(7525),s=n(2288),o=n(7382),l=n(9315),c=n(2530),u="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",f="[object WeakMap]",m="[object DataView]",v=c(i),g=c(r),y=c(a),_=c(s),b=c(o),x=l;(i&&x(new i(new ArrayBuffer(1)))!=m||r&&x(new r)!=u||a&&x(a.resolve())!=h||s&&x(new s)!=p||o&&x(new o)!=f)&&(x=function(e){var t=l(e),n=t==d?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case v:return m;case g:return u;case y:return h;case _:return p;case b:return f}return t}),e.exports=x},712:function(e,t,n){var i=n(9315),r=n(7136),a=n(5091),s="[object Object]",o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=c.call(Object);function h(e){if(!a(e)||i(e)!=s)return!1;var t=r(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}e.exports=h},741:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},757:function(e,t,n){"use strict";var i=n(7751),r=n(4901),a=n(1625),s=n(7040),o=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&a(t.prototype,o(e))}},770:function(e,t,n){e=n.nmd(e);var i=n(6903),r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&i.process,l=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=l},797:function(e,t,n){var i=n(7874),r=n(3559),a=n(6061),s=n(8478),o=n(7830),l=n(1764),c=1,u=2,d="[object Boolean]",h="[object Date]",p="[object Error]",f="[object Map]",m="[object Number]",v="[object RegExp]",g="[object Set]",y="[object String]",_="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",S=i?i.prototype:void 0,M=S?S.valueOf:void 0;function w(e,t,n,i,S,w,E){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!w(new r(e),new r(t)));case d:case h:case m:return a(+e,+t);case p:return e.name==t.name&&e.message==t.message;case v:case y:return e==t+"";case f:var T=o;case g:var A=i&c;if(T||(T=l),e.size!=t.size&&!A)return!1;var C=E.get(e);if(C)return C==t;i|=u,E.set(e,t);var R=s(T(e),T(t),i,S,w,E);return E["delete"](e),R;case _:if(M)return M.call(e)==M.call(t)}return!1}e.exports=w},851:function(e,t,n){"use strict";var i=n(6955),r=n(5966),a=n(4117),s=n(6269),o=n(8227),l=o("iterator");e.exports=function(e){if(!a(e))return r(e,l)||r(e,"@@iterator")||s[i(e)]}},857:function(e,t,n){"use strict";var i=n(4576),r=n(7811),a=n(7394),s=i.DataView;e.exports=function(e){if(!r||0!==a(e))return!1;try{return new s(e),!1}catch(t){return!0}}},944:function(e){"use strict";var t=TypeError;e.exports=function(e){var n=e&&e.alphabet;if(void 0===n||"base64"===n||"base64url"===n)return n||"base64";throw new t("Incorrect `alphabet` option")}},955:function(e,t,n){"use strict";n.d(t,{Li:function(){return a},Qm:function(){return s},az:function(){return i},vJ:function(){return r}});class i{constructor(e){let{x:t,y:n,width:i,height:r}=e;this.x=t,this.y=n,this.width=i,this.height=r}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function r(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function a(e){return Array.isArray(e)?new i({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function s(e){if(e===document.documentElement)return visualViewport?new i({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new i({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const t=e.getBoundingClientRect();return new i({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}},968:function(e,t,n){var i=n(7966),r=n(9889);function a(e,t,n,a){var s=!n;n||(n={});var o=-1,l=t.length;while(++o<l){var c=t[o],u=a?a(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),s?r(n,c,u):i(n,c,u)}return n}e.exports=a},984:function(e,t,n){var i=n(6636);function r(e){return i(this,e).get(e)}e.exports=r},1034:function(e,t,n){"use strict";var i=n(9565),r=n(9297),a=n(1625),s=n(5213),o=n(7979),l=RegExp.prototype;e.exports=s.correct?function(e){return e.flags}:function(e){return s.correct||!a(l,e)||r(e,"flags")?e.flags:i(o,e)}},1068:function(e,t,n){var i=n(6202),r=n(6039),a=n(6323),s=n(2626),o=n(5926),l=n(5102);function c(e){var t=this.__data__=new i(e);this.size=t.size}c.prototype.clear=r,c.prototype["delete"]=a,c.prototype.get=s,c.prototype.has=o,c.prototype.set=l,e.exports=c},1072:function(e,t,n){"use strict";var i=n(1828),r=n(8727);e.exports=Object.keys||function(e){return i(e,r)}},1101:function(e,t,n){"use strict";n.d(t,{B2:function(){return i},S8:function(){return r},v_:function(){return s},z3:function(){return a}});const i="cubic-bezier(0.4, 0, 0.2, 1)",r="cubic-bezier(0.0, 0, 0.2, 1)",a="cubic-bezier(0.4, 0, 1, 1)",s={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:(4-2*e)*e-1,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5}},1108:function(e,t,n){"use strict";var i=n(6955);e.exports=function(e){var t=i(e);return"BigInt64Array"===t||"BigUint64Array"===t}},1148:function(e,t,n){"use strict";var i=n(6518),r=n(9565),a=n(2652),s=n(9306),o=n(8551),l=n(1767),c=n(9539),u=n(4549),d=u("every",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{every:function(e){o(this);try{s(e)}catch(i){c(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;return!a(t,function(t,i){if(!e(t,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:function(e,t,n){"use strict";var i,r,a,s=n(8622),o=n(4576),l=n(34),c=n(6699),u=n(9297),d=n(7629),h=n(6119),p=n(421),f="Object already initialized",m=o.TypeError,v=o.WeakMap,g=function(e){return a(e)?r(e):i(e,{})},y=function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}};if(s||d.state){var _=d.state||(d.state=new v);_.get=_.get,_.has=_.has,_.set=_.set,i=function(e,t){if(_.has(e))throw new m(f);return t.facade=e,_.set(e,t),t},r=function(e){return _.get(e)||{}},a=function(e){return _.has(e)}}else{var b=h("state");p[b]=!0,i=function(e,t){if(u(e,b))throw new m(f);return t.facade=e,c(e,b,t),t},r=function(e){return u(e,b)?e[b]:{}},a=function(e){return u(e,b)}}e.exports={set:i,get:r,has:a,enforce:g,getterFor:y}},1207:function(e,t,n){var i=n(6061),r=n(8465),a=n(7744),s=n(9692);function o(e,t,n){if(!s(n))return!1;var o=typeof t;return!!("number"==o?r(n)&&a(t,n.length):"string"==o&&t in n)&&i(n[t],e)}e.exports=o},1240:function(e,t,n){"use strict";n.d(t,{hj:function(){return l},Ty:function(){return c},Y8:function(){return u},bL:function(){return p},Uh:function(){return d}});n(8111),n(2489);var i=n(144),r=n(6768),a=n(3398),s=n(7443);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.n)("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const l=Symbol.for("vuetify:defaults");function c(e){return(0,i.KR)(e)}function u(){const e=(0,r.WQ)(l);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function d(e,t){const n=u(),a=(0,i.KR)(e),o=(0,r.EW)(()=>{const e=(0,i.R1)(t?.disabled);if(e)return n.value;const r=(0,i.R1)(t?.scoped),o=(0,i.R1)(t?.reset),l=(0,i.R1)(t?.root);if(null==a.value&&!(r||o||l))return n.value;let c=(0,s.D9)(a.value,{prev:n.value});if(r)return c;if(o||l){const e=Number(o||1/0);for(let t=0;t<=e;t++){if(!c||!("prev"in c))break;c=c.prev}return c&&"string"===typeof l&&l in c&&(c=(0,s.D9)((0,s.D9)(c,{prev:c}),c[l])),c}return c.prev?(0,s.D9)(c.prev,c):c});return(0,r.Gt)(l,o),o}function h(e,t){return e.props&&("undefined"!==typeof e.props[t]||"undefined"!==typeof e.props[(0,s.fX)(t)])}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();const c=(0,a.n)("useDefaults");if(t=t??c.type.name??c.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const d=(0,r.EW)(()=>n.value?.[e._as??t]),p=new Proxy(e,{get(e,t){const i=Reflect.get(e,t);if("class"===t||"style"===t)return[d.value?.[t],i].filter(e=>null!=e);if(h(c.vnode,t))return i;const r=d.value?.[t];if(void 0!==r)return r;const a=n.value?.global?.[t];return void 0!==a?a:i}}),f=(0,i.IJ)();function m(){const e=o(l,c);(0,r.Gt)(l,(0,r.EW)(()=>f.value?(0,s.D9)(e?.value??{},f.value):e?.value))}return(0,r.nT)(()=>{if(d.value){const e=Object.entries(d.value).filter(e=>{let[t]=e;return t.startsWith(t[0].toUpperCase())});f.value=e.length?Object.fromEntries(e):void 0}else f.value=void 0}),{props:p,provideSubDefaults:m}}},1241:function(e,t){"use strict";t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n}},1268:function(e,t,n){var i=n(2297),r=n(5366);function a(e,t,n){var a=t(e);return r(e)?a:i(a,n(e))}e.exports=a},1281:function(e){function t(e,t){var n=-1,i=null==e?0:e.length;while(++n<i)if(t(e[n],n,e))return!0;return!1}e.exports=t},1291:function(e,t,n){"use strict";var i=n(741);e.exports=function(e){var t=+e;return t!==t||0===t?0:i(t)}},1297:function(e){function t(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=t},1353:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});n(4114),n(6573),n(8100),n(7936),n(8111),n(2489),n(7588),n(1701),n(1806),n(9577),n(1549),n(9797),n(9631),n(5623),n(4603),n(7566),n(8721);var i=n(8776);n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);function r(e,t){if(t===i.RJ4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===i.rYR||t===i.O49){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,a=[];if(t===i.rYR)for(let e=1;e<=r;e++)a.push(n.getX(0)),a.push(n.getX(e)),a.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2===0?(a.push(n.getX(e)),a.push(n.getX(e+1)),a.push(n.getX(e+2))):(a.push(n.getX(e+2)),a.push(n.getX(e+1)),a.push(n.getX(e)));a.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(a),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class a extends i.aHM{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new d(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new x(e)}),this.register(function(e){return new p(e)}),this.register(function(e){return new f(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new u(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new h(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new l(e)}),this.register(function(e){return new S(e)}),this.register(function(e){return new M(e)})}load(e,t,n,r){const a=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:i.r6x.extractUrlBase(e),this.manager.itemStart(e);const o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},l=new i.Y9S(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(n){try{a.parse(n,s,function(n){t(n),a.manager.itemEnd(e)},o)}catch(i){o(i)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const a={},s={},l=new TextDecoder;if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){const t=l.decode(new Uint8Array(e,0,4));if(t===w){try{a[o.KHR_BINARY_GLTF]=new A(e)}catch(d){return void(i&&i(d))}r=JSON.parse(a[o.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new Q(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let o=0;o<this.pluginCallbacks.length;o++){const e=this.pluginCallbacks[o](u);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[e.name]=e,a[e.name]=!0}if(r.extensionsUsed)for(let h=0;h<r.extensionsUsed.length;++h){const e=r.extensionsUsed[h],t=r.extensionsRequired||[];switch(e){case o.KHR_MATERIALS_UNLIT:a[e]=new c;break;case o.KHR_DRACO_MESH_COMPRESSION:a[e]=new C(r,this.dracoLoader);break;case o.KHR_TEXTURE_TRANSFORM:a[e]=new R;break;case o.KHR_MESH_QUANTIZATION:a[e]=new L;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}u.setExtensions(a),u.setPlugins(s),u.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function s(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const o={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class l{constructor(e){this.parser=e,this.name=o.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const a=t.json,s=a.extensions&&a.extensions[this.name]||{},o=s.lights||[],l=o[e];let c;const u=new i.Q1f(16777215);void 0!==l.color&&u.setRGB(l.color[0],l.color[1],l.color[2],i.Zr2);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new i.ZyN(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new i.HiM(u),c.distance=d;break;case"spot":c=new i.nCl(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,j(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json,r=i.nodes[e],a=r.extensions&&r.extensions[this.name]||{},s=a.light;return void 0===s?null:this._loadLight(s).then(function(e){return n._getNodeRef(t.cache,s,e)})}}class c{constructor(){this.name=o.KHR_MATERIALS_UNLIT}getMaterialType(){return i.V9B}extendParams(e,t,n){const r=[];e.color=new i.Q1f(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const t=a.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],i.Zr2),e.opacity=t[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture,i.er$))}return Promise.all(r)}}class u{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class d{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.I9Y(e,e)}return Promise.all(a)}}class h{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class p{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new i.Q1f(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(void 0!==s.sheenColorFactor){const e=s.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],i.Zr2)}return void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,i.er$)),void 0!==s.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class f{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class m{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const o=s.attenuationColor||[1,1,1];return t.attenuationColor=(new i.Q1f).setRGB(o[0],o[1],o[2],i.Zr2),Promise.all(a)}}class v{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class g{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],s=r.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return t.specularColor=(new i.Q1f).setRGB(o[0],o[1],o[2],i.Zr2),void 0!==s.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,i.er$)),Promise.all(a)}}class y{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class _{constructor(e){this.parser=e,this.name=o.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}class b{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],s=i.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,a.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class x{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],s=i.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,a.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class S{constructor(e){this.name=o.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(t){const n=e.byteOffset||0,i=e.byteLength||0,a=e.count,s=e.byteStride,o=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(a,s,o,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){const t=new ArrayBuffer(a*s);return r.decodeGltfBuffer(new Uint8Array(t),a,s,o,e.mode,e.filter),t})})}return null}}class M{constructor(e){this.name=o.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const i of r.primitives)if(i.mode!==O.TRIANGLES&&i.mode!==O.TRIANGLE_STRIP&&i.mode!==O.TRIANGLE_FAN&&void 0!==i.mode)return null;const a=n.extensions[this.name],s=a.attributes,o=[],l={};for(const i in s)o.push(this.parser.getDependency("accessor",s[i]).then(e=>(l[i]=e,l[i])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,a=[];for(const s of n){const e=new i.kn4,t=new i.Pq0,n=new i.PTz,o=new i.Pq0(1,1,1),c=new i.ZLX(s.geometry,s.material,r);for(let i=0;i<r;i++)l.TRANSLATION&&t.fromBufferAttribute(l.TRANSLATION,i),l.ROTATION&&n.fromBufferAttribute(l.ROTATION,i),l.SCALE&&o.fromBufferAttribute(l.SCALE,i),c.setMatrixAt(i,e.compose(t,n,o));for(const r in l)if("_COLOR_0"===r){const e=l[r];c.instanceColor=new i.uWO(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&s.geometry.setAttribute(r,l[r]);i.B69.prototype.copy.call(c,s),this.parser.assignFinalMaterial(c),a.push(c)}return t.isGroup?(t.clear(),t.add(...a),t):a[0]}))}}const w="glTF",E=12,T={JSON:1313821514,BIN:5130562};class A{constructor(e){this.name=o.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,E),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==w)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-E,r=new DataView(e,E);let a=0;while(a<i){const t=r.getUint32(a,!0);a+=4;const i=r.getUint32(a,!0);if(a+=4,i===T.JSON){const i=new Uint8Array(e,E+a,t);this.content=n.decode(i)}else if(i===T.BIN){const n=E+a;this.body=e.slice(n,n+t)}a+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class C{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=o.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},l={};for(const c in a){const e=B[c]||c.toLowerCase();s[e]=a[c]}for(const c in e.attributes){const t=B[c]||c.toLowerCase();if(void 0!==a[c]){const i=n.accessors[e.attributes[c]],r=N[i.componentType];l[t]=r.name,o[t]=!0===i.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t){i.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],i=o[t];void 0!==i&&(n.normalized=i)}t(e)},s,l)})})}}class R{constructor(){this.name=o.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class L{constructor(){this.name=o.KHR_MESH_QUANTIZATION}}class P extends i.lGw{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let a=0;a!==i;a++)t[a]=n[r+a];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,c=i-t,u=(n-t)/c,d=u*u,h=d*u,p=e*l,f=p-l,m=-2*h+3*d,v=h-d,g=1-m,y=v-d+u;for(let _=0;_!==s;_++){const e=a[f+_+s],t=a[f+_+o]*c,n=a[p+_+s],i=a[p+_]*c;r[_]=g*e+y*t+m*n+v*i}return r}}const I=new i.PTz;class D extends P{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return I.fromArray(r).normalize().toArray(r),r}}const O={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},N={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},k={9728:i.hxR,9729:i.k6q,9984:i.pHI,9985:i.kRr,9986:i.Cfg,9987:i.$_I},F={33071:i.ghU,33648:i.kTW,10497:i.GJx},U={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},B={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},V={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},z={CUBICSPLINE:void 0,LINEAR:i.PJ3,STEP:i.ljd},W={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function H(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new i._4j({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.hB5})),e["DefaultMaterial"]}function G(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function j(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function X(e,t,n){let i=!1,r=!1,a=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(e);const s=[],o=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(i){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;o.push(t)}if(a){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(t){const n=t[0],s=t[1],o=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=s),a&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}function q(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $(e){let t;const n=e.extensions&&e.extensions[o.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Y(n.attributes):e.indices+":"+Y(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+Y(e.targets[i]);return t}function Y(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function K(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Z(e){return e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"}const J=new i.kn4;class Q{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new s,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,a=-1;"undefined"!==typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||r&&a<98?this.textureLoader=new i.Tap(this.options.manager):this.textureLoader=new i.Kzg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.Y9S(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const a={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return G(r,a,i),j(a,i),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,a]of e.children.entries())r(a,t.children[i])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[o.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(e,a){n.load(i.r6x.resolveURL(t.uri,r.path),e,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=U[r.type],t=N[r.componentType],n=!0===r.normalized,a=new t(r.count*e);return Promise.resolve(new i.THS(a,e,n))}const a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(e){const a=e[0],s=U[r.type],o=N[r.componentType],l=o.BYTES_PER_ELEMENT,c=l*s,u=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let p,f;if(d&&d!==c){const e=Math.floor(u/d),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let c=t.cache.get(n);c||(p=new o(a,e*d,r.count*d/l),c=new i.eB$(p,d/l),t.cache.add(n,c)),f=new i.eHs(c,s,u%d/l,h)}else p=null===a?new o(r.count*s):new o(a,u,r.count*s),f=new i.THS(p,s,h);if(void 0!==r.sparse){const t=U.SCALAR,n=N[r.sparse.indices.componentType],l=r.sparse.indices.byteOffset||0,c=r.sparse.values.byteOffset||0,u=new n(e[1],l,r.sparse.count*t),d=new o(e[2],c,r.sparse.count*s);null!==a&&(f=new i.THS(f.array.slice(),f.itemSize,f.normalized));for(let e=0,i=u.length;e<i;e++){const t=u[e];if(f.setX(t,d[e*s]),s>=2&&f.setY(t,d[e*s+1]),s>=3&&f.setZ(t,d[e*s+2]),s>=4&&f.setW(t,d[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e],r=i.source,a=t.images[r];let s=this.textureLoader;if(a.uri){const e=n.manager.getHandler(a.uri);null!==e&&(s=e)}return this.loadTextureImage(e,r,s)}loadTextureImage(e,t,n){const r=this,a=this.json,s=a.textures[e],o=a.images[t],l=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=s.name||o.name||"",""===t.name&&"string"===typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);const n=a.samplers||{},l=n[s.sampler]||{};return t.magFilter=k[l.magFilter]||i.k6q,t.minFilter=k[l.minFilter]||i.$_I,t.wrapS=F[l.wrapS]||i.GJx,t.wrapT=F[l.wrapT]||i.GJx,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,r=this.json,a=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const s=r.images[e],o=self.URL||self.webkitURL;let l=s.uri||"",c=!1;if(void 0!==s.bufferView)l=n.getDependency("bufferView",s.bufferView).then(function(e){c=!0;const t=new Blob([e],{type:s.mimeType});return l=o.createObjectURL(t),l});else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(e){return new Promise(function(n,r){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new i.gPd(e);t.needsUpdate=!0,n(t)}),t.load(i.r6x.resolveURL(e,a.path),s,void 0,r)})}).then(function(e){return!0===c&&o.revokeObjectURL(l),e.userData.mimeType=s.mimeType||Z(s.uri),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),e});return this.sourceCache[e]=u,u}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),r.extensions[o.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[o.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(a);a=r.extensions[o.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),r.associations.set(a,t)}}return void 0!==i&&(a.colorSpace=i),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new i.BH$,i.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new i.mrM,i.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||a||s){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),a&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),a&&(t.vertexColors=!0),s&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return i._4j}loadMaterial(e){const t=this,n=this.json,r=this.extensions,a=n.materials[e];let s;const l={},c=a.extensions||{},u=[];if(c[o.KHR_MATERIALS_UNLIT]){const e=r[o.KHR_MATERIALS_UNLIT];s=e.getMaterialType(),u.push(e.extendParams(l,a,t))}else{const n=a.pbrMetallicRoughness||{};if(l.color=new i.Q1f(1,1,1),l.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;l.color.setRGB(e[0],e[1],e[2],i.Zr2),l.opacity=e[3]}void 0!==n.baseColorTexture&&u.push(t.assignTexture(l,"map",n.baseColorTexture,i.er$)),l.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,l.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(u.push(t.assignTexture(l,"metalnessMap",n.metallicRoughnessTexture)),u.push(t.assignTexture(l,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)})))}!0===a.doubleSided&&(l.side=i.$EB);const d=a.alphaMode||W.OPAQUE;if(d===W.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,d===W.MASK&&(l.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&s!==i.V9B&&(u.push(t.assignTexture(l,"normalMap",a.normalTexture)),l.normalScale=new i.I9Y(1,1),void 0!==a.normalTexture.scale)){const e=a.normalTexture.scale;l.normalScale.set(e,e)}if(void 0!==a.occlusionTexture&&s!==i.V9B&&(u.push(t.assignTexture(l,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(l.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&s!==i.V9B){const e=a.emissiveFactor;l.emissive=(new i.Q1f).setRGB(e[0],e[1],e[2],i.Zr2)}return void 0!==a.emissiveTexture&&s!==i.V9B&&u.push(t.assignTexture(l,"emissiveMap",a.emissiveTexture,i.er$)),Promise.all(u).then(function(){const n=new s(l);return a.name&&(n.name=a.name),j(n,a),t.associations.set(n,{materials:e}),a.extensions&&G(r,n,a),n})}createUniqueName(e){const t=i.Nwf.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function a(e){return n[o.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return te(n,e,t)})}const s=[];for(let l=0,c=e.length;l<c;l++){const n=e[l],c=$(n),u=r[c];if(u)s.push(u.promise);else{let e;e=n.extensions&&n.extensions[o.KHR_DRACO_MESH_COMPRESSION]?a(n):te(new i.LoY,n,t),r[c]={primitive:n,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,a=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let i=0,r=o.length;i<r;i++){const e=void 0===o[i].material?H(this.cache):this.getDependency("material",o[i].material);l.push(e)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(n){const l=n.slice(0,n.length-1),c=n[n.length-1],u=[];for(let h=0,p=c.length;h<p;h++){const n=c[h],d=o[h];let p;const f=l[h];if(d.mode===O.TRIANGLES||d.mode===O.TRIANGLE_STRIP||d.mode===O.TRIANGLE_FAN||void 0===d.mode)p=!0===s.isSkinnedMesh?new i.I46(n,f):new i.eaF(n,f),!0===p.isSkinnedMesh&&p.normalizeSkinWeights(),d.mode===O.TRIANGLE_STRIP?p.geometry=r(p.geometry,i.O49):d.mode===O.TRIANGLE_FAN&&(p.geometry=r(p.geometry,i.rYR));else if(d.mode===O.LINES)p=new i.DXC(n,f);else if(d.mode===O.LINE_STRIP)p=new i.N1A(n,f);else if(d.mode===O.LINE_LOOP)p=new i.FCc(n,f);else{if(d.mode!==O.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);p=new i.ONl(n,f)}Object.keys(p.geometry.morphAttributes).length>0&&q(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),j(p,s),d.extensions&&G(a,p,d),t.assignFinalMaterial(p),u.push(p)}for(let i=0,r=u.length;i<r;i++)t.associations.set(u[i],{meshes:e,primitives:i});if(1===u.length)return s.extensions&&G(a,u[0],s),u[0];const d=new i.YJl;s.extensions&&G(a,d,s),t.associations.set(d,{meshes:e});for(let e=0,t=u.length;e<t;e++)d.add(u[e]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new i.ubm(i.cj9.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new i.qUd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),j(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const n=e.pop(),r=e,a=[],s=[];for(let o=0,l=r.length;o<l;o++){const e=r[o];if(e){a.push(e);const t=new i.kn4;null!==n&&t.fromArray(n.array,16*o),s.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new i.EAD(a,s)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],a=r.name?r.name:"animation_"+e,s=[],o=[],l=[],c=[],u=[];for(let i=0,d=r.channels.length;i<d;i++){const e=r.channels[i],t=r.samplers[e.sampler],n=e.target,a=n.node,d=void 0!==r.parameters?r.parameters[t.input]:t.input,h=void 0!==r.parameters?r.parameters[t.output]:t.output;void 0!==n.node&&(s.push(this.getDependency("node",a)),o.push(this.getDependency("accessor",d)),l.push(this.getDependency("accessor",h)),c.push(t),u.push(n))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(e){const t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],c=[];for(let i=0,a=t.length;i<a;i++){const e=t[i],a=r[i],u=s[i],d=o[i],h=l[i];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,a,u,d,h);if(p)for(let t=0;t<p.length;t++)c.push(p[t])}return new i.tz3(a,void 0,c)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],r=n._loadNodeShallow(e),a=[],s=i.children||[];for(let l=0,c=s.length;l<c;l++)a.push(n.getDependency("node",s[l]));const o=void 0===i.skin?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([r,Promise.all(a),o]).then(function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,J)});for(let r=0,a=n.length;r<a;r++)t.add(n[r]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const a=t.nodes[e],s=a.name?r.createUniqueName(a.name):"",o=[],l=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return l&&o.push(l),void 0!==a.camera&&o.push(r.getDependency("camera",a.camera).then(function(e){return r._getNodeRef(r.cameraCache,a.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){o.push(e)}),this.nodeCache[e]=Promise.all(o).then(function(t){let o;if(o=!0===a.isBone?new i.$Kf:t.length>1?new i.YJl:1===t.length?t[0]:new i.B69,o!==t[0])for(let e=0,n=t.length;e<n;e++)o.add(t[e]);if(a.name&&(o.userData.name=a.name,o.name=s),j(o,a),a.extensions&&G(n,o,a),void 0!==a.matrix){const e=new i.kn4;e.fromArray(a.matrix),o.applyMatrix4(e)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,a=new i.YJl;n.name&&(a.name=r.createUniqueName(n.name)),j(a,n),n.extensions&&G(t,a,n);const s=n.nodes||[],o=[];for(let i=0,l=s.length;i<l;i++)o.push(r.getDependency("node",s[i]));return Promise.all(o).then(function(e){for(let n=0,i=e.length;n<i;n++)a.add(e[n]);const t=e=>{const t=new Map;for(const[n,a]of r.associations)(n instanceof i.imn||n instanceof i.gPd)&&t.set(n,a);return e.traverse(e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)}),t};return r.associations=t(a),a})}_createAnimationTracks(e,t,n,r,a){const s=[],o=e.name?e.name:e.uuid,l=[];let c;switch(V[a.path]===V.weights?e.traverse(function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)}):l.push(o),V[a.path]){case V.weights:c=i.Hit;break;case V.rotation:c=i.MBL;break;case V.position:case V.scale:c=i.RiT;break;default:switch(n.itemSize){case 1:c=i.Hit;break;case 2:case 3:default:c=i.RiT;break}break}const u=void 0!==r.interpolation?z[r.interpolation]:i.PJ3,d=this._getArrayFromAccessor(n);for(let i=0,h=l.length;i<h;i++){const e=new c(l[i]+"."+V[a.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(e),s.push(e)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=K(t.constructor),n=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){const t=this instanceof i.MBL?D:P;return new t(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ee(e,t,n){const r=t.attributes,a=new i.NRn;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(a.set(new i.Pq0(t[0],t[1],t[2]),new i.Pq0(s[0],s[1],s[2])),e.normalized){const t=K(N[e.componentType]);a.min.multiplyScalar(t),a.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new i.Pq0,t=new i.Pq0;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],a=i.min,s=i.max;if(void 0!==a&&void 0!==s){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),i.normalized){const e=K(N[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(e)}e.boundingBox=a;const o=new i.iyt;a.getCenter(o.center),o.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=o}function te(e,t,n){const r=t.attributes,a=[];function s(t,i){return n.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}for(const i in r){const t=B[i]||i.toLowerCase();t in e.attributes||a.push(s(r[i],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});a.push(i)}return i.ppV.workingColorSpace!==i.Zr2&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${i.ppV.workingColorSpace}" not supported.`),j(e,t),ee(e,t,n),Promise.all(a).then(function(){return void 0!==t.targets?X(e,t.targets,n):e})}},1377:function(e,t,n){n(4114),n(6573),n(8100),n(7936),n(8111),n(1701),n(9577),function(){"use strict";var i=this,r=!0,a=i.THREE||r&&n(7186);if(!a)throw new Error("MeshLine requires three.js");class s extends a.BufferGeometry{constructor(){super(),this.isMeshLine=!0,this.type="MeshLine",this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new a.Matrix4,Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return this}},geom:{enumerable:!0,get:function(){return this._geom},set:function(e){this.setGeometry(e,this.widthCallback)}},points:{enumerable:!0,get:function(){return this._points},set:function(e){this.setPoints(e,this.widthCallback)}}})}}function o(e,t){var n=new a.Matrix4,i=new a.Ray,r=new a.Sphere,s=new a.Vector3,o=this.geometry;if(o.boundingSphere||o.computeBoundingSphere(),r.copy(o.boundingSphere),r.applyMatrix4(this.matrixWorld),!1!==e.ray.intersectSphere(r,s)){n.copy(this.matrixWorld).invert(),i.copy(e.ray).applyMatrix4(n);var l=new a.Vector3,c=new a.Vector3,u=new a.Vector3,d=this instanceof a.LineSegments?2:1,h=o.index,p=o.attributes;if(null!==h)for(var f=h.array,m=p.position.array,v=p.width.array,g=0,y=f.length-1;g<y;g+=d){var _=f[g],b=f[g+1];l.fromArray(m,3*_),c.fromArray(m,3*b);var x=void 0!==v[Math.floor(g/3)]?v[Math.floor(g/3)]:1,S=e.params.Line.threshold+this.material.lineWidth*x/2,M=S*S,w=i.distanceSqToSegment(l,c,s,u);if(!(w>M)){s.applyMatrix4(this.matrixWorld);var E=e.ray.origin.distanceTo(s);E<e.near||E>e.far||(t.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}),g=y)}}}}function l(e,t,n,i,r){var a;if(e=e.subarray||e.slice?e:e.buffer,n=n.subarray||n.slice?n:n.buffer,e=t?e.subarray?e.subarray(t,r&&t+r):e.slice(t,r&&t+r):e,n.set)n.set(e,i);else for(a=0;a<e.length;a++)n[a+i]=e[a];return n}s.prototype.setMatrixWorld=function(e){this.matrixWorld=e},s.prototype.setGeometry=function(e,t){this._geometry=e,this.setPoints(e.getAttribute("position").array,t)},s.prototype.setPoints=function(e,t){if(e instanceof Float32Array||e instanceof Array){if(this._points=e,this.widthCallback=t,this.positions=[],this.counters=[],e.length&&e[0]instanceof a.Vector3)for(var n=0;n<e.length;n++){var i=e[n],r=n/e.length;this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(r),this.counters.push(r)}else for(n=0;n<e.length;n+=3){r=n/e.length;this.positions.push(e[n],e[n+1],e[n+2]),this.positions.push(e[n],e[n+1],e[n+2]),this.counters.push(r),this.counters.push(r)}this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")},s.prototype.raycast=o,s.prototype.compareV3=function(e,t){var n=6*e,i=6*t;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]},s.prototype.copyV3=function(e){var t=6*e;return[this.positions[t],this.positions[t+1],this.positions[t+2]]},s.prototype.process=function(){var e,t,n=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],t=this.compareV3(0,n-1)?this.copyV3(n-2):this.copyV3(0),this.previous.push(t[0],t[1],t[2]),this.previous.push(t[0],t[1],t[2]);for(var i=0;i<n;i++){if(this.side.push(1),this.side.push(-1),e=this.widthCallback?this.widthCallback(i/(n-1)):1,this.width.push(e),this.width.push(e),this.uvs.push(i/(n-1),0),this.uvs.push(i/(n-1),1),i<n-1){t=this.copyV3(i),this.previous.push(t[0],t[1],t[2]),this.previous.push(t[0],t[1],t[2]);var r=2*i;this.indices_array.push(r,r+1,r+2),this.indices_array.push(r+2,r+1,r+3)}i>0&&(t=this.copyV3(i),this.next.push(t[0],t[1],t[2]),this.next.push(t[0],t[1],t[2]))}t=this.compareV3(n-1,0)?this.copyV3(1):this.copyV3(n-1),this.next.push(t[0],t[1],t[2]),this.next.push(t[0],t[1],t[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new a.BufferAttribute(new Float32Array(this.positions),3),previous:new a.BufferAttribute(new Float32Array(this.previous),3),next:new a.BufferAttribute(new Float32Array(this.next),3),side:new a.BufferAttribute(new Float32Array(this.side),1),width:new a.BufferAttribute(new Float32Array(this.width),1),uv:new a.BufferAttribute(new Float32Array(this.uvs),2),index:new a.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new a.BufferAttribute(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()},s.prototype.advance=function(e){var t=this._attributes.position.array,n=this._attributes.previous.array,i=this._attributes.next.array,r=t.length;l(t,0,n,0,r),l(t,6,t,0,r-6),t[r-6]=e.x,t[r-5]=e.y,t[r-4]=e.z,t[r-3]=e.x,t[r-2]=e.y,t[r-1]=e.z,l(t,6,i,0,r-6),i[r-6]=e.x,i[r-5]=e.y,i[r-4]=e.z,i[r-3]=e.x,i[r-2]=e.y,i[r-1]=e.z,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0},a.ShaderChunk["meshline_vert"]=["",a.ShaderChunk.logdepthbuf_pars_vertex,a.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",a.ShaderChunk.logdepthbuf_vertex,a.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",a.ShaderChunk.fog_vertex,"}"].join("\n"),a.ShaderChunk["meshline_frag"]=["",a.ShaderChunk.fog_pars_fragment,a.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",a.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",a.ShaderChunk.fog_fragment,"}"].join("\n");class c extends a.ShaderMaterial{constructor(e){super({uniforms:Object.assign({},a.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new a.Color(16777215)},opacity:{value:1},resolution:{value:new a.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new a.Vector2(1,1)}}),vertexShader:a.ShaderChunk.meshline_vert,fragmentShader:a.ShaderChunk.meshline_frag}),this.isMeshLineMaterial=!0,this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(e){this.uniforms.lineWidth.value=e}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(e){this.uniforms.map.value=e}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(e){this.uniforms.useMap.value=e}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(e){this.uniforms.alphaMap.value=e}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(e){this.uniforms.useAlphaMap.value=e}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(e){this.uniforms.color.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(e){this.uniforms.sizeAttenuation.value=e}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(e){this.uniforms.dashArray.value=e,this.useDash=0!==e?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(e){this.uniforms.dashRatio.value=e}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(e){this.uniforms.useDash.value=e}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(e){this.uniforms.visibility.value=e}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(e){this.uniforms.alphaTest.value=e}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(e){this.uniforms.repeat.value.copy(e)}}}),this.setValues(e)}}c.prototype.copy=function(e){return a.ShaderMaterial.prototype.copy.call(this,e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray.copy(e.dashArray),this.dashOffset.copy(e.dashOffset),this.dashRatio.copy(e.dashRatio),this.useDash=e.useDash,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this},e.exports&&(t=e.exports={MeshLine:s,MeshLineMaterial:c,MeshLineRaycast:o}),t.MeshLine=s,t.MeshLineMaterial=c,t.MeshLineRaycast=o}.call(this)},1385:function(e,t,n){"use strict";var i=n(9539);e.exports=function(e,t,n){for(var r=e.length-1;r>=0;r--)if(void 0!==e[r])try{n=i(e[r].iterator,t,n)}catch(a){t="throw",n=a}if("throw"===t)throw n;return n}},1387:function(e,t,n){"use strict";n.d(t,{LA:function(){return le},aE:function(){return rt}});n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(6768),r=n(144);
/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */
const a="undefined"!==typeof document;function s(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function o(e){return e.__esModule||"Module"===e[Symbol.toStringTag]||e.default&&s(e.default)}const l=Object.assign;function c(e,t){const n={};for(const i in t){const r=t[i];n[i]=d(r)?r.map(e):e(r)}return n}const u=()=>{},d=Array.isArray;const h=/#/g,p=/&/g,f=/\//g,m=/=/g,v=/\?/g,g=/\+/g,y=/%5B/g,_=/%5D/g,b=/%5E/g,x=/%60/g,S=/%7B/g,M=/%7C/g,w=/%7D/g,E=/%20/g;function T(e){return encodeURI(""+e).replace(M,"|").replace(y,"[").replace(_,"]")}function A(e){return T(e).replace(S,"{").replace(w,"}").replace(b,"^")}function C(e){return T(e).replace(g,"%2B").replace(E,"+").replace(h,"%23").replace(p,"%26").replace(x,"`").replace(S,"{").replace(w,"}").replace(b,"^")}function R(e){return C(e).replace(m,"%3D")}function L(e){return T(e).replace(h,"%23").replace(v,"%3F")}function P(e){return null==e?"":L(e).replace(f,"%2F")}function I(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const D=/\/$/,O=e=>e.replace(D,"");function N(e,t,n="/"){let i,r={},a="",s="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(i=t.slice(0,l),a=t.slice(l+1,o>-1?o:t.length),r=e(a)),o>-1&&(i=i||t.slice(0,o),s=t.slice(o,t.length)),i=H(null!=i?i:t,n),{fullPath:i+(a&&"?")+a+s,path:i,query:r,hash:I(s)}}function k(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function F(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function U(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&B(t.matched[i],n.matched[r])&&V(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function B(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function V(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!z(e[n],t[n]))return!1;return!0}function z(e,t){return d(e)?W(e,t):d(t)?W(t,e):e===t}function W(e,t){return d(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}function H(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];".."!==r&&"."!==r||i.push("");let a,s,o=n.length-1;for(a=0;a<i.length;a++)if(s=i[a],"."!==s){if(".."!==s)break;o>1&&o--}return n.slice(0,o).join("/")+"/"+i.slice(a).join("/")}const G={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var j,X;(function(e){e["pop"]="pop",e["push"]="push"})(j||(j={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(X||(X={}));function q(e){if(!e)if(a){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),O(e)}const $=/^[^#]+#/;function Y(e,t){return e.replace($,"#")+t}function K(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Z=()=>({left:window.scrollX,top:window.scrollY});function J(e){let t;if("el"in e){const n=e.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=K(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function Q(e,t){const n=history.state?history.state.position-t:-1;return n+e}const ee=new Map;function te(e,t){ee.set(e,t)}function ne(e){const t=ee.get(e);return ee.delete(e),t}let ie=()=>location.protocol+"//"+location.host;function re(e,t){const{pathname:n,search:i,hash:r}=t,a=e.indexOf("#");if(a>-1){let t=r.includes(e.slice(a))?e.slice(a).length:1,n=r.slice(t);return"/"!==n[0]&&(n="/"+n),F(n,"")}const s=F(n,e);return s+i+r}function ae(e,t,n,i){let r=[],a=[],s=null;const o=({state:a})=>{const o=re(e,location),l=n.value,c=t.value;let u=0;if(a){if(n.value=o,t.value=a,s&&s===l)return void(s=null);u=c?a.position-c.position:0}else i(o);r.forEach(e=>{e(n.value,l,{delta:u,type:j.pop,direction:u?u>0?X.forward:X.back:X.unknown})})};function c(){s=n.value}function u(e){r.push(e);const t=()=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)};return a.push(t),t}function d(){const{history:e}=window;e.state&&e.replaceState(l({},e.state,{scroll:Z()}),"")}function h(){for(const e of a)e();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function se(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?Z():null}}function oe(e){const{history:t,location:n}=window,i={value:re(e,n)},r={value:t.state};function a(i,a,s){const o=e.indexOf("#"),l=o>-1?(n.host&&document.querySelector("base")?e:e.slice(o))+i:ie()+e+i;try{t[s?"replaceState":"pushState"](a,"",l),r.value=a}catch(c){console.error(c),n[s?"replace":"assign"](l)}}function s(e,n){const s=l({},t.state,se(r.value.back,e,r.value.forward,!0),n,{position:r.value.position});a(e,s,!0),i.value=e}function o(e,n){const s=l({},r.value,t.state,{forward:e,scroll:Z()});a(s.current,s,!0);const o=l({},se(i.value,e,null),{position:s.position+1},n);a(e,o,!1),i.value=e}return r.value||a(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:o,replace:s}}function le(e){e=q(e);const t=oe(e),n=ae(e,t.state,t.location,t.replace);function i(e,t=!0){t||n.pauseListeners(),history.go(e)}const r=l({location:"",base:e,go:i,createHref:Y.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function ce(e){return"string"===typeof e||e&&"object"===typeof e}function ue(e){return"string"===typeof e||"symbol"===typeof e}const de=Symbol("");var he;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(he||(he={}));function pe(e,t){return l(new Error,{type:e,[de]:!0},t)}function fe(e,t){return e instanceof Error&&de in e&&(null==t||!!(e.type&t))}const me="[^/]+?",ve={sensitive:!1,strict:!1,start:!0,end:!0},ge=/[.+*?^${}()[\]/\\]/g;function ye(e,t){const n=l({},ve,t),i=[];let r=n.start?"^":"";const a=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let t=0;t<l.length;t++){const i=l[t];let s=40+(n.sensitive?.25:0);if(0===i.type)t||(r+="/"),r+=i.value.replace(ge,"\\$&"),s+=40;else if(1===i.type){const{value:e,repeatable:n,optional:o,regexp:c}=i;a.push({name:e,repeatable:n,optional:o});const d=c||me;if(d!==me){s+=10;try{new RegExp(`(${d})`)}catch(u){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+u.message)}}let h=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(h=o&&l.length<2?`(?:/${h})`:"/"+h),o&&(h+="?"),r+=h,s+=20,o&&(s+=-8),n&&(s+=-20),".*"===d&&(s+=-50)}e.push(s)}i.push(e)}if(n.strict&&n.end){const e=i.length-1;i[e][i[e].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function o(e){const t=e.match(s),n={};if(!t)return null;for(let i=1;i<t.length;i++){const e=t[i]||"",r=a[i-1];n[r.name]=e&&r.repeatable?e.split("/"):e}return n}function c(t){let n="",i=!1;for(const r of e){i&&n.endsWith("/")||(n+="/"),i=!1;for(const e of r)if(0===e.type)n+=e.value;else if(1===e.type){const{value:a,repeatable:s,optional:o}=e,l=a in t?t[a]:"";if(d(l)&&!s)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const c=d(l)?l.join("/"):l;if(!c){if(!o)throw new Error(`Missing required param "${a}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=c}}return n||"/"}return{re:s,score:i,keys:a,parse:o,stringify:c}}function _e(e,t){let n=0;while(n<e.length&&n<t.length){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function be(e,t){let n=0;const i=e.score,r=t.score;while(n<i.length&&n<r.length){const e=_e(i[n],r[n]);if(e)return e;n++}if(1===Math.abs(r.length-i.length)){if(xe(i))return 1;if(xe(r))return-1}return r.length-i.length}function xe(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Se={type:0,value:""},Me=/[a-zA-Z0-9_]/;function we(e){if(!e)return[[]];if("/"===e)return[[Se]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,i=n;const r=[];let a;function s(){a&&r.push(a),a=[]}let o,l=0,c="",u="";function d(){c&&(0===n?a.push({type:0,value:c}):1===n||2===n||3===n?(a.length>1&&("*"===o||"+"===o)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:u,repeatable:"*"===o||"+"===o,optional:"*"===o||"?"===o})):t("Invalid state to consume buffer"),c="")}function h(){c+=o}while(l<e.length)if(o=e[l++],"\\"!==o||2===n)switch(n){case 0:"/"===o?(c&&d(),s()):":"===o?(d(),n=1):h();break;case 4:h(),n=i;break;case 1:"("===o?n=2:Me.test(o)?h():(d(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--);break;case 2:")"===o?"\\"==u[u.length-1]?u=u.slice(0,-1)+o:n=3:u+=o;break;case 3:d(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--,u="";break;default:t("Unknown state");break}else i=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),d(),s(),r}function Ee(e,t,n){const i=ye(we(e.path),n);const r=l(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf===!t.record.aliasOf&&t.children.push(r),r}function Te(e,t){const n=[],i=new Map;function r(e){return i.get(e)}function a(e,n,i){const r=!i,o=Ce(e);o.aliasOf=i&&i.record;const d=Ie(t,e),h=[o];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)h.push(Ce(l({},o,{components:i?i.record.components:o.components,path:e,aliasOf:i?i.record:o})))}let p,f;for(const t of h){const{path:l}=t;if(n&&"/"!==l[0]){const e=n.record.path,i="/"===e[e.length-1]?"":"/";t.path=n.record.path+(l&&i+l)}if(p=Ee(t,n,d),i?i.alias.push(p):(f=f||p,f!==p&&f.alias.push(p),r&&e.name&&!Le(p)&&s(e.name)),Ne(p)&&c(p),o.children){const e=o.children;for(let t=0;t<e.length;t++)a(e[t],p,i&&i.children[t])}i=i||p}return f?()=>{s(f)}:u}function s(e){if(ue(e)){const t=i.get(e);t&&(i.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(s),t.alias.forEach(s))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&i.delete(e.record.name),e.children.forEach(s),e.alias.forEach(s))}}function o(){return n}function c(e){const t=De(e,n);n.splice(t,0,e),e.record.name&&!Le(e)&&i.set(e.record.name,e)}function d(e,t){let r,a,s,o={};if("name"in e&&e.name){if(r=i.get(e.name),!r)throw pe(1,{location:e});0,s=r.record.name,o=l(Ae(t.params,r.keys.filter(e=>!e.optional).concat(r.parent?r.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&Ae(e.params,r.keys.map(e=>e.name))),a=r.stringify(o)}else if(null!=e.path)a=e.path,r=n.find(e=>e.re.test(a)),r&&(o=r.parse(a),s=r.record.name);else{if(r=t.name?i.get(t.name):n.find(e=>e.re.test(t.path)),!r)throw pe(1,{location:e,currentLocation:t});s=r.record.name,o=l({},t.params,e.params),a=r.stringify(o)}const c=[];let u=r;while(u)c.unshift(u.record),u=u.parent;return{name:s,path:a,params:o,matched:c,meta:Pe(c)}}function h(){n.length=0,i.clear()}return t=Ie({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>a(e)),{addRoute:a,resolve:d,removeRoute:s,clearRoutes:h,getRoutes:o,getRecordMatcher:r}}function Ae(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function Ce(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Re(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Re(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]="object"===typeof n?n[i]:n;return t}function Le(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Pe(e){return e.reduce((e,t)=>l(e,t.meta),{})}function Ie(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function De(e,t){let n=0,i=t.length;while(n!==i){const r=n+i>>1,a=be(e,t[r]);a<0?i=r:n=r+1}const r=Oe(e);return r&&(i=t.lastIndexOf(r,i-1)),i}function Oe(e){let t=e;while(t=t.parent)if(Ne(t)&&0===be(e,t))return t}function Ne({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ke(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],i=(n?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const e=i[r].replace(g," "),n=e.indexOf("="),a=I(n<0?e:e.slice(0,n)),s=n<0?null:I(e.slice(n+1));if(a in t){let e=t[a];d(e)||(e=t[a]=[e]),e.push(s)}else t[a]=s}return t}function Fe(e){let t="";for(let n in e){const i=e[n];if(n=R(n),null==i){void 0!==i&&(t+=(t.length?"&":"")+n);continue}const r=d(i)?i.map(e=>e&&C(e)):[i&&C(i)];r.forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))})}return t}function Ue(e){const t={};for(const n in e){const i=e[n];void 0!==i&&(t[n]=d(i)?i.map(e=>null==e?null:""+e):null==i?i:""+i)}return t}const Be=Symbol(""),Ve=Symbol(""),ze=Symbol(""),We=Symbol(""),He=Symbol("");function Ge(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function je(e,t,n,i,r,a=e=>e()){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,l)=>{const c=e=>{!1===e?l(pe(4,{from:n,to:t})):e instanceof Error?l(e):ce(e)?l(pe(2,{from:t,to:e})):(s&&i.enterCallbacks[r]===s&&"function"===typeof e&&s.push(e),o())},u=a(()=>e.call(i&&i.instances[r],t,n,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(e=>l(e))})}function Xe(e,t,n,i,r=e=>e()){const a=[];for(const l of e){0;for(const e in l.components){let c=l.components[e];if("beforeRouteEnter"===t||l.instances[e])if(s(c)){const s=c.__vccOpts||c,o=s[t];o&&a.push(je(o,n,i,l,e,r))}else{let s=c();0,a.push(()=>s.then(a=>{if(!a)throw new Error(`Couldn't resolve component "${e}" at "${l.path}"`);const s=o(a)?a.default:a;l.mods[e]=a,l.components[e]=s;const c=s.__vccOpts||s,u=c[t];return u&&je(u,n,i,l,e,r)()}))}}}return a}function qe(e){const t=(0,i.WQ)(ze),n=(0,i.WQ)(We);const a=(0,i.EW)(()=>{const n=(0,r.R1)(e.to);return t.resolve(n)}),s=(0,i.EW)(()=>{const{matched:e}=a.value,{length:t}=e,i=e[t-1],r=n.matched;if(!i||!r.length)return-1;const s=r.findIndex(B.bind(null,i));if(s>-1)return s;const o=Qe(e[t-2]);return t>1&&Qe(i)===o&&r[r.length-1].path!==o?r.findIndex(B.bind(null,e[t-2])):s}),o=(0,i.EW)(()=>s.value>-1&&Je(n.params,a.value.params)),l=(0,i.EW)(()=>s.value>-1&&s.value===n.matched.length-1&&V(n.params,a.value.params));function c(n={}){if(Ze(n)){const n=t[(0,r.R1)(e.replace)?"replace":"push"]((0,r.R1)(e.to)).catch(u);return e.viewTransition&&"undefined"!==typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>n),n}return Promise.resolve()}return{route:a,href:(0,i.EW)(()=>a.value.href),isActive:o,isExactActive:l,navigate:c}}function $e(e){return 1===e.length?e[0]:e}const Ye=(0,i.pM)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:qe,setup(e,{slots:t}){const n=(0,r.Kh)(qe(e)),{options:a}=(0,i.WQ)(ze),s=(0,i.EW)(()=>({[et(e.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[et(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&$e(t.default(n));return e.custom?r:(0,i.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),Ke=Ye;function Ze(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Je(e,t){for(const n in t){const i=t[n],r=e[n];if("string"===typeof i){if(i!==r)return!1}else if(!d(r)||r.length!==i.length||i.some((e,t)=>e!==r[t]))return!1}return!0}function Qe(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const et=(e,t,n)=>null!=e?e:null!=t?t:n,tt=(0,i.pM)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const a=(0,i.WQ)(He),s=(0,i.EW)(()=>e.route||a.value),o=(0,i.WQ)(Ve,0),c=(0,i.EW)(()=>{let e=(0,r.R1)(o);const{matched:t}=s.value;let n;while((n=t[e])&&!n.components)e++;return e}),u=(0,i.EW)(()=>s.value.matched[c.value]);(0,i.Gt)(Ve,(0,i.EW)(()=>c.value+1)),(0,i.Gt)(Be,u),(0,i.Gt)(He,s);const d=(0,r.KR)();return(0,i.wB)(()=>[d.value,u.value,e.name],([e,t,n],[i,r,a])=>{t&&(t.instances[n]=e,r&&r!==t&&e&&e===i&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&B(t,r)&&i||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const r=s.value,a=e.name,o=u.value,c=o&&o.components[a];if(!c)return nt(n.default,{Component:c,route:r});const h=o.props[a],p=h?!0===h?r.params:"function"===typeof h?h(r):h:null,f=e=>{e.component.isUnmounted&&(o.instances[a]=null)},m=(0,i.h)(c,l({},p,t,{onVnodeUnmounted:f,ref:d}));return nt(n.default,{Component:m,route:r})||m}}});function nt(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const it=tt;function rt(e){const t=Te(e.routes,e),n=e.parseQuery||ke,s=e.stringifyQuery||Fe,o=e.history;const h=Ge(),p=Ge(),f=Ge(),m=(0,r.IJ)(G);let v=G;a&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=c.bind(null,e=>""+e),y=c.bind(null,P),_=c.bind(null,I);function b(e,n){let i,r;return ue(e)?(i=t.getRecordMatcher(e),r=n):r=e,t.addRoute(r,i)}function x(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function S(){return t.getRoutes().map(e=>e.record)}function M(e){return!!t.getRecordMatcher(e)}function w(e,i){if(i=l({},i||m.value),"string"===typeof e){const r=N(n,e,i.path),a=t.resolve({path:r.path},i),s=o.createHref(r.fullPath);return l(r,a,{params:_(a.params),hash:I(r.hash),redirectedFrom:void 0,href:s})}let r;if(null!=e.path)r=l({},e,{path:N(n,e.path,i.path).path});else{const t=l({},e.params);for(const e in t)null==t[e]&&delete t[e];r=l({},e,{params:y(t)}),i.params=y(i.params)}const a=t.resolve(r,i),c=e.hash||"";a.params=g(_(a.params));const u=k(s,l({},e,{hash:A(c),path:a.path})),d=o.createHref(u);return l({fullPath:u,hash:c,query:s===Fe?Ue(e.query):e.query||{}},a,{redirectedFrom:void 0,href:d})}function E(e){return"string"===typeof e?N(n,e,m.value.path):l({},e)}function T(e,t){if(v!==e)return pe(8,{from:t,to:e})}function C(e){return D(e)}function R(e){return C(l(E(e),{replace:!0}))}function L(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let i="function"===typeof n?n(e):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=E(i):{path:i},i.params={}),l({query:e.query,hash:e.hash,params:null!=i.path?{}:e.params},i)}}function D(e,t){const n=v=w(e),i=m.value,r=e.state,a=e.force,o=!0===e.replace,c=L(n);if(c)return D(l(E(c),{state:"object"===typeof c?l({},r,c.state):r,force:a,replace:o}),t||n);const u=n;let d;return u.redirectedFrom=t,!a&&U(s,i,n)&&(d=pe(16,{to:u,from:i}),ie(i,i,!0,!1)),(d?Promise.resolve(d):B(u,i)).catch(e=>fe(e)?fe(e,2)?e:ee(e):Y(e,u,i)).then(e=>{if(e){if(fe(e,2))return D(l({replace:o},E(e.to),{state:"object"===typeof e.to?l({},r,e.to.state):r,force:a}),t||u)}else e=z(u,i,!0,o,r);return V(u,i,e),e})}function O(e,t){const n=T(e,t);return n?Promise.reject(n):Promise.resolve()}function F(e){const t=se.values().next().value;return t&&"function"===typeof t.runWithContext?t.runWithContext(e):e()}function B(e,t){let n;const[i,r,a]=at(e,t);n=Xe(i.reverse(),"beforeRouteLeave",e,t);for(const o of i)o.leaveGuards.forEach(i=>{n.push(je(i,e,t))});const s=O.bind(null,e,t);return n.push(s),le(n).then(()=>{n=[];for(const i of h.list())n.push(je(i,e,t));return n.push(s),le(n)}).then(()=>{n=Xe(r,"beforeRouteUpdate",e,t);for(const i of r)i.updateGuards.forEach(i=>{n.push(je(i,e,t))});return n.push(s),le(n)}).then(()=>{n=[];for(const i of a)if(i.beforeEnter)if(d(i.beforeEnter))for(const r of i.beforeEnter)n.push(je(r,e,t));else n.push(je(i.beforeEnter,e,t));return n.push(s),le(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=Xe(a,"beforeRouteEnter",e,t,F),n.push(s),le(n))).then(()=>{n=[];for(const i of p.list())n.push(je(i,e,t));return n.push(s),le(n)}).catch(e=>fe(e,8)?e:Promise.reject(e))}function V(e,t,n){f.list().forEach(i=>F(()=>i(e,t,n)))}function z(e,t,n,i,r){const s=T(e,t);if(s)return s;const c=t===G,u=a?history.state:{};n&&(i||c?o.replace(e.fullPath,l({scroll:c&&u&&u.scroll},r)):o.push(e.fullPath,r)),m.value=e,ie(e,t,n,c),ee()}let W;function H(){W||(W=o.listen((e,t,n)=>{if(!oe.listening)return;const i=w(e),r=L(i);if(r)return void D(l(r,{replace:!0,force:!0}),i).catch(u);v=i;const s=m.value;a&&te(Q(s.fullPath,n.delta),Z()),B(i,s).catch(e=>fe(e,12)?e:fe(e,2)?(D(l(E(e.to),{force:!0}),i).then(e=>{fe(e,20)&&!n.delta&&n.type===j.pop&&o.go(-1,!1)}).catch(u),Promise.reject()):(n.delta&&o.go(-n.delta,!1),Y(e,i,s))).then(e=>{e=e||z(i,s,!1),e&&(n.delta&&!fe(e,8)?o.go(-n.delta,!1):n.type===j.pop&&fe(e,20)&&o.go(-1,!1)),V(i,s,e)}).catch(u)}))}let X,q=Ge(),$=Ge();function Y(e,t,n){ee(e);const i=$.list();return i.length?i.forEach(i=>i(e,t,n)):console.error(e),Promise.reject(e)}function K(){return X&&m.value!==G?Promise.resolve():new Promise((e,t)=>{q.add([e,t])})}function ee(e){return X||(X=!e,H(),q.list().forEach(([t,n])=>e?n(e):t()),q.reset()),e}function ie(t,n,r,s){const{scrollBehavior:o}=e;if(!a||!o)return Promise.resolve();const l=!r&&ne(Q(t.fullPath,0))||(s||!r)&&history.state&&history.state.scroll||null;return(0,i.dY)().then(()=>o(t,n,l)).then(e=>e&&J(e)).catch(e=>Y(e,t,n))}const re=e=>o.go(e);let ae;const se=new Set,oe={currentRoute:m,listening:!0,addRoute:b,removeRoute:x,clearRoutes:t.clearRoutes,hasRoute:M,getRoutes:S,resolve:w,options:e,push:C,replace:R,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:h.add,beforeResolve:p.add,afterEach:f.add,onError:$.add,isReady:K,install(e){const t=this;e.component("RouterLink",Ke),e.component("RouterView",it),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,r.R1)(m)}),a&&!ae&&m.value===G&&(ae=!0,C(o.location).catch(e=>{0}));const n={};for(const r in G)Object.defineProperty(n,r,{get:()=>m.value[r],enumerable:!0});e.provide(ze,t),e.provide(We,(0,r.Gc)(n)),e.provide(He,m);const i=e.unmount;se.add(e),e.unmount=function(){se.delete(e),se.size<1&&(v=G,W&&W(),W=null,m.value=G,ae=!1,X=!1),i()}}};function le(e){return e.reduce((e,t)=>e.then(()=>F(t)),Promise.resolve())}return oe}function at(e,t){const n=[],i=[],r=[],a=Math.max(t.matched.length,e.matched.length);for(let s=0;s<a;s++){const a=t.matched[s];a&&(e.matched.find(e=>B(e,a))?i.push(a):n.push(a));const o=e.matched[s];o&&(t.matched.find(e=>B(e,o))||r.push(o))}return[n,i,r]}},1397:function(e,t,n){"use strict";n.d(t,{i:function(){return c},A:function(){return u}});n(4114),n(8111),n(3579);function i(e){if("function"!==typeof e.getRootNode){while(e.parentNode)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}function r(){return!0}function a(e,t,n){if(!e||!1===s(e,n))return!1;const r=i(t);if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&r.host===e.target)return!1;const a=("object"===typeof n.value&&n.value.include||(()=>[]))();return a.push(t),!a.some(t=>t?.contains(e.target))}function s(e,t){const n="object"===typeof t.value&&t.value.closeConditional||r;return n(e)}function o(e,t,n){const i="function"===typeof n.value?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&a(e,t,n)&&setTimeout(()=>{s(e,n)&&i&&i(e)},0)}function l(e,t){const n=i(e);t(document),"undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&t(n)}const c={mounted(e,t){const n=n=>o(n,e,t),i=n=>{e._clickOutside.lastMousedownWasOutside=a(n,e,t)};l(e,e=>{e.addEventListener("click",n,!0),e.addEventListener("mousedown",i,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(e,t){e._clickOutside&&(l(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:i,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};var u=c},1548:function(e,t,n){"use strict";var i=n(4576),r=n(9039),a=n(9519),s=n(4215),o=i.structuredClone;e.exports=!!o&&!r(function(){if("DENO"===s&&a>92||"NODE"===s&&a>94||"BROWSER"===s&&a>97)return!1;var e=new ArrayBuffer(8),t=o(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength})},1549:function(e,t,n){"use strict";n(6632)},1567:function(e,t,n){var i=n(9531),r=n(8606),a=i(r,"DataView");e.exports=a},1625:function(e,t,n){"use strict";var i=n(9504);e.exports=i({}.isPrototypeOf)},1643:function(e,t,n){e=n.nmd(e);var i=n(8606),r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s?i.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(e,t){if(t)return e.slice();var n=e.length,i=l?l(n):new e.constructor(n);return e.copy(i),i}e.exports=c},1676:function(e,t,n){n(4114);var i=n(3066),r=n(6421),a=n(2550);function s(e){var t=-1,n=null==e?0:e.length;this.__data__=new i;while(++t<n)this.add(e[t])}s.prototype.add=s.prototype.push=r,s.prototype.has=a,e.exports=s},1678:function(e,t,n){"use strict";var i=n(6395),r=n(6518),a=n(4576),s=n(7751),o=n(9504),l=n(9039),c=n(3392),u=n(4901),d=n(3517),h=n(4117),p=n(34),f=n(757),m=n(2652),v=n(8551),g=n(6955),y=n(9297),_=n(4659),b=n(6699),x=n(6198),S=n(2812),M=n(1034),w=n(2248),E=n(4402),T=n(8469),A=n(4483),C=n(6249),R=n(1548),L=a.Object,P=a.Array,I=a.Date,D=a.Error,O=a.TypeError,N=a.PerformanceMark,k=s("DOMException"),F=w.Map,U=w.has,B=w.get,V=w.set,z=E.Set,W=E.add,H=E.has,G=s("Object","keys"),j=o([].push),X=o((!0).valueOf),q=o(1.1.valueOf),$=o("".valueOf),Y=o(I.prototype.getTime),K=c("structuredClone"),Z="DataCloneError",J="Transferring",Q=function(e){return!l(function(){var t=new a.Set([7]),n=e(t),i=e(L(7));return n===t||!n.has(7)||!p(i)||7!==+i})&&e},ee=function(e,t){return!l(function(){var n=new t,i=e({a:n,b:n});return!(i&&i.a===i.b&&i.a instanceof t&&i.a.stack===n.stack)})},te=function(e){return!l(function(){var t=e(new a.AggregateError([1],K,{cause:3}));return"AggregateError"!==t.name||1!==t.errors[0]||t.message!==K||3!==t.cause})},ne=a.structuredClone,ie=i||!ee(ne,D)||!ee(ne,k)||!te(ne),re=!ne&&Q(function(e){return new N(K,{detail:e}).detail}),ae=Q(ne)||re,se=function(e){throw new k("Uncloneable type: "+e,Z)},oe=function(e,t){throw new k((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",Z)},le=function(e,t){return ae||oe(t),ae(e)},ce=function(){var e;try{e=new a.DataTransfer}catch(t){try{e=new a.ClipboardEvent("").clipboardData}catch(n){}}return e&&e.items&&e.files?e:null},ue=function(e,t,n){if(U(t,e))return B(t,e);var i,r,s,o,l,c,d=n||g(e);if("SharedArrayBuffer"===d)i=ae?ae(e):e;else{var h=a.DataView;h||u(e.slice)||oe("ArrayBuffer");try{if(u(e.slice)&&!e.resizable)i=e.slice(0);else{r=e.byteLength,s="maxByteLength"in e?{maxByteLength:e.maxByteLength}:void 0,i=new ArrayBuffer(r,s),o=new h(e),l=new h(i);for(c=0;c<r;c++)l.setUint8(c,o.getUint8(c))}}catch(p){throw new k("ArrayBuffer is detached",Z)}}return V(t,e,i),i},de=function(e,t,n,i,r){var s=a[t];return p(s)||oe(t),new s(ue(e.buffer,r),n,i)},he=function(e,t){if(f(e)&&se("Symbol"),!p(e))return e;if(t){if(U(t,e))return B(t,e)}else t=new F;var n,i,r,o,l,c,d,h,m=g(e);switch(m){case"Array":r=P(x(e));break;case"Object":r={};break;case"Map":r=new F;break;case"Set":r=new z;break;case"RegExp":r=new RegExp(e.source,M(e));break;case"Error":switch(i=e.name,i){case"AggregateError":r=new(s(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":r=new(s(i));break;case"CompileError":case"LinkError":case"RuntimeError":r=new(s("WebAssembly",i));break;default:r=new D}break;case"DOMException":r=new k(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":r=ue(e,t,m);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":c="DataView"===m?e.byteLength:e.length,r=de(e,m,e.byteOffset,c,t);break;case"DOMQuad":try{r=new DOMQuad(he(e.p1,t),he(e.p2,t),he(e.p3,t),he(e.p4,t))}catch(v){r=le(e,m)}break;case"File":if(ae)try{r=ae(e),g(r)!==m&&(r=void 0)}catch(v){}if(!r)try{r=new File([e],e.name,e)}catch(v){}r||oe(m);break;case"FileList":if(o=ce(),o){for(l=0,c=x(e);l<c;l++)o.items.add(he(e[l],t));r=o.files}else r=le(e,m);break;case"ImageData":try{r=new ImageData(he(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(v){r=le(e,m)}break;default:if(ae)r=ae(e);else switch(m){case"BigInt":r=L(e.valueOf());break;case"Boolean":r=L(X(e));break;case"Number":r=L(q(e));break;case"String":r=L($(e));break;case"Date":r=new I(Y(e));break;case"Blob":try{r=e.slice(0,e.size,e.type)}catch(v){oe(m)}break;case"DOMPoint":case"DOMPointReadOnly":n=a[m];try{r=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(v){oe(m)}break;case"DOMRect":case"DOMRectReadOnly":n=a[m];try{r=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(v){oe(m)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=a[m];try{r=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(v){oe(m)}break;case"AudioData":case"VideoFrame":u(e.clone)||oe(m);try{r=e.clone()}catch(v){se(m)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":oe(m);default:se(m)}}switch(V(t,e,r),m){case"Array":case"Object":for(d=G(e),l=0,c=x(d);l<c;l++)h=d[l],_(r,h,he(e[h],t));break;case"Map":e.forEach(function(e,n){V(r,he(n,t),he(e,t))});break;case"Set":e.forEach(function(e){W(r,he(e,t))});break;case"Error":b(r,"message",he(e.message,t)),y(e,"cause")&&b(r,"cause",he(e.cause,t)),"AggregateError"===i?r.errors=he(e.errors,t):"SuppressedError"===i&&(r.error=he(e.error,t),r.suppressed=he(e.suppressed,t));case"DOMException":C&&b(r,"stack",he(e.stack,t))}return r},pe=function(e,t){if(!p(e))throw new O("Transfer option cannot be converted to a sequence");var n=[];m(e,function(e){j(n,v(e))});var i,r,s,o,l,c,h=0,f=x(n),y=new z;while(h<f){if(i=n[h++],r=g(i),"ArrayBuffer"===r?H(y,i):U(t,i))throw new k("Duplicate transferable",Z);if("ArrayBuffer"!==r){if(R)o=ne(i,{transfer:[i]});else switch(r){case"ImageBitmap":s=a.OffscreenCanvas,d(s)||oe(r,J);try{l=new s(i.width,i.height),c=l.getContext("bitmaprenderer"),c.transferFromImageBitmap(i),o=l.transferToImageBitmap()}catch(_){}break;case"AudioData":case"VideoFrame":u(i.clone)&&u(i.close)||oe(r,J);try{o=i.clone(),i.close()}catch(_){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":oe(r,J)}if(void 0===o)throw new k("This object cannot be transferred: "+r,Z);V(t,i,o)}else W(y,i)}return y},fe=function(e){T(e,function(e){R?ae(e,{transfer:[e]}):u(e.transfer)?e.transfer():A?A(e):oe("ArrayBuffer",J)})};r({global:!0,enumerable:!0,sham:!R,forced:ie},{structuredClone:function(e){var t,n,i=S(arguments.length,1)>1&&!h(arguments[1])?v(arguments[1]):void 0,r=i?i.transfer:void 0;void 0!==r&&(t=new F,n=pe(r,t));var a=he(e,t);return n&&fe(n),a}})},1683:function(e,t,n){var i=n(9692),r=Object.create,a=function(){function e(){}return function(t){if(!i(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},1694:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});n(8111),n(3579);var i=n(8306);function r(e,t){if(!i.tB)return;const n=t.modifiers||{},r=t.value,{handler:s,options:o}="object"===typeof r?r:{handler:r,options:{}},l=new IntersectionObserver(function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;const o=e._observe?.[t.instance.$.uid];if(!o)return;const l=i.some(e=>e.isIntersecting);!s||n.quiet&&!o.init||n.once&&!l&&!o.init||s(l,i,r),l&&n.once?a(e,t):o.init=!0},o);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:l},l.observe(e)}function a(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const s={mounted:r,unmounted:a};t.A=s},1698:function(e,t,n){"use strict";var i=n(6518),r=n(4204),a=n(9835),s=n(4916),o=!s("union")||!a("union");i({target:"Set",proto:!0,real:!0,forced:o},{union:r})},1701:function(e,t,n){"use strict";var i=n(6518),r=n(9565),a=n(9306),s=n(8551),o=n(1767),l=n(9462),c=n(6319),u=n(9539),d=n(684),h=n(4549),p=n(6395),f=!p&&!d("map",function(){}),m=!p&&!f&&h("map",TypeError),v=p||f||m,g=l(function(){var e=this.iterator,t=s(r(this.next,e)),n=this.done=!!t.done;if(!n)return c(e,this.mapper,[t.value,this.counter++],!0)});i({target:"Iterator",proto:!0,real:!0,forced:v},{map:function(e){s(this);try{a(e)}catch(t){u(this,"throw",t)}return m?r(m,this,e):new g(o(this),{mapper:e})}})},1764:function(e,t,n){function i(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}n(8111),n(7588),e.exports=i},1767:function(e){"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},1780:function(e){var t=800,n=16,i=Date.now;function r(e){var r=0,a=0;return function(){var s=i(),o=n-(s-a);if(a=s,o>0){if(++r>=t)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}e.exports=r},1806:function(e,t,n){"use strict";var i=n(6518),r=n(8551),a=n(2652),s=n(1767),o=[].push;i({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return a(s(r(this)),o,{that:e,IS_RECORD:!0}),e}})},1828:function(e,t,n){"use strict";var i=n(9504),r=n(9297),a=n(5397),s=n(9617).indexOf,o=n(421),l=i([].push);e.exports=function(e,t){var n,i=a(e),c=0,u=[];for(n in i)!r(o,n)&&r(i,n)&&l(u,n);while(t.length>c)r(i,n=t[c++])&&(~s(u,n)||l(u,n));return u}},1839:function(e,t,n){"use strict";n.r(t),n.d(t,{VAlert:function(){return Dt},VAlertTitle:function(){return Ct},VApp:function(){return A},VAppBar:function(){return Ie},VAppBarNavIcon:function(){return Et},VAppBarTitle:function(){return Tt},VAutocomplete:function(){return rr},VAvatar:function(){return Nt},VBadge:function(){return sr},VBanner:function(){return dr},VBannerActions:function(){return lr},VBannerText:function(){return cr},VBottomNavigation:function(){return pr},VBottomSheet:function(){return gr},VBreadcrumbs:function(){return Mr},VBreadcrumbsDivider:function(){return _r},VBreadcrumbsItem:function(){return xr},VBtn:function(){return Mt},VBtnGroup:function(){return ze},VBtnToggle:function(){return Ze},VCard:function(){return Dr},VCardActions:function(){return wr},VCardItem:function(){return Rr},VCardSubtitle:function(){return Tr},VCardText:function(){return Pr},VCardTitle:function(){return Ar},VCarousel:function(){return Vr},VCarouselItem:function(){return jr},VCheckbox:function(){return qr},VCheckboxBtn:function(){return Xt},VChip:function(){return un},VChipGroup:function(){return ln},VClassIcon:function(){return Je.GP},VCode:function(){return $r},VCol:function(){return Pl},VColorPicker:function(){return ts},VCombobox:function(){return is},VComponentIcon:function(){return Je.vx},VConfirmEdit:function(){return as},VContainer:function(){return Ml},VCounter:function(){return di},VDataIterator:function(){return js},VDataTable:function(){return Io},VDataTableFooter:function(){return Ks},VDataTableHeaders:function(){return vo},VDataTableRow:function(){return bo},VDataTableRows:function(){return Mo},VDataTableServer:function(){return ko},VDataTableVirtual:function(){return Oo},VDatePicker:function(){return Jo},VDatePickerControls:function(){return Bo},VDatePickerHeader:function(){return zo},VDatePickerMonth:function(){return Xo},VDatePickerMonths:function(){return $o},VDatePickerYears:function(){return Ko},VDefaultsProvider:function(){return oe},VDialog:function(){return mr},VDialogBottomTransition:function(){return j},VDialogTopTransition:function(){return X},VDialogTransition:function(){return z},VDivider:function(){return hn},VEmptyState:function(){return el},VExpandTransition:function(){return ie},VExpandXTransition:function(){return re},VExpansionPanel:function(){return ol},VExpansionPanelText:function(){return il},VExpansionPanelTitle:function(){return al},VExpansionPanels:function(){return ul},VFab:function(){return hl},VFabTransition:function(){return G},VFadeTransition:function(){return q},VField:function(){return _i},VFieldLabel:function(){return pi},VFileInput:function(){return gl},VFooter:function(){return _l},VForm:function(){return xl},VHover:function(){return Zl},VIcon:function(){return it},VImg:function(){return ye},VInfiniteScroll:function(){return ec},VInput:function(){return Pi},VItem:function(){return rc},VItemGroup:function(){return ic},VKbd:function(){return sc},VLabel:function(){return Ft},VLayout:function(){return lc},VLayoutItem:function(){return uc},VLazy:function(){return hc},VLigatureIcon:function(){return Je.Hx},VList:function(){return ii},VListGroup:function(){return Fn},VListImg:function(){return pc},VListItem:function(){return Wn},VListItemAction:function(){return mc},VListItemMedia:function(){return gc},VListItemSubtitle:function(){return Bn},VListItemTitle:function(){return Vn},VListSubheader:function(){return Gn},VLocaleProvider:function(){return _c},VMain:function(){return xc},VMenu:function(){return ci},VMessages:function(){return xi},VNavigationDrawer:function(){return Dc},VNoSsr:function(){return Nc},VNumberInput:function(){return Vc},VOtpInput:function(){return Wc},VOverlay:function(){return ri.L},VPagination:function(){return $s},VParallax:function(){return jc},VProgressCircular:function(){return st},VProgressLinear:function(){return ht},VRadio:function(){return qc},VRadioGroup:function(){return Yc},VRangeSlider:function(){return Zc},VRating:function(){return Qc},VResponsive:function(){return de},VRow:function(){return $l},VScaleTransition:function(){return $},VScrollXReverseTransition:function(){return K},VScrollXTransition:function(){return Y},VScrollYReverseTransition:function(){return J},VScrollYTransition:function(){return Z},VSelect:function(){return Ki},VSelectionControl:function(){return Gt},VSelectionControlGroup:function(){return zt},VSheet:function(){return Za},VSkeletonLoader:function(){return su},VSlideGroup:function(){return an},VSlideGroupItem:function(){return ou},VSlideXReverseTransition:function(){return ee},VSlideXTransition:function(){return Q},VSlideYReverseTransition:function(){return ne},VSlideYTransition:function(){return te},VSlider:function(){return Sa},VSnackbar:function(){return uu},VSnackbarQueue:function(){return hu},VSpacer:function(){return Fo},VSparkline:function(){return wu},VSpeedDial:function(){return Tu},VStepper:function(){return Vu},VStepperActions:function(){return Ru},VStepperHeader:function(){return Lu},VStepperItem:function(){return Du},VStepperWindow:function(){return Nu},VStepperWindowItem:function(){return Fu},VSvgIcon:function(){return Je.UV},VSwitch:function(){return Wu},VSystemBar:function(){return Gu},VTab:function(){return qu},VTable:function(){return Eo},VTabs:function(){return ed},VTabsWindow:function(){return Yu},VTabsWindowItem:function(){return Zu},VTextField:function(){return Ni},VTextarea:function(){return nd},VThemeProvider:function(){return rd},VTimePicker:function(){return xd},VTimePickerClock:function(){return pd},VTimePickerControls:function(){return md},VTimeline:function(){return ud},VTimelineItem:function(){return ld},VToolbar:function(){return Ee},VToolbarItems:function(){return Md},VToolbarTitle:function(){return L},VTooltip:function(){return wd.y},VTreeview:function(){return Nd},VTreeviewGroup:function(){return Td},VTreeviewItem:function(){return Rd},VValidation:function(){return kd},VVirtualScroll:function(){return Xi},VWindow:function(){return Ur},VWindowItem:function(){return Hr}});var i=n(6768),r=n(4232),a=n(7579),s=(n(4114),n(8111),n(2489),n(116),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(144)),o=n(7443),l=n(8306);function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"content";const n=(0,o.m)(),r=(0,s.KR)();if(l.ZK){const a=new ResizeObserver(n=>{e?.(n,a),n.length&&(r.value="content"===t?n[0].contentRect:n[0].target.getBoundingClientRect())});(0,i.xo)(()=>{a.disconnect()}),(0,i.wB)(()=>n.el,(e,t)=>{t&&(a.unobserve(t),r.value=void 0),e&&a.observe(e)},{flush:"post"})}return{resizeRef:n,contentRect:(0,s.tB)(r)}}var u=n(8392),d=n(3398),h=n(6455);const p=Symbol.for("vuetify:layout"),f=Symbol.for("vuetify:layout-item"),m=1e3,v=(0,u.j)({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),g=(0,u.j)({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function y(){const e=(0,i.WQ)(p);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function _(e){const t=(0,i.WQ)(p);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${(0,i.Bi)()}`,r=(0,d.n)("useLayoutItem");(0,i.Gt)(f,{id:n});const a=(0,s.IJ)(!1);(0,i.Y4)(()=>a.value=!0),(0,i.n)(()=>a.value=!1);const{layoutItemStyles:o,layoutItemScrimStyles:l}=t.register(r,{...e,active:(0,i.EW)(()=>!a.value&&e.active.value),id:n});return(0,i.xo)(()=>t.unregister(n)),{layoutItemStyles:o,layoutRect:t.layoutRect,layoutItemScrimStyles:l}}const b=(e,t,n,i)=>{let r={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...r}}];for(const s of e){const e=t.get(s),o=n.get(s),l=i.get(s);if(!e||!o||!l)continue;const c={...r,[e.value]:parseInt(r[e.value],10)+(l.value?parseInt(o.value,10):0)};a.push({id:s,layer:c}),r=c}return a};function x(e){const t=(0,i.WQ)(p,null),n=(0,i.EW)(()=>t?t.rootZIndex.value-100:m),r=(0,s.KR)([]),a=(0,s.Kh)(new Map),l=(0,s.Kh)(new Map),u=(0,s.Kh)(new Map),v=(0,s.Kh)(new Map),g=(0,s.Kh)(new Map),{resizeRef:y,contentRect:_}=c(),x=(0,i.EW)(()=>{const t=new Map,n=e.overlaps??[];for(const e of n.filter(e=>e.includes(":"))){const[n,i]=e.split(":");if(!r.value.includes(n)||!r.value.includes(i))continue;const s=a.get(n),o=a.get(i),c=l.get(n),u=l.get(i);s&&o&&c&&u&&(t.set(i,{position:s.value,amount:parseInt(c.value,10)}),t.set(n,{position:o.value,amount:-parseInt(u.value,10)}))}return t}),S=(0,i.EW)(()=>{const e=[...new Set([...u.values()].map(e=>e.value))].sort((e,t)=>e-t),t=[];for(const n of e){const e=r.value.filter(e=>u.get(e)?.value===n);t.push(...e)}return b(t,a,l,v)}),M=(0,i.EW)(()=>!Array.from(g.values()).some(e=>e.value)),w=(0,i.EW)(()=>S.value[S.value.length-1].layer),E=(0,s.lW)(()=>({"--v-layout-left":(0,o.Dg)(w.value.left),"--v-layout-right":(0,o.Dg)(w.value.right),"--v-layout-top":(0,o.Dg)(w.value.top),"--v-layout-bottom":(0,o.Dg)(w.value.bottom),...M.value?void 0:{transition:"none"}})),T=(0,i.EW)(()=>S.value.slice(1).map((e,t)=>{let{id:n}=e;const{layer:i}=S.value[t],r=l.get(n),s=a.get(n);return{id:n,...i,size:Number(r.value),position:s.value}})),A=e=>T.value.find(t=>t.id===e),C=(0,d.n)("createLayout"),R=(0,s.IJ)(!1);(0,i.sV)(()=>{R.value=!0}),(0,i.Gt)(p,{register:(e,t)=>{let{id:s,order:c,position:d,layoutSize:p,elementSize:y,active:_,disableTransitions:b,absolute:w}=t;u.set(s,c),a.set(s,d),l.set(s,p),v.set(s,_),b&&g.set(s,b);const E=(0,o["if"])(f,C?.vnode),A=E.indexOf(e);A>-1?r.value.splice(A,0,s):r.value.push(s);const L=(0,i.EW)(()=>T.value.findIndex(e=>e.id===s)),P=(0,i.EW)(()=>n.value+2*S.value.length-2*L.value),I=(0,i.EW)(()=>{const e="left"===d.value||"right"===d.value,t="right"===d.value,i="bottom"===d.value,r=y.value??p.value,a=0===r?"%":"px",o={[d.value]:0,zIndex:P.value,transform:`translate${e?"X":"Y"}(${(_.value?0:-(0===r?100:r))*(t||i?-1:1)}${a})`,position:w.value||n.value!==m?"absolute":"fixed",...M.value?void 0:{transition:"none"}};if(!R.value)return o;const l=T.value[L.value];l||(0,h.OP)(`[Vuetify] Could not find layout item "${s}"`);const c=x.value.get(s);return c&&(l[c.position]+=c.amount),{...o,height:e?`calc(100% - ${l.top}px - ${l.bottom}px)`:y.value?`${y.value}px`:void 0,left:t?void 0:`${l.left}px`,right:t?`${l.right}px`:void 0,top:"bottom"!==d.value?`${l.top}px`:void 0,bottom:"top"!==d.value?`${l.bottom}px`:void 0,width:e?y.value?`${y.value}px`:void 0:`calc(100% - ${l.left}px - ${l.right}px)`}}),D=(0,i.EW)(()=>({zIndex:P.value-1}));return{layoutItemStyles:I,layoutItemScrimStyles:D,zIndex:P}},unregister:e=>{u.delete(e),a.delete(e),l.delete(e),v.delete(e),g.delete(e),r.value=r.value.filter(t=>t!==e)},mainRect:w,mainStyles:E,getLayoutItem:A,items:T,layoutRect:_,rootZIndex:n});const L=(0,s.lW)(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),P=(0,s.lW)(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:L,layoutStyles:P,getLayoutItem:A,items:T,layoutRect:_,layoutRef:y}}var S=n(2046),M=n(2225),w=n(4396),E=n(5081);const T=(0,u.j)({...(0,a.u)(),...(0,o.cJ)(v(),["fullHeight"]),...(0,M.yx)()},"VApp"),A=(0,w.RW)()({name:"VApp",props:T(),setup(e,t){let{slots:n}=t;const a=(0,M.NX)(e),{layoutClasses:s,getLayoutItem:o,items:l,layoutRef:c}=x({...e,fullHeight:!0}),{rtlClasses:u}=(0,S.IA)();return(0,E.C)(()=>(0,i.Lk)("div",{ref:c,class:(0,r.C4)(["v-application",a.themeClasses.value,s.value,u.value,e.class]),style:(0,r.Tr)([e.style])},[(0,i.Lk)("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:o,items:l,theme:a}}}),C=(0,u.j)({tag:{type:[String,Object,Function],default:"div"}},"tag"),R=(0,u.j)({text:String,...(0,a.u)(),...C()},"VToolbarTitle"),L=(0,w.RW)()({name:"VToolbarTitle",props:R(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>{const t=!!(n.default||n.text||e.text);return(0,i.bF)(e.tag,{class:(0,r.C4)(["v-toolbar-title",e.class]),style:(0,r.Tr)(e.style)},{default:()=>[t&&(0,i.Lk)("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}});var P=n(5130);const I=(0,u.j)({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function D(e,t,n){return(0,w.RW)()({name:e,props:I({mode:n,origin:t}),setup(t,n){let{slots:r}=n;const a={onBeforeEnter(e){t.origin&&(e.style.transformOrigin=t.origin)},onLeave(e){if(t.leaveAbsolute){const{offsetTop:t,offsetLeft:n,offsetWidth:i,offsetHeight:r}=e;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${i}px`,e.style.height=`${r}px`}t.hideOnLeave&&e.style.setProperty("display","none","important")},onAfterLeave(e){if(t.leaveAbsolute&&e?._transitionInitialStyles){const{position:t,top:n,left:i,width:r,height:a}=e._transitionInitialStyles;delete e._transitionInitialStyles,e.style.position=t||"",e.style.top=n||"",e.style.left=i||"",e.style.width=r||"",e.style.height=a||""}}};return()=>{const n=t.group?P.F:P.eB;return(0,i.h)(n,{name:t.disabled?"":e,css:!t.disabled,...t.group?void 0:{mode:t.mode},...t.disabled?{}:a},r.default)}}})}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return(0,w.RW)()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(n,r){let{slots:a}=r;const s=n.group?P.F:P.eB;return()=>(0,i.h)(s,{name:n.disabled?"":e,css:!n.disabled,...n.disabled?{}:t},a.default)}})}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?"width":"height",i=(0,r.PT)(`offset-${n}`);return{onBeforeEnter(e){e._parent=e.parentNode,e._initialStyle={transition:e.style.transition,overflow:e.style.overflow,[n]:e.style[n]}},onEnter(t){const r=t._initialStyle;if(!r)return;t.style.setProperty("transition","none","important"),t.style.overflow="hidden";const a=`${t[i]}px`;t.style[n]="0",t.offsetHeight,t.style.transition=r.transition,e&&t._parent&&t._parent.classList.add(e),requestAnimationFrame(()=>{t.style[n]=a})},onAfterEnter:s,onEnterCancelled:s,onLeave(e){e._initialStyle={transition:"",overflow:e.style.overflow,[n]:e.style[n]},e.style.overflow="hidden",e.style[n]=`${e[i]}px`,e.offsetHeight,requestAnimationFrame(()=>e.style[n]="0")},onAfterLeave:a,onLeaveCancelled:a};function a(t){e&&t._parent&&t._parent.classList.remove(e),s(t)}function s(e){if(!e._initialStyle)return;const t=e._initialStyle[n];e.style.overflow=e._initialStyle.overflow,null!=t&&(e.style[n]=t),delete e._initialStyle}}n(7588);var k=n(2512),F=n(1101),U=n(955);const B=(0,u.j)({target:[Object,Array]},"v-dialog-transition"),V=new WeakMap,z=(0,w.RW)()({name:"VDialogTransition",props:B(),setup(e,t){let{slots:n}=t;const r={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(t,n){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),t.style.visibility="";const i=H(e.target,t),{x:r,y:a,sx:s,sy:o,speed:l}=i;V.set(t,i);const c=(0,k.i)(t,[{transform:`translate(${r}px, ${a}px) scale(${s}, ${o})`,opacity:0},{}],{duration:225*l,easing:F.S8});W(t)?.forEach(e=>{(0,k.i)(e,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*l,easing:F.B2})}),c.finished.then(()=>n())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(t,n){let i;await new Promise(e=>requestAnimationFrame(e)),i=!V.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?H(e.target,t):V.get(t);const{x:r,y:a,sx:s,sy:o,speed:l}=i,c=(0,k.i)(t,[{},{transform:`translate(${r}px, ${a}px) scale(${s}, ${o})`,opacity:0}],{duration:125*l,easing:F.z3});c.finished.then(()=>n()),W(t)?.forEach(e=>{(0,k.i)(e,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*l,easing:F.B2})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>e.target?(0,i.bF)(P.eB,(0,i.v6)({name:"dialog-transition"},r,{css:!1}),n):(0,i.bF)(P.eB,{name:"dialog-transition"},n)}});function W(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function H(e,t){const n=(0,U.Li)(e),i=(0,k.P)(t),[r,a]=getComputedStyle(t).transformOrigin.split(" ").map(e=>parseFloat(e)),[s,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;"left"===s||"left"===o?l-=n.width/2:"right"!==s&&"right"!==o||(l+=n.width/2);let c=n.top+n.height/2;"top"===s||"top"===o?c-=n.height/2:"bottom"!==s&&"bottom"!==o||(c+=n.height/2);const u=n.width/i.width,d=n.height/i.height,h=Math.max(1,u,d),p=u/h||0,f=d/h||0,m=i.width*i.height/(window.innerWidth*window.innerHeight),v=m>.12?Math.min(1.5,10*(m-.12)+1):1;return{x:l-(r+i.left),y:c-(a+i.top),sx:p,sy:f,speed:v}}const G=D("fab-transition","center center","out-in"),j=D("dialog-bottom-transition"),X=D("dialog-top-transition"),q=D("fade-transition"),$=D("scale-transition"),Y=D("scroll-x-transition"),K=D("scroll-x-reverse-transition"),Z=D("scroll-y-transition"),J=D("scroll-y-reverse-transition"),Q=D("slide-x-transition"),ee=D("slide-x-reverse-transition"),te=D("slide-y-transition"),ne=D("slide-y-reverse-transition"),ie=O("expand-transition",N()),re=O("expand-x-transition",N("",!0));var ae=n(1240);const se=(0,u.j)({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),oe=(0,w.RW)(!1)({name:"VDefaultsProvider",props:se(),setup(e,t){let{slots:n}=t;const{defaults:i,disabled:r,reset:a,root:o,scoped:l}=(0,s.QW)(e);return(0,ae.Uh)(i,{reset:a,root:o,scoped:l,disabled:r}),()=>n.default?.()}});var le=n(3627);function ce(e){return{aspectStyles:(0,i.EW)(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const ue=(0,u.j)({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...(0,a.u)(),...(0,le.X)()},"VResponsive"),de=(0,w.RW)()({name:"VResponsive",props:ue(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=ce(e),{dimensionStyles:s}=(0,le.S)(e);return(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:(0,r.Tr)([s.value,e.style])},[(0,i.Lk)("div",{class:"v-responsive__sizer",style:(0,r.Tr)(a.value)},null),n.additional?.(),n.default&&(0,i.Lk)("div",{class:(0,r.C4)(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});var he=n(5043);const pe=(0,u.j)({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();const n=(0,i.EW)(()=>{const n=(0,s.i9)(e)?e.value:e.rounded,i=(0,s.i9)(e)?e.value:e.tile,r=[];if(!0===n||""===n)r.push(`${t}--rounded`);else if("string"===typeof n||0===n)for(const e of String(n).split(" "))r.push(`rounded-${e}`);else(i||!1===n)&&r.push("rounded-0");return r});return{roundedClasses:n}}var me=n(5937),ve=n(1694);const ge=(0,u.j)({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...ue(),...(0,a.u)(),...pe(),...(0,me.m)()},"VImg"),ye=(0,w.RW)()({name:"VImg",directives:{vIntersect:ve.A},props:ge(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:c,backgroundColorStyles:u}=(0,he.z6)(()=>e.color),{roundedClasses:h}=fe(e),p=(0,d.n)("VImg"),f=(0,s.IJ)(""),m=(0,s.KR)(),v=(0,s.IJ)(e.eager?"loading":"idle"),g=(0,s.IJ)(),y=(0,s.IJ)(),_=(0,i.EW)(()=>e.src&&"object"===typeof e.src?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),b=(0,i.EW)(()=>_.value.aspect||g.value/y.value||0);function x(t){if((!e.eager||!t)&&(!l.tB||t||e.eager)){if(v.value="loading",_.value.lazySrc){const e=new Image;e.src=_.value.lazySrc,A(e,null)}_.value.src&&(0,i.dY)(()=>{n("loadstart",m.value?.currentSrc||_.value.src),setTimeout(()=>{if(!p.isUnmounted)if(m.value?.complete){if(m.value.naturalWidth||M(),"error"===v.value)return;b.value||A(m.value,null),"loading"===v.value&&S()}else b.value||A(m.value),w()})})}}function S(){p.isUnmounted||(w(),A(m.value),v.value="loaded",n("load",m.value?.currentSrc||_.value.src))}function M(){p.isUnmounted||(v.value="error",n("error",m.value?.currentSrc||_.value.src))}function w(){const e=m.value;e&&(f.value=e.currentSrc||e.src)}(0,i.wB)(()=>e.src,()=>{x("idle"!==v.value)}),(0,i.wB)(b,(e,t)=>{!e&&t&&m.value&&A(m.value)}),(0,i.KC)(()=>x());let T=-1;function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=()=>{if(clearTimeout(T),p.isUnmounted)return;const{naturalHeight:i,naturalWidth:r}=e;i||r?(g.value=r,y.value=i):e.complete||"loading"!==v.value||null==t?(e.currentSrc.endsWith(".svg")||e.currentSrc.startsWith("data:image/svg+xml"))&&(g.value=1,y.value=1):T=window.setTimeout(n,t)};n()}(0,i.xo)(()=>{clearTimeout(T)});const C=(0,s.lW)(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),R=()=>{if(!_.value.src||"idle"===v.value)return null;const t=(0,i.Lk)("img",{class:(0,r.C4)(["v-img__img",C.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:_.value.src,srcset:_.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:m,onLoad:S,onError:M},null),n=a.sources?.();return(0,i.bF)(me.M,{transition:e.transition,appear:!0},{default:()=>[(0,i.bo)(n?(0,i.Lk)("picture",{class:"v-img__picture"},[n,t]):t,[[P.aG,"loaded"===v.value]])]})},L=()=>(0,i.bF)(me.M,{transition:e.transition},{default:()=>[_.value.lazySrc&&"loaded"!==v.value&&(0,i.Lk)("img",{class:(0,r.C4)(["v-img__img","v-img__img--preload",C.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:_.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),I=()=>a.placeholder?(0,i.bF)(me.M,{transition:e.transition,appear:!0},{default:()=>[("loading"===v.value||"error"===v.value&&!a.error)&&(0,i.Lk)("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,D=()=>a.error?(0,i.bF)(me.M,{transition:e.transition,appear:!0},{default:()=>["error"===v.value&&(0,i.Lk)("div",{class:"v-img__error"},[a.error()])]}):null,O=()=>e.gradient?(0,i.Lk)("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,N=(0,s.IJ)(!1);{const e=(0,i.wB)(b,t=>{t&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{N.value=!0})}),e())})}return(0,E.C)(()=>{const t=de.filterProps(e);return(0,i.bo)((0,i.bF)(de,(0,i.v6)({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!N.value},c.value,h.value,e.class],style:[{width:(0,o.Dg)("auto"===e.width?g.value:e.width)},u.value,e.style]},t,{aspectRatio:b.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>(0,i.Lk)(i.FK,null,[(0,i.bF)(R,null,null),(0,i.bF)(L,null,null),(0,i.bF)(O,null,null),(0,i.bF)(I,null,null),(0,i.bF)(D,null,null)]),default:a.default}),[[ve.A,{handler:x,options:e.options},null,{once:!0}]])}),{currentSrc:f,image:m,state:v,naturalWidth:g,naturalHeight:y}}}),_e=(0,u.j)({border:[Boolean,Number,String]},"border");function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();const n=(0,i.EW)(()=>{const n=e.border;return!0===n||""===n?`${t}--border`:"string"===typeof n||0===n?String(n).split(" ").map(e=>`border-${e}`):[]});return{borderClasses:n}}const xe=(0,u.j)({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Se(e){const t=(0,s.lW)(()=>{const t=(0,s.i9)(e)?e.value:e.elevation;return null==t?[]:[`elevation-${t}`]});return{elevationClasses:t}}const Me=[null,"prominent","default","comfortable","compact"],we=(0,u.j)({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Me.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,..._e(),...(0,a.u)(),...xe(),...pe(),...C({tag:"header"}),...(0,M.yx)()},"VToolbar"),Ee=(0,w.RW)()({name:"VToolbar",props:we(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:l}=(0,he.z6)(()=>e.color),{borderClasses:c}=be(e),{elevationClasses:u}=Se(e),{roundedClasses:d}=fe(e),{themeClasses:h}=(0,M.NX)(e),{rtlClasses:p}=(0,S.IA)(),f=(0,s.IJ)(null===e.extended?!!n.extension?.():e.extended),m=(0,i.EW)(()=>parseInt(Number(e.height)+("prominent"===e.density?Number(e.height):0)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0),10)),v=(0,i.EW)(()=>f.value?parseInt(Number(e.extensionHeight)+("prominent"===e.density?Number(e.extensionHeight):0)-("comfortable"===e.density?4:0)-("compact"===e.density?8:0),10):0);return(0,ae.Uh)({VBtn:{variant:"text"}}),(0,E.C)(()=>{const t=!(!e.title&&!n.title),s=!(!n.image&&!e.image),g=n.extension?.();return f.value=null===e.extended?!!g:e.extended,(0,i.bF)(e.tag,{class:(0,r.C4)(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,c.value,u.value,d.value,h.value,p.value,e.class]),style:(0,r.Tr)([l.value,e.style])},{default:()=>[s&&(0,i.Lk)("div",{key:"image",class:"v-toolbar__image"},[n.image?(0,i.bF)(oe,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):(0,i.bF)(ye,{key:"image-img",cover:!0,src:e.image},null)]),(0,i.bF)(oe,{defaults:{VTabs:{height:(0,o.Dg)(m.value)}}},{default:()=>[(0,i.Lk)("div",{class:"v-toolbar__content",style:{height:(0,o.Dg)(m.value)}},[n.prepend&&(0,i.Lk)("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),t&&(0,i.bF)(L,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&(0,i.Lk)("div",{class:"v-toolbar__append"},[n.append?.()])])]}),(0,i.bF)(oe,{defaults:{VTabs:{height:(0,o.Dg)(v.value)}}},{default:()=>[(0,i.bF)(ie,null,{default:()=>[f.value&&(0,i.Lk)("div",{class:"v-toolbar__extension",style:{height:(0,o.Dg)(v.value)}},[g])]})]})]})}),{contentHeight:m,extensionHeight:v}}});var Te=n(8432);const Ae=(0,u.j)({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{canScroll:n}=t;let r=0,a=0;const l=(0,s.KR)(null),c=(0,s.IJ)(0),u=(0,s.IJ)(0),d=(0,s.IJ)(0),p=(0,s.IJ)(!1),f=(0,s.IJ)(!1),m=(0,i.EW)(()=>Number(e.scrollThreshold)),v=(0,i.EW)(()=>(0,o.qE)((m.value-c.value)/m.value||0)),g=()=>{const e=l.value;if(!e||n&&!n.value)return;r=c.value,c.value="window"in e?e.pageYOffset:e.scrollTop;const t=e instanceof Window?document.documentElement.scrollHeight:e.scrollHeight;a===t?(f.value=c.value<r,d.value=Math.abs(c.value-m.value)):a=t};return(0,i.wB)(f,()=>{u.value=u.value||c.value}),(0,i.wB)(p,()=>{u.value=0}),(0,i.sV)(()=>{(0,i.wB)(()=>e.scrollTarget,e=>{const t=e?document.querySelector(e):window;t?t!==l.value&&(l.value?.removeEventListener("scroll",g),l.value=t,l.value.addEventListener("scroll",g,{passive:!0})):(0,h.OP)(`Unable to locate element with identifier ${e}`)},{immediate:!0})}),(0,i.xo)(()=>{l.value?.removeEventListener("scroll",g)}),n&&(0,i.wB)(n,g,{immediate:!0}),{scrollThreshold:m,currentScroll:c,currentThreshold:d,isScrollActive:p,scrollRatio:v,isScrollingUp:f,savedScroll:u}}function Re(){const e=(0,s.IJ)(!1);(0,i.sV)(()=>{window.requestAnimationFrame(()=>{e.value=!0})});const t=(0,s.lW)(()=>e.value?void 0:{transition:"none !important"});return{ssrBootStyles:t,isBooted:(0,s.tB)(e)}}var Le=n(9948);const Pe=(0,u.j)({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...we(),...g(),...Ae(),height:{type:[Number,String],default:64}},"VAppBar"),Ie=(0,w.RW)()({name:"VAppBar",props:Pe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,s.KR)(),a=(0,Te.q)(e,"modelValue"),o=(0,i.EW)(()=>{const t=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:t.has("hide"),fullyHide:t.has("fully-hide"),inverted:t.has("inverted"),collapse:t.has("collapse"),elevate:t.has("elevate"),fadeImage:t.has("fade-image")}}),l=(0,i.EW)(()=>{const e=o.value;return e.hide||e.fullyHide||e.inverted||e.collapse||e.elevate||e.fadeImage||!a.value}),{currentScroll:c,scrollThreshold:u,isScrollingUp:d,scrollRatio:h}=Ce(e,{canScroll:l}),p=(0,s.lW)(()=>o.value.hide||o.value.fullyHide),f=(0,i.EW)(()=>e.collapse||o.value.collapse&&(o.value.inverted?h.value>0:0===h.value)),m=(0,i.EW)(()=>e.flat||o.value.fullyHide&&!a.value||o.value.elevate&&(o.value.inverted?c.value>0:0===c.value)),v=(0,i.EW)(()=>o.value.fadeImage?o.value.inverted?1-h.value:h.value:void 0),g=(0,i.EW)(()=>{if(o.value.hide&&o.value.inverted)return 0;const e=r.value?.contentHeight??0,t=r.value?.extensionHeight??0;return p.value?c.value<u.value||o.value.fullyHide?e+t:e:e+t});(0,Le.Y)(()=>!!e.scrollBehavior,()=>{(0,i.nT)(()=>{p.value?o.value.inverted?a.value=c.value>u.value:a.value=d.value||c.value<u.value:a.value=!0})});const{ssrBootStyles:y}=Re(),{layoutItemStyles:b}=_({id:e.name,order:(0,i.EW)(()=>parseInt(e.order,10)),position:(0,s.lW)(()=>e.location),layoutSize:g,elementSize:(0,s.IJ)(void 0),active:a,absolute:(0,s.lW)(()=>e.absolute)});return(0,E.C)(()=>{const t=Ee.filterProps(e);return(0,i.bF)(Ee,(0,i.v6)({ref:r,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===e.location},e.class],style:[{...b.value,"--v-toolbar-image-opacity":v.value,height:void 0,...y.value},e.style]},t,{collapse:f.value,flat:m.value}),n)}),{}}}),De=[null,"default","comfortable","compact"],Oe=(0,u.j)({density:{type:String,default:"default",validator:e=>De.includes(e)}},"density");function Ne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();const n=(0,s.lW)(()=>`${t}--density-${e.density}`);return{densityClasses:n}}const ke=["elevated","flat","tonal","outlined","text","plain"];function Fe(e,t){return(0,i.Lk)(i.FK,null,[e&&(0,i.Lk)("span",{key:"overlay",class:(0,r.C4)(`${t}__overlay`)},null),(0,i.Lk)("span",{key:"underlay",class:(0,r.C4)(`${t}__underlay`)},null)])}const Ue=(0,u.j)({color:String,variant:{type:String,default:"elevated",validator:e=>ke.includes(e)}},"variant");function Be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();const n=(0,s.lW)(()=>{const{variant:n}=(0,s.BA)(e);return`${t}--variant-${n}`}),{colorClasses:i,colorStyles:r}=(0,he.by)(()=>{const{variant:t,color:n}=(0,s.BA)(e);return{[["elevated","flat"].includes(t)?"background":"text"]:n}});return{colorClasses:i,colorStyles:r,variantClasses:n}}const Ve=(0,u.j)({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},..._e(),...(0,a.u)(),...Oe(),...xe(),...pe(),...C(),...(0,M.yx)(),...Ue()},"VBtnGroup"),ze=(0,w.RW)()({name:"VBtnGroup",props:Ve(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{densityClasses:o}=Ne(e),{borderClasses:l}=be(e),{elevationClasses:c}=Se(e),{roundedClasses:u}=fe(e);(0,ae.Uh)({VBtn:{height:(0,s.lW)(()=>"horizontal"===e.direction?"auto":null),baseColor:(0,s.lW)(()=>e.baseColor),color:(0,s.lW)(()=>e.color),density:(0,s.lW)(()=>e.density),flat:!0,variant:(0,s.lW)(()=>e.variant)}}),(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,l.value,o.value,c.value,u.value,e.class]),style:(0,r.Tr)(e.style)},n))}}),We=(0,u.j)({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),He=(0,u.j)({value:null,disabled:Boolean,selectedClass:String},"group-item");function Ge(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=(0,d.n)("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const a=(0,i.Bi)();(0,i.Gt)(Symbol.for(`${t.description}:id`),a);const o=(0,i.WQ)(t,null);if(!o){if(!n)return o;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const l=(0,s.lW)(()=>e.value),c=(0,i.EW)(()=>!(!o.disabled.value&&!e.disabled));o.register({id:a,value:l,disabled:c},r),(0,i.xo)(()=>{o.unregister(a)});const u=(0,i.EW)(()=>o.isSelected(a)),h=(0,i.EW)(()=>o.items.value[0].id===a),p=(0,i.EW)(()=>o.items.value[o.items.value.length-1].id===a),f=(0,i.EW)(()=>u.value&&[o.selectedClass.value,e.selectedClass]);return(0,i.wB)(u,e=>{r.emit("group:selected",{value:e})},{flush:"sync"}),{id:a,isSelected:u,isFirst:h,isLast:p,toggle:()=>o.select(a,!u.value),select:e=>o.select(a,e),selectedClass:f,value:l,disabled:c,group:o}}function je(e,t){let n=!1;const r=(0,s.Kh)([]),a=(0,Te.q)(e,"modelValue",[],e=>null==e?[]:qe(r,(0,o.BN)(e)),t=>{const n=$e(r,t);return e.multiple?n:n[0]}),l=(0,d.n)("useGroup");function c(e,n){const i=e,a=Symbol.for(`${t.description}:id`),c=(0,o["if"])(a,l?.vnode),u=c.indexOf(n);null==(0,s.R1)(i.value)&&(i.value=u,i.useIndexAsValue=!0),u>-1?r.splice(u,0,i):r.push(i)}function u(e){if(n)return;p();const t=r.findIndex(t=>t.id===e);r.splice(t,1)}function p(){const t=r.find(e=>!e.disabled);t&&"force"===e.mandatory&&!a.value.length&&(a.value=[t.id])}function f(t,n){const i=r.find(e=>e.id===t);if(!n||!i?.disabled)if(e.multiple){const i=a.value.slice(),r=i.findIndex(e=>e===t),s=~r;if(n=n??!s,s&&e.mandatory&&i.length<=1)return;if(!s&&null!=e.max&&i.length+1>e.max)return;r<0&&n?i.push(t):r>=0&&!n&&i.splice(r,1),a.value=i}else{const i=a.value.includes(t);if(e.mandatory&&i)return;if(!i&&!n)return;a.value=n??!i?[t]:[]}}function m(t){if(e.multiple&&(0,h.OP)('This method is not supported when using "multiple" prop'),a.value.length){const e=a.value[0],n=r.findIndex(t=>t.id===e);let i=(n+t)%r.length,s=r[i];while(s.disabled&&i!==n)i=(i+t)%r.length,s=r[i];if(s.disabled)return;a.value=[r[i].id]}else{const e=r.find(e=>!e.disabled);e&&(a.value=[e.id])}}(0,i.sV)(()=>{p()}),(0,i.xo)(()=>{n=!0}),(0,i.$u)(()=>{for(let e=0;e<r.length;e++)r[e].useIndexAsValue&&(r[e].value=e)});const v={register:c,unregister:u,selected:a,select:f,disabled:(0,s.lW)(()=>e.disabled),prev:()=>m(r.length-1),next:()=>m(1),isSelected:e=>a.value.includes(e),selectedClass:(0,s.lW)(()=>e.selectedClass),items:(0,s.lW)(()=>r),getItemIndex:e=>Xe(r,e)};return(0,i.Gt)(t,v),v}function Xe(e,t){const n=qe(e,[t]);return n.length?e.findIndex(e=>e.id===n[0]):-1}function qe(e,t){const n=[];return t.forEach(t=>{const i=e.find(e=>(0,o.bD)(t,e.value)),r=e[t];null!=i?.value?n.push(i.id):r?.useIndexAsValue&&n.push(r.id)}),n}function $e(e,t){const n=[];return t.forEach(t=>{const i=e.findIndex(e=>e.id===t);if(~i){const t=e[i];n.push(null!=t.value?t.value:i)}}),n}const Ye=Symbol.for("vuetify:v-btn-toggle"),Ke=(0,u.j)({...Ve(),...We()},"VBtnToggle"),Ze=(0,w.RW)()({name:"VBtnToggle",props:Ke(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:r,next:a,prev:s,select:o,selected:l}=je(e,Ye);return(0,E.C)(()=>{const t=ze.filterProps(e);return(0,i.bF)(ze,(0,i.v6)({class:["v-btn-toggle",e.class]},t,{style:e.style}),{default:()=>[n.default?.({isSelected:r,next:a,prev:s,select:o,selected:l})]})}),{next:a,prev:s,select:o}}});var Je=n(4119);const Qe=["x-small","small","default","large","x-large"],et=(0,u.j)({size:{type:[String,Number],default:"default"}},"size");function tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();return(0,o.yc)(()=>{const n=e.size;let i,r;return(0,o.mK)(Qe,n)?i=`${t}--size-${n}`:n&&(r={width:(0,o.Dg)(n),height:(0,o.Dg)(n)}),{sizeClasses:i,sizeStyles:r}})}const nt=(0,u.j)({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Je.TX,opacity:[String,Number],...(0,a.u)(),...et(),...C({tag:"i"}),...(0,M.yx)()},"VIcon"),it=(0,w.RW)()({name:"VIcon",props:nt(),setup(e,t){let{attrs:n,slots:a}=t;const l=(0,s.IJ)(),{themeClasses:c}=(0,M.DP)(),{iconData:u}=(0,Je.bD)(()=>l.value||e.icon),{sizeClasses:d}=tt(e),{textColorClasses:h,textColorStyles:p}=(0,he.aH)(()=>e.color);return(0,E.C)(()=>{const t=a.default?.();t&&(l.value=(0,o.e9)(t).filter(e=>e.type===i.EY&&e.children&&"string"===typeof e.children)[0]?.children);const s=!(!n.onClick&&!n.onClickOnce);return(0,i.bF)(u.value.component,{tag:e.tag,icon:u.value.icon,class:(0,r.C4)(["v-icon","notranslate",c.value,d.value,h.value,{"v-icon--clickable":s,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:(0,r.Tr)([{"--v-icon-opacity":e.opacity},d.value?void 0:{fontSize:(0,o.Dg)(e.size),height:(0,o.Dg)(e.size),width:(0,o.Dg)(e.size)},p.value,e.style]),role:s?"button":void 0,"aria-hidden":!s,tabindex:s?e.disabled?-1:0:void 0},{default:()=>[t]})}),{}}});function rt(e,t){const n=(0,s.KR)(),r=(0,s.IJ)(!1);if(l.tB){const a=new IntersectionObserver(t=>{e?.(t,a),r.value=!!t.find(e=>e.isIntersecting)},t);(0,s.jr)(()=>{a.disconnect()}),(0,i.wB)(n,(e,t)=>{t&&(a.unobserve(t),r.value=!1),e&&a.observe(e)},{flush:"post"})}return{intersectionRef:n,isIntersecting:r}}const at=(0,u.j)({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...(0,a.u)(),...et(),...C({tag:"div"}),...(0,M.yx)()},"VProgressCircular"),st=(0,w.RW)()({name:"VProgressCircular",props:at(),setup(e,t){let{slots:n}=t;const a=20,l=2*Math.PI*a,u=(0,s.KR)(),{themeClasses:d}=(0,M.NX)(e),{sizeClasses:h,sizeStyles:p}=tt(e),{textColorClasses:f,textColorStyles:m}=(0,he.aH)(()=>e.color),{textColorClasses:v,textColorStyles:g}=(0,he.aH)(()=>e.bgColor),{intersectionRef:y,isIntersecting:_}=rt(),{resizeRef:b,contentRect:x}=c(),S=(0,s.lW)(()=>(0,o.qE)(parseFloat(e.modelValue),0,100)),w=(0,s.lW)(()=>Number(e.width)),T=(0,s.lW)(()=>p.value?Number(e.size):x.value?x.value.width:Math.max(w.value,32)),A=(0,s.lW)(()=>a/(1-w.value/T.value)*2),C=(0,s.lW)(()=>w.value/T.value*A.value),R=(0,s.lW)(()=>(0,o.Dg)((100-S.value)/100*l));return(0,i.nT)(()=>{y.value=u.value,b.value=u.value}),(0,E.C)(()=>(0,i.bF)(e.tag,{ref:u,class:(0,r.C4)(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":_.value,"v-progress-circular--disable-shrink":"disable-shrink"===e.indeterminate},d.value,h.value,f.value,e.class]),style:(0,r.Tr)([p.value,m.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:S.value},{default:()=>[(0,i.Lk)("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${A.value} ${A.value}`},[(0,i.Lk)("circle",{class:(0,r.C4)(["v-progress-circular__underlay",v.value]),style:(0,r.Tr)(g.value),fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":C.value,"stroke-dasharray":l,"stroke-dashoffset":0},null),(0,i.Lk)("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":C.value,"stroke-dasharray":l,"stroke-dashoffset":R.value},null)]),n.default&&(0,i.Lk)("div",{class:"v-progress-circular__content"},[n.default({value:S.value})])]})),{}}});var ot=n(8093);const lt={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},ct=(0,u.j)({location:String},"location");function ut(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=(0,S.IA)(),a=(0,i.EW)(()=>{if(!e.location)return{};const{side:i,align:a}=(0,ot.fB)(e.location.split(" ").length>1?e.location:`${e.location} center`,r.value);function s(e){return n?n(e):0}const o={};return"center"!==i&&(t?o[lt[i]]=`calc(100% - ${s(i)}px)`:o[i]=0),"center"!==a?t?o[lt[a]]=`calc(100% - ${s(a)}px)`:o[a]=0:("center"===i?o.top=o.left="50%":o[{top:"left",bottom:"left",left:"top",right:"top"}[i]]="50%",o.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[i]),o});return{locationStyles:a}}const dt=(0,u.j)({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...(0,a.u)(),...ct({location:"top"}),...pe(),...C(),...(0,M.yx)()},"VProgressLinear"),ht=(0,w.RW)()({name:"VProgressLinear",props:dt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=(0,Te.q)(e,"modelValue"),{isRtl:s,rtlClasses:c}=(0,S.IA)(),{themeClasses:u}=(0,M.NX)(e),{locationStyles:d}=ut(e),{textColorClasses:h,textColorStyles:p}=(0,he.aH)(()=>e.color),{backgroundColorClasses:f,backgroundColorStyles:m}=(0,he.z6)(()=>e.bgColor||e.color),{backgroundColorClasses:v,backgroundColorStyles:g}=(0,he.z6)(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:y,backgroundColorStyles:_}=(0,he.z6)(()=>e.color),{roundedClasses:b}=fe(e),{intersectionRef:x,isIntersecting:w}=rt(),T=(0,i.EW)(()=>parseFloat(e.max)),A=(0,i.EW)(()=>parseFloat(e.height)),C=(0,i.EW)(()=>(0,o.qE)(parseFloat(e.bufferValue)/T.value*100,0,100)),R=(0,i.EW)(()=>(0,o.qE)(parseFloat(a.value)/T.value*100,0,100)),L=(0,i.EW)(()=>s.value!==e.reverse),I=(0,i.EW)(()=>e.indeterminate?"fade-transition":"slide-x-transition"),D=l.ZK&&window.matchMedia?.("(forced-colors: active)").matches;function O(e){if(!x.value)return;const{left:t,right:n,width:i}=x.value.getBoundingClientRect(),r=L.value?i-e.clientX+(n-i):e.clientX-t;a.value=Math.round(r/i*T.value)}return(0,E.C)(()=>(0,i.bF)(e.tag,{ref:x,class:(0,r.C4)(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&w.value,"v-progress-linear--reverse":L.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},b.value,u.value,c.value,e.class]),style:(0,r.Tr)([{bottom:"bottom"===e.location?0:void 0,top:"top"===e.location?0:void 0,height:e.active?(0,o.Dg)(A.value):0,"--v-progress-linear-height":(0,o.Dg)(A.value),...e.absolute?d.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(a.value),T.value),onClick:e.clickable&&O},{default:()=>[e.stream&&(0,i.Lk)("div",{key:"stream",class:(0,r.C4)(["v-progress-linear__stream",h.value]),style:{...p.value,[L.value?"left":"right"]:(0,o.Dg)(-A.value),borderTop:`${(0,o.Dg)(A.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${(0,o.Dg)(A.value/4)})`,width:(0,o.Dg)(100-C.value,"%"),"--v-progress-linear-stream-to":(0,o.Dg)(A.value*(L.value?1:-1))}},null),(0,i.Lk)("div",{class:(0,r.C4)(["v-progress-linear__background",D?void 0:f.value]),style:(0,r.Tr)([m.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),(0,i.Lk)("div",{class:(0,r.C4)(["v-progress-linear__buffer",D?void 0:v.value]),style:(0,r.Tr)([g.value,{opacity:parseFloat(e.bufferOpacity),width:(0,o.Dg)(C.value,"%")}])},null),(0,i.bF)(P.eB,{name:I.value},{default:()=>[e.indeterminate?(0,i.Lk)("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(e=>(0,i.Lk)("div",{key:e,class:(0,r.C4)(["v-progress-linear__indeterminate",e,D?void 0:y.value]),style:(0,r.Tr)(_.value)},null))]):(0,i.Lk)("div",{class:(0,r.C4)(["v-progress-linear__determinate",D?void 0:y.value]),style:(0,r.Tr)([_.value,{width:(0,o.Dg)(R.value,"%")}])},null)]}),n.default&&(0,i.Lk)("div",{class:"v-progress-linear__content"},[n.default({value:R.value,buffer:C.value})])]})),{}}}),pt=(0,u.j)({loading:[Boolean,String]},"loader");function ft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();const n=(0,s.lW)(()=>({[`${t}--loading`]:e.loading}));return{loaderClasses:n}}function mt(e,t){let{slots:n}=t;return(0,i.Lk)("div",{class:(0,r.C4)(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||(0,i.bF)(ht,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const vt=["static","relative","fixed","absolute","sticky"],gt=(0,u.j)({position:{type:String,validator:e=>vt.includes(e)}},"position");function yt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();const n=(0,s.lW)(()=>e.position?`${t}--${e.position}`:void 0);return{positionClasses:n}}var _t=n(7911);function bt(e,t){(0,i.wB)(()=>e.isActive?.value,n=>{e.isLink.value&&null!=n&&t&&(0,i.dY)(()=>{t(n)})},{immediate:!0})}var xt=n(7354);const St=(0,u.j)({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Ye},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Je.TX,appendIcon:Je.TX,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},..._e(),...(0,a.u)(),...Oe(),...(0,le.X)(),...xe(),...He(),...pt(),...ct(),...gt(),...pe(),...(0,_t.WC)(),...et(),...C({tag:"button"}),...(0,M.yx)(),...Ue({variant:"elevated"})},"VBtn"),Mt=(0,w.RW)()({name:"VBtn",props:St(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:o}=(0,M.NX)(e),{borderClasses:l}=be(e),{densityClasses:c}=Ne(e),{dimensionStyles:u}=(0,le.S)(e),{elevationClasses:d}=Se(e),{loaderClasses:h}=ft(e),{locationStyles:p}=ut(e),{positionClasses:f}=yt(e),{roundedClasses:m}=fe(e),{sizeClasses:v,sizeStyles:g}=tt(e),y=Ge(e,e.symbol,!1),_=(0,_t.iE)(e,n),b=(0,i.EW)(()=>void 0!==e.active?e.active:_.isLink.value?_.isActive?.value:y?.isSelected.value),x=(0,s.lW)(()=>b.value?e.activeColor??e.color:e.color),S=(0,i.EW)(()=>{const t=y?.isSelected.value&&(!_.isLink.value||_.isActive?.value)||!y||_.isActive?.value;return{color:t?x.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:w,colorStyles:T,variantClasses:A}=Be(S),C=(0,i.EW)(()=>y?.disabled.value||e.disabled),R=(0,s.lW)(()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)),L=(0,i.EW)(()=>{if(void 0!==e.value&&"symbol"!==typeof e.value)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function P(e){C.value||_.isLink.value&&(e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button||"_blank"===n.target)||(_.navigate?.(e),y?.toggle())}return bt(_,y?.select),(0,E.C)(()=>{const t=_.isLink.value?"a":e.tag,n=!(!e.prependIcon&&!a.prepend),s=!(!e.appendIcon&&!a.append),x=!(!e.icon||!0===e.icon);return(0,i.bo)((0,i.bF)(t,(0,i.v6)({type:"a"===t?void 0:"button",class:["v-btn",y?.selectedClass.value,{"v-btn--active":b.value,"v-btn--block":e.block,"v-btn--disabled":C.value,"v-btn--elevated":R.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},o.value,l.value,w.value,c.value,d.value,h.value,f.value,m.value,v.value,A.value,e.class],style:[T.value,u.value,p.value,g.value,e.style],"aria-busy":!!e.loading||void 0,disabled:C.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:P,value:L.value},_.linkProps),{default:()=>[Fe(!0,"v-btn"),!e.icon&&n&&(0,i.Lk)("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?(0,i.bF)(oe,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):(0,i.bF)(it,{key:"prepend-icon",icon:e.prependIcon},null)]),(0,i.Lk)("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&x?(0,i.bF)(it,{key:"content-icon",icon:e.icon},null):(0,i.bF)(oe,{key:"content-defaults",disabled:!x,defaults:{VIcon:{icon:e.icon}}},{default:()=>[a.default?.()??(0,r.v_)(e.text)]})]),!e.icon&&s&&(0,i.Lk)("span",{key:"append",class:"v-btn__append"},[a.append?(0,i.bF)(oe,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):(0,i.bF)(it,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&(0,i.Lk)("span",{key:"loader",class:"v-btn__loader"},[a.loader?.()??(0,i.bF)(st,{color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[xt.A,!C.value&&e.ripple,"",{center:!!e.icon}]])}),{group:y}}}),wt=(0,u.j)({...St({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Et=(0,w.RW)()({name:"VAppBarNavIcon",props:wt(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(Mt,(0,i.v6)(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),Tt=(0,w.RW)()({name:"VAppBarTitle",props:R(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(L,(0,i.v6)(e,{class:"v-app-bar-title"}),n)),{}}});function At(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return(0,w.RW)()({name:n??(0,r.ZH)((0,r.PT)(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...(0,a.u)()},setup(t,n){let{slots:r}=n;return()=>(0,i.h)(t.tag,{class:[e,t.class],style:t.style},r.default?.())}})}const Ct=At("v-alert-title"),Rt=(0,u.j)({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Lt(e,t){const n=(0,i.EW)(()=>{const n=new Map(e.iconSizes),i=e.iconSize??t()??"default";return n.has(i)?n.get(i):i});return{iconSize:n}}const Pt=["success","info","warning","error"],It=(0,u.j)({border:{type:[Boolean,String],validator:e=>"boolean"===typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Je.TX,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Pt.includes(e)},...(0,a.u)(),...Oe(),...(0,le.X)(),...xe(),...Rt(),...ct(),...gt(),...pe(),...C(),...(0,M.yx)(),...Ue({variant:"flat"})},"VAlert"),Dt=(0,w.RW)()({name:"VAlert",props:It(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const o=(0,Te.q)(e,"modelValue"),l=(0,s.lW)(()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:c}=Lt(e,()=>e.prominent?44:void 0),{themeClasses:u}=(0,M.NX)(e),{colorClasses:d,colorStyles:h,variantClasses:p}=Be(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:f}=Ne(e),{dimensionStyles:m}=(0,le.S)(e),{elevationClasses:v}=Se(e),{locationStyles:g}=ut(e),{positionClasses:y}=yt(e),{roundedClasses:_}=fe(e),{textColorClasses:b,textColorStyles:x}=(0,he.aH)(()=>e.borderColor),{t:w}=(0,S.Ym)(),E=(0,s.lW)(()=>({"aria-label":w(e.closeLabel),onClick(e){o.value=!1,n("click:close",e)}}));return()=>{const t=!(!a.prepend&&!l.value),n=!(!a.title&&!e.title),s=!(!a.close&&!e.closable),S={density:e.density,icon:l.value,size:e.iconSize||e.prominent?c.value:void 0};return o.value&&(0,i.bF)(e.tag,{class:(0,r.C4)(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},u.value,d.value,f.value,v.value,y.value,_.value,p.value,e.class]),style:(0,r.Tr)([h.value,m.value,g.value,e.style]),role:"alert"},{default:()=>[Fe(!1,"v-alert"),e.border&&(0,i.Lk)("div",{key:"border",class:(0,r.C4)(["v-alert__border",b.value]),style:(0,r.Tr)(x.value)},null),t&&(0,i.Lk)("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?(0,i.bF)(oe,{key:"prepend-defaults",disabled:!l.value,defaults:{VIcon:{...S}}},a.prepend):(0,i.bF)(it,(0,i.v6)({key:"prepend-icon"},S),null)]),(0,i.Lk)("div",{class:"v-alert__content"},[n&&(0,i.bF)(Ct,{key:"title"},{default:()=>[a.title?.()??e.title]}),a.text?.()??e.text,a.default?.()]),a.append&&(0,i.Lk)("div",{key:"append",class:"v-alert__append"},[a.append()]),s&&(0,i.Lk)("div",{key:"close",class:"v-alert__close"},[a.close?(0,i.bF)(oe,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[a.close?.({props:E.value})]}):(0,i.bF)(Mt,(0,i.v6)({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},E.value),null)])]})}}}),Ot=(0,u.j)({start:Boolean,end:Boolean,icon:Je.TX,image:String,text:String,..._e(),...(0,a.u)(),...Oe(),...pe(),...et(),...C(),...(0,M.yx)(),...Ue({variant:"flat"})},"VAvatar"),Nt=(0,w.RW)()({name:"VAvatar",props:Ot(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{borderClasses:s}=be(e),{colorClasses:o,colorStyles:l,variantClasses:c}=Be(e),{densityClasses:u}=Ne(e),{roundedClasses:d}=fe(e),{sizeClasses:h,sizeStyles:p}=tt(e);return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,s.value,o.value,u.value,d.value,h.value,c.value,e.class]),style:(0,r.Tr)([l.value,p.value,e.style])},{default:()=>[n.default?(0,i.bF)(oe,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?(0,i.bF)(ye,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?(0,i.bF)(it,{key:"icon",icon:e.icon},null):e.text,Fe(!1,"v-avatar")]})),{}}}),kt=(0,u.j)({text:String,onClick:(0,o.uR)(),...(0,a.u)(),...(0,M.yx)()},"VLabel"),Ft=(0,w.RW)()({name:"VLabel",props:kt(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.Lk)("label",{class:(0,r.C4)(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:(0,r.Tr)(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),Ut=Symbol.for("vuetify:selection-control-group"),Bt=(0,u.j)({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Je.TX,trueIcon:Je.TX,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:o.bD},...(0,a.u)(),...Oe(),...(0,M.yx)()},"SelectionControlGroup"),Vt=(0,u.j)({...Bt({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),zt=(0,w.RW)()({name:"VSelectionControlGroup",props:Vt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=(0,Te.q)(e,"modelValue"),o=(0,i.Bi)(),l=(0,s.lW)(()=>e.id||`v-selection-control-group-${o}`),c=(0,s.lW)(()=>e.name||l.value),u=new Set;return(0,i.Gt)(Ut,{modelValue:a,forceUpdate:()=>{u.forEach(e=>e())},onForceUpdate:e=>{u.add(e),(0,s.jr)(()=>{u.delete(e)})}}),(0,ae.Uh)({[e.defaultsTarget]:{color:(0,s.lW)(()=>e.color),disabled:(0,s.lW)(()=>e.disabled),density:(0,s.lW)(()=>e.density),error:(0,s.lW)(()=>e.error),inline:(0,s.lW)(()=>e.inline),modelValue:a,multiple:(0,s.lW)(()=>!!e.multiple||null==e.multiple&&Array.isArray(a.value)),name:c,falseIcon:(0,s.lW)(()=>e.falseIcon),trueIcon:(0,s.lW)(()=>e.trueIcon),readonly:(0,s.lW)(()=>e.readonly),ripple:(0,s.lW)(()=>e.ripple),type:(0,s.lW)(()=>e.type),valueComparator:(0,s.lW)(()=>e.valueComparator)}}),(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:(0,r.Tr)(e.style),role:"radio"===e.type?"radiogroup":void 0},[n.default?.()])),{}}}),Wt=(0,u.j)({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...(0,a.u)(),...Bt()},"VSelectionControl");function Ht(e){const t=(0,i.WQ)(Ut,void 0),{densityClasses:n}=Ne(e),r=(0,Te.q)(e,"modelValue"),a=(0,i.EW)(()=>void 0!==e.trueValue?e.trueValue:void 0===e.value||e.value),s=(0,i.EW)(()=>void 0!==e.falseValue&&e.falseValue),l=(0,i.EW)(()=>!!e.multiple||null==e.multiple&&Array.isArray(r.value)),c=(0,i.EW)({get(){const n=t?t.modelValue.value:r.value;return l.value?(0,o.BN)(n).some(t=>e.valueComparator(t,a.value)):e.valueComparator(n,a.value)},set(n){if(e.readonly)return;const i=n?a.value:s.value;let c=i;l.value&&(c=n?[...(0,o.BN)(r.value),i]:(0,o.BN)(r.value).filter(t=>!e.valueComparator(t,a.value))),t?t.modelValue.value=c:r.value=c}}),{textColorClasses:u,textColorStyles:d}=(0,he.aH)(()=>{if(!e.error&&!e.disabled)return c.value?e.color:e.baseColor}),{backgroundColorClasses:h,backgroundColorStyles:p}=(0,he.z6)(()=>!c.value||e.error||e.disabled?e.baseColor:e.color),f=(0,i.EW)(()=>c.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:a,falseValue:s,model:c,textColorClasses:u,textColorStyles:d,backgroundColorClasses:h,backgroundColorStyles:p,icon:f}}const Gt=(0,w.RW)()({name:"VSelectionControl",directives:{vRipple:xt.A},inheritAttrs:!1,props:Wt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{group:l,densityClasses:c,icon:u,model:d,textColorClasses:h,textColorStyles:p,backgroundColorClasses:f,backgroundColorStyles:m,trueValue:v}=Ht(e),g=(0,i.Bi)(),y=(0,s.IJ)(!1),_=(0,s.IJ)(!1),b=(0,s.KR)(),x=(0,s.lW)(()=>e.id||`input-${g}`),S=(0,s.lW)(()=>!e.disabled&&!e.readonly);function M(e){S.value&&(y.value=!0,!1!==(0,o.B5)(e.target,":focus-visible")&&(_.value=!0))}function w(){y.value=!1,_.value=!1}function T(e){e.stopPropagation()}function A(t){S.value?(e.readonly&&l&&(0,i.dY)(()=>l.forceUpdate()),d.value=t.target.checked):b.value&&(b.value.checked=d.value)}return l?.onForceUpdate(()=>{b.value&&(b.value.checked=d.value)}),(0,E.C)(()=>{const t=a.label?a.label({label:e.label,props:{for:x.value}}):e.label,[s,l]=(0,o.ph)(n),g=(0,i.Lk)("input",(0,i.v6)({ref:b,checked:d.value,disabled:!!e.disabled,id:x.value,onBlur:w,onFocus:M,onInput:A,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:v.value,name:e.name,"aria-checked":"checkbox"===e.type?d.value:void 0},l),null);return(0,i.Lk)("div",(0,i.v6)({class:["v-selection-control",{"v-selection-control--dirty":d.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":y.value,"v-selection-control--focus-visible":_.value,"v-selection-control--inline":e.inline},c.value,e.class]},s,{style:e.style}),[(0,i.Lk)("div",{class:(0,r.C4)(["v-selection-control__wrapper",h.value]),style:(0,r.Tr)(p.value)},[a.default?.({backgroundColorClasses:f,backgroundColorStyles:m}),(0,i.bo)((0,i.Lk)("div",{class:(0,r.C4)(["v-selection-control__input"])},[a.input?.({model:d,textColorClasses:h,textColorStyles:p,backgroundColorClasses:f,backgroundColorStyles:m,inputNode:g,icon:u.value,props:{onFocus:M,onBlur:w,id:x.value}})??(0,i.Lk)(i.FK,null,[u.value&&(0,i.bF)(it,{key:"icon",icon:u.value},null),g])]),[[xt.A,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),t&&(0,i.bF)(Ft,{for:x.value,onClick:T},{default:()=>[t]})])}),{isFocused:y,input:b}}}),jt=(0,u.j)({indeterminate:Boolean,indeterminateIcon:{type:Je.TX,default:"$checkboxIndeterminate"},...Wt({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Xt=(0,w.RW)()({name:"VCheckboxBtn",props:jt(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,Te.q)(e,"indeterminate"),a=(0,Te.q)(e,"modelValue");function l(e){r.value&&(r.value=!1)}const c=(0,s.lW)(()=>r.value?e.indeterminateIcon:e.falseIcon),u=(0,s.lW)(()=>r.value?e.indeterminateIcon:e.trueIcon);return(0,E.C)(()=>{const t=(0,o.cJ)(Gt.filterProps(e),["modelValue"]);return(0,i.bF)(Gt,(0,i.v6)(t,{modelValue:a.value,"onUpdate:modelValue":[e=>a.value=e,l],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:c.value,trueIcon:u.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}});var qt=n(2834),$t=n(7565);function Yt(e){let{selectedElement:t,containerElement:n,isRtl:i,isHorizontal:r}=e;const a=en(r,n),s=Qt(r,i,n),o=en(r,t),l=tn(r,t),c=.4*o;return s>l?l-c:s+a<l+o?l-a+o+c:s}function Kt(e){let{selectedElement:t,containerElement:n,isHorizontal:i}=e;const r=en(i,n),a=tn(i,t),s=en(i,t);return a-r/2+s/2}function Zt(e,t){const n=e?"scrollWidth":"scrollHeight";return t?.[n]||0}function Jt(e,t){const n=e?"clientWidth":"clientHeight";return t?.[n]||0}function Qt(e,t,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:r,scrollWidth:a}=n;return e?t?a-r+i:i:n.scrollTop}function en(e,t){const n=e?"offsetWidth":"offsetHeight";return t?.[n]||0}function tn(e,t){const n=e?"offsetLeft":"offsetTop";return t?.[n]||0}const nn=Symbol.for("vuetify:v-slide-group"),rn=(0,u.j)({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:nn},nextIcon:{type:Je.TX,default:"$next"},prevIcon:{type:Je.TX,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>"boolean"===typeof e||["always","desktop","mobile"].includes(e)},...(0,a.u)(),...(0,qt.hx)({mobile:null}),...C(),...We({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),an=(0,w.RW)()({name:"VSlideGroup",props:rn(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:a}=(0,S.IA)(),{displayClasses:u,mobile:d}=(0,qt._F)(e),h=je(e,e.symbol),p=(0,s.IJ)(!1),f=(0,s.IJ)(0),m=(0,s.IJ)(0),v=(0,s.IJ)(0),g=(0,i.EW)(()=>"horizontal"===e.direction),{resizeRef:y,contentRect:_}=c(),{resizeRef:b,contentRect:x}=c(),M=(0,$t.pP)(),w=(0,i.EW)(()=>({container:y.el,duration:200,easing:"easeOutQuart"})),T=(0,i.EW)(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[0]):-1),A=(0,i.EW)(()=>h.selected.value.length?h.items.value.findIndex(e=>e.id===h.selected.value[h.selected.value.length-1]):-1);if(l.ZK){let t=-1;(0,i.wB)(()=>[h.selected.value,_.value,x.value,g.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(_.value&&x.value){const e=g.value?"width":"height";m.value=_.value[e],v.value=x.value[e],p.value=m.value+1<v.value}if(T.value>=0&&b.el){const t=b.el.children[A.value];R(t,e.centerActive)}})})}const C=(0,s.IJ)(!1);function R(e,t){let n=0;n=t?Kt({containerElement:y.el,isHorizontal:g.value,selectedElement:e}):Yt({containerElement:y.el,isHorizontal:g.value,isRtl:a.value,selectedElement:e}),L(n)}function L(e){if(!l.ZK||!y.el)return;const t=en(g.value,y.el),n=Qt(g.value,a.value,y.el),i=Zt(g.value,y.el);if(!(i<=t||Math.abs(e-n)<16)){if(g.value&&a.value&&y.el){const{scrollWidth:t,offsetWidth:n}=y.el;e=t-n-e}g.value?M.horizontal(e,w.value):M(e,w.value)}}function P(e){const{scrollTop:t,scrollLeft:n}=e.target;f.value=g.value?n:t}function I(e){if(C.value=!0,p.value&&b.el)for(const t of e.composedPath())for(const e of b.el.children)if(e===t)return void R(e)}function D(e){C.value=!1}let O=!1;function N(e){O||C.value||e.relatedTarget&&b.el?.contains(e.relatedTarget)||B(),O=!1}function k(){O=!0}function F(e){function t(t){e.preventDefault(),B(t)}b.el&&(g.value?"ArrowRight"===e.key?t(a.value?"prev":"next"):"ArrowLeft"===e.key&&t(a.value?"next":"prev"):"ArrowDown"===e.key?t("next"):"ArrowUp"===e.key&&t("prev"),"Home"===e.key?t("first"):"End"===e.key&&t("last"))}function U(e,t){if(!e)return;let n=e;do{n=n?.["next"===t?"nextElementSibling":"previousElementSibling"]}while(n?.hasAttribute("disabled"));return n}function B(e){if(!b.el)return;let t;if(e)if("next"===e){if(t=U(b.el.querySelector(":focus"),e),!t)return B("first")}else if("prev"===e){if(t=U(b.el.querySelector(":focus"),e),!t)return B("last")}else"first"===e?(t=b.el.firstElementChild,t?.hasAttribute("disabled")&&(t=U(t,"next"))):"last"===e&&(t=b.el.lastElementChild,t?.hasAttribute("disabled")&&(t=U(t,"prev")));else{const e=(0,o.OW)(b.el);t=e[0]}t&&t.focus({preventScroll:!0})}function V(e){const t=g.value&&a.value?-1:1,n=("prev"===e?-t:t)*m.value;let i=f.value+n;if(g.value&&a.value&&y.el){const{scrollWidth:e,offsetWidth:t}=y.el;i+=e-t}L(i)}const z=(0,i.EW)(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),W=(0,i.EW)(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return p.value||Math.abs(f.value)>0;case"mobile":return d.value||p.value||Math.abs(f.value)>0;default:return!d.value&&(p.value||Math.abs(f.value)>0)}}),H=(0,i.EW)(()=>Math.abs(f.value)>1),G=(0,i.EW)(()=>{if(!y.value)return!1;const e=Zt(g.value,y.el),t=Jt(g.value,y.el),n=e-t;return n-Math.abs(f.value)>1});return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-slide-group",{"v-slide-group--vertical":!g.value,"v-slide-group--has-affixes":W.value,"v-slide-group--is-overflowing":p.value},u.value,e.class]),style:(0,r.Tr)(e.style),tabindex:C.value||h.selected.value.length?-1:0,onFocus:N},{default:()=>[W.value&&(0,i.Lk)("div",{key:"prev",class:(0,r.C4)(["v-slide-group__prev",{"v-slide-group__prev--disabled":!H.value}]),onMousedown:k,onClick:()=>H.value&&V("prev")},[n.prev?.(z.value)??(0,i.bF)(q,null,{default:()=>[(0,i.bF)(it,{icon:a.value?e.nextIcon:e.prevIcon},null)]})]),(0,i.Lk)("div",{key:"container",ref:y,class:(0,r.C4)(["v-slide-group__container",e.contentClass]),onScroll:P},[(0,i.Lk)("div",{ref:b,class:"v-slide-group__content",onFocusin:I,onFocusout:D,onKeydown:F},[n.default?.(z.value)])]),W.value&&(0,i.Lk)("div",{key:"next",class:(0,r.C4)(["v-slide-group__next",{"v-slide-group__next--disabled":!G.value}]),onMousedown:k,onClick:()=>G.value&&V("next")},[n.next?.(z.value)??(0,i.bF)(q,null,{default:()=>[(0,i.bF)(it,{icon:a.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:h.selected,scrollTo:V,scrollOffset:f,focus:B,hasPrev:H,hasNext:G}}}),sn=Symbol.for("vuetify:v-chip-group"),on=(0,u.j)({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:o.bD},...rn(),...(0,a.u)(),...We({selectedClass:"v-chip--selected"}),...C(),...(0,M.yx)(),...Ue({variant:"tonal"})},"VChipGroup"),ln=(0,w.RW)()({name:"VChipGroup",props:on(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=(0,M.NX)(e),{isSelected:a,select:o,next:l,prev:c,selected:u}=je(e,sn);return(0,ae.Uh)({VChip:{baseColor:(0,s.lW)(()=>e.baseColor),color:(0,s.lW)(()=>e.color),disabled:(0,s.lW)(()=>e.disabled),filter:(0,s.lW)(()=>e.filter),variant:(0,s.lW)(()=>e.variant)}}),(0,E.C)(()=>{const t=an.filterProps(e);return(0,i.bF)(an,(0,i.v6)(t,{class:["v-chip-group",{"v-chip-group--column":e.column},r.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:a,select:o,next:l,prev:c,selected:u.value})]})}),{}}}),cn=(0,u.j)({activeClass:String,appendAvatar:String,appendIcon:Je.TX,baseColor:String,closable:Boolean,closeIcon:{type:Je.TX,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:Je.TX,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Je.TX,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:(0,o.uR)(),onClickOnce:(0,o.uR)(),..._e(),...(0,a.u)(),...Oe(),...xe(),...He(),...pe(),...(0,_t.WC)(),...et(),...C({tag:"span"}),...(0,M.yx)(),...Ue({variant:"tonal"})},"VChip"),un=(0,w.RW)()({name:"VChip",directives:{vRipple:xt.A},props:cn(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:o}=t;const{t:l}=(0,S.Ym)(),{borderClasses:c}=be(e),{densityClasses:u}=Ne(e),{elevationClasses:d}=Se(e),{roundedClasses:h}=fe(e),{sizeClasses:p}=tt(e),{themeClasses:f}=(0,M.NX)(e),m=(0,Te.q)(e,"modelValue"),v=Ge(e,sn,!1),g=(0,_t.iE)(e,n),y=(0,s.lW)(()=>!1!==e.link&&g.isLink.value),_=(0,i.EW)(()=>!e.disabled&&!1!==e.link&&(!!v||e.link||g.isClickable.value)),b=(0,s.lW)(()=>({"aria-label":l(e.closeLabel),disabled:e.disabled,onClick(e){e.preventDefault(),e.stopPropagation(),m.value=!1,a("click:close",e)}})),{colorClasses:x,colorStyles:w,variantClasses:E}=Be(()=>{const t=!v||v.isSelected.value;return{color:t?e.color??e.baseColor:e.baseColor,variant:e.variant}});function T(e){a("click",e),_.value&&(g.navigate?.(e),v?.toggle())}function A(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),T(e))}return()=>{const t=g.isLink.value?"a":e.tag,n=!(!e.appendIcon&&!e.appendAvatar),a=!(!n&&!o.append),s=!(!o.close&&!e.closable),l=!(!o.filter&&!e.filter)&&v,S=!(!e.prependIcon&&!e.prependAvatar),M=!(!S&&!o.prepend);return m.value&&(0,i.bo)((0,i.bF)(t,(0,i.v6)({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":_.value,"v-chip--filter":l,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&g.isActive?.value},f.value,c.value,x.value,u.value,d.value,h.value,p.value,E.value,v?.selectedClass.value,e.class],style:[w.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:_.value?0:void 0,onClick:T,onKeydown:_.value&&!y.value&&A},g.linkProps),{default:()=>[Fe(_.value,"v-chip"),l&&(0,i.bF)(re,{key:"filter"},{default:()=>[(0,i.bo)((0,i.Lk)("div",{class:"v-chip__filter"},[o.filter?(0,i.bF)(oe,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},o.filter):(0,i.bF)(it,{key:"filter-icon",icon:e.filterIcon},null)]),[[P.aG,v.isSelected.value]])]}),M&&(0,i.Lk)("div",{key:"prepend",class:"v-chip__prepend"},[o.prepend?(0,i.bF)(oe,{key:"prepend-defaults",disabled:!S,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},o.prepend):(0,i.Lk)(i.FK,null,[e.prependIcon&&(0,i.bF)(it,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&(0,i.bF)(Nt,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),(0,i.Lk)("div",{class:"v-chip__content","data-no-activator":""},[o.default?.({isSelected:v?.isSelected.value,selectedClass:v?.selectedClass.value,select:v?.select,toggle:v?.toggle,value:v?.value.value,disabled:e.disabled})??(0,r.v_)(e.text)]),a&&(0,i.Lk)("div",{key:"append",class:"v-chip__append"},[o.append?(0,i.bF)(oe,{key:"append-defaults",disabled:!n,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},o.append):(0,i.Lk)(i.FK,null,[e.appendIcon&&(0,i.bF)(it,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&(0,i.bF)(Nt,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),s&&(0,i.Lk)("button",(0,i.v6)({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},b.value),[o.close?(0,i.bF)(oe,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},o.close):(0,i.bF)(it,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[xt.A,_.value&&e.ripple,null]])}}}),dn=(0,u.j)({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...(0,a.u)(),...(0,M.yx)()},"VDivider"),hn=(0,w.RW)()({name:"VDivider",props:dn(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:s}=(0,M.NX)(e),{textColorClasses:l,textColorStyles:c}=(0,he.aH)(()=>e.color),u=(0,i.EW)(()=>{const t={};return e.length&&(t[e.vertical?"height":"width"]=(0,o.Dg)(e.length)),e.thickness&&(t[e.vertical?"borderRightWidth":"borderTopWidth"]=(0,o.Dg)(e.thickness)),t});return(0,E.C)(()=>{const t=(0,i.Lk)("hr",{class:(0,r.C4)([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},s.value,l.value,e.class]),style:(0,r.Tr)([u.value,c.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":n.role&&"separator"!==n.role?void 0:e.vertical?"vertical":"horizontal",role:`${n.role||"separator"}`},null);return a.default?(0,i.Lk)("div",{class:(0,r.C4)(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[t,(0,i.Lk)("div",{class:"v-divider__content"},[a.default()]),t]):t}),{}}});Symbol.for("vuetify:depth");const pn=Symbol.for("vuetify:list");function fn(){let{filterable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterable:!1};const t=(0,i.WQ)(pn,{filterable:!1,hasPrepend:(0,s.IJ)(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:(0,s.IJ)(!1),updateHasPrepend:e=>{e&&(n.hasPrepend.value=e)}};return(0,i.Gt)(pn,n),t}function mn(){return(0,i.WQ)(pn,null)}const vn=e=>{const t={activate:t=>{let{id:n,value:i,activated:r}=t;return n=(0,s.ux)(n),e&&!i&&1===r.size&&r.has(n)||(i?r.add(n):r.delete(n)),r},in:(e,n,i)=>{let r=new Set;if(null!=e)for(const a of(0,o.BN)(e))r=t.activate({id:a,value:!0,activated:new Set(r),children:n,parents:i});return r},out:e=>Array.from(e)};return t},gn=e=>{const t=vn(e),n={activate:e=>{let{activated:n,id:i,...r}=e;i=(0,s.ux)(i);const a=n.has(i)?new Set([i]):new Set;return t.activate({...r,id:i,activated:a})},in:(e,n,i)=>{let r=new Set;if(null!=e){const a=(0,o.BN)(e);a.length&&(r=t.in(a.slice(0,1),n,i))}return r},out:(e,n,i)=>t.out(e,n,i)};return n},yn=e=>{const t=vn(e),n={activate:e=>{let{id:n,activated:i,children:r,...a}=e;return n=(0,s.ux)(n),r.has(n)?i:t.activate({id:n,activated:i,children:r,...a})},in:t.in,out:t.out};return n},_n=e=>{const t=gn(e),n={activate:e=>{let{id:n,activated:i,children:r,...a}=e;return n=(0,s.ux)(n),r.has(n)?i:t.activate({id:n,activated:i,children:r,...a})},in:t.in,out:t.out};return n},bn={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){const e=new Set;e.add(t);let n=r.get(t);while(null!=n)e.add(n),n=r.get(n);return e}return i.delete(t),i},select:()=>null},xn={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){let e=r.get(t);i.add(t);while(null!=e&&e!==t)i.add(e),e=r.get(e);return i}return i.delete(t),i},select:()=>null},Sn={open:xn.open,select:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(!n)return i;const a=[];let s=r.get(t);while(null!=s)a.push(s),s=r.get(s);return new Set(a)}};n(8237);const Mn=e=>{const t={select:t=>{let{id:n,value:i,selected:r}=t;if(n=(0,s.ux)(n),e&&!i){const e=Array.from(r.entries()).reduce((e,t)=>{let[n,i]=t;return"on"===i&&e.push(n),e},[]);if(1===e.length&&e[0]===n)return r}return r.set(n,i?"on":"off"),r},in:(e,n,i,r)=>{const a=new Map;for(const s of e||[])t.select({id:s,value:!0,selected:a,children:n,parents:i,disabled:r});return a},out:e=>{const t=[];for(const[n,i]of e.entries())"on"===i&&t.push(n);return t}};return t},wn=e=>{const t=Mn(e),n={select:e=>{let{selected:n,id:i,...r}=e;i=(0,s.ux)(i);const a=n.has(i)?new Map([[i,n.get(i)]]):new Map;return t.select({...r,id:i,selected:a})},in:(e,n,i,r)=>e?.length?t.in(e.slice(0,1),n,i,r):new Map,out:(e,n,i)=>t.out(e,n,i)};return n},En=e=>{const t=Mn(e),n={select:e=>{let{id:n,selected:i,children:r,...a}=e;return n=(0,s.ux)(n),r.has(n)?i:t.select({id:n,selected:i,children:r,...a})},in:t.in,out:t.out};return n},Tn=e=>{const t=wn(e),n={select:e=>{let{id:n,selected:i,children:r,...a}=e;return n=(0,s.ux)(n),r.has(n)?i:t.select({id:n,selected:i,children:r,...a})},in:t.in,out:t.out};return n},An=e=>{const t={select:t=>{let{id:n,value:i,selected:r,children:a,parents:o,disabled:l}=t;n=(0,s.ux)(n);const c=new Map(r),u=[n];while(u.length){const e=u.shift();l.has(e)||r.set((0,s.ux)(e),i?"on":"off"),a.has(e)&&u.push(...a.get(e))}let d=(0,s.ux)(o.get(n));while(d){let e=!0,t=!0;for(const n of a.get(d)){const i=(0,s.ux)(n);if(!l.has(i)&&("on"!==r.get(i)&&(e=!1),r.has(i)&&"off"!==r.get(i)&&(t=!1),!e&&!t))break}r.set(d,e?"on":t?"off":"indeterminate"),d=(0,s.ux)(o.get(d))}if(e&&!i){const e=Array.from(r.entries()).reduce((e,t)=>{let[n,i]=t;return"on"===i&&e.push(n),e},[]);if(0===e.length)return c}return r},in:(e,n,i,r)=>{let a=new Map;for(const s of e||[])a=t.select({id:s,value:!0,selected:a,children:n,parents:i,disabled:r});return a},out:(e,t)=>{const n=[];for(const[i,r]of e.entries())"on"!==r||t.has(i)||n.push(i);return n}};return t},Cn=e=>{const t=An(e),n={select:t.select,in:t.in,out:(e,t,n)=>{const i=[];for(const[r,a]of e.entries())if("on"===a){if(n.has(r)){const t=n.get(r);if("on"===e.get(t))continue}i.push(r)}return i}};return n},Rn=Symbol.for("vuetify:nested"),Ln={id:(0,s.IJ)(),root:{register:()=>null,unregister:()=>null,children:(0,s.KR)(new Map),parents:(0,s.KR)(new Map),disabled:(0,s.KR)(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:(0,s.KR)(!1),selectable:(0,s.KR)(!1),opened:(0,s.KR)(new Set),activated:(0,s.KR)(new Set),selected:(0,s.KR)(new Map),selectedValues:(0,s.KR)([]),getPath:()=>[]}},Pn=(0,u.j)({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),In=e=>{let t=!1;const n=(0,s.IJ)(new Map),r=(0,s.IJ)(new Map),a=(0,s.IJ)(new Set),o=(0,Te.q)(e,"opened",e.opened,e=>new Set(Array.isArray(e)?e.map(e=>(0,s.ux)(e)):e),e=>[...e.values()]),l=(0,i.EW)(()=>{if("object"===typeof e.activeStrategy)return e.activeStrategy;if("function"===typeof e.activeStrategy)return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return yn(e.mandatory);case"single-leaf":return _n(e.mandatory);case"independent":return vn(e.mandatory);case"single-independent":default:return gn(e.mandatory)}}),c=(0,i.EW)(()=>{if("object"===typeof e.selectStrategy)return e.selectStrategy;if("function"===typeof e.selectStrategy)return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return Tn(e.mandatory);case"leaf":return En(e.mandatory);case"independent":return Mn(e.mandatory);case"single-independent":return wn(e.mandatory);case"trunk":return Cn(e.mandatory);case"classic":default:return An(e.mandatory)}}),u=(0,i.EW)(()=>{if("object"===typeof e.openStrategy)return e.openStrategy;switch(e.openStrategy){case"list":return Sn;case"single":return bn;case"multiple":default:return xn}}),p=(0,Te.q)(e,"activated",e.activated,e=>l.value.in(e,n.value,r.value),e=>l.value.out(e,n.value,r.value)),f=(0,Te.q)(e,"selected",e.selected,e=>c.value.in(e,n.value,r.value,a.value),e=>c.value.out(e,n.value,r.value));function m(e){const t=[];let n=(0,s.ux)(e);while(null!=n)t.unshift(n),n=r.value.get(n);return t}(0,i.xo)(()=>{t=!0});const v=(0,d.n)("nested"),g=new Set,y={id:(0,s.IJ)(),root:{opened:o,activatable:(0,s.lW)(()=>e.activatable),selectable:(0,s.lW)(()=>e.selectable),activated:p,selected:f,selectedValues:(0,i.EW)(()=>{const e=[];for(const[t,n]of f.value.entries())"on"===n&&e.push(t);return e}),register:(e,t,i,s)=>{if(g.has(e)){const n=m(e).map(String).join(" -> "),i=m(t).concat(e).map(String).join(" -> ");return void(0,h.yA)(`Multiple nodes with the same ID\n\t${n}\n\t${i}`)}g.add(e),t&&e!==t&&r.value.set(e,t),i&&a.value.add(e),s&&n.value.set(e,[]),null!=t&&n.value.set(t,[...n.value.get(t)||[],e])},unregister:e=>{if(t)return;g.delete(e),n.value.delete(e),a.value.delete(e);const i=r.value.get(e);if(i){const t=n.value.get(i)??[];n.value.set(i,t.filter(t=>t!==e))}r.value.delete(e)},open:(e,t,i)=>{v.emit("click:open",{id:e,value:t,path:m(e),event:i});const a=u.value.open({id:e,value:t,opened:new Set(o.value),children:n.value,parents:r.value,event:i});a&&(o.value=a)},openOnSelect:(e,t,i)=>{const a=u.value.select({id:e,value:t,selected:new Map(f.value),opened:new Set(o.value),children:n.value,parents:r.value,event:i});a&&(o.value=a)},select:(e,t,i)=>{v.emit("click:select",{id:e,value:t,path:m(e),event:i});const s=c.value.select({id:e,value:t,selected:new Map(f.value),children:n.value,parents:r.value,disabled:a.value,event:i});s&&(f.value=s),y.root.openOnSelect(e,t,i)},activate:(t,i,a)=>{if(!e.activatable)return y.root.select(t,!0,a);v.emit("click:activate",{id:t,value:i,path:m(t),event:a});const s=l.value.activate({id:t,value:i,activated:new Set(p.value),children:n.value,parents:r.value,event:a});if(s.size!==p.value.size)p.value=s;else{for(const e of s)if(!p.value.has(e))return void(p.value=s);for(const e of p.value)if(!s.has(e))return void(p.value=s)}},children:n,parents:r,disabled:a,getPath:m}};return(0,i.Gt)(Rn,y),y.root},Dn=(e,t,n)=>{const r=(0,i.WQ)(Rn,Ln),a=Symbol("nested item"),o=(0,i.EW)(()=>(0,s.ux)((0,s.BA)(e))??a),l={...r,id:o,open:(e,t)=>r.root.open(o.value,e,t),openOnSelect:(e,t)=>r.root.openOnSelect(o.value,e,t),isOpen:(0,i.EW)(()=>r.root.opened.value.has(o.value)),parent:(0,i.EW)(()=>r.root.parents.value.get(o.value)),activate:(e,t)=>r.root.activate(o.value,e,t),isActivated:(0,i.EW)(()=>r.root.activated.value.has(o.value)),select:(e,t)=>r.root.select(o.value,e,t),isSelected:(0,i.EW)(()=>"on"===r.root.selected.value.get(o.value)),isIndeterminate:(0,i.EW)(()=>"indeterminate"===r.root.selected.value.get(o.value)),isLeaf:(0,i.EW)(()=>!r.root.children.value.get(o.value)),isGroupActivator:r.isGroupActivator};return(0,i.KC)(()=>{r.isGroupActivator||r.root.register(o.value,r.id.value,(0,s.BA)(t),n)}),(0,i.xo)(()=>{r.isGroupActivator||r.root.unregister(o.value)}),n&&(0,i.Gt)(Rn,l),l},On=()=>{const e=(0,i.WQ)(Rn,Ln);(0,i.Gt)(Rn,{...e,isGroupActivator:!0})},Nn=(0,w.pM)({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return On(),()=>n.default?.()}}),kn=(0,u.j)({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Je.TX,default:"$collapse"},disabled:Boolean,expandIcon:{type:Je.TX,default:"$expand"},rawId:[String,Number],prependIcon:Je.TX,appendIcon:Je.TX,fluid:Boolean,subgroup:Boolean,title:String,value:null,...(0,a.u)(),...C()},"VListGroup"),Fn=(0,w.RW)()({name:"VListGroup",props:kn(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:s,id:o}=Dn(()=>e.value,()=>e.disabled,!0),l=(0,i.EW)(()=>`v-list-group--id-${String(e.rawId??o.value)}`),c=mn(),{isBooted:u}=Re();function d(e){["INPUT","TEXTAREA"].includes(e.target?.tagName)||s(!a.value,e)}const h=(0,i.EW)(()=>({onClick:d,class:"v-list-group__header",id:l.value})),p=(0,i.EW)(()=>a.value?e.collapseIcon:e.expandIcon),f=(0,i.EW)(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&p.value,appendIcon:e.appendIcon||!e.subgroup&&p.value,title:e.title,value:e.value}}));return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-list-group",{"v-list-group--prepend":c?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:(0,r.Tr)(e.style)},{default:()=>[n.activator&&(0,i.bF)(oe,{defaults:f.value},{default:()=>[(0,i.bF)(Nn,null,{default:()=>[n.activator({props:h.value,isOpen:a.value})]})]}),(0,i.bF)(me.M,{transition:{component:ie},disabled:!u.value},{default:()=>[(0,i.bo)((0,i.Lk)("div",{class:"v-list-group__items",role:"group","aria-labelledby":l.value},[n.default?.()]),[[P.aG,a.value]])]})]})),{isOpen:a}}}),Un=(0,u.j)({opacity:[Number,String],...(0,a.u)(),...C()},"VListItemSubtitle"),Bn=(0,w.RW)()({name:"VListItemSubtitle",props:Un(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-list-item-subtitle",e.class]),style:(0,r.Tr)([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),Vn=At("v-list-item-title"),zn=(0,u.j)({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Je.TX,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Je.TX,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:(0,o.uR)(),onClickOnce:(0,o.uR)(),..._e(),...(0,a.u)(),...Oe(),...(0,le.X)(),...xe(),...pe(),...(0,_t.WC)(),...C(),...(0,M.yx)(),...Ue({variant:"text"})},"VListItem"),Wn=(0,w.RW)()({name:"VListItem",directives:{vRipple:xt.A},props:zn(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:o}=t;const l=(0,_t.iE)(e,n),c=(0,i.EW)(()=>void 0===e.value?l.href.value:e.value),{activate:u,isActivated:d,select:p,isOpen:f,isSelected:m,isIndeterminate:v,isGroupActivator:g,root:y,parent:_,openOnSelect:b,id:x}=Dn(c,()=>e.disabled,!1),S=mn(),w=(0,i.EW)(()=>!1!==e.active&&(e.active||l.isActive?.value||(y.activatable.value?d.value:m.value))),T=(0,s.lW)(()=>!1!==e.link&&l.isLink.value),A=(0,i.EW)(()=>!!S&&(y.selectable.value||y.activatable.value||null!=e.value)),C=(0,i.EW)(()=>!e.disabled&&!1!==e.link&&(e.link||l.isClickable.value||A.value)),R=(0,s.lW)(()=>e.rounded||e.nav),L=(0,s.lW)(()=>e.color??e.activeColor),P=(0,s.lW)(()=>({color:w.value?L.value??e.baseColor:e.baseColor,variant:e.variant}));function I(){null!=_.value&&y.open(_.value,!0),b(!0)}(0,i.wB)(()=>l.isActive?.value,e=>{e&&I()}),(0,i.KC)(()=>{l.isActive?.value&&I()});const{themeClasses:D}=(0,M.NX)(e),{borderClasses:O}=be(e),{colorClasses:N,colorStyles:k,variantClasses:F}=Be(P),{densityClasses:U}=Ne(e),{dimensionStyles:B}=(0,le.S)(e),{elevationClasses:V}=Se(e),{roundedClasses:z}=fe(R),W=(0,s.lW)(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),H=(0,s.lW)(()=>void 0!==e.ripple&&e.ripple&&S?.filterable?{keys:["Enter"]}:e.ripple),G=(0,i.EW)(()=>({isActive:w.value,select:p,isOpen:f.value,isSelected:m.value,isIndeterminate:v.value}));function j(t){o("click",t),["INPUT","TEXTAREA"].includes(t.target?.tagName)||C.value&&(l.navigate?.(t),g||(y.activatable.value?u(!d.value,t):(y.selectable.value||null!=e.value)&&p(!m.value,t)))}function X(e){const t=e.target;["INPUT","TEXTAREA"].includes(t.tagName)||("Enter"===e.key||" "===e.key&&!S?.filterable)&&(e.preventDefault(),e.stopPropagation(),e.target.dispatchEvent(new MouseEvent("click",e)))}return(0,E.C)(()=>{const t=T.value?"a":e.tag,n=a.title||null!=e.title,s=a.subtitle||null!=e.subtitle,o=!(!e.appendAvatar&&!e.appendIcon),c=!(!o&&!a.append),u=!(!e.prependAvatar&&!e.prependIcon),p=!(!u&&!a.prepend);return S?.updateHasPrepend(p),e.activeColor&&(0,h.CI)("active-color",["color","base-color"]),(0,i.bo)((0,i.bF)(t,(0,i.v6)({class:["v-list-item",{"v-list-item--active":w.value,"v-list-item--disabled":e.disabled,"v-list-item--link":C.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!p&&S?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&w.value},D.value,O.value,N.value,U.value,V.value,W.value,z.value,F.value,e.class],style:[k.value,B.value,e.style],tabindex:C.value?S?-2:0:void 0,"aria-selected":A.value?y.activatable.value?d.value:y.selectable.value?m.value:w.value:void 0,onClick:j,onKeydown:C.value&&!T.value&&X},l.linkProps),{default:()=>[Fe(C.value||w.value,"v-list-item"),p&&(0,i.Lk)("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?(0,i.bF)(oe,{key:"prepend-defaults",disabled:!u,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[a.prepend?.(G.value)]}):(0,i.Lk)(i.FK,null,[e.prependAvatar&&(0,i.bF)(Nt,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&(0,i.bF)(it,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),(0,i.Lk)("div",{class:"v-list-item__spacer"},null)]),(0,i.Lk)("div",{class:"v-list-item__content","data-no-activator":""},[n&&(0,i.bF)(Vn,{key:"title"},{default:()=>[a.title?.({title:e.title})??(0,r.v_)(e.title)]}),s&&(0,i.bF)(Bn,{key:"subtitle"},{default:()=>[a.subtitle?.({subtitle:e.subtitle})??(0,r.v_)(e.subtitle)]}),a.default?.(G.value)]),c&&(0,i.Lk)("div",{key:"append",class:"v-list-item__append"},[a.append?(0,i.bF)(oe,{key:"append-defaults",disabled:!o,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[a.append?.(G.value)]}):(0,i.Lk)(i.FK,null,[e.appendIcon&&(0,i.bF)(it,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&(0,i.bF)(Nt,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),(0,i.Lk)("div",{class:"v-list-item__spacer"},null)])]}),[[xt.A,C.value&&H.value]])}),{activate:u,isActivated:d,isGroupActivator:g,isSelected:m,list:S,select:p,root:y,id:x,link:l}}}),Hn=(0,u.j)({color:String,inset:Boolean,sticky:Boolean,title:String,...(0,a.u)(),...C()},"VListSubheader"),Gn=(0,w.RW)()({name:"VListSubheader",props:Hn(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:s}=(0,he.aH)(()=>e.color);return(0,E.C)(()=>{const t=!(!n.default&&!e.title);return(0,i.bF)(e.tag,{class:(0,r.C4)(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:(0,r.Tr)([{textColorStyles:s},e.style])},{default:()=>[t&&(0,i.Lk)("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),jn=(0,u.j)({items:Array,returnObject:Boolean},"VListChildren"),Xn=(0,w.RW)()({name:"VListChildren",props:jn(),setup(e,t){let{slots:n}=t;return fn(),()=>n.default?.()??e.items?.map(t=>{let{children:r,props:a,type:s,raw:o}=t;if("divider"===s)return n.divider?.({props:a})??(0,i.bF)(hn,a,null);if("subheader"===s)return n.subheader?.({props:a})??(0,i.bF)(Gn,a,null);const l={subtitle:n.subtitle?e=>n.subtitle?.({...e,item:o}):void 0,prepend:n.prepend?e=>n.prepend?.({...e,item:o}):void 0,append:n.append?e=>n.append?.({...e,item:o}):void 0,title:n.title?e=>n.title?.({...e,item:o}):void 0},c=Fn.filterProps(a);return r?(0,i.bF)(Fn,(0,i.v6)(c,{value:e.returnObject?o:a?.value,rawId:a?.value}),{activator:t=>{let{props:r}=t;const s=(0,i.v6)(a,r,{value:e.returnObject?o:a.value});return n.header?n.header({props:s}):(0,i.bF)(Wn,s,l)},default:()=>(0,i.bF)(Xn,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:a}):(0,i.bF)(Wn,(0,i.v6)(a,{value:e.returnObject?o:a.value}),l)})}}),qn=(0,u.j)({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),$n=new Set(["item","divider","subheader"]);function Yn(e,t){const n=(0,o.TD)(t,e.itemTitle,t),i=(0,o.TD)(t,e.itemValue,n),r=(0,o.TD)(t,e.itemChildren),a=!0===e.itemProps?"object"!==typeof t||null==t||Array.isArray(t)?void 0:"children"in t?(0,o.cJ)(t,["children"]):t:(0,o.TD)(t,e.itemProps);let s=(0,o.TD)(t,e.itemType,"item");$n.has(s)||(s="item");const l={title:n,value:i,...a};return{type:s,title:String(l.title??""),value:l.value,props:l,children:"item"===s&&Array.isArray(r)?Kn(e,r):void 0,raw:t}}function Kn(e,t){const n=(0,o.Up)(e,Yn.neededProps),i=[];for(const r of t)i.push(Yn(n,r));return i}function Zn(e){const t=(0,i.EW)(()=>Kn(e,e.items)),n=(0,i.EW)(()=>t.value.some(e=>null===e.value)),r=(0,s.IJ)(new Map),a=(0,s.IJ)([]);function l(i){const s=r.value,l=t.value,c=a.value,u=n.value,d=e.returnObject,h=!!e.valueComparator,p=e.valueComparator||o.bD,f=(0,o.Up)(e,Yn.neededProps),m=[];e:for(const e of i){if(!u&&null===e)continue;if(d&&"string"===typeof e){m.push(Yn(f,e));continue}const t=s.get(e);if(!h&&t)m.push(...t);else{for(const t of h?l:c)if(p(e,t.value)){m.push(t);continue e}m.push(Yn(f,e))}}return m}function c(t){return e.returnObject?t.map(e=>{let{raw:t}=e;return t}):t.map(e=>{let{value:t}=e;return t})}return(0,i.nT)(()=>{const e=t.value,n=new Map,i=[];for(let t=0;t<e.length;t++){const r=e[t];if((0,o.sO)(r.value)||null===r.value){let e=n.get(r.value);e||(e=[],n.set(r.value,e)),e.push(r)}else i.push(r)}r.value=n,a.value=i}),{items:t,transformIn:l,transformOut:c}}Yn.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];const Jn=new Set(["item","divider","subheader"]);function Qn(e,t){const n=(0,o.sO)(t)?t:(0,o.TD)(t,e.itemTitle),i=(0,o.sO)(t)?t:(0,o.TD)(t,e.itemValue,void 0),r=(0,o.TD)(t,e.itemChildren),a=!0===e.itemProps?(0,o.cJ)(t,["children"]):(0,o.TD)(t,e.itemProps);let s=(0,o.TD)(t,e.itemType,"item");Jn.has(s)||(s="item");const l={title:n,value:i,...a};return{type:s,title:l.title,value:l.value,props:l,children:"item"===s&&r?ei(e,r):void 0,raw:t}}function ei(e,t){const n=[];for(const i of t)n.push(Qn(e,i));return n}function ti(e){const t=(0,i.EW)(()=>ei(e,e.items));return{items:t}}const ni=(0,u.j)({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:Je.TX,collapseIcon:Je.TX,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":(0,o.uR)(),"onClick:select":(0,o.uR)(),"onUpdate:opened":(0,o.uR)(),...Pn({selectStrategy:"single-leaf",openStrategy:"list"}),..._e(),...(0,a.u)(),...Oe(),...(0,le.X)(),...xe(),...qn(),...pe(),...C(),...(0,M.yx)(),...Ue({variant:"text"})},"VList"),ii=(0,w.RW)()({name:"VList",props:ni(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:a}=ti(e),{themeClasses:l}=(0,M.NX)(e),{backgroundColorClasses:c,backgroundColorStyles:u}=(0,he.z6)(()=>e.bgColor),{borderClasses:d}=be(e),{densityClasses:h}=Ne(e),{dimensionStyles:p}=(0,le.S)(e),{elevationClasses:f}=Se(e),{roundedClasses:m}=fe(e),{children:v,open:g,parents:y,select:_,getPath:b}=In(e),x=(0,s.lW)(()=>e.lines?`v-list--${e.lines}-line`:void 0),S=(0,s.lW)(()=>e.activeColor),w=(0,s.lW)(()=>e.baseColor),T=(0,s.lW)(()=>e.color);fn({filterable:e.filterable}),(0,ae.Uh)({VListGroup:{activeColor:S,baseColor:w,color:T,expandIcon:(0,s.lW)(()=>e.expandIcon),collapseIcon:(0,s.lW)(()=>e.collapseIcon)},VListItem:{activeClass:(0,s.lW)(()=>e.activeClass),activeColor:S,baseColor:w,color:T,density:(0,s.lW)(()=>e.density),disabled:(0,s.lW)(()=>e.disabled),lines:(0,s.lW)(()=>e.lines),nav:(0,s.lW)(()=>e.nav),slim:(0,s.lW)(()=>e.slim),variant:(0,s.lW)(()=>e.variant)}});const A=(0,s.IJ)(!1),C=(0,s.KR)();function R(e){A.value=!0}function L(e){A.value=!1}function P(e){A.value||e.relatedTarget&&C.value?.contains(e.relatedTarget)||O()}function I(e){const t=e.target;if(C.value&&("INPUT"!==t.tagName||!["Home","End"].includes(e.key))&&"TEXTAREA"!==t.tagName){if("ArrowDown"===e.key)O("next");else if("ArrowUp"===e.key)O("prev");else if("Home"===e.key)O("first");else{if("End"!==e.key)return;O("last")}e.preventDefault()}}function D(e){A.value=!0}function O(e){if(C.value)return(0,o.bq)(C.value,e)}return(0,E.C)(()=>(0,i.bF)(e.tag,{ref:C,class:(0,r.C4)(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},l.value,c.value,d.value,h.value,f.value,x.value,m.value,e.class]),style:(0,r.Tr)([u.value,p.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:R,onFocusout:L,onFocus:P,onKeydown:I,onMousedown:D},{default:()=>[(0,i.bF)(Xn,{items:a.value,returnObject:e.returnObject},n)]})),{open:g,select:_,focus:O,children:v,parents:y,getPath:b}}});var ri=n(8926),ai=n(6315),si=n(6349),oi=n(9091);const li=(0,u.j)({id:String,submenu:Boolean,disableInitialFocus:Boolean,...(0,o.cJ)((0,ri.D)({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:z}}),["absolute"])},"VMenu"),ci=(0,w.RW)()({name:"VMenu",props:li(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,Te.q)(e,"modelValue"),{scopeId:a}=(0,si.b)(),{isRtl:c}=(0,S.IA)(),u=(0,i.Bi)(),d=(0,s.lW)(()=>e.id||`v-menu-${u}`),h=(0,s.KR)(),p=(0,i.WQ)(oi.S,null),f=(0,s.IJ)(new Set);async function m(e){const t=e.relatedTarget,n=e.target;if(await(0,i.dY)(),r.value&&t!==n&&h.value?.contentEl&&h.value?.globalTop&&![document,h.value.contentEl].includes(n)&&!h.value.contentEl.contains(n)){const e=(0,o.OW)(h.value.contentEl);e[0]?.focus()}}function v(e){p?.closeParents(e)}function g(t){if(!e.disabled)if("Tab"===t.key||"Enter"===t.key&&!e.closeOnContentClick){if("Enter"===t.key&&(t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&t.target.closest("form")))return;"Enter"===t.key&&t.preventDefault();const e=(0,o.eX)((0,o.OW)(h.value?.contentEl,!1),t.shiftKey?"prev":"next",e=>e.tabIndex>=0);e||(r.value=!1,h.value?.activatorEl?.focus())}else e.submenu&&t.key===(c.value?"ArrowRight":"ArrowLeft")&&(r.value=!1,h.value?.activatorEl?.focus())}function y(t){if(e.disabled)return;const n=h.value?.contentEl;n&&r.value?"ArrowDown"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),(0,o.bq)(n,"next")):"ArrowUp"===t.key?(t.preventDefault(),t.stopImmediatePropagation(),(0,o.bq)(n,"prev")):e.submenu&&(t.key===(c.value?"ArrowRight":"ArrowLeft")?r.value=!1:t.key===(c.value?"ArrowLeft":"ArrowRight")&&(t.preventDefault(),(0,o.bq)(n,"first"))):(e.submenu?t.key===(c.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(t.key))&&(r.value=!0,t.preventDefault(),setTimeout(()=>setTimeout(()=>y(t))))}(0,i.Gt)(oi.S,{register(){f.value.add(u)},unregister(){f.value.delete(u)},closeParents(t){setTimeout(()=>{f.value.size||e.persistent||null!=t&&(!h.value?.contentEl||(0,o.jF)(t,h.value.contentEl))||(r.value=!1,p?.closeParents())},40)}}),(0,i.xo)(()=>{p?.unregister(),document.removeEventListener("focusin",m)}),(0,i.Y4)(()=>r.value=!1),(0,i.wB)(r,t=>{t?(p?.register(),l.ZK&&!e.disableInitialFocus&&document.addEventListener("focusin",m,{once:!0})):(p?.unregister(),l.ZK&&document.removeEventListener("focusin",m))},{immediate:!0});const _=(0,i.EW)(()=>(0,i.v6)({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-controls":d.value,onKeydown:y},e.activatorProps));return(0,E.C)(()=>{const t=ri.L.filterProps(e);return(0,i.bF)(ri.L,(0,i.v6)({ref:h,id:d.value,class:["v-menu",e.class],style:e.style},t,{modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,absolute:!0,activatorProps:_.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":v,onKeydown:g},a),{activator:n.activator,default:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.bF)(oe,{root:"VMenu"},{default:()=>[n.default?.(...t)]})}})}),(0,ai.O)({id:d,"ΨopenChildren":f},h)}}),ui=(0,u.j)({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...(0,a.u)(),...(0,me.m)({transition:{component:te}})},"VCounter"),di=(0,w.RW)()({name:"VCounter",functional:!0,props:ui(),setup(e,t){let{slots:n}=t;const a=(0,s.lW)(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return(0,E.C)(()=>(0,i.bF)(me.M,{transition:e.transition},{default:()=>[(0,i.bo)((0,i.Lk)("div",{class:(0,r.C4)(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:(0,r.Tr)(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[P.aG,e.active]])]})),{}}}),hi=(0,u.j)({floating:Boolean,...(0,a.u)()},"VFieldLabel"),pi=(0,w.RW)()({name:"VFieldLabel",props:hi(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(Ft,{class:(0,r.C4)(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:(0,r.Tr)(e.style)},n)),{}}});function fi(e){const{t:t}=(0,S.Ym)();function n(n){let{name:r,color:a,...s}=n;const l={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],c=e[`onClick:${r}`];function u(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),(0,o.P)(c,new PointerEvent("click",e)))}const d=c&&l?t(`$vuetify.input.${l}`,e.label??""):void 0;return(0,i.bF)(it,(0,i.v6)({icon:e[`${r}Icon`],"aria-label":d,onClick:c,onKeydown:u,color:a},s),null)}return{InputIcon:n}}const mi=(0,u.j)({focused:Boolean,"onUpdate:focused":(0,o.uR)()},"focus");function vi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)();const n=(0,Te.q)(e,"focused"),i=(0,s.lW)(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function a(){n.value=!1}return{focusClasses:i,isFocused:n,focus:r,blur:a}}const gi=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],yi=(0,u.j)({appendInnerIcon:Je.TX,bgColor:String,clearable:Boolean,clearIcon:{type:Je.TX,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:Je.TX,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>gi.includes(e)},"onClick:clear":(0,o.uR)(),"onClick:appendInner":(0,o.uR)(),"onClick:prependInner":(0,o.uR)(),...(0,a.u)(),...pt(),...pe(),...(0,M.yx)()},"VField"),_i=(0,w.RW)()({name:"VField",inheritAttrs:!1,props:{id:String,...mi(),...yi()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:l}=t;const{themeClasses:c}=(0,M.NX)(e),{loaderClasses:u}=ft(e),{focusClasses:d,isFocused:h,focus:p,blur:f}=vi(e),{InputIcon:m}=fi(e),{roundedClasses:v}=fe(e),{rtlClasses:g}=(0,S.IA)(),y=(0,s.lW)(()=>e.dirty||e.active),_=(0,s.lW)(()=>!(!e.label&&!l.label)),b=(0,s.lW)(()=>!e.singleLine&&_.value),x=(0,i.Bi)(),w=(0,i.EW)(()=>e.id||`input-${x}`),T=(0,s.lW)(()=>e.details?`${w.value}-messages`:void 0),A=(0,s.KR)(),C=(0,s.KR)(),R=(0,s.KR)(),L=(0,i.EW)(()=>["plain","underlined"].includes(e.variant)),I=(0,i.EW)(()=>e.error||e.disabled?void 0:y.value&&h.value?e.color:e.baseColor),D=(0,i.EW)(()=>{if(e.iconColor&&(!e.glow||h.value))return!0===e.iconColor?I.value:e.iconColor}),{backgroundColorClasses:O,backgroundColorStyles:N}=(0,he.z6)(()=>e.bgColor),{textColorClasses:U,textColorStyles:B}=(0,he.aH)(I);(0,i.wB)(y,e=>{if(b.value){const t=A.value.$el,n=C.value.$el;requestAnimationFrame(()=>{const i=(0,k.P)(t),r=n.getBoundingClientRect(),a=r.x-i.x,s=r.y-i.y-(i.height/2-r.height/2),l=r.width/.75,c=Math.abs(l-i.width)>1?{maxWidth:(0,o.Dg)(l)}:void 0,u=getComputedStyle(t),d=getComputedStyle(n),h=1e3*parseFloat(u.transitionDuration)||150,p=parseFloat(d.getPropertyValue("--v-field-label-scale")),f=d.getPropertyValue("color");t.style.visibility="visible",n.style.visibility="hidden",(0,k.i)(t,{transform:`translate(${a}px, ${s}px) scale(${p})`,color:f,...c},{duration:h,easing:F.B2,direction:e?"normal":"reverse"}).finished.then(()=>{t.style.removeProperty("visibility"),n.style.removeProperty("visibility")})})}},{flush:"post"});const V=(0,i.EW)(()=>({isActive:y,isFocused:h,controlRef:R,blur:f,focus:p}));function z(e){e.target!==document.activeElement&&e.preventDefault()}return(0,E.C)(()=>{const t="outlined"===e.variant,a=!(!l["prepend-inner"]&&!e.prependInnerIcon),s=!(!e.clearable&&!l.clear)&&!e.disabled,o=!!(l["append-inner"]||e.appendInnerIcon||s),h=()=>l.label?l.label({...V.value,label:e.label,props:{for:w.value}}):e.label;return(0,i.Lk)("div",(0,i.v6)({class:["v-field",{"v-field--active":y.value,"v-field--appended":o,"v-field--center-affix":e.centerAffix??!L.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":a,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!h(),[`v-field--variant-${e.variant}`]:!0},c.value,O.value,d.value,u.value,v.value,g.value,e.class],style:[N.value,e.style],onClick:z},n),[(0,i.Lk)("div",{class:"v-field__overlay"},null),(0,i.bF)(mt,{name:"v-field",active:!!e.loading,color:e.error?"error":"string"===typeof e.loading?e.loading:e.color},{default:l.loader}),a&&(0,i.Lk)("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&(0,i.bF)(m,{key:"prepend-icon",name:"prependInner",color:D.value},null),l["prepend-inner"]?.(V.value)]),(0,i.Lk)("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&b.value&&(0,i.bF)(pi,{key:"floating-label",ref:C,class:(0,r.C4)([U.value]),floating:!0,for:w.value,"aria-hidden":!y.value,style:(0,r.Tr)(B.value)},{default:()=>[h()]}),_.value&&(0,i.bF)(pi,{key:"label",ref:A,for:w.value},{default:()=>[h()]}),l.default?.({...V.value,props:{id:w.value,class:"v-field__input","aria-describedby":T.value},focus:p,blur:f})??(0,i.Lk)("div",{id:w.value,class:"v-field__input","aria-describedby":T.value},null)]),s&&(0,i.bF)(re,{key:"clear"},{default:()=>[(0,i.bo)((0,i.Lk)("div",{class:"v-field__clearable",onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},[(0,i.bF)(oe,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[l.clear?l.clear({...V.value,props:{onFocus:p,onBlur:f,onClick:e["onClick:clear"],tabindex:-1}}):(0,i.bF)(m,{name:"clear",onFocus:p,onBlur:f,tabindex:-1},null)]})]),[[P.aG,e.dirty]])]}),o&&(0,i.Lk)("div",{key:"append",class:"v-field__append-inner"},[l["append-inner"]?.(V.value),e.appendInnerIcon&&(0,i.bF)(m,{key:"append-icon",name:"appendInner",color:D.value},null)]),(0,i.Lk)("div",{class:(0,r.C4)(["v-field__outline",U.value]),style:(0,r.Tr)(B.value)},[t&&(0,i.Lk)(i.FK,null,[(0,i.Lk)("div",{class:"v-field__outline__start"},null),b.value&&(0,i.Lk)("div",{class:"v-field__outline__notch"},[(0,i.bF)(pi,{ref:C,floating:!0,for:w.value,"aria-hidden":!y.value},{default:()=>[h()]})]),(0,i.Lk)("div",{class:"v-field__outline__end"},null)]),L.value&&b.value&&(0,i.bF)(pi,{ref:C,floating:!0,for:w.value,"aria-hidden":!y.value},{default:()=>[h()]})])])}),{controlRef:R,fieldIconColor:D}}}),bi=(0,u.j)({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...(0,a.u)(),...(0,me.m)({transition:{component:te,leaveAbsolute:!0,group:!0}})},"VMessages"),xi=(0,w.RW)()({name:"VMessages",props:bi(),setup(e,t){let{slots:n}=t;const a=(0,i.EW)(()=>(0,o.BN)(e.messages)),{textColorClasses:s,textColorStyles:l}=(0,he.aH)(()=>e.color);return(0,E.C)(()=>(0,i.bF)(me.M,{transition:e.transition,tag:"div",class:(0,r.C4)(["v-messages",s.value,e.class]),style:(0,r.Tr)([l.value,e.style])},{default:()=>[e.active&&a.value.map((e,t)=>(0,i.Lk)("div",{class:"v-messages__message",key:`${t}-${a.value}`},[n.message?n.message({message:e}):e]))]})),{}}}),Si=Symbol.for("vuetify:form"),Mi=(0,u.j)({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function wi(e){const t=(0,Te.q)(e,"modelValue"),n=(0,s.lW)(()=>e.disabled),r=(0,s.lW)(()=>e.readonly),a=(0,s.IJ)(!1),o=(0,s.KR)([]),l=(0,s.KR)([]);async function c(){const t=[];let n=!0;l.value=[],a.value=!0;for(const i of o.value){const r=await i.validate();if(r.length>0&&(n=!1,t.push({id:i.id,errorMessages:r})),!n&&e.fastFail)break}return l.value=t,a.value=!1,{valid:n,errors:l.value}}function u(){o.value.forEach(e=>e.reset())}function d(){o.value.forEach(e=>e.resetValidation())}return(0,i.wB)(o,()=>{let e=0,n=0;const i=[];for(const t of o.value)!1===t.isValid?(n++,i.push({id:t.id,errorMessages:t.errorMessages})):!0===t.isValid&&e++;l.value=i,t.value=!(n>0)&&(e===o.value.length||null)},{deep:!0,flush:"post"}),(0,i.Gt)(Si,{register:e=>{let{id:t,vm:n,validate:i,reset:r,resetValidation:a}=e;o.value.some(e=>e.id===t)&&(0,h.OP)(`Duplicate input name "${t}"`),o.value.push({id:t,validate:i,reset:r,resetValidation:a,vm:(0,s.IG)(n),isValid:null,errorMessages:[]})},unregister:e=>{o.value=o.value.filter(t=>t.id!==e)},update:(e,t,n)=>{const i=o.value.find(t=>t.id===e);i&&(i.isValid=t,i.errorMessages=n)},isDisabled:n,isReadonly:r,isValidating:a,isValid:t,items:o,validateOn:(0,s.lW)(()=>e.validateOn)}),{errors:l,isDisabled:n,isReadonly:r,isValidating:a,isValid:t,items:o,validate:c,reset:u,resetValidation:d}}function Ei(e){const t=(0,i.WQ)(Si,null);return{...t,isReadonly:(0,i.EW)(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:(0,i.EW)(()=>!!(e?.disabled??t?.isDisabled.value))}}const Ti=Symbol.for("vuetify:rules");function Ai(e){const t=(0,i.WQ)(Ti,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??(0,s.lW)(e)}const Ci=(0,u.j)({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...mi()},"validation");function Ri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,d.M)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.Bi)();const r=(0,Te.q)(e,"modelValue"),a=(0,i.EW)(()=>void 0===e.validationValue?r.value:e.validationValue),l=Ei(e),c=Ai(()=>e.rules),u=(0,s.KR)([]),h=(0,s.IJ)(!0),p=(0,i.EW)(()=>!(!(0,o.BN)(""===r.value?null:r.value).length&&!(0,o.BN)(""===a.value?null:a.value).length)),f=(0,i.EW)(()=>e.errorMessages?.length?(0,o.BN)(e.errorMessages).concat(u.value).slice(0,Math.max(0,Number(e.maxErrors))):u.value),m=(0,i.EW)(()=>{let t=(e.validateOn??l.validateOn?.value)||"input";"lazy"===t&&(t="input lazy"),"eager"===t&&(t="input eager");const n=new Set(t?.split(" ")??[]);return{input:n.has("input"),blur:n.has("blur")||n.has("input")||n.has("invalid-input"),invalidInput:n.has("invalid-input"),lazy:n.has("lazy"),eager:n.has("eager")}}),v=(0,i.EW)(()=>!e.error&&!e.errorMessages?.length&&(!e.rules.length||(h.value?!u.value.length&&!m.value.lazy||null:!u.value.length))),g=(0,s.IJ)(!1),y=(0,i.EW)(()=>({[`${t}--error`]:!1===v.value,[`${t}--dirty`]:p.value,[`${t}--disabled`]:l.isDisabled.value,[`${t}--readonly`]:l.isReadonly.value})),_=(0,d.n)("validation"),b=(0,i.EW)(()=>e.name??(0,s.R1)(n));async function x(){r.value=null,await(0,i.dY)(),await S()}async function S(){h.value=!0,m.value.lazy?u.value=[]:await M(!m.value.eager)}async function M(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=[];g.value=!0;for(const i of c.value){if(n.length>=Number(e.maxErrors??1))break;const t="function"===typeof i?i:()=>i,r=await t(a.value);!0!==r&&(!1===r||"string"===typeof r?n.push(r||""):console.warn(`${r} is not a valid value. Rule functions must return boolean true or a string.`))}return u.value=n,g.value=!1,h.value=t,u.value}return(0,i.KC)(()=>{l.register?.({id:b.value,vm:_,validate:M,reset:x,resetValidation:S})}),(0,i.xo)(()=>{l.unregister?.(b.value)}),(0,i.sV)(async()=>{m.value.lazy||await M(!m.value.eager),l.update?.(b.value,v.value,f.value)}),(0,Le.Y)(()=>m.value.input||m.value.invalidInput&&!1===v.value,()=>{(0,i.wB)(a,()=>{if(null!=a.value)M();else if(e.focused){const t=(0,i.wB)(()=>e.focused,e=>{e||M(),t()})}})}),(0,Le.Y)(()=>m.value.blur,()=>{(0,i.wB)(()=>e.focused,e=>{e||M()})}),(0,i.wB)([v,f],()=>{l.update?.(b.value,v.value,f.value)}),{errorMessages:f,isDirty:p,isDisabled:l.isDisabled,isReadonly:l.isReadonly,isPristine:h,isValid:v,isValidating:g,reset:x,resetValidation:S,validate:M,validationClasses:y}}const Li=(0,u.j)({id:String,appendIcon:Je.TX,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:Je.TX,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":(0,o.uR)(),"onClick:append":(0,o.uR)(),...(0,a.u)(),...Oe(),...(0,o.Up)((0,le.X)(),["maxWidth","minWidth","width"]),...(0,M.yx)(),...Ci()},"VInput"),Pi=(0,w.RW)()({name:"VInput",props:{...Li()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:o}=t;const{densityClasses:l}=Ne(e),{dimensionStyles:c}=(0,le.S)(e),{themeClasses:u}=(0,M.NX)(e),{rtlClasses:d}=(0,S.IA)(),{InputIcon:h}=fi(e),p=(0,i.Bi)(),f=(0,i.EW)(()=>e.id||`input-${p}`),{errorMessages:m,isDirty:v,isDisabled:g,isReadonly:y,isPristine:_,isValid:b,isValidating:x,reset:w,resetValidation:T,validate:A,validationClasses:C}=Ri(e,"v-input",f),R=(0,i.EW)(()=>e.errorMessages?.length||!_.value&&m.value.length?m.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),L=(0,s.lW)(()=>R.value.length>0),P=(0,s.lW)(()=>!e.hideDetails||"auto"===e.hideDetails&&(L.value||!!a.details)),I=(0,i.EW)(()=>P.value?`${f.value}-messages`:void 0),D=(0,i.EW)(()=>({id:f,messagesId:I,isDirty:v,isDisabled:g,isReadonly:y,isPristine:_,isValid:b,isValidating:x,hasDetails:P,reset:w,resetValidation:T,validate:A})),O=(0,s.lW)(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),N=(0,s.lW)(()=>{if(e.iconColor)return!0===e.iconColor?O.value:e.iconColor});return(0,E.C)(()=>{const t=!(!a.prepend&&!e.prependIcon),n=!(!a.append&&!e.appendIcon);return(0,i.Lk)("div",{class:(0,r.C4)(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},l.value,u.value,d.value,C.value,e.class]),style:(0,r.Tr)([c.value,e.style])},[t&&(0,i.Lk)("div",{key:"prepend",class:"v-input__prepend"},[a.prepend?.(D.value),e.prependIcon&&(0,i.bF)(h,{key:"prepend-icon",name:"prepend",color:N.value},null)]),a.default&&(0,i.Lk)("div",{class:"v-input__control"},[a.default?.(D.value)]),n&&(0,i.Lk)("div",{key:"append",class:"v-input__append"},[e.appendIcon&&(0,i.bF)(h,{key:"append-icon",name:"append",color:N.value},null),a.append?.(D.value)]),P.value&&(0,i.Lk)("div",{id:I.value,class:"v-input__details",role:"alert","aria-live":"polite"},[(0,i.bF)(xi,{active:L.value,messages:R.value},{message:a.message}),a.details?.(D.value)])])}),{reset:w,resetValidation:T,validate:A,isValid:b,errorMessages:m}}});function Ii(e){function t(t,n){e.autofocus&&t&&n[0].target?.focus?.()}return{onIntersect:t}}const Di=["color","file","time","date","datetime-local","week","month"],Oi=(0,u.j)({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Li(),...yi()},"VTextField"),Ni=(0,w.RW)()({name:"VTextField",directives:{vIntersect:ve.A},inheritAttrs:!1,props:Oi(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:l}=t;const c=(0,Te.q)(e,"modelValue"),{isFocused:u,focus:d,blur:h}=vi(e),{onIntersect:p}=Ii(e),f=(0,i.EW)(()=>"function"===typeof e.counterValue?e.counterValue(c.value):"number"===typeof e.counterValue?e.counterValue:(c.value??"").toString().length),m=(0,i.EW)(()=>n.maxlength?n.maxlength:!e.counter||"number"!==typeof e.counter&&"string"!==typeof e.counter?void 0:e.counter),v=(0,i.EW)(()=>["plain","underlined"].includes(e.variant)),g=(0,s.KR)(),y=(0,s.KR)(),_=(0,s.KR)(),b=(0,i.EW)(()=>Di.includes(e.type)||e.persistentPlaceholder||u.value||e.active);function x(){u.value||d(),(0,i.dY)(()=>{_.value!==document.activeElement&&_.value?.focus()})}function S(e){a("mousedown:control",e),e.target!==_.value&&(x(),e.preventDefault())}function M(e){a("click:control",e)}function w(t,n){t.stopPropagation(),x(),(0,i.dY)(()=>{c.value=null,n(),(0,o.P)(e["onClick:clear"],t)})}function T(t){const n=t.target;if(c.value=n.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const e=[n.selectionStart,n.selectionEnd];(0,i.dY)(()=>{n.selectionStart=e[0],n.selectionEnd=e[1]})}}return(0,E.C)(()=>{const t=!!(l.counter||!1!==e.counter&&null!=e.counter),a=!(!t&&!l.details),[s,x]=(0,o.ph)(n),{modelValue:E,...A}=Pi.filterProps(e),C=_i.filterProps(e);return(0,i.bF)(Pi,(0,i.v6)({ref:g,modelValue:c.value,"onUpdate:modelValue":e=>c.value=e,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":v.value},e.class],style:e.style},s,A,{centerAffix:!v.value,focused:u.value}),{...l,default:t=>{let{id:n,isDisabled:a,isDirty:s,isReadonly:f,isValid:m,hasDetails:v,reset:g}=t;return(0,i.bF)(_i,(0,i.v6)({ref:y,onMousedown:S,onClick:M,"onClick:clear":e=>w(e,g),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},(0,o.cJ)(C,["onClick:clear"]),{id:n.value,active:b.value||s.value,dirty:s.value||e.dirty,disabled:a.value,focused:u.value,details:v.value,error:!1===m.value}),{...l,default:t=>{let{props:{class:n,...s}}=t;const o=(0,i.bo)((0,i.Lk)("input",(0,i.v6)({ref:_,value:c.value,onInput:T,autofocus:e.autofocus,readonly:f.value,disabled:a.value,name:e.name,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:d,onBlur:h},s,x),null),[[ve.A,{handler:p},null,{once:!0}]]);return(0,i.Lk)(i.FK,null,[e.prefix&&(0,i.Lk)("span",{class:"v-text-field__prefix"},[(0,i.Lk)("span",{class:"v-text-field__prefix__text"},[e.prefix])]),l.default?(0,i.Lk)("div",{class:(0,r.C4)(n),"data-no-activator":""},[l.default(),o]):(0,i.E3)(o,{class:n}),e.suffix&&(0,i.Lk)("span",{class:"v-text-field__suffix"},[(0,i.Lk)("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:a?n=>(0,i.Lk)(i.FK,null,[l.details?.(n),t&&(0,i.Lk)(i.FK,null,[(0,i.Lk)("span",null,null),(0,i.bF)(di,{active:e.persistentCounter||u.value,value:f.value,max:m.value,disabled:e.disabled},l.counter)])]):void 0})}),(0,ai.O)({},g,y,_)}}),ki=(0,u.j)({renderless:Boolean,...(0,a.u)()},"VVirtualScrollItem"),Fi=(0,w.RW)()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ki(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:a}=t;const{resizeRef:s,contentRect:o}=c(void 0,"border");(0,i.wB)(()=>o.value?.height,e=>{null!=e&&r("update:height",e)}),(0,E.C)(()=>e.renderless?(0,i.Lk)(i.FK,null,[a.default?.({itemRef:s})]):(0,i.Lk)("div",(0,i.v6)({ref:s,class:["v-virtual-scroll__item",e.class],style:e.style},n),[a.default?.()]))}}),Ui=-1,Bi=1,Vi=100,zi=(0,u.j)({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Wi(e,t){const n=(0,qt._F)(),r=(0,s.IJ)(0);(0,i.nT)(()=>{r.value=parseFloat(e.itemHeight||0)});const a=(0,s.IJ)(0),u=(0,s.IJ)(Math.ceil((parseInt(e.height)||n.height.value)/(r.value||16))||1),d=(0,s.IJ)(0),h=(0,s.IJ)(0),p=(0,s.KR)(),f=(0,s.KR)();let m=0;const{resizeRef:v,contentRect:g}=c();(0,i.nT)(()=>{v.value=p.value});const y=(0,i.EW)(()=>p.value===document.documentElement?n.height.value:g.value?.height||parseInt(e.height)||0),_=(0,i.EW)(()=>!!(p.value&&f.value&&y.value&&r.value));let b=Array.from({length:t.value.length}),x=Array.from({length:t.value.length});const S=(0,s.IJ)(0);let M=-1;function w(e){return b[e]||r.value}const E=(0,o.sg)(()=>{const e=performance.now();x[0]=0;const n=t.value.length;for(let t=1;t<=n-1;t++)x[t]=(x[t-1]||0)+w(t-1);S.value=Math.max(S.value,performance.now()-e)},S),T=(0,i.wB)(_,e=>{e&&(T(),m=f.value.offsetTop,E.immediate(),F(),~M&&(0,i.dY)(()=>{l.ZK&&window.requestAnimationFrame(()=>{B(M),M=-1})}))});function A(e,t){const n=b[e],i=r.value;r.value=i?Math.min(r.value,t):t,n===t&&i===r.value||(b[e]=t,E())}function C(e){e=(0,o.qE)(e,0,t.value.length-1);const n=Math.floor(e),i=e%1,r=n+1,a=x[n]||0,s=x[r]||a;return a+(s-a)*i}function R(e){return Hi(x,e)}(0,s.jr)(()=>{E.clear()});let L=0,P=0,I=0;(0,i.wB)(y,(e,t)=>{t&&(F(),e<t&&requestAnimationFrame(()=>{P=0,F()}))});let D=-1;function O(){if(!p.value||!f.value)return;const e=p.value.scrollTop,t=performance.now(),n=t-I;n>500?(P=Math.sign(e-L),m=f.value.offsetTop):P=e-L,L=e,I=t,window.clearTimeout(D),D=window.setTimeout(N,500),F()}function N(){p.value&&f.value&&(P=0,I=0,window.clearTimeout(D),F())}let k=-1;function F(){cancelAnimationFrame(k),k=requestAnimationFrame(U)}function U(){if(!p.value||!y.value||!r.value)return;const e=L-m,n=Math.sign(P),i=Math.max(0,e-Vi),s=(0,o.qE)(R(i),0,t.value.length),l=e+y.value+Vi,c=(0,o.qE)(R(l)+1,s+1,t.value.length);if((n!==Ui||s<a.value)&&(n!==Bi||c>u.value)){const e=C(a.value)-C(s),n=C(c)-C(u.value),i=Math.max(e,n);i>Vi?(a.value=s,u.value=c):(s<=0&&(a.value=s),c>=t.value.length&&(u.value=c))}d.value=C(a.value),h.value=C(t.value.length)-C(u.value)}function B(e){const t=C(e);!p.value||e&&!t?M=e:p.value.scrollTop=t}const V=(0,i.EW)(()=>t.value.slice(a.value,u.value).map((t,n)=>{const i=n+a.value;return{raw:t,index:i,key:(0,o.TD)(t,e.itemKey,i)}}));return(0,i.wB)(t,()=>{b=Array.from({length:t.value.length}),x=Array.from({length:t.value.length}),E.immediate(),F()},{deep:1}),{calculateVisibleItems:F,containerRef:p,markerRef:f,computedItems:V,paddingTop:d,paddingBottom:h,scrollToIndex:B,handleScroll:O,handleScrollend:N,handleItemResize:A}}function Hi(e,t){let n=e.length-1,i=0,r=0,a=null,s=-1;if(e[n]<t)return n;while(i<=n)if(r=i+n>>1,a=e[r],a>t)n=r-1;else{if(!(a<t))return a===t?r:i;s=r,i=r+1}return s}var Gi=n(3939);const ji=(0,u.j)({items:{type:Array,default:()=>[]},renderless:Boolean,...zi(),...(0,a.u)(),...(0,le.X)()},"VVirtualScroll"),Xi=(0,w.RW)()({name:"VVirtualScroll",props:ji(),setup(e,t){let{slots:n}=t;const a=(0,d.n)("VVirtualScroll"),{dimensionStyles:l}=(0,le.S)(e),{calculateVisibleItems:c,containerRef:u,markerRef:h,handleScroll:p,handleScrollend:f,handleItemResize:m,scrollToIndex:v,paddingTop:g,paddingBottom:y,computedItems:_}=Wi(e,(0,s.lW)(()=>e.items));return(0,Le.Y)(()=>e.renderless,()=>{function e(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=e?"addEventListener":"removeEventListener";u.value===document.documentElement?(document[t]("scroll",p,{passive:!0}),document[t]("scrollend",f)):(u.value?.[t]("scroll",p,{passive:!0}),u.value?.[t]("scrollend",f))}(0,i.sV)(()=>{u.value=(0,Gi.mH)(a.vnode.el,!0),e(!0)}),(0,s.jr)(e)}),(0,E.C)(()=>{const t=_.value.map(t=>(0,i.bF)(Fi,{key:t.key,renderless:e.renderless,"onUpdate:height":e=>m(t.index,e)},{default:e=>n.default?.({item:t.raw,index:t.index,...e})}));return e.renderless?(0,i.Lk)(i.FK,null,[(0,i.Lk)("div",{ref:h,class:"v-virtual-scroll__spacer",style:{paddingTop:(0,o.Dg)(g.value)}},null),t,(0,i.Lk)("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:(0,o.Dg)(y.value)}},null)]):(0,i.Lk)("div",{ref:u,class:(0,r.C4)(["v-virtual-scroll",e.class]),onScrollPassive:p,onScrollend:f,style:(0,r.Tr)([l.value,e.style])},[(0,i.Lk)("div",{ref:h,class:"v-virtual-scroll__container",style:{paddingTop:(0,o.Dg)(g.value),paddingBottom:(0,o.Dg)(y.value)}},[t])])}),{calculateVisibleItems:c,scrollToIndex:v}}});function qi(e,t){const n=(0,s.IJ)(!1);let r;function a(e){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function o(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>{if(n.value){const t=(0,i.wB)(n,()=>{t(),e()})}else e()})}async function l(n){if("Tab"===n.key&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(n.key))return;const i=e.value?.$el;if(!i)return;"Home"!==n.key&&"End"!==n.key||i.scrollTo({top:"Home"===n.key?0:i.scrollHeight,behavior:"smooth"}),await o();const r=i.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if("PageDown"===n.key||"Home"===n.key){const e=i.getBoundingClientRect().top;for(const t of r)if(t.getBoundingClientRect().top>=e){t.focus();break}}else{const e=i.getBoundingClientRect().bottom;for(const t of[...r].reverse())if(t.getBoundingClientRect().bottom<=e){t.focus();break}}}return{onScrollPassive:a,onKeydown:l}}const $i=(0,u.j)({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Je.TX,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...qn({itemChildren:!1})},"Select"),Yi=(0,u.j)({...$i(),...(0,o.cJ)(Oi({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...(0,me.m)({transition:{component:z}})},"VSelect"),Ki=(0,w.RW)()({name:"VSelect",props:Yi(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:r}=(0,S.Ym)(),a=(0,s.KR)(),c=(0,s.KR)(),u=(0,s.KR)(),{items:d,transformIn:h,transformOut:p}=Zn(e),f=(0,Te.q)(e,"modelValue",[],e=>h(null===e?[null]:(0,o.BN)(e)),t=>{const n=p(t);return e.multiple?n:n[0]??null}),m=(0,i.EW)(()=>"function"===typeof e.counterValue?e.counterValue(f.value):"number"===typeof e.counterValue?e.counterValue:f.value.length),v=Ei(e),g=(0,i.EW)(()=>f.value.map(e=>e.value)),y=(0,s.IJ)(!1);let _,b="",x=-1;const M=(0,i.EW)(()=>e.hideSelected?d.value.filter(t=>!f.value.some(n=>(e.valueComparator||o.bD)(n,t))):d.value),w=(0,i.EW)(()=>e.hideNoData&&!M.value.length||v.isReadonly.value||v.isDisabled.value),T=(0,Te.q)(e,"menu"),A=(0,i.EW)({get:()=>T.value,set:e=>{T.value&&!e&&c.value?.ΨopenChildren.size||e&&w.value||(T.value=e)}}),C=(0,s.lW)(()=>A.value?e.closeText:e.openText),R=(0,i.EW)(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),L=(0,s.KR)(),P=qi(L,a);function I(t){e.openOnClear&&(A.value=!0)}function D(){w.value||(A.value=!A.value)}function O(e){(0,o.qr)(e)&&N(e)}function N(t){if(!t.key||v.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(A.value=!0),["Escape","Tab"].includes(t.key)&&(A.value=!1),"Home"===t.key?L.value?.focus("first"):"End"===t.key&&L.value?.focus("last");const n=1e3;if(!(0,o.qr)(t))return;const i=performance.now();i-_>n&&(b="",x=-1),b+=t.key.toLowerCase(),_=i;const r=M.value;function a(){let e=s();return e||(b.at(-1)===b.at(-2)&&(b=b.slice(0,-1),e=s(),e)?e:(x=-1,e=s(),e||(b=t.key.toLowerCase(),s())))}function s(){for(let e=x+1;e<r.length;e++){const t=r[e];if(t.title.toLowerCase().startsWith(b))return[t,e]}}const l=a();if(!l)return;const[c,u]=l;x=u,L.value?.focus(u),e.multiple||(f.value=[c])}function k(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.props.disabled)if(e.multiple){const i=f.value.findIndex(n=>(e.valueComparator||o.bD)(n.value,t.value)),r=null==n?!~i:n;if(~i){const e=r?[...f.value,t]:[...f.value];e.splice(i,1),f.value=e}else r&&(f.value=[...f.value,t])}else{const e=!1!==n;f.value=e?[t]:[],(0,i.dY)(()=>{A.value=!1})}}function F(e){L.value?.$el.contains(e.relatedTarget)||(A.value=!1)}function U(){e.eager&&u.value?.calculateVisibleItems()}function B(){y.value&&a.value?.focus()}function V(e){y.value=!0}function z(e){if(null==e)f.value=[];else if((0,o.B5)(a.value,":autofill")||(0,o.B5)(a.value,":-webkit-autofill")){const t=d.value.find(t=>t.title===e);t&&k(t)}else a.value&&(a.value.value="")}return(0,i.wB)(A,()=>{if(!e.hideSelected&&A.value&&f.value.length){const t=M.value.findIndex(t=>f.value.some(n=>(e.valueComparator||o.bD)(n.value,t.value)));l.ZK&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{t>=0&&u.value?.scrollToIndex(t)})}}),(0,i.wB)(()=>e.items,(t,n)=>{A.value||y.value&&e.hideNoData&&!n.length&&t.length&&(A.value=!0)}),(0,E.C)(()=>{const t=!(!e.chips&&!n.chip),s=!!(!e.hideNoData||M.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),l=f.value.length>0,d=Ni.filterProps(e),h=l||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return(0,i.bF)(Ni,(0,i.v6)({ref:a},d,{modelValue:f.value.map(e=>e.props.title).join(", "),"onUpdate:modelValue":z,focused:y.value,"onUpdate:focused":e=>y.value=e,validationValue:f.externalValue,counterValue:m.value,dirty:l,class:["v-select",{"v-select--active-menu":A.value,"v-select--chips":!!e.chips,["v-select--"+(e.multiple?"multiple":"single")]:!0,"v-select--selected":f.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:h,"onClick:clear":I,"onMousedown:control":D,onBlur:F,onKeydown:N,"aria-label":r(C.value),title:r(C.value)}),{...n,default:()=>(0,i.Lk)(i.FK,null,[(0,i.bF)(ci,(0,i.v6)({ref:c,modelValue:A.value,"onUpdate:modelValue":e=>A.value=e,activator:"parent",contentClass:"v-select__content",disabled:w.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:U,onAfterLeave:B},R.value),{default:()=>[s&&(0,i.bF)(ii,(0,i.v6)({ref:L,selected:g.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:O,onFocusin:V,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},P,e.listProps),{default:()=>[n["prepend-item"]?.(),!M.value.length&&!e.hideNoData&&(n["no-data"]?.()??(0,i.bF)(Wn,{key:"no-data",title:r(e.noDataText)},null)),(0,i.bF)(Xi,{ref:u,renderless:!0,items:M.value,itemKey:"value"},{default:t=>{let{item:r,index:a,itemRef:s}=t;const l=(0,o.bF)(r.props),c=(0,i.v6)(r.props,{ref:s,key:r.value,onClick:()=>k(r,null)});return"divider"===r.type?n.divider?.({props:r.raw,index:a})??(0,i.bF)(hn,(0,i.v6)(r.props,{key:`divider-${a}`}),null):"subheader"===r.type?n.subheader?.({props:r.raw,index:a})??(0,i.bF)(Gn,(0,i.v6)(r.props,{key:`subheader-${a}`}),null):n.item?.({item:r,index:a,props:c})??(0,i.bF)(Wn,(0,i.v6)(c,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return(0,i.Lk)(i.FK,null,[e.multiple&&!e.hideSelected?(0,i.bF)(Xt,{key:r.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,l.prependAvatar&&(0,i.bF)(Nt,{image:l.prependAvatar},null),l.prependIcon&&(0,i.bF)(it,{icon:l.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),f.value.map((r,a)=>{function s(e){e.stopPropagation(),e.preventDefault(),k(r,!1)}const l={"onClick:close":s,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),s(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},c=t?!!n.chip:!!n.selection,u=c?(0,o.T4)(t?n.chip({item:r,index:a,props:l}):n.selection({item:r,index:a})):void 0;if(!c||u)return(0,i.Lk)("div",{key:r.value,class:"v-select__selection"},[t?n.chip?(0,i.bF)(oe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[u]}):(0,i.bF)(un,(0,i.v6)({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},l),null):u??(0,i.Lk)("span",{class:"v-select__selection-text"},[r.title,e.multiple&&a<f.value.length-1&&(0,i.Lk)("span",{class:"v-select__selection-comma"},[(0,i.eW)(",")])])])})]),"append-inner":function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(0,i.Lk)(i.FK,null,[n["append-inner"]?.(...r),e.menuIcon?(0,i.bF)(it,{class:"v-select__menu-icon",color:a.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),(0,ai.O)({isFocused:y,menu:A,select:k},a)}}),Zi=(e,t,n)=>{if(null==e||null==t)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const i=[];let r=e.indexOf(t);while(~r)i.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return i.length?i:-1};function Ji(e,t){if(null!=e&&"boolean"!==typeof e&&-1!==e)return"number"===typeof e?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const Qi=(0,u.j)({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function er(e,t,n){const i=[],r=n?.default??Zi,a=!!n?.filterKeys&&(0,o.BN)(n.filterKeys),s=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return i;e:for(let l=0;l<e.length;l++){const[c,u=c]=(0,o.BN)(e[l]),d={},h={};let p=-1;if((t||s>0)&&!n?.noFilter){if("object"===typeof c){if("divider"===c.type||"subheader"===c.type)continue;const e=a||Object.keys(u);for(const i of e){const e=(0,o.TD)(u,i),a=n?.customKeyFilter?.[i];if(p=a?a(e,t,c):r(e,t,c),-1!==p&&!1!==p)a?d[i]=Ji(p,t):h[i]=Ji(p,t);else if("every"===n?.filterMode)continue e}}else p=r(c,t,c),-1!==p&&!1!==p&&(h.title=Ji(p,t));const e=Object.keys(h).length,i=Object.keys(d).length;if(!e&&!i)continue;if("union"===n?.filterMode&&i!==s&&!e)continue;if("intersection"===n?.filterMode&&(i!==s||!e))continue}i.push({index:l,matches:{...h,...d}})}return i}function tr(e,t,n,r){const a=(0,s.IJ)([]),o=(0,s.IJ)(new Map),l=(0,i.EW)(()=>r?.transform?(0,s.R1)(t).map(e=>[e,r.transform(e)]):(0,s.R1)(t));function c(e){return o.value.get(e.value)}return(0,i.nT)(()=>{const i="function"===typeof n?n():(0,s.R1)(n),c="string"!==typeof i&&"number"!==typeof i?"":String(i),u=er(l.value,c,{customKeyFilter:{...e.customKeyFilter,...(0,s.R1)(r?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=(0,s.R1)(t),h=[],p=new Map;u.forEach(e=>{let{index:t,matches:n}=e;const i=d[t];h.push(i),p.set(i.value,n)}),a.value=h,o.value=p}),{filteredItems:a,filteredMatches:o,getMatches:c}}function nr(e,t,n){return null!=n&&n.length?n.map((a,s)=>{const o=0===s?0:n[s-1][1],l=[(0,i.Lk)("span",{class:(0,r.C4)(`${e}__unmask`)},[t.slice(o,a[0])]),(0,i.Lk)("span",{class:(0,r.C4)(`${e}__mask`)},[t.slice(a[0],a[1])])];return s===n.length-1&&l.push((0,i.Lk)("span",{class:(0,r.C4)(`${e}__unmask`)},[t.slice(a[1])])),(0,i.Lk)(i.FK,null,[l])}):t}const ir=(0,u.j)({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Qi({filterKeys:["title"]}),...$i(),...(0,o.cJ)(Oi({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...(0,me.m)({transition:!1})},"VAutocomplete"),rr=(0,w.RW)()({name:"VAutocomplete",props:ir(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=(0,S.Ym)(),c=(0,s.KR)(),u=(0,s.IJ)(!1),d=(0,s.IJ)(!0),h=(0,s.IJ)(!1),p=(0,s.KR)(),f=(0,s.KR)(),m=(0,s.IJ)(-1),{items:v,transformIn:g,transformOut:y}=Zn(e),{textColorClasses:_,textColorStyles:b}=(0,he.aH)(()=>c.value?.color),x=(0,Te.q)(e,"search",""),M=(0,Te.q)(e,"modelValue",[],e=>g(null===e?[null]:(0,o.BN)(e)),t=>{const n=y(t);return e.multiple?n:n[0]??null}),w=(0,i.EW)(()=>"function"===typeof e.counterValue?e.counterValue(M.value):"number"===typeof e.counterValue?e.counterValue:M.value.length),T=Ei(e),{filteredItems:A,getMatches:C}=tr(e,v,()=>d.value?"":x.value),R=(0,i.EW)(()=>e.hideSelected?A.value.filter(e=>!M.value.some(t=>t.value===e.value)):A.value),L=(0,i.EW)(()=>!(!e.chips&&!n.chip)),P=(0,i.EW)(()=>L.value||!!n.selection),I=(0,i.EW)(()=>M.value.map(e=>e.props.value)),D=(0,i.EW)(()=>{const t=!0===e.autoSelectFirst||"exact"===e.autoSelectFirst&&x.value===R.value[0]?.title;return t&&R.value.length>0&&!d.value&&!h.value}),O=(0,i.EW)(()=>e.hideNoData&&!R.value.length||T.isReadonly.value||T.isDisabled.value),N=(0,Te.q)(e,"menu"),k=(0,i.EW)({get:()=>N.value,set:e=>{N.value&&!e&&p.value?.ΨopenChildren.size||e&&O.value||(N.value=e)}}),F=(0,i.EW)(()=>k.value?e.closeText:e.openText),U=(0,s.KR)(),B=qi(U,c);function V(t){e.openOnClear&&(k.value=!0),x.value=""}function z(){O.value||(k.value=!0)}function W(e){O.value||(u.value&&(e.preventDefault(),e.stopPropagation()),k.value=!k.value)}function H(e){((0,o.qr)(e)||"Backspace"===e.key)&&c.value?.focus()}function G(t){if(T.isReadonly.value)return;const n=c.value?.selectionStart,i=M.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(k.value=!0),["Escape"].includes(t.key)&&(k.value=!1),D.value&&["Enter","Tab"].includes(t.key)&&!M.value.some(e=>{let{value:t}=e;return t===R.value[0].value})&&J(R.value[0]),"ArrowDown"===t.key&&D.value&&U.value?.focus("next"),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&P.value&&M.value.length>0&&!x.value)return J(M.value[0],!1);if(~m.value){t.preventDefault();const e=m.value;J(M.value[m.value],!1),m.value=e>=i-1?i-2:e}else"Backspace"!==t.key||x.value||(m.value=i-1)}else if(e.multiple)if("ArrowLeft"===t.key){if(m.value<0&&n&&n>0)return;const e=m.value>-1?m.value-1:i-1;if(M.value[e])m.value=e;else{const e=x.value?.length??null;m.value=-1,c.value?.setSelectionRange(e,e)}}else if("ArrowRight"===t.key){if(m.value<0)return;const e=m.value+1;M.value[e]?m.value=e:(m.value=-1,c.value?.setSelectionRange(0,0))}else~m.value&&(0,o.qr)(t)&&(m.value=-1)}function j(e){if((0,o.B5)(c.value,":autofill")||(0,o.B5)(c.value,":-webkit-autofill")){const t=v.value.find(t=>t.title===e.target.value);t&&J(t)}}function X(){e.eager&&f.value?.calculateVisibleItems()}function q(){u.value&&(d.value=!0,c.value?.focus())}function $(e){u.value=!0,setTimeout(()=>{h.value=!0})}function Y(e){h.value=!1}function K(t){null!=t&&(""!==t||e.multiple||P.value)||(M.value=[])}const Z=(0,s.IJ)(!1);function J(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&!t.props.disabled)if(e.multiple){const i=M.value.findIndex(n=>(e.valueComparator||o.bD)(n.value,t.value)),r=null==n?!~i:n;if(~i){const e=r?[...M.value,t]:[...M.value];e.splice(i,1),M.value=e}else r&&(M.value=[...M.value,t]);e.clearOnSelect&&(x.value="")}else{const e=!1!==n;M.value=e?[t]:[],x.value=e&&!P.value?t.title:"",(0,i.dY)(()=>{k.value=!1,d.value=!0})}}return(0,i.wB)(u,(t,n)=>{t!==n&&(t?(Z.value=!0,x.value=e.multiple||P.value?"":String(M.value.at(-1)?.props.title??""),d.value=!0,(0,i.dY)(()=>Z.value=!1)):(e.multiple||null!=x.value||(M.value=[]),k.value=!1,(e.multiple||P.value)&&(x.value=""),m.value=-1))}),(0,i.wB)(x,e=>{u.value&&!Z.value&&(e&&(k.value=!0),d.value=!e)}),(0,i.wB)(k,()=>{if(!e.hideSelected&&k.value&&M.value.length){const e=R.value.findIndex(e=>M.value.some(t=>e.value===t.value));l.ZK&&window.requestAnimationFrame(()=>{e>=0&&f.value?.scrollToIndex(e)})}}),(0,i.wB)(()=>e.items,(e,t)=>{k.value||u.value&&!t.length&&e.length&&(k.value=!0)}),(0,E.C)(()=>{const t=!!(!e.hideNoData||R.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),s=M.value.length>0,l=Ni.filterProps(e);return(0,i.bF)(Ni,(0,i.v6)({ref:c},l,{modelValue:x.value,"onUpdate:modelValue":[e=>x.value=e,K],focused:u.value,"onUpdate:focused":e=>u.value=e,validationValue:M.externalValue,counterValue:w.value,dirty:s,onChange:j,class:["v-autocomplete","v-autocomplete--"+(e.multiple?"multiple":"single"),{"v-autocomplete--active-menu":k.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!P.value,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:T.isReadonly.value,placeholder:s?void 0:e.placeholder,"onClick:clear":V,"onMousedown:control":z,onKeydown:G}),{...n,default:()=>(0,i.Lk)(i.FK,null,[(0,i.bF)(ci,(0,i.v6)({ref:p,modelValue:k.value,"onUpdate:modelValue":e=>k.value=e,activator:"parent",contentClass:"v-autocomplete__content",disabled:O.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:X,onAfterLeave:q},e.menuProps),{default:()=>[t&&(0,i.bF)(ii,(0,i.v6)({ref:U,filterable:!0,selected:I.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:H,onFocusin:$,onFocusout:Y,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},B,e.listProps),{default:()=>[n["prepend-item"]?.(),!R.value.length&&!e.hideNoData&&(n["no-data"]?.()??(0,i.bF)(Wn,{key:"no-data",title:a(e.noDataText)},null)),(0,i.bF)(Xi,{ref:f,renderless:!0,items:R.value,itemKey:"value"},{default:t=>{let{item:r,index:a,itemRef:s}=t;const o=(0,i.v6)(r.props,{ref:s,key:r.value,active:!(!D.value||0!==a)||void 0,onClick:()=>J(r,null)});return"divider"===r.type?n.divider?.({props:r.raw,index:a})??(0,i.bF)(hn,(0,i.v6)(r.props,{key:`divider-${a}`}),null):"subheader"===r.type?n.subheader?.({props:r.raw,index:a})??(0,i.bF)(Gn,(0,i.v6)(r.props,{key:`subheader-${a}`}),null):n.item?.({item:r,index:a,props:o})??(0,i.bF)(Wn,(0,i.v6)(o,{role:"option"}),{prepend:t=>{let{isSelected:n}=t;return(0,i.Lk)(i.FK,null,[e.multiple&&!e.hideSelected?(0,i.bF)(Xt,{key:r.value,modelValue:n,ripple:!1,tabindex:"-1"},null):void 0,r.props.prependAvatar&&(0,i.bF)(Nt,{image:r.props.prependAvatar},null),r.props.prependIcon&&(0,i.bF)(it,{icon:r.props.prependIcon},null)])},title:()=>d.value?r.title:nr("v-autocomplete",r.title,C(r)?.title)})}}),n["append-item"]?.()]})]}),M.value.map((t,a)=>{function s(e){e.stopPropagation(),e.preventDefault(),J(t,!1)}const l={"onClick:close":s,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),s(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},c=L.value?!!n.chip:!!n.selection,u=c?(0,o.T4)(L.value?n.chip({item:t,index:a,props:l}):n.selection({item:t,index:a})):void 0;if(!c||u)return(0,i.Lk)("div",{key:t.value,class:(0,r.C4)(["v-autocomplete__selection",a===m.value&&["v-autocomplete__selection--selected",_.value]]),style:(0,r.Tr)(a===m.value?b.value:{})},[L.value?n.chip?(0,i.bF)(oe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>[u]}):(0,i.bF)(un,(0,i.v6)({key:"chip",closable:e.closableChips,size:"small",text:t.title,disabled:t.props.disabled},l),null):u??(0,i.Lk)("span",{class:"v-autocomplete__selection-text"},[t.title,e.multiple&&a<M.value.length-1&&(0,i.Lk)("span",{class:"v-autocomplete__selection-comma"},[(0,i.eW)(",")])])])})]),"append-inner":function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(0,i.Lk)(i.FK,null,[n["append-inner"]?.(...r),e.menuIcon?(0,i.bF)(it,{class:"v-autocomplete__menu-icon",color:c.value?.fieldIconColor,icon:e.menuIcon,onMousedown:W,onClick:o.lQ,"aria-label":a(F.value),title:a(F.value),tabindex:"-1"},null):void 0])}})}),(0,ai.O)({isFocused:u,isPristine:d,menu:k,search:x,filteredItems:A,select:J},c)}}),ar=(0,u.j)({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Je.TX,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...(0,a.u)(),...ct({location:"top end"}),...pe(),...C(),...(0,M.yx)(),...(0,me.m)({transition:"scale-rotate-transition"}),...(0,le.X)()},"VBadge"),sr=(0,w.RW)()({name:"VBadge",inheritAttrs:!1,props:ar(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:r}=(0,he.z6)(()=>e.color),{roundedClasses:a}=fe(e),{t:s}=(0,S.Ym)(),{textColorClasses:l,textColorStyles:c}=(0,he.aH)(()=>e.textColor),{themeClasses:u}=(0,M.DP)(),{locationStyles:d}=ut(e,!0,t=>{const n=e.floating?e.dot?2:4:e.dot?8:12;return n+(["top","bottom"].includes(t)?Number(e.offsetY??0):["left","right"].includes(t)?Number(e.offsetX??0):0)}),{dimensionStyles:h}=(0,le.S)(e);return(0,E.C)(()=>{const p=Number(e.content),f=!e.max||isNaN(p)?e.content:p<=Number(e.max)?p:`${e.max}+`,[m,v]=(0,o.Ai)(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return(0,i.bF)(e.tag,(0,i.v6)({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},v,{style:e.style}),{default:()=>[(0,i.Lk)("div",{class:"v-badge__wrapper"},[t.slots.default?.(),(0,i.bF)(me.M,{transition:e.transition},{default:()=>[(0,i.bo)((0,i.Lk)("span",(0,i.v6)({class:["v-badge__badge",u.value,n.value,a.value,l.value],style:[r.value,c.value,h.value,e.inline?{}:d.value],"aria-atomic":"true","aria-label":s(e.label,p),"aria-live":"polite",role:"status"},m),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?(0,i.bF)(it,{icon:e.icon},null):f]),[[P.aG,e.modelValue]])]})])]})}),{}}}),or=(0,u.j)({color:String,density:String,...(0,a.u)()},"VBannerActions"),lr=(0,w.RW)()({name:"VBannerActions",props:or(),setup(e,t){let{slots:n}=t;return(0,ae.Uh)({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-banner-actions",e.class]),style:(0,r.Tr)(e.style)},[n.default?.()])),{}}}),cr=At("v-banner-text"),ur=(0,u.j)({avatar:String,bgColor:String,color:String,icon:Je.TX,lines:String,stacked:Boolean,sticky:Boolean,text:String,..._e(),...(0,a.u)(),...Oe(),...(0,le.X)(),...(0,qt.hx)({mobile:null}),...xe(),...ct(),...gt(),...pe(),...C(),...(0,M.yx)()},"VBanner"),dr=(0,w.RW)()({name:"VBanner",props:ur(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:o}=(0,he.z6)(()=>e.bgColor),{borderClasses:l}=be(e),{densityClasses:c}=Ne(e),{displayClasses:u,mobile:d}=(0,qt._F)(e),{dimensionStyles:h}=(0,le.S)(e),{elevationClasses:p}=Se(e),{locationStyles:f}=ut(e),{positionClasses:m}=yt(e),{roundedClasses:v}=fe(e),{themeClasses:g}=(0,M.NX)(e),y=(0,s.lW)(()=>e.color),_=(0,s.lW)(()=>e.density);(0,ae.Uh)({VBannerActions:{color:y,density:_}}),(0,E.C)(()=>{const t=!(!e.text&&!n.text),s=!(!e.avatar&&!e.icon),b=!(!s&&!n.prepend);return(0,i.bF)(e.tag,{class:(0,r.C4)(["v-banner",{"v-banner--stacked":e.stacked||d.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},g.value,a.value,l.value,c.value,u.value,p.value,m.value,v.value,e.class]),style:(0,r.Tr)([o.value,h.value,f.value,e.style]),role:"banner"},{default:()=>[b&&(0,i.Lk)("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?(0,i.bF)(oe,{key:"prepend-defaults",disabled:!s,defaults:{VAvatar:{color:y.value,density:_.value,icon:e.icon,image:e.avatar}}},n.prepend):(0,i.bF)(Nt,{key:"prepend-avatar",color:y.value,density:_.value,icon:e.icon,image:e.avatar},null)]),(0,i.Lk)("div",{class:"v-banner__content"},[t&&(0,i.bF)(cr,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&(0,i.bF)(lr,{key:"actions"},n.actions)]})})}}),hr=(0,u.j)({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},..._e(),...(0,a.u)(),...Oe(),...xe(),...pe(),...g({name:"bottom-navigation"}),...C({tag:"header"}),...We({selectedClass:"v-btn--selected"}),...(0,M.yx)()},"VBottomNavigation"),pr=(0,w.RW)()({name:"VBottomNavigation",props:hr(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.DP)(),{borderClasses:l}=be(e),{backgroundColorClasses:c,backgroundColorStyles:u}=(0,he.z6)(()=>e.bgColor),{densityClasses:d}=Ne(e),{elevationClasses:h}=Se(e),{roundedClasses:p}=fe(e),{ssrBootStyles:f}=Re(),m=(0,i.EW)(()=>Number(e.height)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0)),v=(0,Te.q)(e,"active",e.active),{layoutItemStyles:g}=_({id:e.name,order:(0,i.EW)(()=>parseInt(e.order,10)),position:(0,s.lW)(()=>"bottom"),layoutSize:(0,s.lW)(()=>v.value?m.value:0),elementSize:m,active:v,absolute:(0,s.lW)(()=>e.absolute)});return je(e,Ye),(0,ae.Uh)({VBtn:{baseColor:(0,s.lW)(()=>e.baseColor),color:(0,s.lW)(()=>e.color),density:(0,s.lW)(()=>e.density),stacked:(0,s.lW)(()=>"horizontal"!==e.mode),variant:"text"}},{scoped:!0}),(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-bottom-navigation",{"v-bottom-navigation--active":v.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":"shift"===e.mode},a.value,c.value,l.value,d.value,h.value,p.value,e.class]),style:(0,r.Tr)([u.value,g.value,{height:(0,o.Dg)(m.value)},f.value,e.style])},{default:()=>[n.default&&(0,i.Lk)("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),fr=(0,u.j)({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...(0,ri.D)({origin:"center center",scrollStrategy:"block",transition:{component:z},zIndex:2400})},"VDialog"),mr=(0,w.RW)()({name:"VDialog",props:fr(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:r}=t;const a=(0,Te.q)(e,"modelValue"),{scopeId:c}=(0,si.b)(),u=(0,s.KR)();function d(e){const t=e.relatedTarget,n=e.target;if(t!==n&&u.value?.contentEl&&u.value?.globalTop&&![document,u.value.contentEl].includes(n)&&!u.value.contentEl.contains(n)){const e=(0,o.OW)(u.value.contentEl);if(!e.length)return;const n=e[0],i=e[e.length-1];t===n?i.focus():n.focus()}}function h(){n("afterEnter"),(e.scrim||e.retainFocus)&&u.value?.contentEl&&!u.value.contentEl.contains(document.activeElement)&&u.value.contentEl.focus({preventScroll:!0})}function p(){n("afterLeave")}return(0,i.xo)(()=>{document.removeEventListener("focusin",d)}),l.ZK&&(0,i.wB)(()=>a.value&&e.retainFocus,e=>{e?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0}),(0,i.wB)(a,async e=>{e||(await(0,i.dY)(),u.value.activatorEl?.focus({preventScroll:!0}))}),(0,E.C)(()=>{const t=ri.L.filterProps(e),n=(0,i.v6)({"aria-haspopup":"dialog"},e.activatorProps),s=(0,i.v6)({tabindex:-1},e.contentProps);return(0,i.bF)(ri.L,(0,i.v6)({ref:u,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,"aria-modal":"true",activatorProps:n,contentProps:s,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:h,onAfterLeave:p},c),{activator:r.activator,default:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.bF)(oe,{root:"VDialog"},{default:()=>[r.default?.(...t)]})}})}),(0,ai.O)({},u)}}),vr=(0,u.j)({inset:Boolean,...fr({transition:"bottom-sheet-transition"})},"VBottomSheet"),gr=(0,w.RW)()({name:"VBottomSheet",props:vr(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,Te.q)(e,"modelValue");return(0,E.C)(()=>{const t=mr.filterProps(e);return(0,i.bF)(mr,(0,i.v6)(t,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),yr=(0,u.j)({divider:[Number,String],...(0,a.u)()},"VBreadcrumbsDivider"),_r=(0,w.RW)()({name:"VBreadcrumbsDivider",props:yr(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.Lk)("li",{"aria-hidden":"true",class:(0,r.C4)(["v-breadcrumbs-divider",e.class]),style:(0,r.Tr)(e.style)},[n?.default?.()??e.divider])),{}}}),br=(0,u.j)({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...(0,a.u)(),...(0,_t.WC)(),...C({tag:"li"})},"VBreadcrumbsItem"),xr=(0,w.RW)()({name:"VBreadcrumbsItem",props:br(),setup(e,t){let{slots:n,attrs:a}=t;const s=(0,_t.iE)(e,a),o=(0,i.EW)(()=>e.active||s.isActive?.value),{textColorClasses:l,textColorStyles:c}=(0,he.aH)(()=>o.value?e.activeColor:e.color);return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":o.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:o.value&&e.activeClass},l.value,e.class]),style:(0,r.Tr)([c.value,e.style]),"aria-current":o.value?"page":void 0},{default:()=>[s.isLink.value?(0,i.Lk)("a",(0,i.v6)({class:"v-breadcrumbs-item--link",onClick:s.navigate},s.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),Sr=(0,u.j)({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Je.TX,items:{type:Array,default:()=>[]},...(0,a.u)(),...Oe(),...pe(),...C({tag:"ul"})},"VBreadcrumbs"),Mr=(0,w.RW)()({name:"VBreadcrumbs",props:Sr(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:o}=(0,he.z6)(()=>e.bgColor),{densityClasses:l}=Ne(e),{roundedClasses:c}=fe(e);(0,ae.Uh)({VBreadcrumbsDivider:{divider:(0,s.lW)(()=>e.divider)},VBreadcrumbsItem:{activeClass:(0,s.lW)(()=>e.activeClass),activeColor:(0,s.lW)(()=>e.activeColor),color:(0,s.lW)(()=>e.color),disabled:(0,s.lW)(()=>e.disabled)}});const u=(0,i.EW)(()=>e.items.map(e=>"string"===typeof e?{item:{title:e},raw:e}:{item:e,raw:e}));return(0,E.C)(()=>{const t=!(!n.prepend&&!e.icon);return(0,i.bF)(e.tag,{class:(0,r.C4)(["v-breadcrumbs",a.value,l.value,c.value,e.class]),style:(0,r.Tr)([o.value,e.style])},{default:()=>[t&&(0,i.Lk)("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?(0,i.bF)(oe,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):(0,i.bF)(it,{key:"prepend-icon",start:!0,icon:e.icon},null)]),u.value.map((e,t,r)=>{let{item:a,raw:s}=e;return(0,i.Lk)(i.FK,null,[n.item?.({item:a,index:t})??(0,i.bF)(xr,(0,i.v6)({key:t,disabled:t>=r.length-1},"string"===typeof a?{title:a}:a),{default:n.title?()=>n.title?.({item:a,index:t}):void 0}),t<r.length-1&&(0,i.bF)(_r,null,{default:n.divider?()=>n.divider?.({item:s,index:t}):void 0})])}),n.default?.()]})}),{}}}),wr=(0,w.RW)()({name:"VCardActions",props:(0,a.u)(),setup(e,t){let{slots:n}=t;return(0,ae.Uh)({VBtn:{slim:!0,variant:"text"}}),(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-card-actions",e.class]),style:(0,r.Tr)(e.style)},[n.default?.()])),{}}}),Er=(0,u.j)({opacity:[Number,String],...(0,a.u)(),...C()},"VCardSubtitle"),Tr=(0,w.RW)()({name:"VCardSubtitle",props:Er(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-card-subtitle",e.class]),style:(0,r.Tr)([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),Ar=At("v-card-title"),Cr=(0,u.j)({appendAvatar:String,appendIcon:Je.TX,prependAvatar:String,prependIcon:Je.TX,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...(0,a.u)(),...Oe()},"VCardItem"),Rr=(0,w.RW)()({name:"VCardItem",props:Cr(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>{const t=!(!e.prependAvatar&&!e.prependIcon),a=!(!t&&!n.prepend),s=!(!e.appendAvatar&&!e.appendIcon),o=!(!s&&!n.append),l=!(null==e.title&&!n.title),c=!(null==e.subtitle&&!n.subtitle);return(0,i.Lk)("div",{class:(0,r.C4)(["v-card-item",e.class]),style:(0,r.Tr)(e.style)},[a&&(0,i.Lk)("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?(0,i.bF)(oe,{key:"prepend-defaults",disabled:!t,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):(0,i.Lk)(i.FK,null,[e.prependAvatar&&(0,i.bF)(Nt,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&(0,i.bF)(it,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),(0,i.Lk)("div",{class:"v-card-item__content"},[l&&(0,i.bF)(Ar,{key:"title"},{default:()=>[n.title?.()??(0,r.v_)(e.title)]}),c&&(0,i.bF)(Tr,{key:"subtitle"},{default:()=>[n.subtitle?.()??(0,r.v_)(e.subtitle)]}),n.default?.()]),o&&(0,i.Lk)("div",{key:"append",class:"v-card-item__append"},[n.append?(0,i.bF)(oe,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):(0,i.Lk)(i.FK,null,[e.appendIcon&&(0,i.bF)(it,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&(0,i.bF)(Nt,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),Lr=(0,u.j)({opacity:[Number,String],...(0,a.u)(),...C()},"VCardText"),Pr=(0,w.RW)()({name:"VCardText",props:Lr(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-card-text",e.class]),style:(0,r.Tr)([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),Ir=(0,u.j)({appendAvatar:String,appendIcon:Je.TX,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Je.TX,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},..._e(),...(0,a.u)(),...Oe(),...(0,le.X)(),...xe(),...pt(),...ct(),...gt(),...pe(),...(0,_t.WC)(),...C(),...(0,M.yx)(),...Ue({variant:"elevated"})},"VCard"),Dr=(0,w.RW)()({name:"VCard",directives:{vRipple:xt.A},props:Ir(),setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:a}=(0,M.NX)(e),{borderClasses:s}=be(e),{colorClasses:o,colorStyles:l,variantClasses:c}=Be(e),{densityClasses:u}=Ne(e),{dimensionStyles:d}=(0,le.S)(e),{elevationClasses:h}=Se(e),{loaderClasses:p}=ft(e),{locationStyles:f}=ut(e),{positionClasses:m}=yt(e),{roundedClasses:v}=fe(e),g=(0,_t.iE)(e,n);return(0,E.C)(()=>{const t=!1!==e.link&&g.isLink.value,n=!e.disabled&&!1!==e.link&&(e.link||g.isClickable.value),y=t?"a":e.tag,_=!(!r.title&&null==e.title),b=!(!r.subtitle&&null==e.subtitle),x=_||b,S=!!(r.append||e.appendAvatar||e.appendIcon),M=!!(r.prepend||e.prependAvatar||e.prependIcon),w=!(!r.image&&!e.image),E=x||M||S,T=!(!r.text&&null==e.text);return(0,i.bo)((0,i.bF)(y,(0,i.v6)({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":n},a.value,s.value,o.value,u.value,h.value,p.value,m.value,v.value,c.value,e.class],style:[l.value,d.value,f.value,e.style],onClick:n&&g.navigate,tabindex:e.disabled?-1:void 0},g.linkProps),{default:()=>[w&&(0,i.Lk)("div",{key:"image",class:"v-card__image"},[r.image?(0,i.bF)(oe,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):(0,i.bF)(ye,{key:"image-img",cover:!0,src:e.image},null)]),(0,i.bF)(mt,{name:"v-card",active:!!e.loading,color:"boolean"===typeof e.loading?void 0:e.loading},{default:r.loader}),E&&(0,i.bF)(Rr,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),T&&(0,i.bF)(Pr,{key:"text"},{default:()=>[r.text?.()??e.text]}),r.default?.(),r.actions&&(0,i.bF)(wr,null,{default:r.actions}),Fe(n,"v-card")]}),[[xt.A,n&&e.ripple]])}),{}}});var Or=n(3588);const Nr=Symbol.for("vuetify:v-window"),kr=Symbol.for("vuetify:v-window-group"),Fr=(0,u.j)({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>"boolean"===typeof e||"hover"===e},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...(0,a.u)(),...C(),...(0,M.yx)()},"VWindow"),Ur=(0,w.RW)()({name:"VWindow",directives:{vTouch:Or.A},props:Fr(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{isRtl:o}=(0,S.IA)(),{t:l}=(0,S.Ym)(),c=je(e,kr),u=(0,s.KR)(),d=(0,i.EW)(()=>o.value?!e.reverse:e.reverse),h=(0,s.IJ)(!1),p=(0,i.EW)(()=>{const t="vertical"===e.direction?"y":"x",n=d.value?!h.value:h.value,i=n?"-reverse":"";return`v-window-${t}${i}-transition`}),f=(0,s.IJ)(0),m=(0,s.KR)(void 0),v=(0,i.EW)(()=>c.items.value.findIndex(e=>c.selected.value.includes(e.id)));(0,i.wB)(v,(e,t)=>{const n=c.items.value.length,i=n-1;h.value=n<=2?e<t:e===i&&0===t||(0!==e||t!==i)&&e<t}),(0,i.Gt)(Nr,{transition:p,isReversed:h,transitionCount:f,transitionHeight:m,rootRef:u});const g=(0,s.lW)(()=>e.continuous||0!==v.value),y=(0,s.lW)(()=>e.continuous||v.value!==c.items.value.length-1);function _(){g.value&&c.prev()}function b(){y.value&&c.next()}const x=(0,i.EW)(()=>{const t=[],r={icon:o.value?e.nextIcon:e.prevIcon,class:"v-window__"+(d.value?"right":"left"),onClick:c.prev,"aria-label":l("$vuetify.carousel.prev")};t.push(g.value?n.prev?n.prev({props:r}):(0,i.bF)(Mt,r,null):(0,i.Lk)("div",null,null));const a={icon:o.value?e.prevIcon:e.nextIcon,class:"v-window__"+(d.value?"left":"right"),onClick:c.next,"aria-label":l("$vuetify.carousel.next")};return t.push(y.value?n.next?n.next({props:a}):(0,i.bF)(Mt,a,null):(0,i.Lk)("div",null,null)),t}),w=(0,i.EW)(()=>{if(!1===e.touch)return e.touch;const t={left:()=>{d.value?_():b()},right:()=>{d.value?b():_()},start:e=>{let{originalEvent:t}=e;t.stopPropagation()}};return{...t,...!0===e.touch?{}:e.touch}});return(0,E.C)(()=>(0,i.bo)((0,i.bF)(e.tag,{ref:u,class:(0,r.C4)(["v-window",{"v-window--show-arrows-on-hover":"hover"===e.showArrows,"v-window--vertical-arrows":!!e.verticalArrows},a.value,e.class]),style:(0,r.Tr)(e.style)},{default:()=>[(0,i.Lk)("div",{class:"v-window__container",style:{height:m.value}},[n.default?.({group:c}),!1!==e.showArrows&&(0,i.Lk)("div",{class:(0,r.C4)(["v-window__controls",{"v-window__controls--left":"left"===e.verticalArrows||!0===e.verticalArrows},{"v-window__controls--right":"right"===e.verticalArrows}])},[x.value])]),n.additional?.({group:c})]}),[[Or.A,w.value]])),{group:c}}}),Br=(0,u.j)({color:String,cycle:Boolean,delimiterIcon:{type:Je.TX,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Fr({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),Vr=(0,w.RW)()({name:"VCarousel",props:Br(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,Te.q)(e,"modelValue"),{t:a}=(0,S.Ym)(),l=(0,s.KR)();let c=-1;function u(){e.cycle&&l.value&&(c=window.setTimeout(l.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function d(){window.clearTimeout(c),window.requestAnimationFrame(u)}return(0,i.wB)(r,d),(0,i.wB)(()=>e.interval,d),(0,i.wB)(()=>e.cycle,e=>{e?d():window.clearTimeout(c)}),(0,i.sV)(u),(0,E.C)(()=>{const t=Ur.filterProps(e);return(0,i.bF)(Ur,(0,i.v6)({ref:l},t,{modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:(0,o.Dg)(e.height)},e.style]}),{default:n.default,additional:t=>{let{group:s}=t;return(0,i.Lk)(i.FK,null,[!e.hideDelimiters&&(0,i.Lk)("div",{class:"v-carousel__controls",style:{left:"left"===e.verticalDelimiters&&e.verticalDelimiters?0:"auto",right:"right"===e.verticalDelimiters?0:"auto"}},[s.items.value.length>0&&(0,i.bF)(oe,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[s.items.value.map((e,t)=>{const r={id:`carousel-item-${e.id}`,"aria-label":a("$vuetify.carousel.ariaLabel.delimiter",t+1,s.items.value.length),class:["v-carousel__controls__item",s.isSelected(e.id)&&"v-btn--active"],onClick:()=>s.select(e.id,!0)};return n.item?n.item({props:r,item:e}):(0,i.bF)(Mt,(0,i.v6)(e,r),null)})]})]),e.progress&&(0,i.bF)(ht,{absolute:!0,class:"v-carousel__progress",color:"string"===typeof e.progress?e.progress:void 0,modelValue:(s.getItemIndex(r.value)+1)/s.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}});var zr=n(7400);const Wr=(0,u.j)({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...(0,a.u)(),...He(),...(0,zr.f)()},"VWindowItem"),Hr=(0,w.RW)()({name:"VWindowItem",directives:{vTouch:Or.A},props:Wr(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=(0,i.WQ)(Nr),l=Ge(e,kr),{isBooted:c}=Re();if(!a||!l)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=(0,s.IJ)(!1),d=(0,i.EW)(()=>c.value&&(a.isReversed.value?!1!==e.reverseTransition:!1!==e.transition));function h(){u.value&&a&&(u.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,0===a.transitionCount.value&&(a.transitionHeight.value=void 0)))}function p(){!u.value&&a&&(u.value=!0,0===a.transitionCount.value&&(a.transitionHeight.value=(0,o.Dg)(a.rootRef.value?.clientHeight)),a.transitionCount.value+=1)}function f(){h()}function m(e){u.value&&(0,i.dY)(()=>{d.value&&u.value&&a&&(a.transitionHeight.value=(0,o.Dg)(e.clientHeight))})}const v=(0,i.EW)(()=>{const t=a.isReversed.value?e.reverseTransition:e.transition;return!!d.value&&{name:"string"!==typeof t?a.transition.value:t,onBeforeEnter:p,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onAfterLeave:h,onLeaveCancelled:f,onEnter:m}}),{hasContent:g}=(0,zr._)(e,l.isSelected);return(0,E.C)(()=>(0,i.bF)(me.M,{transition:v.value,disabled:!c.value},{default:()=>[(0,i.bo)((0,i.Lk)("div",{class:(0,r.C4)(["v-window-item",l.selectedClass.value,e.class]),style:(0,r.Tr)(e.style)},[g.value&&n.default?.()]),[[P.aG,l.isSelected.value]])]})),{groupItem:l}}}),Gr=(0,u.j)({...ge(),...Wr()},"VCarouselItem"),jr=(0,w.RW)()({name:"VCarouselItem",inheritAttrs:!1,props:Gr(),setup(e,t){let{slots:n,attrs:r}=t;(0,E.C)(()=>{const t=ye.filterProps(e),a=Hr.filterProps(e);return(0,i.bF)(Hr,(0,i.v6)({class:["v-carousel-item",e.class]},a),{default:()=>[(0,i.bF)(ye,(0,i.v6)(r,t),n)]})})}}),Xr=(0,u.j)({...Li(),...(0,o.cJ)(jt(),["inline"])},"VCheckbox"),qr=(0,w.RW)()({name:"VCheckbox",inheritAttrs:!1,props:Xr(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const a=(0,Te.q)(e,"modelValue"),{isFocused:l,focus:c,blur:u}=vi(e),d=(0,s.KR)(),h=(0,i.Bi)();return(0,E.C)(()=>{const[t,s]=(0,o.ph)(n),p=Pi.filterProps(e),f=Xt.filterProps(e);return(0,i.bF)(Pi,(0,i.v6)({ref:d,class:["v-checkbox",e.class]},t,p,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,id:e.id||`checkbox-${h}`,focused:l.value,style:e.style}),{...r,default:e=>{let{id:t,messagesId:n,isDisabled:o,isReadonly:l,isValid:d}=e;return(0,i.bF)(Xt,(0,i.v6)(f,{id:t.value,"aria-describedby":n.value,disabled:o.value,readonly:l.value},s,{error:!1===d.value,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onFocus:c,onBlur:u}),r)}})}),(0,ai.O)({},d)}}),$r=At("v-code","code");n(1148);const Yr=(0,u.j)({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...(0,a.u)()},"VColorPickerCanvas"),Kr=(0,w.pM)({name:"VColorPickerCanvas",props:Yr(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const a=(0,s.IJ)(!1),l=(0,s.KR)(),u=(0,s.IJ)(parseFloat(e.width)),d=(0,s.IJ)(parseFloat(e.height)),h=(0,s.KR)({x:0,y:0}),p=(0,i.EW)({get:()=>h.value,set(t){if(!l.value)return;const{x:i,y:r}=t;h.value=t,n("update:color",{h:e.color?.h??0,s:(0,o.qE)(i,0,u.value)/u.value,v:1-(0,o.qE)(r,0,d.value)/d.value,a:e.color?.a??1})}}),f=(0,i.EW)(()=>{const{x:t,y:n}=p.value,i=parseInt(e.dotSize,10)/2;return{width:(0,o.Dg)(e.dotSize),height:(0,o.Dg)(e.dotSize),transform:`translate(${(0,o.Dg)(t-i)}, ${(0,o.Dg)(n-i)})`}}),{resizeRef:m}=c(e=>{if(!m.el?.offsetParent)return;const{width:t,height:n}=e[0].contentRect;u.value=t,d.value=n});function v(e,t,n){const{left:i,top:r,width:a,height:s}=n;p.value={x:(0,o.qE)(e-i,0,a),y:(0,o.qE)(t-r,0,s)}}function g(t){"mousedown"===t.type&&t.preventDefault(),e.disabled||(y(t),window.addEventListener("mousemove",y),window.addEventListener("mouseup",_),window.addEventListener("touchmove",y),window.addEventListener("touchend",_))}function y(t){if(e.disabled||!l.value)return;a.value=!0;const n=(0,o.e_)(t);v(n.clientX,n.clientY,l.value.getBoundingClientRect())}function _(){window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",y),window.removeEventListener("touchend",_)}function b(){if(!l.value)return;const t=l.value,n=t.getContext("2d");if(!n)return;const i=n.createLinearGradient(0,0,t.width,0);i.addColorStop(0,"hsla(0, 0%, 100%, 1)"),i.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),n.fillStyle=i,n.fillRect(0,0,t.width,t.height);const r=n.createLinearGradient(0,0,0,t.height);r.addColorStop(0,"hsla(0, 0%, 0%, 0)"),r.addColorStop(1,"hsla(0, 0%, 0%, 1)"),n.fillStyle=r,n.fillRect(0,0,t.width,t.height)}return(0,i.wB)(()=>e.color?.h,b,{immediate:!0}),(0,i.wB)(()=>[u.value,d.value],(e,t)=>{b(),h.value={x:p.value.x*e[0]/t[0],y:p.value.y*e[1]/t[1]}},{flush:"post"}),(0,i.wB)(()=>e.color,()=>{a.value?a.value=!1:h.value=e.color?{x:e.color.s*u.value,y:(1-e.color.v)*d.value}:{x:0,y:0}},{deep:!0,immediate:!0}),(0,i.sV)(()=>b()),(0,E.C)(()=>(0,i.Lk)("div",{ref:m,class:(0,r.C4)(["v-color-picker-canvas",e.class]),style:(0,r.Tr)(e.style),onMousedown:g,onTouchstartPassive:g},[(0,i.Lk)("canvas",{ref:l,width:u.value,height:d.value},null),e.color&&(0,i.Lk)("div",{class:(0,r.C4)(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:(0,r.Tr)(f.value)},null)])),{}}});var Zr=n(5241);function Jr(e,t){if(t){const{a:t,...n}=e;return n}return e}function Qr(e,t){if(null==t||"string"===typeof t){const n=1!==e.a;if(t?.startsWith("rgb(")){const{r:t,g:i,b:r,a:a}=(0,Zr.ko)(e);return`rgb(${t} ${i} ${r}`+(n?` / ${a})`:")")}if(t?.startsWith("hsl(")){const{h:t,s:i,l:r,a:a}=(0,Zr.ax)(e);return`hsl(${t} ${Math.round(100*i)} ${Math.round(100*r)}`+(n?` / ${a})`:")")}const i=(0,Zr.w1)(e);return 1===e.a?i.slice(0,7):i}if("object"===typeof t){let n;return(0,o.zy)(t,["r","g","b"])?n=(0,Zr.ko)(e):(0,o.zy)(t,["h","s","l"])?n=(0,Zr.ax)(e):(0,o.zy)(t,["h","s","v"])&&(n=e),Jr(n,!(0,o.zy)(t,["a"])&&1===e.a)}return e}const ea={h:0,s:0,v:0,a:1},ta={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return null!=t?Math.round(100*t)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Zr.ko,from:Zr.WN},na={...ta,inputs:ta.inputs?.slice(0,3)},ia={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(100*e.s)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(100*e.l)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return null!=t?Math.round(100*t)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Zr.ax,from:Zr.uJ},ra={...ia,inputs:ia.inputs.slice(0,3)},aa={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:Zr.w1,from:Zr.yY},sa={...aa,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},oa={rgb:na,rgba:ta,hsl:ra,hsla:ia,hex:sa,hexa:aa},la=e=>{let{label:t,...n}=e;return(0,i.Lk)("div",{class:"v-color-picker-edit__input"},[(0,i.Lk)("input",(0,r._B)((0,i.Ng)(n)),null),(0,i.Lk)("span",null,[t])])},ca=(0,u.j)({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(oa).includes(e)},modes:{type:Array,default:()=>Object.keys(oa),validator:e=>Array.isArray(e)&&e.every(e=>Object.keys(oa).includes(e))},...(0,a.u)()},"VColorPickerEdit"),ua=(0,w.pM)({name:"VColorPickerEdit",props:ca(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=(0,S.Ym)(),s=(0,i.EW)(()=>e.modes.map(e=>({...oa[e],name:e}))),o=(0,i.EW)(()=>{const t=s.value.find(t=>t.name===e.mode);if(!t)return[];const i=e.color?t.to(e.color):null;return t.inputs?.map(r=>{let{getValue:s,getColor:o,localeKey:l,...c}=r;return{...t.inputProps,...c,ariaLabel:a(`$vuetify.colorPicker.ariaLabel.${l}`),disabled:e.disabled,value:i&&s(i),onChange:e=>{const r=e.target;r&&n("update:color",t.from(o(i??t.to(ea),r.value)))}}})});return(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-color-picker-edit",e.class]),style:(0,r.Tr)(e.style)},[o.value?.map(e=>(0,i.bF)(la,e,null)),s.value.length>1&&(0,i.bF)(Mt,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":a("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const t=s.value.findIndex(t=>t.name===e.mode);n("update:mode",s.value[(t+1)%s.value.length].name)}},null)])),{}}}),da=Symbol.for("vuetify:v-slider");function ha(e,t,n){const i="vertical"===n,r=t.getBoundingClientRect(),a="touches"in e?e.touches[0]:e;return i?a.clientY-(r.top+r.height/2):a.clientX-(r.left+r.width/2)}function pa(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const fa=(0,u.j)({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>"boolean"===typeof e||"always"===e},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>"boolean"===typeof e||"always"===e},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...pe(),...xe({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),ma=e=>{const t=(0,i.EW)(()=>parseFloat(e.min)),n=(0,i.EW)(()=>parseFloat(e.max)),r=(0,i.EW)(()=>Number(e.step)>0?parseFloat(e.step):0),a=(0,i.EW)(()=>Math.max((0,o.$m)(r.value),(0,o.$m)(t.value)));function s(e){if(e=parseFloat(e),r.value<=0)return e;const i=(0,o.qE)(e,t.value,n.value),s=t.value%r.value;let l=Math.round((i-s)/r.value)*r.value+s;return i>l&&l+r.value>n.value&&(l=n.value),parseFloat(Math.min(l,n.value).toFixed(a.value))}return{min:t,max:n,step:r,decimals:a,roundValue:s}},va=e=>{let{props:t,steps:n,onSliderStart:r,onSliderMove:a,onSliderEnd:l,getActiveThumb:c}=e;const{isRtl:u}=(0,S.IA)(),d=(0,s.lW)(()=>t.reverse),h=(0,i.EW)(()=>"vertical"===t.direction),p=(0,i.EW)(()=>h.value!==d.value),{min:f,max:m,step:v,decimals:g,roundValue:y}=n,_=(0,i.EW)(()=>parseInt(t.thumbSize,10)),b=(0,i.EW)(()=>parseInt(t.tickSize,10)),x=(0,i.EW)(()=>parseInt(t.trackSize,10)),M=(0,i.EW)(()=>(m.value-f.value)/v.value),w=(0,s.lW)(()=>t.disabled),E=(0,i.EW)(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),T=(0,i.EW)(()=>t.error||t.disabled?void 0:t.thumbColor),A=(0,i.EW)(()=>t.error||t.disabled?void 0:t.trackColor??t.color),C=(0,i.EW)(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),R=(0,s.IJ)(!1),L=(0,s.IJ)(0),P=(0,s.KR)(),I=(0,s.KR)();function D(e){const n=P.value?.$el;if(!n)return;const i="vertical"===t.direction,r=i?"top":"left",a=i?"height":"width",s=i?"clientY":"clientX",{[r]:l,[a]:c}=n.getBoundingClientRect(),d=pa(e,s);let h=(0,o.qE)((d-l-L.value)/c)||0;return(i?p.value:p.value!==u.value)&&(h=1-h),y(f.value+h*(m.value-f.value))}const O=e=>{const t=D(e);null!=t&&l({value:t}),R.value=!1,L.value=0},N=e=>{const n=D(e);I.value=c(e),I.value&&(R.value=!0,I.value.contains(e.target)?L.value=ha(e,I.value,t.direction):(L.value=0,null!=n&&a({value:n})),null!=n&&r({value:n}),(0,i.dY)(()=>I.value?.focus()))},k={passive:!0,capture:!0};function F(e){const t=D(e);null!=t&&a({value:t})}function U(e){e.stopPropagation(),e.preventDefault(),O(e),window.removeEventListener("mousemove",F,k),window.removeEventListener("mouseup",U)}function B(e){O(e),window.removeEventListener("touchmove",F,k),e.target?.removeEventListener("touchend",B)}function V(e){N(e),window.addEventListener("touchmove",F,k),e.target?.addEventListener("touchend",B,{passive:!1})}function z(e){0===e.button&&(e.preventDefault(),N(e),window.addEventListener("mousemove",F,k),window.addEventListener("mouseup",U,{passive:!1}))}const W=e=>{const t=(e-f.value)/(m.value-f.value)*100;return(0,o.qE)(isNaN(t)?0:t,0,100)},H=(0,s.lW)(()=>t.showTicks),G=(0,i.EW)(()=>H.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(e=>({value:e,position:W(e),label:e.toString()})):Object.keys(t.ticks).map(e=>({value:parseFloat(e),position:W(parseFloat(e)),label:t.ticks[e]})):M.value!==1/0?(0,o.Sd)(M.value+1).map(e=>{const t=f.value+e*v.value;return{value:t,position:W(t)}}):[]:[]),j=(0,i.EW)(()=>G.value.some(e=>{let{label:t}=e;return!!t})),X={activeThumbRef:I,color:(0,s.lW)(()=>t.color),decimals:g,disabled:w,direction:(0,s.lW)(()=>t.direction),elevation:(0,s.lW)(()=>t.elevation),hasLabels:j,isReversed:d,indexFromEnd:p,min:f,max:m,mousePressed:R,noKeyboard:(0,s.lW)(()=>t.noKeyboard),numTicks:M,onSliderMousedown:z,onSliderTouchstart:V,parsedTicks:G,parseMouseMove:D,position:W,readonly:(0,s.lW)(()=>t.readonly),rounded:(0,s.lW)(()=>t.rounded),roundValue:y,showTicks:H,startOffset:L,step:v,thumbSize:_,thumbColor:E,thumbLabelColor:T,thumbLabel:(0,s.lW)(()=>t.thumbLabel),ticks:(0,s.lW)(()=>t.ticks),tickSize:b,trackColor:A,trackContainerRef:P,trackFillColor:C,trackSize:x,vertical:h};return(0,i.Gt)(da,X),X},ga=(0,u.j)({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...(0,a.u)()},"VSliderThumb"),ya=(0,w.RW)()({name:"VSliderThumb",directives:{vRipple:xt.A},props:ga(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const s=(0,i.WQ)(da),{isRtl:l,rtlClasses:c}=(0,S.IA)();if(!s)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:u,max:d,thumbColor:h,thumbLabelColor:p,step:f,disabled:m,thumbSize:v,thumbLabel:g,direction:y,isReversed:_,vertical:b,readonly:x,elevation:M,mousePressed:w,decimals:T,indexFromEnd:A}=s,C=(0,i.EW)(()=>m.value?void 0:M.value),{elevationClasses:R}=Se(C),{textColorClasses:L,textColorStyles:I}=(0,he.aH)(h),{backgroundColorClasses:D,backgroundColorStyles:O}=(0,he.z6)(p),{pageup:N,pagedown:k,end:F,home:U,left:B,right:V,down:z,up:W}=o.K7,H=[N,k,F,U,B,V,z,W],G=(0,i.EW)(()=>f.value?[1,2,3]:[1,5,10]);function j(t,n){if(e.noKeyboard)return;if(!H.includes(t.key))return;t.preventDefault();const i=f.value||.1,r=(d.value-u.value)/i;if([B,V,z,W].includes(t.key)){const e=b.value?[l.value?B:V,_.value?z:W]:A.value!==l.value?[B,W]:[V,W],a=e.includes(t.key)?1:-1,s=t.shiftKey?2:t.ctrlKey?1:0;-1!==a||n!==d.value||s||Number.isInteger(r)?n+=a*i*G.value[s]:n-=r%1*i}else if(t.key===U)n=u.value;else if(t.key===F)n=d.value;else{const e=t.key===k?1:-1;n-=e*i*(r>100?r/10:10)}return Math.max(e.min,Math.min(e.max,n))}function X(t){const n=j(t,e.modelValue);null!=n&&a("update:modelValue",n)}return(0,E.C)(()=>{const t=(0,o.Dg)(A.value?100-e.position:e.position,"%");return(0,i.Lk)("div",{class:(0,r.C4)(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&w.value},e.class,c.value]),style:(0,r.Tr)([{"--v-slider-thumb-position":t,"--v-slider-thumb-size":(0,o.Dg)(v.value)},e.style]),role:"slider",tabindex:m.value?-1:0,"aria-label":e.name,"aria-valuemin":u.value,"aria-valuemax":d.value,"aria-valuenow":e.modelValue,"aria-readonly":!!x.value,"aria-orientation":y.value,onKeydown:x.value?void 0:X},[(0,i.Lk)("div",{class:(0,r.C4)(["v-slider-thumb__surface",L.value,R.value]),style:(0,r.Tr)(I.value)},null),(0,i.bo)((0,i.Lk)("div",{class:(0,r.C4)(["v-slider-thumb__ripple",L.value]),style:(0,r.Tr)(I.value)},null),[[xt.A,e.ripple,null,{circle:!0,center:!0}]]),(0,i.bF)($,{origin:"bottom center"},{default:()=>[(0,i.bo)((0,i.Lk)("div",{class:"v-slider-thumb__label-container"},[(0,i.Lk)("div",{class:(0,r.C4)(["v-slider-thumb__label",D.value]),style:(0,r.Tr)(O.value)},[(0,i.Lk)("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(f.value?T.value:1)]),(0,i.Lk)("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[P.aG,g.value&&e.focused||"always"===g.value]])]})])}),{}}}),_a=(0,u.j)({start:{type:Number,required:!0},stop:{type:Number,required:!0},...(0,a.u)()},"VSliderTrack"),ba=(0,w.RW)()({name:"VSliderTrack",props:_a(),emits:{},setup(e,t){let{slots:n}=t;const a=(0,i.WQ)(da);if(!a)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:s,parsedTicks:l,rounded:c,showTicks:u,tickSize:d,trackColor:h,trackFillColor:p,trackSize:f,vertical:m,min:v,max:g,indexFromEnd:y}=a,{roundedClasses:_}=fe(c),{backgroundColorClasses:b,backgroundColorStyles:x}=(0,he.z6)(p),{backgroundColorClasses:S,backgroundColorStyles:M}=(0,he.z6)(h),w=(0,i.EW)(()=>`inset-${m.value?"block":"inline"}-${y.value?"end":"start"}`),T=(0,i.EW)(()=>m.value?"height":"width"),A=(0,i.EW)(()=>({[w.value]:"0%",[T.value]:"100%"})),C=(0,i.EW)(()=>e.stop-e.start),R=(0,i.EW)(()=>({[w.value]:(0,o.Dg)(e.start,"%"),[T.value]:(0,o.Dg)(C.value,"%")})),L=(0,i.EW)(()=>{if(!u.value)return[];const t=m.value?l.value.slice().reverse():l.value;return t.map((t,a)=>{const s=t.value!==v.value&&t.value!==g.value?(0,o.Dg)(t.position,"%"):void 0;return(0,i.Lk)("div",{key:t.value,class:(0,r.C4)(["v-slider-track__tick",{"v-slider-track__tick--filled":t.position>=e.start&&t.position<=e.stop,"v-slider-track__tick--first":t.value===v.value,"v-slider-track__tick--last":t.value===g.value}]),style:{[w.value]:s}},[(t.label||n["tick-label"])&&(0,i.Lk)("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:t,index:a})??t.label])])})});return(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-slider-track",_.value,e.class]),style:(0,r.Tr)([{"--v-slider-track-size":(0,o.Dg)(f.value),"--v-slider-tick-size":(0,o.Dg)(d.value)},e.style])},[(0,i.Lk)("div",{class:(0,r.C4)(["v-slider-track__background",S.value,{"v-slider-track__background--opacity":!!s.value||!p.value}]),style:{...A.value,...M.value}},null),(0,i.Lk)("div",{class:(0,r.C4)(["v-slider-track__fill",b.value]),style:{...R.value,...x.value}},null),u.value&&(0,i.Lk)("div",{class:(0,r.C4)(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":"always"===u.value}])},[L.value])])),{}}}),xa=(0,u.j)({...mi(),...fa(),...Li(),modelValue:{type:[Number,String],default:0}},"VSlider"),Sa=(0,w.RW)()({name:"VSlider",props:xa(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const a=(0,s.KR)(),o=(0,s.KR)(),{rtlClasses:l}=(0,S.IA)(),c=ma(e),u=(0,Te.q)(e,"modelValue",void 0,e=>c.roundValue(null==e?c.min.value:e)),{min:d,max:h,mousePressed:p,roundValue:f,onSliderMousedown:m,onSliderTouchstart:v,trackContainerRef:g,position:y,hasLabels:_,readonly:b,noKeyboard:x}=va({props:e,steps:c,onSliderStart:()=>{r("start",u.value)},onSliderEnd:e=>{let{value:t}=e;const n=f(t);u.value=n,r("end",n)},onSliderMove:e=>{let{value:t}=e;return u.value=f(t)},getActiveThumb:()=>a.value?.$el}),{isFocused:M,focus:w,blur:T}=vi(e),A=(0,i.EW)(()=>y(u.value));return(0,E.C)(()=>{const t=Pi.filterProps(e),r=!!(e.label||n.label||n.prepend);return(0,i.bF)(Pi,(0,i.v6)({ref:o,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||_.value,"v-slider--focused":M.value,"v-slider--pressed":p.value,"v-slider--disabled":e.disabled},l.value,e.class],style:e.style},t,{focused:M.value}),{...n,prepend:r?t=>(0,i.Lk)(i.FK,null,[n.label?.(t)??(e.label?(0,i.bF)(Ft,{id:t.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(t)]):void 0,default:t=>{let{id:r,messagesId:s}=t;return(0,i.Lk)("div",{class:"v-slider__container",onMousedown:b.value?void 0:m,onTouchstartPassive:b.value?void 0:v},[(0,i.Lk)("input",{id:r.value,name:e.name||r.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:u.value},null),(0,i.bF)(ba,{ref:g,start:0,stop:A.value},{"tick-label":n["tick-label"]}),(0,i.bF)(ya,{ref:a,"aria-describedby":s.value,focused:M.value,noKeyboard:x.value,min:d.value,max:h.value,modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,position:A.value,elevation:e.elevation,onFocus:w,onBlur:T,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),(0,ai.O)({focus:()=>a.value?.$el.focus()},o)}}),Ma=(0,u.j)({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...(0,a.u)()},"VColorPickerPreview"),wa=(0,w.pM)({name:"VColorPickerPreview",props:Ma(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=(0,S.Ym)(),s=new AbortController;async function o(){if(!l.o$||e.disabled)return;const t=new window.EyeDropper;try{const i=await t.open({signal:s.signal}),r=(0,Zr.WN)((0,Zr.H0)(i.sRGBHex));n("update:color",{...e.color??ea,...r})}catch(i){}}return(0,i.hi)(()=>s.abort()),(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:(0,r.Tr)(e.style)},[l.o$&&(0,i.Lk)("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[(0,i.bF)(Mt,{"aria-label":a("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:o},null)]),(0,i.Lk)("div",{class:"v-color-picker-preview__dot"},[(0,i.Lk)("div",{style:{background:(0,Zr.eP)(e.color??ea)}},null)]),(0,i.Lk)("div",{class:"v-color-picker-preview__sliders"},[(0,i.bF)(Sa,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:a("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":t=>n("update:color",{...e.color??ea,h:t}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&(0,i.bF)(Sa,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:a("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":t=>n("update:color",{...e.color??ea,a:t}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),Ea={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Ta={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Aa={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Ca={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Ra={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},La={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Pa={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Ia={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Da={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Oa={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Na={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},ka={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Fa={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Ua={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Ba={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Va={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},za={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Wa={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Ha={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Ga={black:"#000000",white:"#ffffff",transparent:"#ffffff00"};var ja={red:Ea,pink:Ta,purple:Aa,deepPurple:Ca,indigo:Ra,blue:La,lightBlue:Pa,cyan:Ia,teal:Da,green:Oa,lightGreen:Na,lime:ka,yellow:Fa,amber:Ua,orange:Ba,deepOrange:Va,brown:za,blueGrey:Wa,grey:Ha,shades:Ga};const Xa=(0,u.j)({swatches:{type:Array,default:()=>qa(ja)},disabled:Boolean,color:Object,maxHeight:[Number,String],...(0,a.u)()},"VColorPickerSwatches");function qa(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const $a=(0,w.pM)({name:"VColorPickerSwatches",props:Xa(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-color-picker-swatches",e.class]),style:(0,r.Tr)([{maxHeight:(0,o.Dg)(e.maxHeight)},e.style])},[(0,i.Lk)("div",null,[e.swatches.map(t=>(0,i.Lk)("div",{class:"v-color-picker-swatches__swatch"},[t.map(t=>{const r=(0,Zr.H0)(t),a=(0,Zr.WN)(r),s=(0,Zr.kH)(r);return(0,i.Lk)("div",{class:"v-color-picker-swatches__color",onClick:()=>a&&n("update:color",a)},[(0,i.Lk)("div",{style:{background:s}},[e.color&&(0,o.bD)(e.color,a)?(0,i.bF)(it,{size:"x-small",icon:"$success",color:(0,Zr.bJ)(t,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),Ya=At("v-picker-title"),Ka=(0,u.j)({color:String,..._e(),...(0,a.u)(),...(0,le.X)(),...xe(),...ct(),...gt(),...pe(),...C(),...(0,M.yx)()},"VSheet"),Za=(0,w.RW)()({name:"VSheet",props:Ka(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{backgroundColorClasses:s,backgroundColorStyles:o}=(0,he.z6)(()=>e.color),{borderClasses:l}=be(e),{dimensionStyles:c}=(0,le.S)(e),{elevationClasses:u}=Se(e),{locationStyles:d}=ut(e),{positionClasses:h}=yt(e),{roundedClasses:p}=fe(e);return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-sheet",a.value,s.value,l.value,u.value,h.value,p.value,e.class]),style:(0,r.Tr)([o.value,c.value,d.value,e.style])},n)),{}}}),Ja=(0,u.j)({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...Ka()},"VPicker"),Qa=(0,w.RW)()({name:"VPicker",props:Ja(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:s}=(0,he.z6)(()=>e.color);return(0,E.C)(()=>{const t=Za.filterProps(e),o=!(!e.title&&!n.title);return(0,i.bF)(Za,(0,i.v6)(t,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&(0,i.Lk)("div",{key:"header",class:(0,r.C4)([a.value]),style:(0,r.Tr)([s.value])},[o&&(0,i.bF)(Ya,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&(0,i.Lk)("div",{class:"v-picker__header"},[n.header()])]),(0,i.Lk)("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&(0,i.bF)(oe,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[(0,i.Lk)("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),es=(0,u.j)({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(oa).includes(e)},modes:{type:Array,default:()=>Object.keys(oa),validator:e=>Array.isArray(e)&&e.every(e=>Object.keys(oa).includes(e))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...Ja({hideHeader:!0})},"VColorPicker"),ts=(0,w.pM)({name:"VColorPicker",props:es(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,Te.q)(e,"mode"),a=(0,s.KR)(null),o=(0,Te.q)(e,"modelValue",void 0,e=>{if(null==e||""===e)return null;let t;try{t=(0,Zr.WN)((0,Zr.H0)(e))}catch(n){return(0,h.OP)(n),null}return t},t=>t?Qr(t,e.modelValue):null),l=(0,i.EW)(()=>o.value?{...o.value,h:a.value??o.value.h}:null),{rtlClasses:c}=(0,S.IA)();let u=!0;(0,i.wB)(o,e=>{u?e&&(a.value=e.h):u=!0},{immediate:!0});const d=e=>{u=!1,a.value=e.h,o.value=e};return(0,i.KC)(()=>{e.modes.includes(r.value)||(r.value=e.modes[0])}),(0,ae.Uh)({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),(0,E.C)(()=>{const t=Qa.filterProps(e);return(0,i.bF)(Qa,(0,i.v6)(t,{class:["v-color-picker",c.value,e.class],style:[{"--v-color-picker-color-hsv":(0,Zr.eP)({...l.value??ea,a:1})},e.style]}),{...n,default:()=>(0,i.Lk)(i.FK,null,[!e.hideCanvas&&(0,i.bF)(Kr,{key:"canvas",color:l.value,"onUpdate:color":d,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&(0,i.Lk)("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&(0,i.bF)(wa,{key:"preview",color:l.value,"onUpdate:color":d,hideAlpha:!r.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&(0,i.bF)(ua,{key:"edit",modes:e.modes,mode:r.value,"onUpdate:mode":e=>r.value=e,color:l.value,"onUpdate:color":d,disabled:e.disabled},null)]),e.showSwatches&&(0,i.bF)($a,{key:"swatches",color:l.value,"onUpdate:color":d,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),ns=(0,u.j)({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Qi({filterKeys:["title"]}),...$i({hideNoData:!0,returnObject:!0}),...(0,o.cJ)(Oi({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...(0,me.m)({transition:!1})},"VCombobox"),is=(0,w.RW)()({name:"VCombobox",props:ns(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:c}=(0,S.Ym)(),u=(0,s.KR)(),d=(0,s.IJ)(!1),h=(0,s.IJ)(!0),p=(0,s.IJ)(!1),f=(0,s.KR)(),m=(0,s.KR)(),v=(0,s.IJ)(-1);let g=!1;const{items:y,transformIn:_,transformOut:b}=Zn(e),{textColorClasses:x,textColorStyles:M}=(0,he.aH)(()=>u.value?.color),w=(0,Te.q)(e,"modelValue",[],e=>_((0,o.BN)(e)),t=>{const n=b(t);return e.multiple?n:n[0]??null}),T=Ei(e),A=(0,i.EW)(()=>!(!e.chips&&!a.chip)),C=(0,i.EW)(()=>A.value||!!a.selection),R=(0,s.IJ)(e.multiple||C.value?"":w.value[0]?.title??""),L=(0,i.EW)({get:()=>R.value,set:async t=>{if(R.value=t??"",e.multiple||C.value||(w.value=[Yn(e,t)],(0,i.dY)(()=>m.value?.scrollToIndex(0))),t&&e.multiple&&e.delimiters?.length){const n=e.delimiters.map(o.kb).join("|"),r=t.split(new RegExp(`(?:${n})+`));if(r.length>1){for(let t of r)t=t.trim(),t&&(K(Yn(e,t)),await(0,i.dY)());R.value=""}}t||(v.value=-1),h.value=!t}}),P=(0,i.EW)(()=>"function"===typeof e.counterValue?e.counterValue(w.value):"number"===typeof e.counterValue?e.counterValue:e.multiple?w.value.length:L.value.length),{filteredItems:I,getMatches:D}=tr(e,y,()=>h.value?"":L.value),O=(0,i.EW)(()=>e.hideSelected?I.value.filter(e=>!w.value.some(t=>t.value===e.value)):I.value),N=(0,i.EW)(()=>e.hideNoData&&!O.value.length||T.isReadonly.value||T.isDisabled.value),k=(0,Te.q)(e,"menu"),F=(0,i.EW)({get:()=>k.value,set:e=>{k.value&&!e&&f.value?.ΨopenChildren.size||e&&N.value||(k.value=e)}}),U=(0,s.lW)(()=>F.value?e.closeText:e.openText);(0,i.wB)(R,e=>{g?(0,i.dY)(()=>g=!1):d.value&&!F.value&&(F.value=!0),n("update:search",e)}),(0,i.wB)(w,t=>{e.multiple||C.value||(R.value=t[0]?.title??"")});const B=(0,i.EW)(()=>w.value.map(e=>e.value)),V=(0,i.EW)(()=>{const t=!0===e.autoSelectFirst||"exact"===e.autoSelectFirst&&L.value===O.value[0]?.title;return t&&O.value.length>0&&!h.value&&!p.value}),z=(0,s.KR)(),W=qi(z,u);function H(t){g=!0,e.openOnClear&&(F.value=!0)}function G(){N.value||(F.value=!0)}function j(e){N.value||(d.value&&(e.preventDefault(),e.stopPropagation()),F.value=!F.value)}function X(e){((0,o.qr)(e)||"Backspace"===e.key)&&u.value?.focus()}function q(t){if((0,o.Pv)(t)||T.isReadonly.value)return;const n=u.value?.selectionStart,i=w.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(F.value=!0),["Escape"].includes(t.key)&&(F.value=!1),["Enter","Escape","Tab"].includes(t.key)&&(V.value&&["Enter","Tab"].includes(t.key)&&!w.value.some(e=>{let{value:t}=e;return t===O.value[0].value})&&K(I.value[0]),h.value=!0),"ArrowDown"===t.key&&V.value&&z.value?.focus("next"),"Enter"===t.key&&L.value&&(K(Yn(e,L.value)),C.value&&(R.value="")),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&C.value&&w.value.length>0&&!L.value)return K(w.value[0],!1);if(~v.value){t.preventDefault();const e=v.value;K(w.value[v.value],!1),v.value=e>=i-1?i-2:e}else"Backspace"!==t.key||L.value||(v.value=i-1)}else if(e.multiple)if("ArrowLeft"===t.key){if(v.value<0&&n&&n>0)return;const e=v.value>-1?v.value-1:i-1;w.value[e]?v.value=e:(v.value=-1,u.value?.setSelectionRange(L.value.length,L.value.length))}else if("ArrowRight"===t.key){if(v.value<0)return;const e=v.value+1;w.value[e]?v.value=e:(v.value=-1,u.value?.setSelectionRange(0,0))}else~v.value&&(0,o.qr)(t)&&(v.value=-1)}function $(){e.eager&&m.value?.calculateVisibleItems()}function Y(){d.value&&(h.value=!0,u.value?.focus())}function K(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&!t.props.disabled)if(e.multiple){const i=w.value.findIndex(n=>(e.valueComparator||o.bD)(n.value,t.value)),r=null==n?!~i:n;if(~i){const e=r?[...w.value,t]:[...w.value];e.splice(i,1),w.value=e}else r&&(w.value=[...w.value,t]);e.clearOnSelect&&(L.value="")}else{const e=!1!==n;w.value=e?[t]:[],R.value=e&&!C.value?t.title:"",(0,i.dY)(()=>{F.value=!1,h.value=!0})}}function Z(e){d.value=!0,setTimeout(()=>{p.value=!0})}function J(e){p.value=!1}function Q(t){null!=t&&(""!==t||e.multiple||C.value)||(w.value=[])}return(0,i.wB)(d,(t,n)=>{if(!t&&t!==n&&(v.value=-1,F.value=!1,L.value)){if(e.multiple)return void K(Yn(e,L.value));if(!C.value)return;w.value.some(e=>{let{title:t}=e;return t===L.value})?R.value="":K(Yn(e,L.value))}}),(0,i.wB)(F,()=>{if(!e.hideSelected&&F.value&&w.value.length){const t=O.value.findIndex(t=>w.value.some(n=>(e.valueComparator||o.bD)(n.value,t.value)));l.ZK&&window.requestAnimationFrame(()=>{t>=0&&m.value?.scrollToIndex(t)})}}),(0,i.wB)(()=>e.items,(e,t)=>{F.value||d.value&&!t.length&&e.length&&(F.value=!0)}),(0,E.C)(()=>{const t=!!(!e.hideNoData||O.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),n=w.value.length>0,s=Ni.filterProps(e);return(0,i.bF)(Ni,(0,i.v6)({ref:u},s,{modelValue:L.value,"onUpdate:modelValue":[e=>L.value=e,Q],focused:d.value,"onUpdate:focused":e=>d.value=e,validationValue:w.externalValue,counterValue:P.value,dirty:n,class:["v-combobox",{"v-combobox--active-menu":F.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!C.value,"v-combobox--selecting-index":v.value>-1,["v-combobox--"+(e.multiple?"multiple":"single")]:!0},e.class],style:e.style,readonly:T.isReadonly.value,placeholder:n?void 0:e.placeholder,"onClick:clear":H,"onMousedown:control":G,onKeydown:q}),{...a,default:()=>(0,i.Lk)(i.FK,null,[(0,i.bF)(ci,(0,i.v6)({ref:f,modelValue:F.value,"onUpdate:modelValue":e=>F.value=e,activator:"parent",contentClass:"v-combobox__content",disabled:N.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:$,onAfterLeave:Y},e.menuProps),{default:()=>[t&&(0,i.bF)(ii,(0,i.v6)({ref:z,filterable:!0,selected:B.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:X,onFocusin:Z,onFocusout:J,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},W,e.listProps),{default:()=>[a["prepend-item"]?.(),!O.value.length&&!e.hideNoData&&(a["no-data"]?.()??(0,i.bF)(Wn,{key:"no-data",title:c(e.noDataText)},null)),(0,i.bF)(Xi,{ref:m,renderless:!0,items:O.value,itemKey:"value"},{default:t=>{let{item:n,index:r,itemRef:s}=t;const o=(0,i.v6)(n.props,{ref:s,key:n.value,active:!(!V.value||0!==r)||void 0,onClick:()=>K(n,null)});return"divider"===n.type?a.divider?.({props:n.raw,index:r})??(0,i.bF)(hn,(0,i.v6)(n.props,{key:`divider-${r}`}),null):"subheader"===n.type?a.subheader?.({props:n.raw,index:r})??(0,i.bF)(Gn,(0,i.v6)(n.props,{key:`subheader-${r}`}),null):a.item?.({item:n,index:r,props:o})??(0,i.bF)(Wn,(0,i.v6)(o,{role:"option"}),{prepend:t=>{let{isSelected:r}=t;return(0,i.Lk)(i.FK,null,[e.multiple&&!e.hideSelected?(0,i.bF)(Xt,{key:n.value,modelValue:r,ripple:!1,tabindex:"-1"},null):void 0,n.props.prependAvatar&&(0,i.bF)(Nt,{image:n.props.prependAvatar},null),n.props.prependIcon&&(0,i.bF)(it,{icon:n.props.prependIcon},null)])},title:()=>h.value?n.title:nr("v-combobox",n.title,D(n)?.title)})}}),a["append-item"]?.()]})]}),w.value.map((t,n)=>{function s(e){e.stopPropagation(),e.preventDefault(),K(t,!1)}const l={"onClick:close":s,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),s(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},c=A.value?!!a.chip:!!a.selection,u=c?(0,o.T4)(A.value?a.chip({item:t,index:n,props:l}):a.selection({item:t,index:n})):void 0;if(!c||u)return(0,i.Lk)("div",{key:t.value,class:(0,r.C4)(["v-combobox__selection",n===v.value&&["v-combobox__selection--selected",x.value]]),style:(0,r.Tr)(n===v.value?M.value:{})},[A.value?a.chip?(0,i.bF)(oe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>[u]}):(0,i.bF)(un,(0,i.v6)({key:"chip",closable:e.closableChips,size:"small",text:t.title,disabled:t.props.disabled},l),null):u??(0,i.Lk)("span",{class:"v-combobox__selection-text"},[t.title,e.multiple&&n<w.value.length-1&&(0,i.Lk)("span",{class:"v-combobox__selection-comma"},[(0,i.eW)(",")])])])})]),"append-inner":function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,i.Lk)(i.FK,null,[a["append-inner"]?.(...n),e.hideNoData&&!e.items.length||!e.menuIcon?void 0:(0,i.bF)(it,{class:"v-combobox__menu-icon",color:u.value?.fieldIconColor,icon:e.menuIcon,onMousedown:j,onClick:o.lQ,"aria-label":c(U.value),title:c(U.value),tabindex:"-1"},null)])}})}),(0,ai.O)({isFocused:d,isPristine:h,menu:F,search:L,selectionIndex:v,filteredItems:I,select:K},u)}});n(4979),n(1678);const rs=(0,u.j)({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),as=(0,w.RW)()({name:"VConfirmEdit",props:rs(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const a=(0,Te.q)(e,"modelValue"),l=(0,s.KR)();(0,i.nT)(()=>{l.value=structuredClone((0,s.ux)(a.value))});const{t:c}=(0,S.Ym)(),u=(0,i.EW)(()=>(0,o.bD)(a.value,l.value));function d(t){return"boolean"===typeof e.disabled?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(t):u.value}const h=(0,i.EW)(()=>d("save")),p=(0,i.EW)(()=>d("cancel"));function f(){a.value=l.value,n("save",l.value)}function m(){l.value=structuredClone((0,s.ux)(a.value)),n("cancel")}function v(t){return(0,i.Lk)(i.FK,null,[(0,i.bF)(Mt,(0,i.v6)({disabled:p.value,variant:"text",color:e.color,onClick:m,text:c(e.cancelText)},t),null),(0,i.bF)(Mt,(0,i.v6)({disabled:h.value,variant:"text",color:e.color,onClick:f,text:c(e.okText)},t),null)])}let g=!1;return(0,E.C)(()=>(0,i.Lk)(i.FK,null,[r.default?.({model:l,save:f,cancel:m,isPristine:u.value,get actions(){return g=!0,v}}),!e.hideActions&&!g&&v()])),{save:f,cancel:m,isPristine:u}}}),ss=(0,u.j)({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),os=Symbol.for("vuetify:datatable:expanded");function ls(e){const t=(0,s.lW)(()=>e.expandOnClick),n=(0,Te.q)(e,"expanded",e.expanded,e=>new Set(e),e=>[...e.values()]);function r(e,t){const i=new Set(n.value);t?i.add(e.value):i.delete(e.value),n.value=i}function a(e){return n.value.has(e.value)}function o(e){r(e,!a(e))}const l={expand:r,expanded:n,expandOnClick:t,isExpanded:a,toggleExpand:o};return(0,i.Gt)(os,l),l}function cs(){const e=(0,i.WQ)(os);if(!e)throw new Error("foo");return e}const us=(0,u.j)({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),ds=Symbol.for("vuetify:data-table-group");function hs(e){const t=(0,Te.q)(e,"groupBy");return{groupBy:t}}function ps(e){const{disableSort:t,groupBy:n,sortBy:r}=e,a=(0,s.KR)(new Set),o=(0,i.EW)(()=>n.value.map(e=>({...e,order:e.order??!1})).concat(t?.value?[]:r.value));function l(e){return a.value.has(e.id)}function c(e){const t=new Set(a.value);l(e)?t.delete(e.id):t.add(e.id),a.value=t}function u(e){function t(e){const n=[];for(const i of e.items)"type"in i&&"group"===i.type?n.push(...t(i)):n.push(i);return[...new Set(n)]}return t({type:"group",items:e,id:"dummy",key:"dummy",value:"dummy",depth:0})}const d={sortByWithGroups:o,toggleGroup:c,opened:a,groupBy:n,extractRows:u,isGroupOpen:l};return(0,i.Gt)(ds,d),d}function fs(){const e=(0,i.WQ)(ds);if(!e)throw new Error("Missing group!");return e}function ms(e,t){if(!e.length)return[];const n=new Map;for(const i of e){const e=(0,o.no)(i.raw,t);n.has(e)||n.set(e,[]),n.get(e).push(i)}return n}function vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"root";if(!t.length)return[];const r=ms(e,t[0]),a=[],s=t.slice(1);return r.forEach((e,r)=>{const o=t[0],l=`${i}_${o}_${r}`;a.push({depth:n,id:l,key:o,value:r,items:s.length?vs(e,s,n+1,l):e,type:"group"})}),a}function gs(e,t){const n=[];for(const i of e)"type"in i&&"group"===i.type?(null!=i.value&&n.push(i),(t.has(i.id)||null==i.value)&&n.push(...gs(i.items,t))):n.push(i);return n}function ys(e,t,n){const r=(0,i.EW)(()=>{if(!t.value.length)return e.value;const i=vs(e.value,t.value.map(e=>e.key));return gs(i,n.value)});return{flatItems:r}}function _s(e){let{page:t,itemsPerPage:n,sortBy:r,groupBy:a,search:s}=e;const l=(0,d.n)("VDataTable"),c=()=>({page:t.value,itemsPerPage:n.value,sortBy:r.value,groupBy:a.value,search:s.value});let u=null;(0,i.wB)(c,e=>{(0,o.bD)(u,e)||(u&&u.search!==e.search&&(t.value=1),l.emit("update:options",e),u=e)},{deep:!0,immediate:!0})}const bs=(0,u.j)({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),xs=Symbol.for("vuetify:data-table-pagination");function Ss(e){const t=(0,Te.q)(e,"page",void 0,e=>Number(e??1)),n=(0,Te.q)(e,"itemsPerPage",void 0,e=>Number(e??10));return{page:t,itemsPerPage:n}}function Ms(e){const{page:t,itemsPerPage:n,itemsLength:r}=e,a=(0,i.EW)(()=>-1===n.value?0:n.value*(t.value-1)),s=(0,i.EW)(()=>-1===n.value?r.value:Math.min(r.value,a.value+n.value)),l=(0,i.EW)(()=>-1===n.value||0===r.value?1:Math.ceil(r.value/n.value));function c(e){n.value=e,t.value=1}function u(){t.value=(0,o.qE)(t.value+1,1,l.value)}function d(){t.value=(0,o.qE)(t.value-1,1,l.value)}function h(e){t.value=(0,o.qE)(e,1,l.value)}(0,i.wB)([t,l],()=>{t.value>l.value&&(t.value=l.value)});const p={page:t,itemsPerPage:n,startIndex:a,stopIndex:s,pageCount:l,itemsLength:r,nextPage:u,prevPage:d,setPage:h,setItemsPerPage:c};return(0,i.Gt)(xs,p),p}function ws(){const e=(0,i.WQ)(xs);if(!e)throw new Error("Missing pagination!");return e}function Es(e){const t=(0,d.n)("usePaginatedItems"),{items:n,startIndex:r,stopIndex:a,itemsPerPage:s}=e,o=(0,i.EW)(()=>s.value<=0?n.value:n.value.slice(r.value,a.value));return(0,i.wB)(o,e=>{t.emit("update:currentItems",e)},{immediate:!0}),{paginatedItems:o}}const Ts={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},As={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,currentPage:n,selected:i}=e;return As.select({items:n,value:t,selected:i})}},Cs={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,allItems:n,selected:i}=e;return Cs.select({items:n,value:t,selected:i})}},Rs=(0,u.j)({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:o.bD}},"DataTable-select"),Ls=Symbol.for("vuetify:data-table-selection");function Ps(e,t){let{allItems:n,currentPage:r}=t;const a=(0,Te.q)(e,"modelValue",e.modelValue,t=>new Set((0,o.BN)(t).map(t=>n.value.find(n=>e.valueComparator(t,n.value))?.value??t)),e=>[...e.values()]),l=(0,i.EW)(()=>n.value.filter(e=>e.selectable)),c=(0,i.EW)(()=>r.value.filter(e=>e.selectable)),u=(0,i.EW)(()=>{if("object"===typeof e.selectStrategy)return e.selectStrategy;switch(e.selectStrategy){case"single":return Ts;case"all":return Cs;case"page":default:return As}}),d=(0,s.IJ)(null);function h(e){return(0,o.BN)(e).every(e=>a.value.has(e.value))}function p(e){return(0,o.BN)(e).some(e=>a.value.has(e.value))}function f(e,t){const n=u.value.select({items:e,value:t,selected:new Set(a.value)});a.value=n}function m(t,n,i){const a=[];if(n=n??r.value.findIndex(e=>e.value===t.value),"single"!==e.selectStrategy&&i?.shiftKey&&null!==d.value){const[e,t]=[d.value,n].sort((e,t)=>e-t);a.push(...r.value.slice(e,t+1).filter(e=>e.selectable))}else a.push(t),d.value=n;f(a,!h([t]))}function v(e){const t=u.value.selectAll({value:e,allItems:l.value,currentPage:c.value,selected:new Set(a.value)});a.value=t}const g=(0,i.EW)(()=>a.value.size>0),y=(0,i.EW)(()=>{const e=u.value.allSelected({allItems:l.value,currentPage:c.value});return!!e.length&&h(e)}),_=(0,s.lW)(()=>u.value.showSelectAll),b={toggleSelect:m,select:f,selectAll:v,isSelected:h,isSomeSelected:p,someSelected:g,allSelected:y,showSelectAll:_,lastSelectedIndex:d,selectStrategy:u};return(0,i.Gt)(Ls,b),b}function Is(){const e=(0,i.WQ)(Ls);if(!e)throw new Error("Missing selection!");return e}const Ds=(0,u.j)({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Os=Symbol.for("vuetify:data-table-sort");function Ns(e){const t=(0,Te.q)(e,"sortBy"),n=(0,s.lW)(()=>e.mustSort),i=(0,s.lW)(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:i}}function ks(e){const{sortBy:t,mustSort:n,multiSort:r,page:a}=e,s=e=>{if(null==e.key)return;let i=t.value.map(e=>({...e}))??[];const s=i.find(t=>t.key===e.key);s?"desc"===s.order?n.value&&1===i.length?s.order="asc":i=i.filter(t=>t.key!==e.key):s.order="desc":r.value?i.push({key:e.key,order:"asc"}):i=[{key:e.key,order:"asc"}],t.value=i,a&&(a.value=1)};function o(e){return!!t.value.find(t=>t.key===e.key)}const l={sortBy:t,toggleSort:s,isSorted:o};return(0,i.Gt)(Os,l),l}function Fs(){const e=(0,i.WQ)(Os);if(!e)throw new Error("Missing sort!");return e}function Us(e,t,n,r){const a=(0,S.Ym)(),s=(0,i.EW)(()=>n.value.length?Bs(t.value,n.value,a.current.value,{transform:r?.transform,sortFunctions:{...e.customKeySort,...r?.sortFunctions?.value},sortRawFunctions:r?.sortRawFunctions?.value}):t.value);return{sortedItems:s}}function Bs(e,t,n,i){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"}),a=e.map(e=>[e,i?.transform?i.transform(e):e]);return a.sort((e,n)=>{for(let a=0;a<t.length;a++){let s=!1;const l=t[a].key,c=t[a].order??"asc";if(!1===c)continue;let u=(0,o.no)(e[1],l),d=(0,o.no)(n[1],l),h=e[0].raw,p=n[0].raw;if("desc"===c&&([u,d]=[d,u],[h,p]=[p,h]),i?.sortRawFunctions?.[l]){const e=i.sortRawFunctions[l](h,p);if(null==e)continue;if(s=!0,e)return e}if(i?.sortFunctions?.[l]){const e=i.sortFunctions[l](u,d);if(null==e)continue;if(s=!0,e)return e}if(!s&&(u instanceof Date&&d instanceof Date&&(u=u.getTime(),d=d.getTime()),[u,d]=[u,d].map(e=>null!=e?e.toString().toLocaleLowerCase():e),u!==d))return(0,o.Im)(u)&&(0,o.Im)(d)?0:(0,o.Im)(u)?-1:(0,o.Im)(d)?1:isNaN(u)||isNaN(d)?r.compare(u,d):Number(u)-Number(d)}return 0}).map(e=>{let[t]=e;return t})}const Vs=(0,u.j)({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function zs(e,t){const n=e.returnObject?t:(0,o.TD)(t,e.itemValue),i=(0,o.TD)(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:i,raw:t}}function Ws(e,t){const n=[];for(const i of t)n.push(zs(e,i));return n}function Hs(e){const t=(0,i.EW)(()=>Ws(e,e.items));return{items:t}}const Gs=(0,u.j)({search:String,loading:Boolean,...(0,a.u)(),...Vs(),...Rs(),...Ds(),...bs({itemsPerPage:5}),...ss(),...us(),...Qi(),...C(),...(0,me.m)({transition:{component:q,hideOnLeave:!0}})},"VDataIterator"),js=(0,w.RW)()({name:"VDataIterator",props:Gs(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const a=(0,Te.q)(e,"groupBy"),o=(0,s.lW)(()=>e.search),{items:l}=Hs(e),{filteredItems:c}=tr(e,l,o,{transform:e=>e.raw}),{sortBy:u,multiSort:d,mustSort:h}=Ns(e),{page:p,itemsPerPage:f}=Ss(e),{toggleSort:m}=ks({sortBy:u,multiSort:d,mustSort:h,page:p}),{sortByWithGroups:v,opened:g,extractRows:y,isGroupOpen:_,toggleGroup:b}=ps({groupBy:a,sortBy:u}),{sortedItems:x}=Us(e,c,v,{transform:e=>e.raw}),{flatItems:S}=ys(x,a,g),M=(0,s.lW)(()=>S.value.length),{startIndex:w,stopIndex:T,pageCount:A,prevPage:C,nextPage:R,setItemsPerPage:L,setPage:P}=Ms({page:p,itemsPerPage:f,itemsLength:M}),{paginatedItems:I}=Es({items:S,startIndex:w,stopIndex:T,itemsPerPage:f}),D=(0,i.EW)(()=>y(I.value)),{isSelected:O,select:N,selectAll:k,toggleSelect:F}=Ps(e,{allItems:l,currentPage:D}),{isExpanded:U,toggleExpand:B}=ls(e);_s({page:p,itemsPerPage:f,sortBy:u,groupBy:a,search:o});const V=(0,i.EW)(()=>({page:p.value,itemsPerPage:f.value,sortBy:u.value,pageCount:A.value,toggleSort:m,prevPage:C,nextPage:R,setPage:P,setItemsPerPage:L,isSelected:O,select:N,selectAll:k,toggleSelect:F,isExpanded:U,toggleExpand:B,isGroupOpen:_,toggleGroup:b,items:D.value,groupedItems:I.value}));return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:(0,r.Tr)(e.style)},{default:()=>[n.header?.(V.value),(0,i.bF)(me.M,{transition:e.transition},{default:()=>[e.loading?(0,i.bF)(mt,{key:"loader",name:"v-data-iterator",active:!0},{default:e=>n.loader?.(e)}):(0,i.Lk)("div",{key:"items"},[I.value.length?n.default?.(V.value):n["no-data"]?.()])]}),n.footer?.(V.value)]})),{}}});function Xs(){const e=(0,s.KR)([]);function t(t,n){e.value[n]=t}return(0,i.Ic)(()=>e.value=[]),{refs:e,updateRef:t}}const qs=(0,u.j)({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Je.TX,default:"$first"},prevIcon:{type:Je.TX,default:"$prev"},nextIcon:{type:Je.TX,default:"$next"},lastIcon:{type:Je.TX,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,..._e(),...(0,a.u)(),...Oe(),...xe(),...pe(),...et(),...C({tag:"nav"}),...(0,M.yx)(),...Ue({variant:"text"})},"VPagination"),$s=(0,w.RW)()({name:"VPagination",props:qs(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const l=(0,Te.q)(e,"modelValue"),{t:u,n:d}=(0,S.Ym)(),{isRtl:h}=(0,S.IA)(),{themeClasses:p}=(0,M.NX)(e),{width:f}=(0,qt._F)(),m=(0,s.IJ)(-1);(0,ae.Uh)(void 0,{scoped:!0});const{resizeRef:v}=c(e=>{if(!e.length)return;const{target:t,contentRect:n}=e[0],i=t.querySelector(".v-pagination__list > *");if(!i)return;const r=n.width,a=i.offsetWidth+2*parseFloat(getComputedStyle(i).marginRight);m.value=b(r,a)}),g=(0,i.EW)(()=>parseInt(e.length,10)),y=(0,i.EW)(()=>parseInt(e.start,10)),_=(0,i.EW)(()=>null!=e.totalVisible?parseInt(e.totalVisible,10):m.value>=0?m.value:b(f.value,58));function b(t,n){const i=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((t-n*i)/n).toFixed(2))))}const x=(0,i.EW)(()=>{if(g.value<=0||isNaN(g.value)||g.value>Number.MAX_SAFE_INTEGER)return[];if(_.value<=0)return[];if(1===_.value)return[l.value];if(g.value<=_.value)return(0,o.Sd)(g.value,y.value);const t=_.value%2===0,n=t?_.value/2:Math.floor(_.value/2),i=t?n:n+1,r=g.value-n;if(i-l.value>=0)return[...(0,o.Sd)(Math.max(1,_.value-1),y.value),e.ellipsis,g.value];if(l.value-r>=(t?1:0)){const t=_.value-1,n=g.value-t+y.value;return[y.value,e.ellipsis,...(0,o.Sd)(t,n)]}{const t=Math.max(1,_.value-2),n=1===t?l.value:l.value-Math.ceil(t/2)+y.value;return[y.value,e.ellipsis,...(0,o.Sd)(t,n),e.ellipsis,g.value]}});function w(e,t,n){e.preventDefault(),l.value=t,n&&a(n,t)}const{refs:T,updateRef:A}=Xs();(0,ae.Uh)({VPaginationBtn:{color:(0,s.lW)(()=>e.color),border:(0,s.lW)(()=>e.border),density:(0,s.lW)(()=>e.density),size:(0,s.lW)(()=>e.size),variant:(0,s.lW)(()=>e.variant),rounded:(0,s.lW)(()=>e.rounded),elevation:(0,s.lW)(()=>e.elevation)}});const C=(0,i.EW)(()=>x.value.map((t,n)=>{const i=e=>A(e,n);if("string"===typeof t)return{isActive:!1,key:`ellipsis-${n}`,page:t,props:{ref:i,ellipsis:!0,icon:!0,disabled:!0}};{const n=t===l.value;return{isActive:n,key:t,page:d(t),props:{ref:i,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:n?e.activeColor:e.color,"aria-current":n,"aria-label":u(n?e.currentPageAriaLabel:e.pageAriaLabel,t),onClick:e=>w(e,t)}}}})),R=(0,i.EW)(()=>{const t=!!e.disabled||l.value<=y.value,n=!!e.disabled||l.value>=y.value+g.value-1;return{first:e.showFirstLastPage?{icon:h.value?e.lastIcon:e.firstIcon,onClick:e=>w(e,y.value,"first"),disabled:t,"aria-label":u(e.firstAriaLabel),"aria-disabled":t}:void 0,prev:{icon:h.value?e.nextIcon:e.prevIcon,onClick:e=>w(e,l.value-1,"prev"),disabled:t,"aria-label":u(e.previousAriaLabel),"aria-disabled":t},next:{icon:h.value?e.prevIcon:e.nextIcon,onClick:e=>w(e,l.value+1,"next"),disabled:n,"aria-label":u(e.nextAriaLabel),"aria-disabled":n},last:e.showFirstLastPage?{icon:h.value?e.firstIcon:e.lastIcon,onClick:e=>w(e,y.value+g.value-1,"last"),disabled:n,"aria-label":u(e.lastAriaLabel),"aria-disabled":n}:void 0}});function L(){const e=l.value-y.value;T.value[e]?.$el.focus()}function P(t){t.key===o.K7.left&&!e.disabled&&l.value>Number(e.start)?(l.value=l.value-1,(0,i.dY)(L)):t.key===o.K7.right&&!e.disabled&&l.value<y.value+g.value-1&&(l.value=l.value+1,(0,i.dY)(L))}return(0,E.C)(()=>(0,i.bF)(e.tag,{ref:v,class:(0,r.C4)(["v-pagination",p.value,e.class]),style:(0,r.Tr)(e.style),role:"navigation","aria-label":u(e.ariaLabel),onKeydown:P,"data-test":"v-pagination-root"},{default:()=>[(0,i.Lk)("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&(0,i.Lk)("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(R.value.first):(0,i.bF)(Mt,(0,i.v6)({_as:"VPaginationBtn"},R.value.first),null)]),(0,i.Lk)("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(R.value.prev):(0,i.bF)(Mt,(0,i.v6)({_as:"VPaginationBtn"},R.value.prev),null)]),C.value.map((e,t)=>(0,i.Lk)("li",{key:e.key,class:(0,r.C4)(["v-pagination__item",{"v-pagination__item--is-active":e.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(e):(0,i.bF)(Mt,(0,i.v6)({_as:"VPaginationBtn"},e.props),{default:()=>[e.page]})])),(0,i.Lk)("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(R.value.next):(0,i.bF)(Mt,(0,i.v6)({_as:"VPaginationBtn"},R.value.next),null)]),e.showFirstLastPage&&(0,i.Lk)("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(R.value.last):(0,i.bF)(Mt,(0,i.v6)({_as:"VPaginationBtn"},R.value.last),null)])])]})),{}}}),Ys=(0,u.j)({prevIcon:{type:Je.TX,default:"$prev"},nextIcon:{type:Je.TX,default:"$next"},firstIcon:{type:Je.TX,default:"$first"},lastIcon:{type:Je.TX,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ks=(0,w.RW)()({name:"VDataTableFooter",props:Ys(),setup(e,t){let{slots:n}=t;const{t:r}=(0,S.Ym)(),{page:a,pageCount:s,startIndex:o,stopIndex:l,itemsLength:c,itemsPerPage:u,setItemsPerPage:d}=ws(),h=(0,i.EW)(()=>e.itemsPerPageOptions.map(e=>"number"===typeof e?{value:e,title:-1===e?r("$vuetify.dataFooter.itemsPerPageAll"):String(e)}:{...e,title:isNaN(Number(e.title))?r(e.title):e.title}));return(0,E.C)(()=>{const t=$s.filterProps(e);return(0,i.Lk)("div",{class:"v-data-table-footer"},[n.prepend?.(),(0,i.Lk)("div",{class:"v-data-table-footer__items-per-page"},[(0,i.Lk)("span",{"aria-label":r(e.itemsPerPageText)},[r(e.itemsPerPageText)]),(0,i.bF)(Ki,{items:h.value,modelValue:u.value,"onUpdate:modelValue":e=>d(Number(e)),density:"compact",variant:"outlined",hideDetails:!0},null)]),(0,i.Lk)("div",{class:"v-data-table-footer__info"},[(0,i.Lk)("div",null,[r(e.pageText,c.value?o.value+1:0,l.value,c.value)])]),(0,i.Lk)("div",{class:"v-data-table-footer__pagination"},[(0,i.bF)($s,(0,i.v6)({modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},t),null)])])}),{}}}),Zs=(0,w.cq)({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const a=e.tag??"td",s="string"===typeof e.fixed?e.fixed:e.fixed?"start":"none";return(0,i.bF)(a,{class:(0,r.C4)(["v-data-table__td",{"v-data-table-column--fixed":"start"===s,"v-data-table-column--fixed-end":"end"===s,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:(0,o.Dg)(e.height),width:(0,o.Dg)(e.width),maxWidth:(0,o.Dg)(e.maxWidth),left:"start"===s?(0,o.Dg)(e.fixedOffset||null):void 0,right:"end"===s?(0,o.Dg)(e.fixedEndOffset||null):void 0}},{default:()=>[n.default?.()]})}),Js=(0,u.j)({headers:Array},"DataTable-header"),Qs=Symbol.for("vuetify:data-table-headers"),eo={title:"",sortable:!1},to={...eo,width:48};function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.map(e=>({element:e,priority:0}));return{enqueue:(e,n)=>{let i=!1;for(let r=0;r<t.length;r++){const a=t[r];if(a.priority>n){t.splice(r,0,{element:e,priority:n}),i=!0;break}}i||t.push({element:e,priority:n})},size:()=>t.length,count:()=>{let e=0;if(!t.length)return 0;const n=Math.floor(t[0].priority);for(let i=0;i<t.length;i++)Math.floor(t[i].priority)===n&&(e+=1);return e},dequeue:()=>t.shift()}}function io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.children)for(const n of e.children)io(n,t);else t.push(e);return t}function ro(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&ro(n.children,t);return t}function ao(e){if(e.key)return"data-table-group"===e.key?eo:["data-table-expand","data-table-select"].includes(e.key)?to:void 0}function so(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?Math.max(t,...e.children.map(e=>so(e,t+1))):t}function oo(e){let t=!1;function n(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";if(e)if("none"!==r&&(e.fixed=r),!0===e.fixed&&(e.fixed="start"),e.fixed===i)if(e.children)if("start"===i)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],i,i);else for(let t=0;t<e.children.length;t++)n(e.children[t],i,i);else t||"start"!==i?t||"end"!==i?isNaN(Number(e.width))?(0,h.yA)(`Multiple fixed columns should have a static width (key: ${e.key})`):e.minWidth=Math.max(Number(e.width)||0,Number(e.minWidth)||0):e.firstFixedEnd=!0:e.lastFixed=!0,t=!0;else if(e.children)if("start"===i)for(let t=e.children.length-1;t>=0;t--)n(e.children[t],i);else for(let t=0;t<e.children.length;t++)n(e.children[t],i);else t=!1}for(let a=e.length-1;a>=0;a--)n(e[a],"start");for(let a=0;a<e.length;a++)n(e[a],"end");let i=0;for(let a=0;a<e.length;a++)i=lo(e[a],i);let r=0;for(let a=e.length-1;a>=0;a--)r=co(e[a],r)}function lo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=lo(n,t)}else e.fixed&&"end"!==e.fixed&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function co(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=co(n,t)}else"end"===e.fixed&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function uo(e,t){const n=[];let i=0;const r=no(e);while(r.size()>0){let e=r.count();const a=[];let s=1;while(e>0){const{element:n,priority:o}=r.dequeue(),l=t-i-so(n);if(a.push({...n,rowspan:l??1,colspan:n.children?io(n).length:1}),n.children)for(const e of n.children){const t=o%1+s/Math.pow(10,i+2);r.enqueue(e,i+l+t)}s+=1,e-=1}i+=1,n.push(a)}const a=e.map(e=>io(e)).flat();return{columns:a,headers:n}}function ho(e){const t=[];for(const n of e){const e={...ao(n),...n},i=e.key??("string"===typeof e.value?e.value:null),r=e.value??i??null,a={...e,key:i,value:r,sortable:e.sortable??(null!=e.key||!!e.sort),children:e.children?ho(e.children):void 0};t.push(a)}return t}function po(e,t){const n=(0,s.KR)([]),a=(0,s.KR)([]),o=(0,s.KR)({}),l=(0,s.KR)({}),c=(0,s.KR)({});(0,i.nT)(()=>{const i=e.headers||Object.keys(e.items[0]??{}).map(e=>({key:e,title:(0,r.ZH)(e)})),s=i.slice(),u=ro(s);t?.groupBy?.value.length&&!u.has("data-table-group")&&s.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!u.has("data-table-select")&&s.unshift({key:"data-table-select"}),t?.showExpand?.value&&!u.has("data-table-expand")&&s.push({key:"data-table-expand"});const d=ho(s);oo(d);const h=Math.max(...d.map(e=>so(e)))+1,p=uo(d,h);n.value=p.headers,a.value=p.columns;const f=p.headers.flat(1);for(const e of f)e.key&&(e.sortable&&(e.sort&&(o.value[e.key]=e.sort),e.sortRaw&&(l.value[e.key]=e.sortRaw)),e.filter&&(c.value[e.key]=e.filter))});const u={headers:n,columns:a,sortFunctions:o,sortRawFunctions:l,filterFunctions:c};return(0,i.Gt)(Qs,u),u}function fo(){const e=(0,i.WQ)(Qs);if(!e)throw new Error("Missing headers!");return e}const mo=(0,u.j)({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:Je.TX,default:"$sortAsc"},sortDescIcon:{type:Je.TX,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...(0,qt.hx)(),...pt()},"VDataTableHeaders"),vo=(0,w.RW)()({name:"VDataTableHeaders",props:mo(),setup(e,t){let{slots:n}=t;const{t:a}=(0,S.Ym)(),{toggleSort:s,sortBy:l,isSorted:c}=Fs(),{someSelected:u,allSelected:d,selectAll:h,showSelectAll:p}=Is(),{columns:f,headers:m}=fo(),{loaderClasses:v}=ft(e);function g(t,n){if(!e.sticky&&!e.fixedHeader&&!t.fixed)return;const i="string"===typeof t.fixed?t.fixed:t.fixed?"start":"none";return{position:"sticky",left:"start"===i?(0,o.Dg)(t.fixedOffset):void 0,right:"end"===i?(0,o.Dg)(t.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${n})`:void 0}}function y(t,n){"Enter"!==t.key||e.disableSort||s(n)}function _(t){const n=l.value.find(e=>e.key===t.key);return n?"asc"===n.order?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:b,backgroundColorStyles:x}=(0,he.z6)(()=>e.color),{displayClasses:M,mobile:w}=(0,qt._F)(e),T=(0,i.EW)(()=>({headers:m.value,columns:f.value,toggleSort:s,isSorted:c,sortBy:l.value,someSelected:u.value,allSelected:d.value,selectAll:h,getSortIcon:_})),A=(0,i.EW)(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},M.value,v.value]),C=t=>{let{column:a,x:f,y:m}=t;const v="data-table-select"===a.key||"data-table-expand"===a.key,S=(0,i.v6)(e.headerProps??{},a.headerProps??{});return(0,i.bF)(Zs,(0,i.v6)({tag:"th",align:a.align,class:[{"v-data-table__th--sortable":a.sortable&&!e.disableSort,"v-data-table__th--sorted":c(a),"v-data-table__th--fixed":a.fixed},...A.value],style:{width:(0,o.Dg)(a.width),minWidth:(0,o.Dg)(a.minWidth),maxWidth:(0,o.Dg)(a.maxWidth),...g(a,m)},colspan:a.colspan,rowspan:a.rowspan,fixed:a.fixed,nowrap:a.nowrap,lastFixed:a.lastFixed,firstFixedEnd:a.firstFixedEnd,noPadding:v,tabindex:a.sortable?0:void 0,onClick:a.sortable?()=>s(a):void 0,onKeydown:a.sortable?e=>y(e,a):void 0},S),{default:()=>{const t=`header.${a.key}`,o={column:a,selectAll:h,isSorted:c,toggleSort:s,sortBy:l.value,someSelected:u.value,allSelected:d.value,getSortIcon:_};return n[t]?n[t](o):"data-table-select"===a.key?n["header.data-table-select"]?.(o)??(p.value&&(0,i.bF)(Xt,{modelValue:d.value,indeterminate:u.value&&!d.value,"onUpdate:modelValue":h},null)):(0,i.Lk)("div",{class:"v-data-table-header__content"},[(0,i.Lk)("span",null,[a.title]),a.sortable&&!e.disableSort&&(0,i.bF)(it,{key:"icon",class:"v-data-table-header__sort-icon",icon:_(a)},null),e.multiSort&&c(a)&&(0,i.Lk)("div",{key:"badge",class:(0,r.C4)(["v-data-table-header__sort-badge",...b.value]),style:(0,r.Tr)(x.value)},[l.value.findIndex(e=>e.key===a.key)+1])])}})},R=()=>{const t=(0,i.EW)(()=>f.value.filter(t=>t?.sortable&&!e.disableSort)),n=(0,i.EW)(()=>{const e=f.value.find(e=>"data-table-select"===e.key);if(null!=e)return d.value?"$checkboxOn":u.value?"$checkboxIndeterminate":"$checkboxOff"});return(0,i.bF)(Zs,(0,i.v6)({tag:"th",class:[...A.value],colspan:m.value.length+1},e.headerProps),{default:()=>[(0,i.Lk)("div",{class:"v-data-table-header__content"},[(0,i.bF)(Ki,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:t.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>l.value=[],appendIcon:n.value,"onClick:append":()=>h(!d.value)},{chip:e=>(0,i.bF)(un,{onClick:e.item.raw?.sortable?()=>s(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,(0,i.bF)(it,{class:(0,r.C4)(["v-data-table__td-sort-icon",c(e.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:_(e.item.raw),size:"small"},null)]})})])]})};(0,E.C)(()=>w.value?(0,i.Lk)("tr",null,[(0,i.bF)(R,null,null)]):(0,i.Lk)(i.FK,null,[n.headers?n.headers(T.value):m.value.map((e,t)=>(0,i.Lk)("tr",null,[e.map((e,n)=>(0,i.bF)(C,{column:e,x:n,y:t},null))])),e.loading&&(0,i.Lk)("tr",{class:"v-data-table-progress"},[(0,i.Lk)("th",{colspan:f.value.length},[(0,i.bF)(mt,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),go=(0,u.j)({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),yo=(0,w.RW)()({name:"VDataTableGroupHeaderRow",props:go(),setup(e,t){let{slots:n}=t;const{isGroupOpen:r,toggleGroup:a,extractRows:s}=fs(),{isSelected:o,isSomeSelected:l,select:c}=Is(),{columns:u}=fo(),d=(0,i.EW)(()=>s([e.item]));return()=>(0,i.Lk)("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(t=>{if("data-table-group"===t.key){const t=r(e.item)?"$expand":"$next",s=()=>a(e.item);return n["data-table-group"]?.({item:e.item,count:d.value.length,props:{icon:t,onClick:s}})??(0,i.bF)(Zs,{class:"v-data-table-group-header-row__column"},{default:()=>[(0,i.bF)(Mt,{size:"small",variant:"text",icon:t,onClick:s},null),(0,i.Lk)("span",null,[e.item.value]),(0,i.Lk)("span",null,[(0,i.eW)("("),d.value.length,(0,i.eW)(")")])]})}if("data-table-select"===t.key){const e=o(d.value),t=l(d.value)&&!e,r=e=>c(d.value,e);return n["data-table-select"]?.({props:{modelValue:e,indeterminate:t,"onUpdate:modelValue":r}})??(0,i.Lk)("td",null,[(0,i.bF)(Xt,{modelValue:e,indeterminate:t,"onUpdate:modelValue":r},null)])}return(0,i.Lk)("td",null,null)})])}}),_o=(0,u.j)({index:Number,item:Object,cellProps:[Object,Function],onClick:(0,o.uR)(),onContextmenu:(0,o.uR)(),onDblclick:(0,o.uR)(),...(0,qt.hx)()},"VDataTableRow"),bo=(0,w.RW)()({name:"VDataTableRow",props:_o(),setup(e,t){let{slots:n}=t;const{displayClasses:a,mobile:s}=(0,qt._F)(e,"v-data-table__tr"),{isSelected:l,toggleSelect:c,someSelected:u,allSelected:d,selectAll:h}=Is(),{isExpanded:p,toggleExpand:f}=cs(),{toggleSort:m,sortBy:v,isSorted:g}=Fs(),{columns:y}=fo();(0,E.C)(()=>(0,i.Lk)("tr",{class:(0,r.C4)(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map((t,a)=>{const y=e.item,_=`item.${t.key}`,b=`header.${t.key}`,x={index:e.index,item:y.raw,internalItem:y,value:(0,o.no)(y.columns,t.key),column:t,isSelected:l,toggleSelect:c,isExpanded:p,toggleExpand:f},S={column:t,selectAll:h,isSorted:g,toggleSort:m,sortBy:v.value,someSelected:u.value,allSelected:d.value,getSortIcon:()=>""},M="function"===typeof e.cellProps?e.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value,column:t}):e.cellProps,w="function"===typeof t.cellProps?t.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value}):t.cellProps;return(0,i.bF)(Zs,(0,i.v6)({align:t.align,class:{"v-data-table__td--expanded-row":"data-table-expand"===t.key,"v-data-table__td--select-row":"data-table-select"===t.key},fixed:t.fixed,fixedOffset:t.fixedOffset,fixedEndOffset:t.fixedEndOffset,lastFixed:t.lastFixed,firstFixedEnd:t.firstFixedEnd,maxWidth:s.value?void 0:t.maxWidth,noPadding:"data-table-select"===t.key||"data-table-expand"===t.key,nowrap:t.nowrap,width:s.value?void 0:t.width},M,w),{default:()=>{if("data-table-select"===t.key)return n["item.data-table-select"]?.({...x,props:{disabled:!y.selectable,modelValue:l([y]),onClick:(0,P.D$)(()=>c(y),["stop"])}})??(0,i.bF)(Xt,{disabled:!y.selectable,modelValue:l([y]),onClick:(0,P.D$)(t=>c(y,e.index,t),["stop"])},null);if("data-table-expand"===t.key)return n["item.data-table-expand"]?.({...x,props:{icon:p(y)?"$collapse":"$expand",size:"small",variant:"text",onClick:(0,P.D$)(()=>f(y),["stop"])}})??(0,i.bF)(Mt,{icon:p(y)?"$collapse":"$expand",size:"small",variant:"text",onClick:(0,P.D$)(()=>f(y),["stop"])},null);if(n[_]&&!s.value)return n[_](x);const a=(0,r.v_)(x.value);return s.value?(0,i.Lk)(i.FK,null,[(0,i.Lk)("div",{class:"v-data-table__td-title"},[n[b]?.(S)??t.title]),(0,i.Lk)("div",{class:"v-data-table__td-value"},[n[_]?.(x)??a])]):a}})})]))}});function xo(e,t,n){return Object.keys(e).filter(e=>(0,o.Mp)(e)&&e.endsWith(t)).reduce((i,r)=>(i[r.slice(0,-t.length)]=t=>e[r](t,n(t)),i),{})}const So=(0,u.j)({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...(0,qt.hx)()},"VDataTableRows"),Mo=(0,w.RW)()({name:"VDataTableRows",inheritAttrs:!1,props:So(),setup(e,t){let{attrs:n,slots:r}=t;const{columns:a}=fo(),{expandOnClick:s,toggleExpand:o,isExpanded:l}=cs(),{isSelected:c,toggleSelect:u}=Is(),{toggleGroup:d,isGroupOpen:h}=fs(),{t:p}=(0,S.Ym)(),{mobile:f}=(0,qt._F)(e);return(0,E.C)(()=>!e.loading||e.items.length&&!r.loading?e.loading||e.items.length||e.hideNoData?(0,i.Lk)(i.FK,null,[e.items.map((t,p)=>{if("group"===t.type){const e={index:p,item:t,columns:a.value,isExpanded:l,toggleExpand:o,isSelected:c,toggleSelect:u,toggleGroup:d,isGroupOpen:h};return r["group-header"]?r["group-header"](e):(0,i.bF)(yo,(0,i.v6)({key:`group-header_${t.id}`,item:t},xo(n,":group-header",()=>e)),r)}const m={index:p,item:t.raw,internalItem:t,columns:a.value,isExpanded:l,toggleExpand:o,isSelected:c,toggleSelect:u},v={...m,props:(0,i.v6)({key:`item_${t.key??t.index}`,onClick:s.value?()=>{o(t)}:void 0,index:p,item:t,cellProps:e.cellProps,mobile:f.value},xo(n,":row",()=>m),"function"===typeof e.rowProps?e.rowProps({item:m.item,index:m.index,internalItem:m.internalItem}):e.rowProps)};return(0,i.Lk)(i.FK,{key:v.props.key},[r.item?r.item(v):(0,i.bF)(bo,v.props,r),l(t)&&r["expanded-row"]?.(m)])})]):(0,i.Lk)("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[(0,i.Lk)("td",{colspan:a.value.length},[r["no-data"]?.()??p(e.noDataText)])]):(0,i.Lk)("tr",{class:"v-data-table-rows-loading",key:"loading"},[(0,i.Lk)("td",{colspan:a.value.length},[r.loading?.()??p(e.loadingText)])])),{}}}),wo=(0,u.j)({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...(0,a.u)(),...Oe(),...C(),...(0,M.yx)()},"VTable"),Eo=(0,w.RW)()({name:"VTable",props:wo(),setup(e,t){let{slots:n,emit:a}=t;const{themeClasses:s}=(0,M.NX)(e),{densityClasses:l}=Ne(e);return(0,E.C)(()=>{const t={VCheckboxBtn:{density:e.density}};return(0,i.bF)(e.tag,{class:(0,r.C4)(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":"even"===e.striped,"v-table--striped-odd":"odd"===e.striped},s.value,l.value,e.class]),style:(0,r.Tr)(e.style)},{default:()=>[n.top?.(),(0,i.bF)(oe,{defaults:t},{default:()=>[n.default?(0,i.Lk)("div",{class:"v-table__wrapper",style:{height:(0,o.Dg)(e.height)}},[(0,i.Lk)("table",null,[n.default()])]):n.wrapper?.()]}),n.bottom?.()]})}),{}}}),To=(0,u.j)({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Ao(e,t,n,i){const r=e.returnObject?t:(0,o.TD)(t,e.itemValue),a=(0,o.TD)(t,e.itemSelectable,!0),s=i.reduce((e,n)=>(null!=n.key&&(e[n.key]=(0,o.TD)(t,n.value)),e),{});return{type:"item",key:e.returnObject?(0,o.TD)(t,e.itemValue):r,index:n,value:r,selectable:a,columns:s,raw:t}}function Co(e,t,n){return t.map((t,i)=>Ao(e,t,i,n))}function Ro(e,t){const n=(0,i.EW)(()=>Co(e,e.items,t.value));return{items:n}}const Lo=(0,u.j)({...So(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ss(),...us(),...Js(),...To(),...Rs(),...Ds(),...mo(),...wo()},"DataTable"),Po=(0,u.j)({...bs(),...Lo(),...Qi(),...Ys()},"VDataTable"),Io=(0,w.RW)()({name:"VDataTable",props:Po(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{groupBy:a}=hs(e),{sortBy:o,multiSort:l,mustSort:c}=Ns(e),{page:u,itemsPerPage:d}=Ss(e),{disableSort:h}=(0,s.QW)(e),{columns:p,headers:f,sortFunctions:m,sortRawFunctions:v,filterFunctions:g}=po(e,{groupBy:a,showSelect:(0,s.lW)(()=>e.showSelect),showExpand:(0,s.lW)(()=>e.showExpand)}),{items:y}=Ro(e,p),_=(0,s.lW)(()=>e.search),{filteredItems:b}=tr(e,y,_,{transform:e=>e.columns,customKeyFilter:g}),{toggleSort:x}=ks({sortBy:o,multiSort:l,mustSort:c,page:u}),{sortByWithGroups:S,opened:M,extractRows:w,isGroupOpen:T,toggleGroup:A}=ps({groupBy:a,sortBy:o,disableSort:h}),{sortedItems:C}=Us(e,b,S,{transform:e=>({...e.raw,...e.columns}),sortFunctions:m,sortRawFunctions:v}),{flatItems:R}=ys(C,a,M),L=(0,i.EW)(()=>R.value.length),{startIndex:P,stopIndex:I,pageCount:D,setItemsPerPage:O}=Ms({page:u,itemsPerPage:d,itemsLength:L}),{paginatedItems:N}=Es({items:R,startIndex:P,stopIndex:I,itemsPerPage:d}),k=(0,i.EW)(()=>w(N.value)),{isSelected:F,select:U,selectAll:B,toggleSelect:V,someSelected:z,allSelected:W}=Ps(e,{allItems:y,currentPage:k}),{isExpanded:H,toggleExpand:G}=ls(e);_s({page:u,itemsPerPage:d,sortBy:o,groupBy:a,search:_}),(0,ae.Uh)({VDataTableRows:{hideNoData:(0,s.lW)(()=>e.hideNoData),noDataText:(0,s.lW)(()=>e.noDataText),loading:(0,s.lW)(()=>e.loading),loadingText:(0,s.lW)(()=>e.loadingText)}});const j=(0,i.EW)(()=>({page:u.value,itemsPerPage:d.value,sortBy:o.value,pageCount:D.value,toggleSort:x,setItemsPerPage:O,someSelected:z.value,allSelected:W.value,isSelected:F,select:U,selectAll:B,toggleSelect:V,isExpanded:H,toggleExpand:G,isGroupOpen:T,toggleGroup:A,items:k.value.map(e=>e.raw),internalItems:k.value,groupedItems:N.value,columns:p.value,headers:f.value}));return(0,E.C)(()=>{const t=Ks.filterProps(e),a=vo.filterProps(e),s=Mo.filterProps(e),o=Eo.filterProps(e);return(0,i.bF)(Eo,(0,i.v6)({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},o,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>r.top?.(j.value),default:()=>r.default?r.default(j.value):(0,i.Lk)(i.FK,null,[r.colgroup?.(j.value),!e.hideDefaultHeader&&(0,i.Lk)("thead",{key:"thead"},[(0,i.bF)(vo,a,r)]),r.thead?.(j.value),!e.hideDefaultBody&&(0,i.Lk)("tbody",null,[r["body.prepend"]?.(j.value),r.body?r.body(j.value):(0,i.bF)(Mo,(0,i.v6)(n,s,{items:N.value}),r),r["body.append"]?.(j.value)]),r.tbody?.(j.value),r.tfoot?.(j.value)]),bottom:()=>r.bottom?r.bottom(j.value):!e.hideDefaultFooter&&(0,i.Lk)(i.FK,null,[(0,i.bF)(hn,null,null),(0,i.bF)(Ks,t,{prepend:r["footer.prepend"]})])})}),{}}}),Do=(0,u.j)({...(0,o.cJ)(Lo(),["hideDefaultFooter"]),...us(),...zi(),...Qi()},"VDataTableVirtual"),Oo=(0,w.RW)()({name:"VDataTableVirtual",props:Do(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{groupBy:a}=hs(e),{sortBy:l,multiSort:c,mustSort:u}=Ns(e),{disableSort:d}=(0,s.QW)(e),{columns:h,headers:p,filterFunctions:f,sortFunctions:m,sortRawFunctions:v}=po(e,{groupBy:a,showSelect:(0,s.lW)(()=>e.showSelect),showExpand:(0,s.lW)(()=>e.showExpand)}),{items:g}=Ro(e,h),y=(0,s.lW)(()=>e.search),{filteredItems:_}=tr(e,g,y,{transform:e=>e.columns,customKeyFilter:f}),{toggleSort:b}=ks({sortBy:l,multiSort:c,mustSort:u}),{sortByWithGroups:x,opened:S,extractRows:M,isGroupOpen:w,toggleGroup:T}=ps({groupBy:a,sortBy:l,disableSort:d}),{sortedItems:A}=Us(e,_,x,{transform:e=>({...e.raw,...e.columns}),sortFunctions:m,sortRawFunctions:v}),{flatItems:C}=ys(A,a,S),R=(0,i.EW)(()=>M(C.value)),{isSelected:L,select:P,selectAll:I,toggleSelect:D,someSelected:O,allSelected:N}=Ps(e,{allItems:R,currentPage:R}),{isExpanded:k,toggleExpand:F}=ls(e),{containerRef:U,markerRef:B,paddingTop:V,paddingBottom:z,computedItems:W,handleItemResize:H,handleScroll:G,handleScrollend:j,calculateVisibleItems:X,scrollToIndex:q}=Wi(e,C),$=(0,i.EW)(()=>W.value.map(e=>e.raw));_s({sortBy:l,page:(0,s.IJ)(1),itemsPerPage:(0,s.IJ)(-1),groupBy:a,search:y}),(0,ae.Uh)({VDataTableRows:{hideNoData:(0,s.lW)(()=>e.hideNoData),noDataText:(0,s.lW)(()=>e.noDataText),loading:(0,s.lW)(()=>e.loading),loadingText:(0,s.lW)(()=>e.loadingText)}});const Y=(0,i.EW)(()=>({sortBy:l.value,toggleSort:b,someSelected:O.value,allSelected:N.value,isSelected:L,select:P,selectAll:I,toggleSelect:D,isExpanded:k,toggleExpand:F,isGroupOpen:w,toggleGroup:T,items:R.value.map(e=>e.raw),internalItems:R.value,groupedItems:C.value,columns:h.value,headers:p.value}));return(0,E.C)(()=>{const t=vo.filterProps(e),a=Mo.filterProps(e),s=Eo.filterProps(e);return(0,i.bF)(Eo,(0,i.v6)({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},s,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>r.top?.(Y.value),wrapper:()=>(0,i.Lk)("div",{ref:U,onScrollPassive:G,onScrollend:j,class:"v-table__wrapper",style:{height:(0,o.Dg)(e.height)}},[(0,i.Lk)("table",null,[r.colgroup?.(Y.value),!e.hideDefaultHeader&&(0,i.Lk)("thead",{key:"thead"},[(0,i.bF)(vo,t,r)]),r.thead?.(Y.value),!e.hideDefaultBody&&(0,i.Lk)("tbody",{key:"tbody"},[(0,i.Lk)("tr",{ref:B,style:{height:(0,o.Dg)(V.value),border:0}},[(0,i.Lk)("td",{colspan:h.value.length,style:{height:0,border:0}},null)]),r["body.prepend"]?.(Y.value),(0,i.bF)(Mo,(0,i.v6)(n,a,{items:$.value}),{...r,item:e=>(0,i.bF)(Fi,{key:e.internalItem.index,renderless:!0,"onUpdate:height":t=>H(e.internalItem.index,t)},{default:t=>{let{itemRef:n}=t;return r.item?.({...e,itemRef:n})??(0,i.bF)(bo,(0,i.v6)(e.props,{ref:n,key:e.internalItem.index,index:e.internalItem.index}),r)}})}),r["body.append"]?.(Y.value),(0,i.Lk)("tr",{style:{height:(0,o.Dg)(z.value),border:0}},[(0,i.Lk)("td",{colspan:h.value.length,style:{height:0,border:0}},null)])]),r.tbody?.(Y.value),r.tfoot?.(Y.value)])]),bottom:()=>r.bottom?.(Y.value)})}),{calculateVisibleItems:X,scrollToIndex:q}}}),No=(0,u.j)({itemsLength:{type:[Number,String],required:!0},...bs(),...Lo(),...Ys()},"VDataTableServer"),ko=(0,w.RW)()({name:"VDataTableServer",props:No(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{groupBy:a}=hs(e),{sortBy:o,multiSort:l,mustSort:c}=Ns(e),{page:u,itemsPerPage:d}=Ss(e),{disableSort:h}=(0,s.QW)(e),p=(0,i.EW)(()=>parseInt(e.itemsLength,10)),{columns:f,headers:m}=po(e,{groupBy:a,showSelect:(0,s.lW)(()=>e.showSelect),showExpand:(0,s.lW)(()=>e.showExpand)}),{items:v}=Ro(e,f),{toggleSort:g}=ks({sortBy:o,multiSort:l,mustSort:c,page:u}),{opened:y,isGroupOpen:_,toggleGroup:b,extractRows:x}=ps({groupBy:a,sortBy:o,disableSort:h}),{pageCount:S,setItemsPerPage:M}=Ms({page:u,itemsPerPage:d,itemsLength:p}),{flatItems:w}=ys(v,a,y),{isSelected:T,select:A,selectAll:C,toggleSelect:R,someSelected:L,allSelected:P}=Ps(e,{allItems:v,currentPage:v}),{isExpanded:I,toggleExpand:D}=ls(e),O=(0,i.EW)(()=>x(v.value));_s({page:u,itemsPerPage:d,sortBy:o,groupBy:a,search:(0,s.lW)(()=>e.search)}),(0,i.Gt)("v-data-table",{toggleSort:g,sortBy:o}),(0,ae.Uh)({VDataTableRows:{hideNoData:(0,s.lW)(()=>e.hideNoData),noDataText:(0,s.lW)(()=>e.noDataText),loading:(0,s.lW)(()=>e.loading),loadingText:(0,s.lW)(()=>e.loadingText)}});const N=(0,i.EW)(()=>({page:u.value,itemsPerPage:d.value,sortBy:o.value,pageCount:S.value,toggleSort:g,setItemsPerPage:M,someSelected:L.value,allSelected:P.value,isSelected:T,select:A,selectAll:C,toggleSelect:R,isExpanded:I,toggleExpand:D,isGroupOpen:_,toggleGroup:b,items:O.value.map(e=>e.raw),internalItems:O.value,groupedItems:w.value,columns:f.value,headers:m.value}));(0,E.C)(()=>{const t=Ks.filterProps(e),a=vo.filterProps(e),s=Mo.filterProps(e),o=Eo.filterProps(e);return(0,i.bF)(Eo,(0,i.v6)({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},o,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>r.top?.(N.value),default:()=>r.default?r.default(N.value):(0,i.Lk)(i.FK,null,[r.colgroup?.(N.value),!e.hideDefaultHeader&&(0,i.Lk)("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[(0,i.bF)(vo,a,r)]),r.thead?.(N.value),!e.hideDefaultBody&&(0,i.Lk)("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[r["body.prepend"]?.(N.value),r.body?r.body(N.value):(0,i.bF)(Mo,(0,i.v6)(n,s,{items:w.value}),r),r["body.append"]?.(N.value)]),r.tbody?.(N.value),r.tfoot?.(N.value)]),bottom:()=>r.bottom?r.bottom(N.value):!e.hideDefaultFooter&&(0,i.Lk)(i.FK,null,[(0,i.bF)(hn,null,null),(0,i.bF)(Ks,t,{prepend:r["footer.prepend"]})])})})}}),Fo=At("v-spacer","div","VSpacer"),Uo=(0,u.j)({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Je.TX,default:"$next"},prevIcon:{type:Je.TX,default:"$prev"},modeIcon:{type:Je.TX,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Bo=(0,w.RW)()({name:"VDatePickerControls",props:Uo(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:a}=(0,S.Ym)(),s=(0,i.EW)(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),l=(0,i.EW)(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),c=(0,i.EW)(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),u=(0,i.EW)(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function d(){n("click:prev")}function h(){n("click:next")}function p(){n("click:year")}function f(){n("click:month")}return(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":(0,o.Dg)(e.controlHeight)}},[(0,i.bF)(Mt,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:s.value,text:e.text,variant:"text",rounded:!0,onClick:f},null),(0,i.bF)(Mt,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:l.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:p},null),(0,i.bF)(Fo,null,null),(0,i.Lk)("div",{class:"v-date-picker-controls__month"},[(0,i.bF)(Mt,{"data-testid":"prev-month",disabled:c.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:d},null),(0,i.bF)(Mt,{"data-testid":"next-month",disabled:u.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:h},null)])])),{}}}),Vo=(0,u.j)({appendIcon:Je.TX,color:String,header:String,transition:String,onClick:(0,o.uR)()},"VDatePickerHeader"),zo=(0,w.RW)()({name:"VDatePickerHeader",props:Vo(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:s,backgroundColorStyles:o}=(0,he.z6)(()=>e.color);function l(){n("click")}function c(){n("click:append")}return(0,E.C)(()=>{const t=!(!a.default&&!e.header),n=!(!a.append&&!e.appendIcon);return(0,i.Lk)("div",{class:(0,r.C4)(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},s.value]),style:(0,r.Tr)(o.value),onClick:l},[a.prepend&&(0,i.Lk)("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),t&&(0,i.bF)(me.M,{key:"content",name:e.transition},{default:()=>[(0,i.Lk)("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),n&&(0,i.Lk)("div",{class:"v-date-picker-header__append"},[a.append?(0,i.bF)(oe,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):(0,i.bF)(Mt,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:c},null)])])}),{}}});var Wo=n(8121);const Ho=(0,u.j)({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function Go(e){const t=(0,Wo.S_)(),n=(0,Te.q)(e,"modelValue",[],e=>(0,o.BN)(e).map(e=>t.date(e))),r=(0,i.EW)(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=(0,Te.q)(e,"year",void 0,e=>{const n=null!=e?Number(e):t.getYear(r.value);return t.startOfYear(t.setYear(t.date(),n))},e=>t.getYear(e)),s=(0,Te.q)(e,"month",void 0,e=>{const n=null!=e?Number(e):t.getMonth(r.value),i=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(i,n)},e=>t.getMonth(e)),l=(0,i.EW)(()=>{const n=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((t,i)=>e.weekdays.includes((i+n)%7))}),c=(0,i.EW)(()=>{const n=t.getWeekArray(s.value,e.firstDayOfWeek),i=n.flat(),r=42;if("static"===e.weeksInMonth&&i.length<r){const e=i[i.length-1];let a=[];for(let s=1;s<=r-i.length;s++)a.push(t.addDays(e,s)),s%7===0&&(n.push(a),a=[])}return n});function u(i,r){return i.filter(n=>e.weekdays.includes(t.toJsDate(n).getDay())).map((i,a)=>{const o=t.toISO(i),l=!t.isSameMonth(i,s.value),c=t.isSameDay(i,t.startOfMonth(s.value)),u=t.isSameDay(i,t.endOfMonth(s.value)),d=t.isSameDay(i,s.value),h=e.weekdays.length;return{date:i,formatted:t.format(i,"keyboardDate"),isAdjacent:l,isDisabled:f(i),isEnd:u,isHidden:l&&!e.showAdjacentMonths,isSame:d,isSelected:n.value.some(e=>t.isSameDay(i,e)),isStart:c,isToday:t.isSameDay(i,r),isWeekEnd:a%h===h-1,isWeekStart:a%h===0,isoDate:o,localized:t.format(i,"dayOfMonth"),month:t.getMonth(i),year:t.getYear(i)}})}const d=(0,i.EW)(()=>{const n=t.startOfWeek(r.value,e.firstDayOfWeek),i=[];for(let e=0;e<=6;e++)i.push(t.addDays(n,e));const a=t.date();return u(i,a)}),h=(0,i.EW)(()=>{const e=c.value.flat(),n=t.date();return u(e,n)}),p=(0,i.EW)(()=>c.value.map(n=>n.length?t.getWeek(n[0],e.firstDayOfWeek):null));function f(n){if(e.disabled)return!0;const i=t.date(n);return!(!e.min||!t.isBefore(t.endOfDay(i),t.date(e.min)))||(!(!e.max||!t.isAfter(i,t.date(e.max)))||(Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(e=>t.isSameDay(t.date(e),i)):"function"===typeof e.allowedDates&&!e.allowedDates(i)))}return{displayValue:r,daysInMonth:h,daysInWeek:d,genDays:u,model:n,weeksInMonth:c,weekdayLabels:l,weekNumbers:p}}const jo=(0,u.j)({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...(0,o.cJ)(Ho(),["displayValue"])},"VDatePickerMonth"),Xo=(0,w.RW)()({name:"VDatePickerMonth",props:jo(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const o=(0,s.KR)(),{t:l}=(0,S.Ym)(),{daysInMonth:c,model:u,weekNumbers:d,weekdayLabels:h}=Go(e),p=(0,Wo.S_)(),f=(0,s.IJ)(),m=(0,s.IJ)(),v=(0,s.IJ)(!1),g=(0,s.lW)(()=>v.value?e.reverseTransition:e.transition);"range"===e.multiple&&u.value.length>0&&(f.value=u.value[0],u.value.length>1&&(m.value=u.value[u.value.length-1]));const y=(0,i.EW)(()=>{const t=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return u.value.length>=t});function _(e){const t=p.startOfDay(e);if(0===u.value.length?f.value=void 0:1===u.value.length&&(f.value=u.value[0],m.value=void 0),f.value)if(m.value)f.value=e,m.value=void 0,u.value=[f.value];else{if(p.isSameDay(t,f.value))return f.value=void 0,void(u.value=[]);p.isBefore(t,f.value)?(m.value=p.endOfDay(f.value),f.value=t):m.value=p.endOfDay(t),u.value=(0,Wo.Yu)(p,f.value,m.value)}else f.value=t,u.value=[f.value]}function b(e){const t=p.format(e.date,"fullDateWithWeekday"),n=e.isToday?"currentDate":"selectDate";return l(`$vuetify.datePicker.ariaLabel.${n}`,t)}function x(e){const t=u.value.findIndex(t=>p.isSameDay(t,e));if(-1===t)u.value=[...u.value,e];else{const e=[...u.value];e.splice(t,1),u.value=e}}function M(t){"range"===e.multiple?_(t):e.multiple?x(t):u.value=[t]}(0,i.wB)(c,(e,t)=>{t&&(v.value=p.isBefore(e[0].date,t[0].date))}),(0,E.C)(()=>(0,i.Lk)("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&(0,i.Lk)("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&(0,i.Lk)("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[(0,i.eW)(" ")]),d.value.map(e=>(0,i.Lk)("div",{class:(0,r.C4)(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[e]))]),(0,i.bF)(me.M,{name:g.value},{default:()=>[(0,i.Lk)("div",{ref:o,key:c.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&h.value.map(e=>(0,i.Lk)("div",{class:(0,r.C4)(["v-date-picker-month__day","v-date-picker-month__weekday"])},[e])),c.value.map((t,n)=>{const s={props:{class:"v-date-picker-month__day-btn",color:t.isSelected||t.isToday?e.color:void 0,disabled:t.isDisabled,icon:!0,ripple:!1,text:t.localized,variant:t.isSelected?"flat":t.isToday?"outlined":"text","aria-label":b(t),"aria-current":t.isToday?"date":void 0,onClick:()=>M(t.date)},item:t,i:n};return y.value&&!t.isSelected&&(t.isDisabled=!0),(0,i.Lk)("div",{class:(0,r.C4)(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":t.isAdjacent,"v-date-picker-month__day--hide-adjacent":t.isHidden,"v-date-picker-month__day--selected":t.isSelected,"v-date-picker-month__day--week-end":t.isWeekEnd,"v-date-picker-month__day--week-start":t.isWeekStart}]),"data-v-date":t.isDisabled?void 0:t.isoDate},[(e.showAdjacentMonths||!t.isAdjacent)&&(a.day?.(s)??(0,i.bF)(Mt,s.props,null))])})])]})]))}}),qo=(0,u.j)({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),$o=(0,w.RW)()({name:"VDatePickerMonths",props:qo(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const a=(0,Wo.S_)(),s=(0,Te.q)(e,"modelValue"),l=(0,i.EW)(()=>{let t=a.startOfYear(a.date());return e.year&&(t=a.setYear(t,e.year)),(0,o.Sd)(12).map(n=>{const i=a.format(t,"monthShort"),r=a.format(t,"month"),s=!!(!c(n)||e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),t)||e.max&&a.isAfter(t,a.startOfMonth(a.date(e.max))));return t=a.getNextMonth(t),{isDisabled:s,text:i,label:r,value:n}})});function c(t){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(t):"function"!==typeof e.allowedMonths||e.allowedMonths(t)}return(0,i.nT)(()=>{s.value=s.value??a.getMonth(a.date())}),(0,E.C)(()=>(0,i.Lk)("div",{class:"v-date-picker-months",style:{height:(0,o.Dg)(e.height)}},[(0,i.Lk)("div",{class:"v-date-picker-months__content"},[l.value.map((t,a)=>{const o={active:s.value===a,ariaLabel:t.label,color:s.value===a?e.color:void 0,disabled:t.isDisabled,rounded:!0,text:t.text,variant:s.value===t.value?"flat":"text",onClick:()=>l(a)};function l(e){s.value!==e?s.value=e:n("update:modelValue",s.value)}return r.month?.({month:t,i:a,props:o})??(0,i.bF)(Mt,(0,i.v6)({key:"month"},o),null)})])])),{}}}),Yo=(0,u.j)({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),Ko=(0,w.RW)()({name:"VDatePickerYears",props:Yo(),directives:{vIntersect:ve.A},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const a=(0,Wo.S_)(),s=(0,Te.q)(e,"modelValue"),l=(0,i.EW)(()=>{const t=a.getYear(a.date());let n=t-100,i=t+52;e.min&&(n=a.getYear(a.date(e.min))),e.max&&(i=a.getYear(a.date(e.max)));let r=a.startOfYear(a.date());return r=a.setYear(r,n),(0,o.Sd)(i-n+1,n).map(e=>{const t=a.format(r,"year");return r=a.setYear(r,a.getYear(r)+1),{text:t,value:e,isDisabled:!d(e)}})});(0,i.nT)(()=>{s.value=s.value??a.getYear(a.date())});const c=(0,o.m)();function u(){c.el?.focus(),c.el?.scrollIntoView({block:"center"})}function d(t){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(t):"function"!==typeof e.allowedYears||e.allowedYears(t)}return(0,E.C)(()=>(0,i.bo)((0,i.Lk)("div",{class:"v-date-picker-years",style:{height:(0,o.Dg)(e.height)}},[(0,i.Lk)("div",{class:"v-date-picker-years__content"},[l.value.map((t,a)=>{const o={ref:s.value===t.value?c:void 0,active:s.value===t.value,color:s.value===t.value?e.color:void 0,rounded:!0,text:t.text,disabled:t.isDisabled,variant:s.value===t.value?"flat":"text",onClick:()=>{s.value!==t.value?s.value=t.value:n("update:modelValue",s.value)}};return r.year?.({year:t,i:a,props:o})??(0,i.bF)(Mt,(0,i.v6)({key:"month"},o),null)})])]),[[ve.A,{handler:u},null,{once:!0}]])),{}}}),Zo=(0,u.j)({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...Uo(),...jo({weeksInMonth:"static"}),...(0,o.cJ)(qo(),["modelValue"]),...(0,o.cJ)(Yo(),["modelValue"]),...Ja({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Jo=(0,w.RW)()({name:"VDatePicker",props:Zo(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const a=(0,Wo.S_)(),{t:l}=(0,S.Ym)(),{rtlClasses:c}=(0,S.IA)(),u=(0,Te.q)(e,"modelValue",void 0,e=>(0,o.BN)(e).map(e=>a.date(e)),t=>e.multiple?t:t[0]),d=(0,Te.q)(e,"viewMode"),h=(0,i.EW)(()=>{const t=a.date(e.min);return e.min&&a.isValid(t)?t:null}),p=(0,i.EW)(()=>{const t=a.date(e.max);return e.max&&a.isValid(t)?t:null}),f=(0,i.EW)(()=>{const e=a.date();let t=e;return u.value?.[0]?t=a.date(u.value[0]):h.value&&a.isBefore(e,h.value)?t=h.value:p.value&&a.isAfter(e,p.value)&&(t=p.value),t&&a.isValid(t)?t:e}),m=(0,s.lW)(()=>e.headerColor??e.color),v=(0,Te.q)(e,"month"),g=(0,i.EW)({get:()=>Number(v.value??a.getMonth(a.startOfMonth(f.value))),set:e=>v.value=e}),y=(0,Te.q)(e,"year"),_=(0,i.EW)({get:()=>Number(y.value??a.getYear(a.startOfYear(a.setMonth(f.value,g.value)))),set:e=>y.value=e}),b=(0,s.IJ)(!1),x=(0,i.EW)(()=>e.multiple&&u.value.length>1?l("$vuetify.datePicker.itemsSelected",u.value.length):u.value[0]&&a.isValid(u.value[0])?a.format(a.date(u.value[0]),"normalDateWithWeekday"):l(e.header)),M=(0,i.EW)(()=>{let e=a.date();return e=a.setDate(e,1),e=a.setMonth(e,g.value),e=a.setYear(e,_.value),a.format(e,"monthAndYear")}),w=(0,s.lW)(()=>`date-picker-header${b.value?"-reverse":""}-transition`),T=(0,i.EW)(()=>{if(e.disabled)return!0;const t=[];if("month"!==d.value)t.push("prev","next");else{let e=a.date();if(e=a.startOfMonth(e),e=a.setMonth(e,g.value),e=a.setYear(e,_.value),h.value){const n=a.addDays(a.startOfMonth(e),-1);a.isAfter(h.value,n)&&t.push("prev")}if(p.value){const n=a.addDays(a.endOfMonth(e),1);a.isAfter(n,p.value)&&t.push("next")}}return t}),A=(0,i.EW)(()=>e.allowedYears||L),C=(0,i.EW)(()=>e.allowedMonths||P);function R(t,n){const i=e.allowedDates;if("function"!==typeof i)return!0;const r=a.getDiff(n,t,"days");for(let e=0;e<r;e++)if(i(a.addDays(t,e)))return!0;return!1}function L(t){if("function"===typeof e.allowedDates){const e=a.parseISO(`${t}-01-01`);return R(e,a.endOfYear(e))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const n of e.allowedDates)if(a.getYear(a.date(n))===t)return!0;return!1}return!0}function P(t){if("function"===typeof e.allowedDates){const e=String(t+1).padStart(2,"0"),n=a.parseISO(`${_.value}-${e}-01`);return R(n,a.endOfMonth(n))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const n of e.allowedDates)if(a.getYear(a.date(n))===_.value&&a.getMonth(a.date(n))===t)return!0;return!1}return!0}function I(){g.value<11?g.value++:(_.value++,g.value=0,U()),F()}function D(){g.value>0?g.value--:(_.value--,g.value=11,U()),F()}function O(){d.value="month"}function N(){d.value="months"===d.value?"month":"months"}function k(){d.value="year"===d.value?"month":"year"}function F(){"months"===d.value&&N()}function U(){"year"===d.value&&k()}return(0,i.wB)(u,(e,t)=>{const n=(0,o.BN)(t),i=(0,o.BN)(e);if(!i.length)return;const r=a.date(n[n.length-1]),s=a.date(i[i.length-1]),l=a.getMonth(s),c=a.getYear(s);l!==g.value&&(g.value=l,F()),c!==_.value&&(_.value=c,U()),b.value=a.isBefore(r,s)}),(0,E.C)(()=>{const t=Qa.filterProps(e),n=Bo.filterProps(e),a=zo.filterProps(e),s=Xo.filterProps(e),f=(0,o.cJ)($o.filterProps(e),["modelValue"]),v=(0,o.cJ)(Ko.filterProps(e),["modelValue"]),y={color:m.value,header:x.value,transition:w.value};return(0,i.bF)(Qa,(0,i.v6)(t,{color:m.value,class:["v-date-picker",`v-date-picker--${d.value}`,{"v-date-picker--show-week":e.showWeek},c.value,e.class],style:e.style}),{title:()=>r.title?.()??(0,i.Lk)("div",{class:"v-date-picker__title"},[l(e.title)]),header:()=>r.header?(0,i.bF)(oe,{defaults:{VDatePickerHeader:{...y}}},{default:()=>[r.header?.(y)]}):(0,i.bF)(zo,(0,i.v6)({key:"header"},a,y,{onClick:"month"!==d.value?O:void 0}),{prepend:r.prepend,append:r.append}),default:()=>(0,i.Lk)(i.FK,null,[(0,i.bF)(Bo,(0,i.v6)(n,{disabled:T.value,text:M.value,"onClick:next":I,"onClick:prev":D,"onClick:month":N,"onClick:year":k}),null),(0,i.bF)(q,{hideOnLeave:!0},{default:()=>["months"===d.value?(0,i.bF)($o,(0,i.v6)({key:"date-picker-months"},f,{modelValue:g.value,"onUpdate:modelValue":[e=>g.value=e,F],min:h.value,max:p.value,year:_.value,allowedMonths:C.value}),{month:r.month}):"year"===d.value?(0,i.bF)(Ko,(0,i.v6)({key:"date-picker-years"},v,{modelValue:_.value,"onUpdate:modelValue":[e=>_.value=e,U],min:h.value,max:p.value,allowedYears:A.value}),{year:r.year}):(0,i.bF)(Xo,(0,i.v6)({key:"date-picker-month"},s,{modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,month:g.value,"onUpdate:month":[e=>g.value=e,F],year:_.value,"onUpdate:year":[e=>_.value=e,U],min:h.value,max:p.value}),{day:r.day})]})]),actions:r.actions})}),{}}}),Qo=(0,u.j)({actionText:String,bgColor:String,color:String,icon:Je.TX,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...(0,a.u)(),...(0,le.X)(),...et({size:void 0}),...(0,M.yx)()},"VEmptyState"),el=(0,w.RW)()({name:"VEmptyState",props:Qo(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{themeClasses:s}=(0,M.NX)(e),{backgroundColorClasses:l,backgroundColorStyles:c}=(0,he.z6)(()=>e.bgColor),{dimensionStyles:u}=(0,le.S)(e),{displayClasses:d}=(0,qt._F)();function h(e){n("click:action",e)}return(0,E.C)(()=>{const t=!(!a.actions&&!e.actionText),n=!(!a.headline&&!e.headline),p=!(!a.title&&!e.title),f=!(!a.text&&!e.text),m=!!(a.media||e.image||e.icon),v=e.size||(e.image?200:96);return(0,i.Lk)("div",{class:(0,r.C4)(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,l.value,d.value,e.class]),style:(0,r.Tr)([c.value,u.value,e.style])},[m&&(0,i.Lk)("div",{key:"media",class:"v-empty-state__media"},[a.media?(0,i.bF)(oe,{key:"media-defaults",defaults:{VImg:{src:e.image,height:v},VIcon:{size:v,icon:e.icon}}},{default:()=>[a.media()]}):(0,i.Lk)(i.FK,null,[e.image?(0,i.bF)(ye,{key:"image",src:e.image,height:v},null):e.icon?(0,i.bF)(it,{key:"icon",color:e.color,size:v,icon:e.icon},null):void 0])]),n&&(0,i.Lk)("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),p&&(0,i.Lk)("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),f&&(0,i.Lk)("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:(0,o.Dg)(e.textWidth)}},[a.text?.()??e.text]),a.default&&(0,i.Lk)("div",{key:"content",class:"v-empty-state__content"},[a.default()]),t&&(0,i.Lk)("div",{key:"actions",class:"v-empty-state__actions"},[(0,i.bF)(oe,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:h}})??(0,i.bF)(Mt,{onClick:h},null)]})])])}),{}}}),tl=Symbol.for("vuetify:v-expansion-panel"),nl=(0,u.j)({...(0,a.u)(),...(0,zr.f)()},"VExpansionPanelText"),il=(0,w.RW)()({name:"VExpansionPanelText",props:nl(),setup(e,t){let{slots:n}=t;const a=(0,i.WQ)(tl);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:s,onAfterLeave:o}=(0,zr._)(e,a.isSelected);return(0,E.C)(()=>(0,i.bF)(ie,{onAfterLeave:o},{default:()=>[(0,i.bo)((0,i.Lk)("div",{class:(0,r.C4)(["v-expansion-panel-text",e.class]),style:(0,r.Tr)(e.style)},[n.default&&s.value&&(0,i.Lk)("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[P.aG,a.isSelected.value]])]})),{}}}),rl=(0,u.j)({color:String,expandIcon:{type:Je.TX,default:"$expand"},collapseIcon:{type:Je.TX,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...(0,a.u)(),...(0,le.X)()},"VExpansionPanelTitle"),al=(0,w.RW)()({name:"VExpansionPanelTitle",directives:{vRipple:xt.A},props:rl(),setup(e,t){let{slots:n}=t;const a=(0,i.WQ)(tl);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:o,backgroundColorStyles:l}=(0,he.z6)(()=>e.color),{dimensionStyles:c}=(0,le.S)(e),u=(0,i.EW)(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),d=(0,s.lW)(()=>a.isSelected.value?e.collapseIcon:e.expandIcon);return(0,E.C)(()=>(0,i.bo)((0,i.Lk)("button",{class:(0,r.C4)(["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},o.value,e.class]),style:(0,r.Tr)([l.value,c.value,e.style]),type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[(0,i.Lk)("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(u.value),!e.hideActions&&(0,i.bF)(oe,{defaults:{VIcon:{icon:d.value}}},{default:()=>[(0,i.Lk)("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(u.value)??(0,i.bF)(it,null,null)])]})]),[[xt.A,e.ripple]])),{}}}),sl=(0,u.j)({title:String,text:String,bgColor:String,...xe(),...He(),...pe(),...C(),...rl(),...nl()},"VExpansionPanel"),ol=(0,w.RW)()({name:"VExpansionPanel",props:sl(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Ge(e,tl),{backgroundColorClasses:o,backgroundColorStyles:l}=(0,he.z6)(()=>e.bgColor),{elevationClasses:c}=Se(e),{roundedClasses:u}=fe(e),d=(0,s.lW)(()=>a?.disabled.value||e.disabled),h=(0,i.EW)(()=>a.group.items.value.reduce((e,t,n)=>(a.group.selected.value.includes(t.id)&&e.push(n),e),[])),p=(0,i.EW)(()=>{const e=a.group.items.value.findIndex(e=>e.id===a.id);return!a.isSelected.value&&h.value.some(t=>t-e===1)}),f=(0,i.EW)(()=>{const e=a.group.items.value.findIndex(e=>e.id===a.id);return!a.isSelected.value&&h.value.some(t=>t-e===-1)});return(0,i.Gt)(tl,a),(0,E.C)(()=>{const t=!(!n.text&&!e.text),s=!(!n.title&&!e.title),h=al.filterProps(e),m=il.filterProps(e);return(0,i.bF)(e.tag,{class:(0,r.C4)(["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":p.value,"v-expansion-panel--after-active":f.value,"v-expansion-panel--disabled":d.value},u.value,o.value,e.class]),style:(0,r.Tr)([l.value,e.style])},{default:()=>[(0,i.Lk)("div",{class:(0,r.C4)(["v-expansion-panel__shadow",...c.value])},null),(0,i.bF)(oe,{defaults:{VExpansionPanelTitle:{...h},VExpansionPanelText:{...m}}},{default:()=>[s&&(0,i.bF)(al,{key:"title"},{default:()=>[n.title?n.title():e.title]}),t&&(0,i.bF)(il,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:a}}}),ll=["default","accordion","inset","popout"],cl=(0,u.j)({flat:Boolean,...We(),...(0,o.Up)(sl(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...(0,M.yx)(),...(0,a.u)(),...C(),variant:{type:String,default:"default",validator:e=>ll.includes(e)}},"VExpansionPanels"),ul=(0,w.RW)()({name:"VExpansionPanels",props:cl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:a,prev:o}=je(e,tl),{themeClasses:l}=(0,M.NX)(e),c=(0,s.lW)(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return(0,ae.Uh)({VExpansionPanel:{bgColor:(0,s.lW)(()=>e.bgColor),collapseIcon:(0,s.lW)(()=>e.collapseIcon),color:(0,s.lW)(()=>e.color),eager:(0,s.lW)(()=>e.eager),elevation:(0,s.lW)(()=>e.elevation),expandIcon:(0,s.lW)(()=>e.expandIcon),focusable:(0,s.lW)(()=>e.focusable),hideActions:(0,s.lW)(()=>e.hideActions),readonly:(0,s.lW)(()=>e.readonly),ripple:(0,s.lW)(()=>e.ripple),rounded:(0,s.lW)(()=>e.rounded),static:(0,s.lW)(()=>e.static)}}),(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},l.value,c.value,e.class]),style:(0,r.Tr)(e.style)},{default:()=>[n.default?.({prev:o,next:a})]})),{next:a,prev:o}}}),dl=(0,u.j)({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...(0,o.cJ)(St({active:!0}),["location"]),...g(),...ct(),...(0,me.m)({transition:"fab-transition"})},"VFab"),hl=(0,w.RW)()({name:"VFab",props:dl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=(0,Te.q)(e,"modelValue"),o=(0,s.IJ)(56),l=(0,s.KR)(),{resizeRef:u}=c(e=>{e.length&&(o.value=e[0].target.clientHeight)}),d=(0,s.lW)(()=>e.app||e.absolute),h=(0,i.EW)(()=>!!d.value&&(e.location?.split(" ").shift()??"bottom")),p=(0,i.EW)(()=>!!d.value&&(e.location?.split(" ")[1]??"end"));(0,Le.Y)(()=>e.app,()=>{const t=_({id:e.name,order:(0,i.EW)(()=>parseInt(e.order,10)),position:h,layoutSize:(0,i.EW)(()=>e.layout?o.value+24:0),elementSize:(0,i.EW)(()=>o.value+24),active:(0,i.EW)(()=>e.app&&a.value),absolute:(0,s.lW)(()=>e.absolute)});(0,i.nT)(()=>{l.value=t.layoutItemStyles.value})});const f=(0,s.KR)();return(0,E.C)(()=>{const t=Mt.filterProps(e);return(0,i.Lk)("div",{ref:f,class:(0,r.C4)(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${h.value}`]:d.value,[`v-fab--${p.value}`]:d.value},e.class]),style:(0,r.Tr)([e.app?{...l.value}:{height:e.absolute?"100%":"inherit"},e.style])},[(0,i.Lk)("div",{class:"v-fab__container"},[(0,i.bF)(me.M,{appear:e.appear,transition:e.transition},{default:()=>[(0,i.bo)((0,i.bF)(Mt,(0,i.v6)({ref:u},t,{active:void 0,location:void 0}),n),[[P.aG,e.active]])]})])])}),{}}});function pl(){function e(e){const t=[...e.dataTransfer?.items??[]].filter(e=>"file"===e.kind).map(e=>e.webkitGetAsEntry()).filter(Boolean);return t.length>0||[...e.dataTransfer?.files??[]].length>0}async function t(e){const t=[],n=[...e.dataTransfer?.items??[]].filter(e=>"file"===e.kind).map(e=>e.webkitGetAsEntry()).filter(Boolean);if(n.length)for(const i of n){const e=await fl(i,ml(".",i));t.push(...e.map(e=>e.file))}else t.push(...e.dataTransfer?.files??[]);return t}return{handleDrop:t,hasFilesOrFolders:e}}function fl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((n,i)=>{if(e.isFile){const r=e;r.file(e=>n([{file:e,path:t}]),i)}else if(e.isDirectory){const i=e.createReader();i.readEntries(async e=>{const i=[];for(const n of e)i.push(...await fl(n,ml(t,n)));n(i)})}})}function ml(e,t){return t.isDirectory?`${e}/${t.name}`:e}const vl=(0,u.j)({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>"boolean"===typeof e||[1e3,1024].includes(Number(e))},...Li({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>(0,o.BN)(e).every(e=>null!=e&&"object"===typeof e)},...yi({clearable:!0})},"VFileInput"),gl=(0,w.RW)()({name:"VFileInput",inheritAttrs:!1,props:vl(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:l}=t;const{t:c}=(0,S.Ym)(),u=(0,Te.q)(e,"modelValue",e.modelValue,e=>(0,o.BN)(e),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:d,focus:h,blur:p}=vi(e),f=(0,i.EW)(()=>"boolean"!==typeof e.showSize?e.showSize:void 0),m=(0,i.EW)(()=>(u.value??[]).reduce((e,t)=>{let{size:n=0}=t;return e+n},0)),v=(0,i.EW)(()=>(0,o.hA)(m.value,f.value)),g=(0,i.EW)(()=>(u.value??[]).map(t=>{const{name:n="",size:i=0}=t;return e.showSize?`${n} (${(0,o.hA)(i,f.value)})`:n})),y=(0,i.EW)(()=>{const t=u.value?.length??0;return e.showSize?c(e.counterSizeString,t,v.value):c(e.counterString,t)}),_=(0,s.KR)(),b=(0,s.KR)(),x=(0,s.KR)(),M=(0,s.lW)(()=>d.value||e.active),w=(0,i.EW)(()=>["plain","underlined"].includes(e.variant)),T=(0,s.IJ)(!1),{handleDrop:A,hasFilesOrFolders:C}=pl();function R(){x.value!==document.activeElement&&x.value?.focus(),d.value||h()}function L(e){x.value?.click()}function P(e){a("mousedown:control",e)}function I(e){x.value?.click(),a("click:control",e)}function D(t){t.stopPropagation(),R(),(0,i.dY)(()=>{u.value=[],(0,o.P)(e["onClick:clear"],t)})}function O(e){e.preventDefault(),e.stopImmediatePropagation(),T.value=!0}function N(e){e.preventDefault(),T.value=!1}async function k(e){if(e.preventDefault(),e.stopImmediatePropagation(),T.value=!1,!x.value||!C(e))return;const t=new DataTransfer;for(const n of await A(e))t.items.add(n);x.value.files=t.files,x.value.dispatchEvent(new Event("change",{bubbles:!0}))}return(0,i.wB)(u,e=>{const t=!Array.isArray(e)||!e.length;t&&x.value&&(x.value.value="")}),(0,E.C)(()=>{const t=!(!l.counter&&!e.counter),a=!(!t&&!l.details),[s,c]=(0,o.ph)(n),{modelValue:h,...f}=Pi.filterProps(e),S={..._i.filterProps(e),"onClick:clear":D};return(0,i.bF)(Pi,(0,i.v6)({ref:_,modelValue:e.multiple?u.value:u.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":T.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":w.value},e.class],style:e.style,"onClick:prepend":L},s,f,{centerAffix:!w.value,focused:d.value}),{...l,default:t=>{let{id:n,isDisabled:a,isDirty:s,isReadonly:o,isValid:h,hasDetails:f}=t;return(0,i.bF)(_i,(0,i.v6)({ref:b,prependIcon:e.prependIcon,onMousedown:P,onClick:I,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},S,{id:n.value,active:M.value||s.value,dirty:s.value||e.dirty,disabled:a.value,focused:d.value,details:f.value,error:!1===h.value,onDragover:O,onDrop:k}),{...l,default:t=>{let{props:{class:n,...s}}=t;return(0,i.Lk)(i.FK,null,[(0,i.Lk)("input",(0,i.v6)({ref:x,type:"file",readonly:o.value,disabled:a.value,multiple:e.multiple,name:e.name,onClick:e=>{e.stopPropagation(),o.value&&e.preventDefault(),R()},onChange:e=>{if(!e.target)return;const t=e.target;u.value=[...t.files??[]]},onDragleave:N,onFocus:R,onBlur:p},s,c),null),(0,i.Lk)("div",{class:(0,r.C4)(n)},[!!u.value?.length&&!e.hideInput&&(l.selection?l.selection({fileNames:g.value,totalBytes:m.value,totalBytesReadable:v.value}):e.chips?g.value.map(e=>(0,i.bF)(un,{key:e,size:"small",text:e},null)):g.value.join(", "))])])}})},details:a?n=>(0,i.Lk)(i.FK,null,[l.details?.(n),t&&(0,i.Lk)(i.FK,null,[(0,i.Lk)("span",null,null),(0,i.bF)(di,{active:!!u.value?.length,value:y.value,disabled:e.disabled},l.counter)])]):void 0})}),(0,ai.O)({},_,b,x)}}),yl=(0,u.j)({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},..._e(),...(0,a.u)(),...xe(),...g(),...pe(),...C({tag:"footer"}),...(0,M.yx)()},"VFooter"),_l=(0,w.RW)()({name:"VFooter",props:yl(),setup(e,t){let{slots:n}=t;const a=(0,s.KR)(),{themeClasses:l}=(0,M.NX)(e),{backgroundColorClasses:u,backgroundColorStyles:d}=(0,he.z6)(()=>e.color),{borderClasses:h}=be(e),{elevationClasses:p}=Se(e),{roundedClasses:f}=fe(e),m=(0,s.IJ)(32),{resizeRef:v}=c(e=>{e.length&&(m.value=e[0].target.clientHeight)}),g=(0,i.EW)(()=>"auto"===e.height?m.value:parseInt(e.height,10));return(0,Le.Y)(()=>e.app,()=>{const t=_({id:e.name,order:(0,i.EW)(()=>parseInt(e.order,10)),position:(0,s.lW)(()=>"bottom"),layoutSize:g,elementSize:(0,i.EW)(()=>"auto"===e.height?void 0:g.value),active:(0,s.lW)(()=>e.app),absolute:(0,s.lW)(()=>e.absolute)});(0,i.nT)(()=>{a.value=t.layoutItemStyles.value})}),(0,E.C)(()=>(0,i.bF)(e.tag,{ref:v,class:(0,r.C4)(["v-footer",l.value,u.value,h.value,p.value,f.value,e.class]),style:(0,r.Tr)([d.value,e.app?a.value:{height:(0,o.Dg)(e.height)},e.style])},n)),{}}}),bl=(0,u.j)({...(0,a.u)(),...Mi()},"VForm"),xl=(0,w.RW)()({name:"VForm",props:bl(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const o=wi(e),l=(0,s.KR)();function c(e){e.preventDefault(),o.reset()}function u(e){const t=e,n=o.validate();t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),a("submit",t),t.defaultPrevented||n.then(e=>{let{valid:t}=e;t&&l.value?.submit()}),t.preventDefault()}return(0,E.C)(()=>(0,i.Lk)("form",{ref:l,class:(0,r.C4)(["v-form",e.class]),style:(0,r.Tr)(e.style),novalidate:!0,onReset:c,onSubmit:u},[n.default?.(o)])),(0,ai.O)(o,l)}}),Sl=(0,u.j)({fluid:{type:Boolean,default:!1},...(0,a.u)(),...(0,le.X)(),...C()},"VContainer"),Ml=(0,w.RW)()({name:"VContainer",props:Sl(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=(0,S.IA)(),{dimensionStyles:s}=(0,le.S)(e);return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:(0,r.Tr)([s.value,e.style])},n)),{}}}),wl=(()=>qt.fi.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}))(),El=(()=>qt.fi.reduce((e,t)=>{const n="offset"+(0,r.ZH)(t);return e[n]={type:[String,Number],default:null},e},{}))(),Tl=(()=>qt.fi.reduce((e,t)=>{const n="order"+(0,r.ZH)(t);return e[n]={type:[String,Number],default:null},e},{}))(),Al={col:Object.keys(wl),offset:Object.keys(El),order:Object.keys(Tl)};function Cl(e,t,n){let i=e;if(null!=n&&!1!==n){if(t){const n=t.replace(e,"");i+=`-${n}`}return"col"===e&&(i="v-"+i),"col"!==e||""!==n&&!0!==n?(i+=`-${n}`,i.toLowerCase()):i.toLowerCase()}}const Rl=["auto","start","end","center","baseline","stretch"],Ll=(0,u.j)({cols:{type:[Boolean,String,Number],default:!1},...wl,offset:{type:[String,Number],default:null},...El,order:{type:[String,Number],default:null},...Tl,alignSelf:{type:String,default:null,validator:e=>Rl.includes(e)},...(0,a.u)(),...C()},"VCol"),Pl=(0,w.RW)()({name:"VCol",props:Ll(),setup(e,t){let{slots:n}=t;const r=(0,i.EW)(()=>{const t=[];let n;for(n in Al)Al[n].forEach(i=>{const r=e[i],a=Cl(n,i,r);a&&t.push(a)});const i=t.some(e=>e.startsWith("v-col-"));return t.push({"v-col":!i||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t});return()=>(0,i.h)(e.tag,{class:[r.value,e.class],style:e.style},n.default?.())}}),Il=["start","end","center"],Dl=["space-between","space-around","space-evenly"];function Ol(e,t){return qt.fi.reduce((n,i)=>{const a=e+(0,r.ZH)(i);return n[a]=t(),n},{})}const Nl=[...Il,"baseline","stretch"],kl=e=>Nl.includes(e),Fl=Ol("align",()=>({type:String,default:null,validator:kl})),Ul=[...Il,...Dl],Bl=e=>Ul.includes(e),Vl=Ol("justify",()=>({type:String,default:null,validator:Bl})),zl=[...Il,...Dl,"stretch"],Wl=e=>zl.includes(e),Hl=Ol("alignContent",()=>({type:String,default:null,validator:Wl})),Gl={align:Object.keys(Fl),justify:Object.keys(Vl),alignContent:Object.keys(Hl)},jl={align:"align",justify:"justify",alignContent:"align-content"};function Xl(e,t,n){let i=jl[e];if(null!=n){if(t){const n=t.replace(e,"");i+=`-${n}`}return i+=`-${n}`,i.toLowerCase()}}const ql=(0,u.j)({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:kl},...Fl,justify:{type:String,default:null,validator:Bl},...Vl,alignContent:{type:String,default:null,validator:Wl},...Hl,...(0,a.u)(),...C()},"VRow"),$l=(0,w.RW)()({name:"VRow",props:ql(),setup(e,t){let{slots:n}=t;const r=(0,i.EW)(()=>{const t=[];let n;for(n in Gl)Gl[n].forEach(i=>{const r=e[i],a=Xl(n,i,r);a&&t.push(a)});return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t});return()=>(0,i.h)(e.tag,{class:["v-row",r.value,e.class],style:e.style},n.default?.())}});var Yl=n(9491);const Kl=(0,u.j)({disabled:Boolean,modelValue:{type:Boolean,default:null},...(0,Yl.e)()},"VHover"),Zl=(0,w.RW)()({name:"VHover",props:Kl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=(0,Te.q)(e,"modelValue"),{runOpenDelay:r,runCloseDelay:a}=(0,Yl.Z)(e,t=>!e.disabled&&(i.value=t));return()=>n.default?.({isHovering:i.value,props:{onMouseenter:r,onMouseleave:a}})}}),Jl=(0,u.j)({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...(0,le.X)(),...C()},"VInfiniteScroll"),Ql=(0,w.pM)({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:r,isIntersecting:a}=rt();return(0,i.wB)(a,async t=>{n("intersect",e.side,t)}),(0,E.C)(()=>(0,i.Lk)("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:r},[(0,i.eW)(" ")])),{}}}),ec=(0,w.RW)()({name:"VInfiniteScroll",props:Jl(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const l=(0,s.KR)(),c=(0,s.IJ)("ok"),u=(0,s.IJ)("ok"),d=(0,i.EW)(()=>(0,o.Dg)(e.margin)),h=(0,s.IJ)(!1);function p(t){if(!l.value)return;const n="vertical"===e.direction?"scrollTop":"scrollLeft";l.value[n]=t}function f(){if(!l.value)return 0;const t="vertical"===e.direction?"scrollTop":"scrollLeft";return l.value[t]}function m(){if(!l.value)return 0;const t="vertical"===e.direction?"scrollHeight":"scrollWidth";return l.value[t]}function v(){if(!l.value)return 0;const t="vertical"===e.direction?"clientHeight":"clientWidth";return l.value[t]}function g(e,t){"start"===e?c.value=t:"end"===e?u.value=t:"both"===e&&(c.value=t,u.value=t)}function y(e){return"start"===e?c.value:u.value}(0,i.sV)(()=>{l.value&&("start"===e.side?p(m()):"both"===e.side&&p(m()/2-v()/2))});let _=0;function b(e,t){h.value=t,h.value&&x(e)}function x(t){if("manual"!==e.mode&&!h.value)return;const n=y(t);function r(n){g(t,n),(0,i.dY)(()=>{"empty"!==n&&"error"!==n&&("ok"===n&&"start"===t&&p(m()-_+f()),"manual"!==e.mode&&(0,i.dY)(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{x(t)})})})}))})}l.value&&!["empty","loading"].includes(n)&&(_=m(),g(t,"loading"),a("load",{side:t,done:r}))}const{t:M}=(0,S.Ym)();function w(t,r){if(e.side!==t&&"both"!==e.side)return;const a=()=>x(t),s={side:t,props:{onClick:a,color:e.color}};return"error"===r?n.error?.(s):"empty"===r?n.empty?.(s)??(0,i.Lk)("div",null,[M(e.emptyText)]):"manual"===e.mode?"loading"===r?n.loading?.(s)??(0,i.bF)(st,{indeterminate:!0,color:e.color},null):n["load-more"]?.(s)??(0,i.bF)(Mt,{variant:"outlined",color:e.color,onClick:a},{default:()=>[M(e.loadMoreText)]}):n.loading?.(s)??(0,i.bF)(st,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:T}=(0,le.S)(e);function A(t){const n=t??e.side;g(n,"ok"),(0,i.dY)(()=>{p(m()-_+f()),"manual"!==e.mode&&(0,i.dY)(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{"both"===n?(x("start"),x("end")):x(n)})})})})})}return(0,E.C)(()=>{const t=e.tag,a="start"===e.side||"both"===e.side,s="end"===e.side||"both"===e.side,o="intersect"===e.mode;return(0,i.bF)(t,{ref:l,class:(0,r.C4)(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":a,"v-infinite-scroll--end":s}]),style:(0,r.Tr)(T.value)},{default:()=>[(0,i.Lk)("div",{class:"v-infinite-scroll__side"},[w("start",c.value)]),a&&o&&(0,i.bF)(Ql,{key:"start",side:"start",onIntersect:b,rootMargin:d.value},null),n.default?.(),s&&o&&(0,i.bF)(Ql,{key:"end",side:"end",onIntersect:b,rootMargin:d.value},null),(0,i.Lk)("div",{class:"v-infinite-scroll__side"},[w("end",u.value)])]})}),{reset:A}}}),tc=Symbol.for("vuetify:v-item-group"),nc=(0,u.j)({...(0,a.u)(),...We({selectedClass:"v-item--selected"}),...C(),...(0,M.yx)()},"VItemGroup"),ic=(0,w.RW)()({name:"VItemGroup",props:nc(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{isSelected:s,select:o,next:l,prev:c,selected:u}=je(e,tc);return()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-item-group",a.value,e.class]),style:(0,r.Tr)(e.style)},{default:()=>[n.default?.({isSelected:s,select:o,next:l,prev:c,selected:u.value})]})}}),rc=(0,w.RW)()({name:"VItem",props:He(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,select:r,toggle:a,selectedClass:s,value:o,disabled:l}=Ge(e,tc);return()=>n.default?.({isSelected:i.value,selectedClass:s.value,select:r,toggle:a,value:o.value,disabled:l.value})}}),ac=(0,u.j)({color:String,..._e(),...(0,a.u)(),...pe(),...C({tag:"kbd"}),...(0,M.yx)(),...xe()},"VKbd"),sc=(0,w.RW)()({name:"VKbd",props:ac(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{borderClasses:s}=be(e),{roundedClasses:o}=fe(e),{backgroundColorClasses:l,backgroundColorStyles:c}=(0,he.z6)(()=>e.color),{elevationClasses:u}=Se(e);return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-kbd",a.value,l.value,s.value,u.value,o.value,e.class]),style:(0,r.Tr)([c.value,e.style])},n)),{}}}),oc=(0,u.j)({...(0,a.u)(),...(0,le.X)(),...v()},"VLayout"),lc=(0,w.RW)()({name:"VLayout",props:oc(),setup(e,t){let{slots:n}=t;const{layoutClasses:a,layoutStyles:s,getLayoutItem:o,items:l,layoutRef:c}=x(e),{dimensionStyles:u}=(0,le.S)(e);return(0,E.C)(()=>(0,i.Lk)("div",{ref:c,class:(0,r.C4)([a.value,e.class]),style:(0,r.Tr)([u.value,s.value,e.style])},[n.default?.()])),{getLayoutItem:o,items:l}}}),cc=(0,u.j)({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...(0,a.u)(),...g()},"VLayoutItem"),uc=(0,w.RW)()({name:"VLayoutItem",props:cc(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:a}=_({id:e.name,order:(0,i.EW)(()=>parseInt(e.order,10)),position:(0,s.lW)(()=>e.position),elementSize:(0,s.lW)(()=>e.size),layoutSize:(0,s.lW)(()=>e.size),active:(0,s.lW)(()=>e.modelValue),absolute:(0,s.lW)(()=>e.absolute)});return()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-layout-item",e.class]),style:(0,r.Tr)([a.value,e.style])},[n.default?.()])}}),dc=(0,u.j)({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...(0,a.u)(),...(0,le.X)(),...C(),...(0,me.m)({transition:"fade-transition"})},"VLazy"),hc=(0,w.RW)()({name:"VLazy",directives:{vIntersect:ve.A},props:dc(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=(0,le.S)(e),s=(0,Te.q)(e,"modelValue");function o(e){s.value||(s.value=e)}return(0,E.C)(()=>(0,i.bo)((0,i.bF)(e.tag,{class:(0,r.C4)(["v-lazy",e.class]),style:(0,r.Tr)([a.value,e.style])},{default:()=>[s.value&&(0,i.bF)(me.M,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[ve.A,{handler:o,options:e.options},null]])),{}}}),pc=At("v-list-img"),fc=(0,u.j)({start:Boolean,end:Boolean,...(0,a.u)(),...C()},"VListItemAction"),mc=(0,w.RW)()({name:"VListItemAction",props:fc(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:(0,r.Tr)(e.style)},n)),{}}}),vc=(0,u.j)({start:Boolean,end:Boolean,...(0,a.u)(),...C()},"VListItemMedia"),gc=(0,w.RW)()({name:"VListItemMedia",props:vc(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:(0,r.Tr)(e.style)},n)),{}}}),yc=(0,u.j)({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...(0,a.u)()},"VLocaleProvider"),_c=(0,w.RW)()({name:"VLocaleProvider",props:yc(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=(0,S.Q1)(e);return(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-locale-provider",a.value,e.class]),style:(0,r.Tr)(e.style)},[n.default?.()])),{}}}),bc=(0,u.j)({scrollable:Boolean,...(0,a.u)(),...(0,le.X)(),...C({tag:"main"})},"VMain"),xc=(0,w.RW)()({name:"VMain",props:bc(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=(0,le.S)(e),{mainStyles:s}=y(),{ssrBootStyles:o}=Re();return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:(0,r.Tr)([s.value,o.value,a.value,e.style])},{default:()=>[e.scrollable?(0,i.Lk)("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function Sc(e){let{rootEl:t,isSticky:n,layoutItemStyles:r}=e;const a=(0,s.IJ)(!1),l=(0,s.IJ)(0),c=(0,i.EW)(()=>{const e="boolean"===typeof a.value?"top":a.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,a.value?{[e]:(0,o.Dg)(l.value)}:{top:r.value.top}]});(0,i.sV)(()=>{(0,i.wB)(n,e=>{e?window.addEventListener("scroll",d,{passive:!0}):window.removeEventListener("scroll",d)},{immediate:!0})}),(0,i.xo)(()=>{window.removeEventListener("scroll",d)});let u=0;function d(){const e=u>window.scrollY?"up":"down",n=t.value.getBoundingClientRect(),i=parseFloat(r.value.top??0),s=window.scrollY-Math.max(0,l.value-i),o=n.height+Math.max(l.value,i)-window.scrollY-window.innerHeight,c=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;n.height<window.innerHeight-i?(a.value="top",l.value=i):"up"===e&&"bottom"===a.value||"down"===e&&"top"===a.value?(l.value=window.scrollY+n.top-c,a.value=!0):"down"===e&&o<=0?(l.value=0,a.value="bottom"):"up"===e&&s<=0&&(c?"top"!==a.value&&(l.value=-s+c+i,a.value="top"):(l.value=n.top+s,a.value="top")),u=window.scrollY}return{isStuck:a,stickyStyles:c}}const Mc=100,wc=20;function Ec(e){const t=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*t}function Tc(e){if(e.length<2)return 0;if(2===e.length)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const i=Ec(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-i)*Math.abs(r),n===e.length-1&&(t*=.5)}return 1e3*Ec(t)}function Ac(){const e={};function t(t){Array.from(t.changedTouches).forEach(n=>{const i=e[n.identifier]??(e[n.identifier]=new o.CZ(wc));i.push([t.timeStamp,n])})}function n(t){Array.from(t.changedTouches).forEach(t=>{delete e[t.identifier]})}function i(t){const n=e[t]?.values().reverse();if(!n)throw new Error(`No samples for touch id ${t}`);const i=n[0],r=[],a=[];for(const e of n){if(i[0]-e[0]>Mc)break;r.push({t:e[0],d:e[1].clientX}),a.push({t:e[0],d:e[1].clientY})}return{x:Tc(r),y:Tc(a),get direction(){const{x:e,y:t}=this,[n,i]=[Math.abs(e),Math.abs(t)];return n>i&&e>=0?"right":n>i&&e<=0?"left":i>n&&t>=0?"down":i>n&&t<=0?"up":Cc()}}}return{addMovement:t,endTouch:n,getVelocity:i}}function Cc(){throw new Error}function Rc(e){let{el:t,isActive:n,isTemporary:r,width:a,touchless:l,position:c}=e;(0,i.sV)(()=>{window.addEventListener("touchstart",x,{passive:!0}),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",M,{passive:!0})}),(0,i.xo)(()=>{window.removeEventListener("touchstart",x),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",M)});const u=(0,i.EW)(()=>["left","right"].includes(c.value)),{addMovement:d,endTouch:h,getVelocity:p}=Ac();let f=!1;const m=(0,s.IJ)(!1),v=(0,s.IJ)(0),g=(0,s.IJ)(0);let y;function _(e,t){return("left"===c.value?e:"right"===c.value?document.documentElement.clientWidth-e:"top"===c.value?e:"bottom"===c.value?document.documentElement.clientHeight-e:Lc())-(t?a.value:0)}function b(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n="left"===c.value?(e-g.value)/a.value:"right"===c.value?(document.documentElement.clientWidth-e-g.value)/a.value:"top"===c.value?(e-g.value)/a.value:"bottom"===c.value?(document.documentElement.clientHeight-e-g.value)/a.value:Lc();return t?(0,o.qE)(n):n}function x(e){if(l.value)return;const t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,s=25,o="left"===c.value?t<s:"right"===c.value?t>document.documentElement.clientWidth-s:"top"===c.value?i<s:"bottom"===c.value?i>document.documentElement.clientHeight-s:Lc(),p=n.value&&("left"===c.value?t<a.value:"right"===c.value?t>document.documentElement.clientWidth-a.value:"top"===c.value?i<a.value:"bottom"===c.value?i>document.documentElement.clientHeight-a.value:Lc());(o||p||n.value&&r.value)&&(y=[t,i],g.value=_(u.value?t:i,n.value),v.value=b(u.value?t:i),f=g.value>-20&&g.value<80,h(e),d(e))}function S(e){const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(f){if(!e.cancelable)return void(f=!1);const i=Math.abs(t-y[0]),r=Math.abs(n-y[1]),a=u.value?i>r&&i>3:r>i&&r>3;a?(m.value=!0,f=!1):(u.value?r:i)>3&&(f=!1)}if(!m.value)return;e.preventDefault(),d(e);const i=b(u.value?t:n,!1);v.value=Math.max(0,Math.min(1,i)),i>1?g.value=_(u.value?t:n,!0):i<0&&(g.value=_(u.value?t:n,!1))}function M(e){if(f=!1,!m.value)return;d(e),m.value=!1;const t=p(e.changedTouches[0].identifier),i=Math.abs(t.x),r=Math.abs(t.y),a=u.value?i>r&&i>400:r>i&&r>3;n.value=a?t.direction===({left:"right",right:"left",top:"down",bottom:"up"}[c.value]||Lc()):v.value>.5}const w=(0,i.EW)(()=>m.value?{transform:"left"===c.value?`translateX(calc(-100% + ${v.value*a.value}px))`:"right"===c.value?`translateX(calc(100% - ${v.value*a.value}px))`:"top"===c.value?`translateY(calc(-100% + ${v.value*a.value}px))`:"bottom"===c.value?`translateY(calc(100% - ${v.value*a.value}px))`:Lc(),transition:"none"}:void 0);return(0,Le.Y)(m,()=>{const e=t.value?.style.transform??null,n=t.value?.style.transition??null;(0,i.nT)(()=>{t.value?.style.setProperty("transform",w.value?.transform||"none"),t.value?.style.setProperty("transition",w.value?.transition||null)}),(0,s.jr)(()=>{t.value?.style.setProperty("transform",e),t.value?.style.setProperty("transition",n)})}),{isDragging:m,dragProgress:v,dragStyles:w}}function Lc(){throw new Error}const Pc=["start","end","left","right","top","bottom"],Ic=(0,u.j)({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Pc.includes(e)},sticky:Boolean,..._e(),...(0,a.u)(),...(0,Yl.e)(),...(0,qt.hx)({mobile:null}),...xe(),...g(),...pe(),...C({tag:"nav"}),...(0,M.yx)()},"VNavigationDrawer"),Dc=(0,w.RW)()({name:"VNavigationDrawer",props:Ic(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:a}=t;const{isRtl:o}=(0,S.IA)(),{themeClasses:l}=(0,M.NX)(e),{borderClasses:c}=be(e),{backgroundColorClasses:u,backgroundColorStyles:d}=(0,he.z6)(()=>e.color),{elevationClasses:h}=Se(e),{displayClasses:p,mobile:f}=(0,qt._F)(e),{roundedClasses:m}=fe(e),v=(0,_t.rd)(),g=(0,Te.q)(e,"modelValue",null,e=>!!e),{ssrBootStyles:y}=Re(),{scopeId:b}=(0,si.b)(),x=(0,s.KR)(),w=(0,s.IJ)(!1),{runOpenDelay:T,runCloseDelay:A}=(0,Yl.Z)(e,e=>{w.value=e}),C=(0,i.EW)(()=>e.rail&&e.expandOnHover&&w.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),R=(0,i.EW)(()=>(0,ot.dO)(e.location,o.value)),L=(0,s.lW)(()=>e.persistent),I=(0,i.EW)(()=>!e.permanent&&(f.value||e.temporary)),D=(0,i.EW)(()=>e.sticky&&!I.value&&"bottom"!==R.value);(0,Le.Y)(()=>e.expandOnHover&&null!=e.rail,()=>{(0,i.wB)(w,e=>r("update:rail",!e))}),(0,Le.Y)(()=>!e.disableResizeWatcher,()=>{(0,i.wB)(I,t=>!e.permanent&&(0,i.dY)(()=>g.value=!t))}),(0,Le.Y)(()=>!e.disableRouteWatcher&&!!v,()=>{(0,i.wB)(v.currentRoute,()=>I.value&&(g.value=!1))}),(0,i.wB)(()=>e.permanent,e=>{e&&(g.value=!0)}),null!=e.modelValue||I.value||(g.value=e.permanent||!f.value);const{isDragging:O,dragProgress:N}=Rc({el:x,isActive:g,isTemporary:I,width:C,touchless:(0,s.lW)(()=>e.touchless),position:R}),k=(0,i.EW)(()=>{const t=I.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):C.value;return O.value?t*N.value:t}),{layoutItemStyles:F,layoutItemScrimStyles:U}=_({id:e.name,order:(0,i.EW)(()=>parseInt(e.order,10)),position:R,layoutSize:k,elementSize:C,active:(0,s.tB)(g),disableTransitions:(0,s.lW)(()=>O.value),absolute:(0,i.EW)(()=>e.absolute||D.value&&"string"!==typeof B.value)}),{isStuck:B,stickyStyles:V}=Sc({rootEl:x,isSticky:D,layoutItemStyles:F}),z=(0,he.z6)(()=>"string"===typeof e.scrim?e.scrim:null),W=(0,i.EW)(()=>({...O.value?{opacity:.2*N.value,transition:"none"}:void 0,...U.value}));return(0,ae.Uh)({VList:{bgColor:"transparent"}}),(0,E.C)(()=>{const t=a.image||e.image;return(0,i.Lk)(i.FK,null,[(0,i.bF)(e.tag,(0,i.v6)({ref:x,onMouseenter:T,onMouseleave:A,class:["v-navigation-drawer",`v-navigation-drawer--${R.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":w.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":I.value,"v-navigation-drawer--persistent":L.value,"v-navigation-drawer--active":g.value,"v-navigation-drawer--sticky":D.value},l.value,u.value,c.value,p.value,h.value,m.value,e.class],style:[d.value,F.value,y.value,V.value,e.style]},b,n),{default:()=>[t&&(0,i.Lk)("div",{key:"image",class:"v-navigation-drawer__img"},[a.image?(0,i.bF)(oe,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},a.image):(0,i.bF)(ye,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),a.prepend&&(0,i.Lk)("div",{class:"v-navigation-drawer__prepend"},[a.prepend?.()]),(0,i.Lk)("div",{class:"v-navigation-drawer__content"},[a.default?.()]),a.append&&(0,i.Lk)("div",{class:"v-navigation-drawer__append"},[a.append?.()])]}),(0,i.bF)(P.eB,{name:"fade-transition"},{default:()=>[I.value&&(O.value||g.value)&&!!e.scrim&&(0,i.Lk)("div",(0,i.v6)({class:["v-navigation-drawer__scrim",z.backgroundColorClasses.value],style:[W.value,z.backgroundColorStyles.value],onClick:()=>{L.value||(g.value=!1)}},b),null)]})])}),{isStuck:B}}});var Oc=n(7890);const Nc=(0,w.pM)({name:"VNoSsr",setup(e,t){let{slots:n}=t;const i=(0,Oc.S)();return()=>i.value&&n.default?.()}}),kc=50,Fc=500;function Uc(e){let{toggleUpDown:t}=e,n=-1,i=-1;function r(e){a(),o(e),window.addEventListener("pointerup",a),document.addEventListener("blur",a),n=window.setTimeout(()=>{i=window.setInterval(()=>o(e),kc)},Fc)}function a(){window.clearTimeout(n),window.clearInterval(i),window.removeEventListener("pointerup",a),document.removeEventListener("blur",a)}function o(e){t("up"===e)}return(0,s.jr)(a),{holdStart:r,holdStop:a}}const Bc=(0,u.j)({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||1===e.length},...(0,o.cJ)(Oi(),["modelValue","validationValue"])},"VNumberInput"),Vc=(0,w.RW)()({name:"VNumberInput",props:{...Bc()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,s.KR)(),{holdStart:a,holdStop:l}=Uc({toggleUpDown:L}),c=Ei(e),u=(0,i.EW)(()=>c.isDisabled.value||c.isReadonly.value),d=(0,s.IJ)(e.focused),{decimalSeparator:h}=(0,S.Ym)(),p=(0,i.EW)(()=>e.decimalSeparator?.[0]||h.value);function f(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.precision,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=null==n?String(t):t.toFixed(n);if(d.value&&i)return Number(r).toString().replace(".",p.value);if(null===e.minFractionDigits||null!==n&&n<e.minFractionDigits)return r.replace(".",p.value);let[a,s]=r.split(".");return s=(s??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[a,s].filter(Boolean).join(p.value)}const m=(0,Te.q)(e,"modelValue",null,e=>e??null,t=>null==t?t??null:(0,o.qE)(Number(t),e.min,e.max)),v=(0,s.IJ)(null);(0,i.nT)(()=>{d.value&&!u.value||(null==m.value?v.value=null:isNaN(m.value)||(v.value=f(m.value)))});const g=(0,i.EW)({get:()=>v.value,set(t){if(null===t||""===t)return m.value=null,void(v.value=null);const n=Number(t.replace(p.value,"."));!isNaN(n)&&n<=e.max&&n>=e.min&&(m.value=n,v.value=t)}}),y=(0,i.EW)(()=>!u.value&&(m.value??0)+e.step<=e.max),_=(0,i.EW)(()=>!u.value&&(m.value??0)-e.step>=e.min),b=(0,i.EW)(()=>e.hideInput?"stacked":e.controlVariant),x=(0,s.lW)(()=>"split"===b.value?"$plus":"$collapse"),M=(0,s.lW)(()=>"split"===b.value?"$minus":"$expand"),w=(0,s.lW)(()=>"split"===b.value?"default":"small"),T=(0,s.lW)(()=>"stacked"===b.value?"auto":"100%"),A={props:{onClick:D,onPointerup:O,onPointerdown:N,onPointercancel:O}},C={props:{onClick:D,onPointerup:O,onPointerdown:k,onPointercancel:O}};function R(e){if(null==e)return 0;const t=e.toString(),n=t.indexOf(".");return~n?t.length-n:0}function L(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(u.value)return;if(null==m.value)return void(g.value=f((0,o.qE)(0,e.min,e.max)));let n=Math.max(R(m.value),R(e.step));null!=e.precision&&(n=Math.max(n,e.precision)),t?y.value&&(g.value=f(m.value+e.step,n)):_.value&&(g.value=f(m.value-e.step,n))}function P(t){if(!t.data)return;const n=t.target,{value:i,selectionStart:r,selectionEnd:a}=n??{},s=i?i.slice(0,r)+t.data+i.slice(a):t.data,l=(0,o.T_)(s,e.precision,p.value);if(new RegExp(`^-?\\d*${(0,o.kb)(p.value)}?\\d*$`).test(s)||(t.preventDefault(),n.value=l),null!=e.precision){if(s.split(p.value)[1]?.length>e.precision){t.preventDefault(),n.value=l;const e=(r??0)+t.data.length;n.setSelectionRange(e,e)}0===e.precision&&s.includes(p.value)&&(t.preventDefault(),n.value=l)}}async function I(e){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(e.key)||e.ctrlKey||["ArrowDown","ArrowUp"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),F(),await(0,i.dY)(),"ArrowDown"===e.key?L(!1):L())}function D(e){e.stopPropagation()}function O(e){const t=e.currentTarget;t?.releasePointerCapture(e.pointerId),e.preventDefault(),l()}function N(e){const t=e.currentTarget;t?.setPointerCapture(e.pointerId),e.preventDefault(),e.stopPropagation(),a("up")}function k(e){const t=e.currentTarget;t?.setPointerCapture(e.pointerId),e.preventDefault(),e.stopPropagation(),a("down")}function F(){if(u.value)return;if(!r.value)return;const t=r.value.value,n=Number(t.replace(p.value,"."));t&&!isNaN(n)?g.value=f((0,o.qE)(n,e.min,e.max)):g.value=null}function U(){u.value||(g.value=null===m.value||isNaN(m.value)?null:f(m.value,e.precision,!1))}function B(){u.value||(null===m.value||isNaN(m.value)?g.value=null:g.value=m.value.toString().replace(".",p.value))}function V(){B()}function z(){F()}return(0,i.wB)(()=>e.precision,()=>U()),(0,i.wB)(()=>e.minFractionDigits,()=>U()),(0,i.sV)(()=>{F()}),(0,E.C)(()=>{const{modelValue:t,...a}=Ni.filterProps(e);function s(){return n.increment?(0,i.bF)(oe,{key:"increment-defaults",defaults:{VBtn:{disabled:!y.value,height:T.value,size:w.value,icon:x.value,variant:"text"}}},{default:()=>[n.increment(A)]}):(0,i.bF)(Mt,{"aria-hidden":"true","data-testid":"increment",disabled:!y.value,height:T.value,icon:x.value,key:"increment-btn",onClick:D,onPointerdown:N,onPointerup:O,onPointercancel:O,size:w.value,variant:"text",tabindex:"-1"},null)}function o(){return n.decrement?(0,i.bF)(oe,{key:"decrement-defaults",defaults:{VBtn:{disabled:!_.value,height:T.value,size:w.value,icon:M.value,variant:"text"}}},{default:()=>[n.decrement(C)]}):(0,i.bF)(Mt,{"aria-hidden":"true","data-testid":"decrement",disabled:!_.value,height:T.value,icon:M.value,key:"decrement-btn",onClick:D,onPointerdown:k,onPointerup:O,onPointercancel:O,size:w.value,variant:"text",tabindex:"-1"},null)}function l(){return(0,i.Lk)("div",{class:"v-number-input__control"},[o(),(0,i.bF)(hn,{vertical:"stacked"!==b.value},null),s()])}function c(){return e.hideInput||e.inset?void 0:(0,i.bF)(hn,{vertical:!0},null)}const u="split"===b.value?(0,i.Lk)("div",{class:"v-number-input__control"},[(0,i.bF)(hn,{vertical:!0},null),s()]):e.reverse||"hidden"===b.value?void 0:(0,i.Lk)(i.FK,null,[c(),l()]),h=n["append-inner"]||u,p="split"===b.value?(0,i.Lk)("div",{class:"v-number-input__control"},[o(),(0,i.bF)(hn,{vertical:!0},null)]):e.reverse&&"hidden"!==b.value?(0,i.Lk)(i.FK,null,[l(),c()]):void 0,f=n["prepend-inner"]||p;return(0,i.bF)(Ni,(0,i.v6)({ref:r},a,{modelValue:g.value,"onUpdate:modelValue":e=>g.value=e,focused:d.value,"onUpdate:focused":e=>d.value=e,validationValue:m.value,onBeforeinput:P,onFocus:V,onBlur:z,onKeydown:I,class:["v-number-input",{"v-number-input--default":"default"===b.value,"v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":"split"===b.value,"v-number-input--stacked":"stacked"===b.value},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":h?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.Lk)(i.FK,null,[n["append-inner"]?.(...t),u])}:void 0,"prepend-inner":f?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.Lk)(i.FK,null,[p,n["prepend-inner"]?.(...t)])}:void 0})}),(0,ai.O)({},r)}}),zc=(0,u.j)({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...(0,le.X)(),...mi(),...(0,o.Up)(yi({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Wc=(0,w.RW)()({name:"VOtpInput",props:zc(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:l}=t;const{dimensionStyles:c}=(0,le.S)(e),{isFocused:u,focus:d,blur:h}=vi(e),p=(0,Te.q)(e,"modelValue","",e=>null==e?[]:String(e).split(""),e=>e.join("")),{t:f}=(0,S.Ym)(),m=(0,i.EW)(()=>Number(e.length)),v=(0,i.EW)(()=>Array(m.value).fill(0)),g=(0,s.KR)(-1),y=(0,s.KR)(),_=(0,s.KR)([]),b=(0,i.EW)(()=>_.value[g.value]);let x=!1;function M(){if(P(b.value.value))return void(b.value.value="");if(x)return;const e=p.value.slice(),t=b.value.value;e[g.value]=t;let n=null;g.value>p.value.length?n=p.value.length+1:g.value+1!==m.value&&(n="next"),p.value=e,n&&(0,o.bq)(y.value,n)}function w(){x=!1,M()}function T(e){const t=p.value.slice(),n=g.value;let i=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(e.key)&&(e.preventDefault(),"ArrowLeft"===e.key?i="prev":"ArrowRight"===e.key?i="next":["Backspace","Delete"].includes(e.key)&&(t[g.value]="",p.value=t,g.value>0&&"Backspace"===e.key?i="prev":requestAnimationFrame(()=>{_.value[n]?.select()})),requestAnimationFrame(()=>{null!=i&&(0,o.bq)(y.value,i)}))}function A(e,t){t.preventDefault(),t.stopPropagation();const n=t?.clipboardData?.getData("Text").trim().slice(0,m.value)??"",i=n.length-1===-1?e:n.length-1;P(n)||(p.value=n.split(""),_.value?.[i].focus())}function C(){p.value=[]}function R(e,t){d(),g.value=t}function L(){h(),g.value=-1}function P(t){return"number"===e.type&&/[^0-9]/g.test(t)}return(0,Le.Y)(()=>e.autofocus,()=>{const e=(0,s.uY)();e.run(()=>{const{intersectionRef:t,isIntersecting:n}=rt();(0,i.nT)(()=>{t.value=_.value[0]}),(0,i.wB)(n,n=>{n&&(t.value?.focus(),e.stop())})})}),(0,ae.Uh)({VField:{color:(0,s.lW)(()=>e.color),bgColor:(0,s.lW)(()=>e.color),baseColor:(0,s.lW)(()=>e.baseColor),disabled:(0,s.lW)(()=>e.disabled),error:(0,s.lW)(()=>e.error),variant:(0,s.lW)(()=>e.variant)}},{scoped:!0}),(0,i.wB)(p,e=>{e.length===m.value&&(g.value=m.value-1,a("finish",e.join("")))},{deep:!0}),(0,i.wB)(g,e=>{e<0||(0,i.dY)(()=>{_.value[e]?.select()})}),(0,E.C)(()=>{const[t,a]=(0,o.ph)(n);return(0,i.Lk)("div",(0,i.v6)({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[(0,i.Lk)("div",{ref:y,class:"v-otp-input__content",style:(0,r.Tr)([c.value])},[v.value.map((t,n)=>(0,i.Lk)(i.FK,null,[e.divider&&0!==n&&(0,i.Lk)("span",{class:"v-otp-input__divider"},[e.divider]),(0,i.bF)(_i,{focused:u.value&&e.focusAll||g.value===n,key:n},{...l,loader:void 0,default:()=>(0,i.Lk)("input",{ref:e=>_.value[n]=e,"aria-label":f(e.label,n+1),autofocus:0===n&&e.autofocus,autocomplete:"one-time-code",class:(0,r.C4)(["v-otp-input__field"]),disabled:e.disabled,inputmode:"number"===e.type?"numeric":"text",min:"number"===e.type?0:void 0,maxlength:0===n?m.value:"1",placeholder:e.placeholder,type:"number"===e.type?"text":e.type,value:p.value[n],onInput:M,onFocus:e=>R(e,n),onBlur:L,onKeydown:T,onCompositionstart:()=>x=!0,onCompositionend:w,onPaste:e=>A(n,e)},null)})])),(0,i.Lk)("input",(0,i.v6)({class:"v-otp-input-input",type:"hidden"},a,{value:p.value.join("")}),null),(0,i.bF)(ri.L,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[l.loader?.()??(0,i.bF)(st,{color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),l.default?.()])])}),{blur:()=>{_.value?.some(e=>e.blur())},focus:()=>{_.value?.[0].focus()},reset:C,isFocused:u}}});function Hc(e){return Math.floor(Math.abs(e))*Math.sign(e)}const Gc=(0,u.j)({scale:{type:[Number,String],default:.5},...(0,a.u)()},"VParallax"),jc=(0,w.RW)()({name:"VParallax",props:Gc(),setup(e,t){let{slots:n}=t;const{intersectionRef:a,isIntersecting:l}=rt(),{resizeRef:u,contentRect:d}=c(),{height:h}=(0,qt._F)(),p=(0,s.KR)();let f;(0,i.nT)(()=>{a.value=u.value=p.value?.$el}),(0,i.wB)(l,e=>{e?(f=(0,Gi.mH)(a.value),f=f===document.scrollingElement?document:f,f.addEventListener("scroll",g,{passive:!0}),g()):f.removeEventListener("scroll",g)}),(0,i.xo)(()=>{f?.removeEventListener("scroll",g)}),(0,i.wB)(h,g),(0,i.wB)(()=>d.value?.height,g);const m=(0,i.EW)(()=>1-(0,o.qE)(Number(e.scale)));let v=-1;function g(){l.value&&(cancelAnimationFrame(v),v=requestAnimationFrame(()=>{const e=(p.value?.$el).querySelector(".v-img__img");if(!e)return;const t=f instanceof Document?document.documentElement.clientHeight:f.clientHeight,n=f instanceof Document?window.scrollY:f.scrollTop,i=a.value.getBoundingClientRect().top+n,r=d.value.height,s=i+(r-t)/2,o=Hc((n-s)*m.value),l=Math.max(1,(m.value*(t-r)+r)/r);e.style.setProperty("transform",`translateY(${o}px) scale(${l})`)}))}return(0,E.C)(()=>(0,i.bF)(ye,{class:(0,r.C4)(["v-parallax",{"v-parallax--active":l.value},e.class]),style:(0,r.Tr)(e.style),ref:p,cover:!0,onLoadstart:g,onLoad:g},n)),{}}}),Xc=(0,u.j)({...Wt({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),qc=(0,w.RW)()({name:"VRadio",props:Xc(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>{const t=Gt.filterProps(e);return(0,i.bF)(Gt,(0,i.v6)(t,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),$c=(0,u.j)({height:{type:[Number,String],default:"auto"},...Li(),...(0,o.cJ)(Bt(),["multiple"]),trueIcon:{type:Je.TX,default:"$radioOn"},falseIcon:{type:Je.TX,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Yc=(0,w.RW)()({name:"VRadioGroup",inheritAttrs:!1,props:$c(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const a=(0,i.Bi)(),l=(0,i.EW)(()=>e.id||`radio-group-${a}`),c=(0,Te.q)(e,"modelValue"),u=(0,s.KR)();return(0,E.C)(()=>{const[t,a]=(0,o.ph)(n),s=Pi.filterProps(e),d=Gt.filterProps(e),h=r.label?r.label({label:e.label,props:{for:l.value}}):e.label;return(0,i.bF)(Pi,(0,i.v6)({ref:u,class:["v-radio-group",e.class],style:e.style},t,s,{modelValue:c.value,"onUpdate:modelValue":e=>c.value=e,id:l.value}),{...r,default:t=>{let{id:n,messagesId:s,isDisabled:o,isReadonly:l}=t;return(0,i.Lk)(i.FK,null,[h&&(0,i.bF)(Ft,{id:n.value},{default:()=>[h]}),(0,i.bF)(zt,(0,i.v6)(d,{id:n.value,"aria-describedby":s.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:o.value,readonly:l.value,"aria-labelledby":h?n.value:void 0,multiple:!1},a,{modelValue:c.value,"onUpdate:modelValue":e=>c.value=e}),r)])}})}),(0,ai.O)({},u)}}),Kc=(0,u.j)({...mi(),...Li(),...fa(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),Zc=(0,w.RW)()({name:"VRangeSlider",props:Kc(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const a=(0,s.KR)(),o=(0,s.KR)(),l=(0,s.KR)(),{rtlClasses:c}=(0,S.IA)();function u(t){if(!a.value||!o.value)return;const n=ha(t,a.value.$el,e.direction),i=ha(t,o.value.$el,e.direction),r=Math.abs(n),s=Math.abs(i);return r<s||r===s&&n<0?a.value.$el:o.value.$el}const d=ma(e),h=(0,Te.q)(e,"modelValue",void 0,e=>e?.length?e.map(e=>d.roundValue(e)):[0,0]),{activeThumbRef:p,hasLabels:f,max:m,min:v,mousePressed:g,onSliderMousedown:y,onSliderTouchstart:_,position:b,trackContainerRef:x,readonly:M}=va({props:e,steps:d,onSliderStart:()=>{r("start",h.value)},onSliderEnd:t=>{let{value:n}=t;const i=p.value===a.value?.$el?[n,h.value[1]]:[h.value[0],n];!e.strict&&i[0]<i[1]&&(h.value=i),r("end",h.value)},onSliderMove:t=>{let{value:n}=t;const[i,r]=h.value;e.strict||i!==r||i===v.value||(p.value=n>i?o.value?.$el:a.value?.$el,p.value?.focus()),p.value===a.value?.$el?h.value=[Math.min(n,r),r]:h.value=[i,Math.max(i,n)]},getActiveThumb:u}),{isFocused:w,focus:T,blur:A}=vi(e),C=(0,i.EW)(()=>b(h.value[0])),R=(0,i.EW)(()=>b(h.value[1]));return(0,E.C)(()=>{const t=Pi.filterProps(e),r=!!(e.label||n.label||n.prepend);return(0,i.bF)(Pi,(0,i.v6)({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||f.value,"v-slider--focused":w.value,"v-slider--pressed":g.value,"v-slider--disabled":e.disabled},c.value,e.class],style:e.style,ref:l},t,{focused:w.value}),{...n,prepend:r?t=>(0,i.Lk)(i.FK,null,[n.label?.(t)??(e.label?(0,i.bF)(Ft,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(t)]):void 0,default:t=>{let{id:r,messagesId:s}=t;return(0,i.Lk)("div",{class:"v-slider__container",onMousedown:M.value?void 0:y,onTouchstartPassive:M.value?void 0:_},[(0,i.Lk)("input",{id:`${r.value}_start`,name:e.name||r.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:h.value[0]},null),(0,i.Lk)("input",{id:`${r.value}_stop`,name:e.name||r.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:h.value[1]},null),(0,i.bF)(ba,{ref:x,start:C.value,stop:R.value},{"tick-label":n["tick-label"]}),(0,i.bF)(ya,{ref:a,"aria-describedby":s.value,focused:w&&p.value===a.value?.$el,modelValue:h.value[0],"onUpdate:modelValue":e=>h.value=[e,h.value[1]],onFocus:e=>{T(),p.value=a.value?.$el,m.value!==v.value&&h.value[0]===h.value[1]&&h.value[1]===v.value&&e.relatedTarget!==o.value?.$el&&(a.value?.$el.blur(),o.value?.$el.focus())},onBlur:()=>{A(),p.value=void 0},min:v.value,max:h.value[1],position:C.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),(0,i.bF)(ya,{ref:o,"aria-describedby":s.value,focused:w&&p.value===o.value?.$el,modelValue:h.value[1],"onUpdate:modelValue":e=>h.value=[h.value[0],e],onFocus:e=>{T(),p.value=o.value?.$el,m.value!==v.value&&h.value[0]===h.value[1]&&h.value[0]===m.value&&e.relatedTarget!==a.value?.$el&&(o.value?.$el.blur(),a.value?.$el.focus())},onBlur:()=>{A(),p.value=void 0},min:h.value[0],max:m.value,position:R.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),(0,ai.O)({focus:()=>a.value?.$el.focus()},l)}});n(531);const Jc=(0,u.j)({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Je.TX,default:"$ratingEmpty"},fullIcon:{type:Je.TX,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...(0,a.u)(),...Oe(),...et(),...C(),...(0,M.yx)()},"VRating"),Qc=(0,w.RW)()({name:"VRating",props:Jc(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=(0,S.Ym)(),{themeClasses:l}=(0,M.NX)(e),c=(0,Te.q)(e,"modelValue"),u=(0,i.EW)(()=>(0,o.qE)(parseFloat(c.value),0,Number(e.length))),d=(0,i.EW)(()=>(0,o.Sd)(Number(e.length),1)),h=(0,i.EW)(()=>d.value.flatMap(t=>e.halfIncrements?[t-.5,t]:[t])),p=(0,s.IJ)(-1),f=(0,i.EW)(()=>h.value.map(t=>{const n=e.hover&&p.value>-1,i=u.value>=t,r=p.value>=t,a=n?r:i,s=a?e.fullIcon:e.emptyIcon,o=e.activeColor??e.color,l=i||r?o:e.color;return{isFilled:i,isHovered:r,icon:s,color:l}})),m=(0,i.EW)(()=>[0,...h.value].map(t=>{function n(){p.value=t}function i(){p.value=-1}function r(){e.disabled||e.readonly||(c.value=u.value===t&&e.clearable?0:t)}return{onMouseenter:e.hover?n:void 0,onMouseleave:e.hover?i:void 0,onClick:r}})),v=(0,i.Bi)(),g=(0,i.EW)(()=>e.name??`v-rating-${v}`);function y(t){let{value:s,index:o,showStar:l=!0}=t;const{onMouseenter:c,onMouseleave:d,onClick:h}=m.value[o+1],p=`${g.value}-${String(s).replace(".","-")}`,v={color:f.value[o]?.color,density:e.density,disabled:e.disabled,icon:f.value[o]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return(0,i.Lk)(i.FK,null,[(0,i.Lk)("label",{for:p,class:(0,r.C4)({"v-rating__item--half":e.halfIncrements&&s%1>0,"v-rating__item--full":e.halfIncrements&&s%1===0}),onMouseenter:c,onMouseleave:d,onClick:h},[(0,i.Lk)("span",{class:"v-rating__hidden"},[a(e.itemAriaLabel,s,e.length)]),l?n.item?n.item({...f.value[o],props:v,value:s,index:o,rating:u.value}):(0,i.bF)(Mt,(0,i.v6)({"aria-label":a(e.itemAriaLabel,s,e.length)},v),null):void 0]),(0,i.Lk)("input",{class:"v-rating__hidden",name:g.value,id:p,type:"radio",value:s,checked:u.value===s,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function _(e){return n["item-label"]?n["item-label"](e):e.label?(0,i.Lk)("span",null,[e.label]):(0,i.Lk)("span",null,[(0,i.eW)(" ")])}return(0,E.C)(()=>{const t=!!e.itemLabels?.length||n["item-label"];return(0,i.bF)(e.tag,{class:(0,r.C4)(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},l.value,e.class]),style:(0,r.Tr)(e.style)},{default:()=>[(0,i.bF)(y,{value:0,index:-1,showStar:!1},null),d.value.map((n,r)=>(0,i.Lk)("div",{class:"v-rating__wrapper"},[t&&"top"===e.itemLabelPosition?_({value:n,index:r,label:e.itemLabels?.[r]}):void 0,(0,i.Lk)("div",{class:"v-rating__item"},[e.halfIncrements?(0,i.Lk)(i.FK,null,[(0,i.bF)(y,{value:n-.5,index:2*r},null),(0,i.bF)(y,{value:n,index:2*r+1},null)]):(0,i.bF)(y,{value:n,index:r},null)]),t&&"bottom"===e.itemLabelPosition?_({value:n,index:r,label:e.itemLabels?.[r]}):void 0]))]})}),{}}}),eu={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function tu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,i.Lk)("div",{class:(0,r.C4)(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function nu(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>iu(t))}function iu(e){let t=[];if(!e)return t;const n=eu[e];if(e===n);else{if(e.includes(","))return ru(e);if(e.includes("@"))return nu(e);n.includes(",")?t=ru(n):n.includes("@")?t=nu(n):n&&t.push(iu(n))}return[tu(e,t)]}function ru(e){return e.replace(/\s/g,"").split(",").map(iu)}const au=(0,u.j)({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...(0,le.X)(),...xe(),...(0,M.yx)()},"VSkeletonLoader"),su=(0,w.RW)()({name:"VSkeletonLoader",props:au(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=(0,he.z6)(()=>e.color),{dimensionStyles:s}=(0,le.S)(e),{elevationClasses:l}=Se(e),{themeClasses:c}=(0,M.NX)(e),{t:u}=(0,S.Ym)(),d=(0,i.EW)(()=>iu((0,o.BN)(e.type).join(",")));return(0,E.C)(()=>{const t=!n.default||e.loading,o=e.boilerplate||!t?{}:{ariaLive:"polite",ariaLabel:u(e.loadingText),role:"alert"};return(0,i.Lk)("div",(0,i.v6)({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},c.value,r.value,l.value],style:[a.value,t?s.value:{}]},o),[t?d.value:n.default?.()])}),{}}}),ou=(0,w.RW)()({name:"VSlideGroupItem",props:He(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=Ge(e,nn);return()=>n.default?.({isSelected:i.isSelected.value,select:i.select,toggle:i.toggle,selectedClass:i.selectedClass.value})}});function lu(e){const t=(0,s.IJ)(e());let n=-1;function r(){clearInterval(n)}function a(){r(),(0,i.dY)(()=>t.value=e())}function o(i){const a=i?getComputedStyle(i):{transitionDuration:.2},s=1e3*parseFloat(a.transitionDuration)||200;if(r(),t.value<=0)return;const o=performance.now();n=window.setInterval(()=>{const n=performance.now()-o+s;t.value=Math.max(e()-n,0),t.value<=0&&r()},s)}return(0,s.jr)(r),{clear:r,time:t,start:o,reset:a}}const cu=(0,u.j)({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ct({location:"bottom"}),...gt(),...pe(),...Ue(),...(0,M.yx)(),...(0,o.cJ)((0,ri.D)({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),uu=(0,w.RW)()({name:"VSnackbar",props:cu(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,Te.q)(e,"modelValue"),{positionClasses:a}=yt(e),{scopeId:l}=(0,si.b)(),{themeClasses:c}=(0,M.NX)(e),{colorClasses:u,colorStyles:d,variantClasses:h}=Be(e),{roundedClasses:f}=fe(e),m=lu(()=>Number(e.timeout)),v=(0,s.KR)(),g=(0,s.KR)(),_=(0,s.IJ)(!1),b=(0,s.IJ)(0),x=(0,s.KR)(),S=(0,i.WQ)(p,void 0);(0,Le.Y)(()=>!!S,()=>{const e=y();(0,i.nT)(()=>{x.value=e.mainStyles.value})}),(0,i.wB)(r,T),(0,i.wB)(()=>e.timeout,T),(0,i.sV)(()=>{r.value&&T()});let w=-1;function T(){m.reset(),window.clearTimeout(w);const t=Number(e.timeout);if(!r.value||-1===t)return;const n=(0,o._p)(g.value);m.start(n),w=window.setTimeout(()=>{r.value=!1},t)}function A(){m.reset(),window.clearTimeout(w)}function C(){_.value=!0,A()}function R(){_.value=!1,T()}function L(e){b.value=e.touches[0].clientY}function P(e){Math.abs(b.value-e.changedTouches[0].clientY)>50&&(r.value=!1)}function I(){_.value&&R()}const D=(0,i.EW)(()=>e.location.split(" ").reduce((e,t)=>(e[`v-snackbar--${t}`]=!0,e),{}));return(0,E.C)(()=>{const t=ri.L.filterProps(e),s=!!(n.default||n.text||e.text);return(0,i.bF)(ri.L,(0,i.v6)({ref:v,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},D.value,a.value,e.class],style:[x.value,e.style]},t,{modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,contentProps:(0,i.v6)({class:["v-snackbar__wrapper",c.value,u.value,f.value,h.value],style:[d.value],onPointerenter:C,onPointerleave:R},t.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:L,onTouchend:P,onAfterLeave:I},l),{default:()=>[Fe(!1,"v-snackbar"),e.timer&&!_.value&&(0,i.Lk)("div",{key:"timer",class:"v-snackbar__timer"},[(0,i.bF)(ht,{ref:g,color:"string"===typeof e.timer?e.timer:"info",max:e.timeout,modelValue:m.time.value},null)]),s&&(0,i.Lk)("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&(0,i.bF)(oe,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[(0,i.Lk)("div",{class:"v-snackbar__actions"},[n.actions({isActive:r})])]})],activator:n.activator})}),(0,ai.O)({},v)}}),du=(0,u.j)({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...(0,o.cJ)(cu(),["modelValue"])},"VSnackbarQueue"),hu=(0,w.RW)()({name:"VSnackbarQueue",props:du(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const{t:a}=(0,S.Ym)(),o=(0,s.IJ)(!1),l=(0,s.IJ)(!1),c=(0,s.IJ)();function u(){e.modelValue.length?d():(c.value=void 0,l.value=!1)}function d(){const[t,...r]=e.modelValue;n("update:modelValue",r),c.value="string"===typeof t?{text:t}:t,(0,i.dY)(()=>{o.value=!0})}function h(){o.value=!1}(0,i.wB)(()=>e.modelValue.length,(e,t)=>{!l.value&&e>t&&d()}),(0,i.wB)(o,e=>{e&&(l.value=!0)});const p=(0,i.EW)(()=>({color:"string"===typeof e.closable?e.closable:void 0,text:a(e.closeText)}));(0,E.C)(()=>{const t=!(!e.closable&&!r.actions),{modelValue:n,...a}=uu.filterProps(e);return(0,i.Lk)(i.FK,null,[l.value&&!!c.value&&(r.default?(0,i.bF)(oe,{defaults:{VSnackbar:c.value}},{default:()=>[r.default({item:c.value})]}):(0,i.bF)(uu,(0,i.v6)(a,c.value,{modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,onAfterLeave:u}),{text:r.text?()=>r.text?.({item:c.value}):void 0,actions:t?()=>(0,i.Lk)(i.FK,null,[r.actions?(0,i.bF)(oe,{defaults:{VBtn:p.value}},{default:()=>[r.actions({item:c.value,props:{onClick:h}})]}):(0,i.bF)(Mt,(0,i.v6)(p.value,{onClick:h}),null)]):void 0}))])})}}),pu=(0,u.j)({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),fu=(0,u.j)({autoLineWidth:Boolean,...pu()},"VBarline"),mu=(0,w.RW)()({name:"VBarline",props:fu(),setup(e,t){let{slots:n}=t;const r=(0,i.Bi)(),a=(0,i.EW)(()=>e.id||`barline-${r}`),s=(0,i.EW)(()=>Number(e.autoDrawDuration)||500),l=(0,i.EW)(()=>Boolean(e.showLabels||e.labels.length>0||!!n?.label)),c=(0,i.EW)(()=>parseFloat(e.lineWidth)||4),u=(0,i.EW)(()=>Math.max(e.modelValue.length*c.value,Number(e.width))),d=(0,i.EW)(()=>({minX:0,maxX:u.value,minY:0,maxY:parseInt(e.height,10)})),h=(0,i.EW)(()=>e.modelValue.map(t=>(0,o.TD)(t,e.itemValue,t)));function p(t,n){const{minX:i,maxX:r,minY:a,maxY:s}=n,o=t.length;let l=null!=e.max?Number(e.max):Math.max(...t),c=null!=e.min?Number(e.min):Math.min(...t);c>0&&null==e.min&&(c=0),l<0&&null==e.max&&(l=0);const u=r/(1===o?2:o),d=(s-a)/(l-c||1),h=s-Math.abs(c*d);return t.map((e,t)=>{const n=Math.abs(d*e);return{x:i+t*u,y:h-n+Number(e<0)*n,height:n,value:e}})}const f=(0,i.EW)(()=>{const t=[],n=p(h.value,d.value),i=n.length;for(let r=0;t.length<i;r++){const i=n[r];let a=e.labels[r];a||(a="object"===typeof i?i.value:i),t.push({x:i.x,value:String(a)})}return t}),m=(0,i.EW)(()=>p(h.value,d.value)),v=(0,i.EW)(()=>1===m.value.length?(d.value.maxX-c.value)/2:(Math.abs(m.value[0].x-m.value[1].x)-c.value)/2),g=(0,i.EW)(()=>"boolean"===typeof e.smooth?e.smooth?2:0:Number(e.smooth));(0,E.C)(()=>{const t=e.gradient.slice().length?e.gradient.slice().reverse():[""];return(0,i.Lk)("svg",{display:"block"},[(0,i.Lk)("defs",null,[(0,i.Lk)("linearGradient",{id:a.value,gradientUnits:"userSpaceOnUse",x1:"left"===e.gradientDirection?"100%":"0",y1:"top"===e.gradientDirection?"100%":"0",x2:"right"===e.gradientDirection?"100%":"0",y2:"bottom"===e.gradientDirection?"100%":"0"},[t.map((e,n)=>(0,i.Lk)("stop",{offset:n/Math.max(t.length-1,1),"stop-color":e||"currentColor"},null))])]),(0,i.Lk)("clipPath",{id:`${a.value}-clip`},[m.value.map(t=>(0,i.Lk)("rect",{x:t.x+v.value,y:t.y,width:c.value,height:t.height,rx:g.value,ry:g.value},[e.autoDraw&&(0,i.Lk)(i.FK,null,[(0,i.Lk)("animate",{attributeName:"y",from:t.y+t.height,to:t.y,dur:`${s.value}ms`,fill:"freeze"},null),(0,i.Lk)("animate",{attributeName:"height",from:"0",to:t.height,dur:`${s.value}ms`,fill:"freeze"},null)])]))]),l.value&&(0,i.Lk)("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[f.value.map((t,r)=>(0,i.Lk)("text",{x:t.x+v.value+c.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||5.25),"font-size":Number(e.labelSize)||7},[n.label?.({index:r,value:t.value})??t.value]))]),(0,i.Lk)("g",{"clip-path":`url(#${a.value}-clip)`,fill:`url(#${a.value})`},[(0,i.Lk)("rect",{x:0,y:0,width:Math.max(e.modelValue.length*c.value,Number(e.width)),height:e.height},null)])])})}});function vu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:75;if(0===e.length)return"";const r=e.shift(),a=e[e.length-1];return(n?`M${r.x} ${i-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((n,i)=>{const a=e[i+1],s=e[i-1]||r,o=a&&yu(a,n,s);if(!a||o)return`L${n.x} ${n.y}`;const l=Math.min(_u(s,n),_u(a,n)),c=l/2<t,u=c?l/2:t,d=bu(s,n,u),h=bu(a,n,u);return`L${d.x} ${d.y}S${n.x} ${n.y} ${h.x} ${h.y}`}).join("")+(n?`L${a.x} ${i-r.x+2} Z`:"")}function gu(e){return parseInt(e,10)}function yu(e,t,n){return gu(e.x+n.x)===gu(2*t.x)&&gu(e.y+n.y)===gu(2*t.y)}function _u(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function bu(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(i.x*i.x+i.y*i.y),a={x:i.x/r,y:i.y/r};return{x:t.x+a.x*n,y:t.y+a.y*n}}const xu=(0,u.j)({fill:Boolean,...pu()},"VTrendline"),Su=(0,w.RW)()({name:"VTrendline",props:xu(),setup(e,t){let{slots:n}=t;const r=(0,i.Bi)(),a=(0,i.EW)(()=>e.id||`trendline-${r}`),l=(0,i.EW)(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),c=(0,s.KR)(0),u=(0,s.KR)(null);function d(t,n){const{minX:i,maxX:r,minY:a,maxY:s}=n;1===t.length&&(t=[t[0],t[0]]);const o=t.length,l=null!=e.max?Number(e.max):Math.max(...t),c=null!=e.min?Number(e.min):Math.min(...t),u=(r-i)/(o-1),d=(s-a)/(l-c||1);return t.map((e,t)=>({x:i+t*u,y:s-(e-c)*d,value:e}))}const h=(0,i.EW)(()=>Boolean(e.showLabels||e.labels.length>0||!!n?.label)),p=(0,i.EW)(()=>parseFloat(e.lineWidth)||4),f=(0,i.EW)(()=>Number(e.width)),m=(0,i.EW)(()=>{const t=Number(e.padding);return{minX:t,maxX:f.value-t,minY:t,maxY:parseInt(e.height,10)-t}}),v=(0,i.EW)(()=>e.modelValue.map(t=>(0,o.TD)(t,e.itemValue,t))),g=(0,i.EW)(()=>{const t=[],n=d(v.value,m.value),i=n.length;for(let r=0;t.length<i;r++){const i=n[r];let a=e.labels[r];a||(a="object"===typeof i?i.value:i),t.push({x:i.x,value:String(a)})}return t});function y(t){const n="boolean"===typeof e.smooth?e.smooth?8:0:Number(e.smooth);return vu(d(v.value,m.value),n,t,parseInt(e.height,10))}(0,i.wB)(()=>e.modelValue,async()=>{if(await(0,i.dY)(),!e.autoDraw||!u.value)return;const t=u.value,n=t.getTotalLength();e.fill?(t.style.transformOrigin="bottom center",t.style.transition="none",t.style.transform="scaleY(0)",t.getBoundingClientRect(),t.style.transition=`transform ${l.value}ms ${e.autoDrawEasing}`,t.style.transform="scaleY(1)"):(t.style.strokeDasharray=`${n}`,t.style.strokeDashoffset=`${n}`,t.getBoundingClientRect(),t.style.transition=`stroke-dashoffset ${l.value}ms ${e.autoDrawEasing}`,t.style.strokeDashoffset="0"),c.value=n},{immediate:!0}),(0,E.C)(()=>{const t=e.gradient.slice().length?e.gradient.slice().reverse():[""];return(0,i.Lk)("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[(0,i.Lk)("defs",null,[(0,i.Lk)("linearGradient",{id:a.value,gradientUnits:"userSpaceOnUse",x1:"left"===e.gradientDirection?"100%":"0",y1:"top"===e.gradientDirection?"100%":"0",x2:"right"===e.gradientDirection?"100%":"0",y2:"bottom"===e.gradientDirection?"100%":"0"},[t.map((e,n)=>(0,i.Lk)("stop",{offset:n/Math.max(t.length-1,1),"stop-color":e||"currentColor"},null))])]),h.value&&(0,i.Lk)("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[g.value.map((t,r)=>(0,i.Lk)("text",{x:t.x+p.value/2+p.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||5.25),"font-size":Number(e.labelSize)||7},[n.label?.({index:r,value:t.value})??t.value]))]),(0,i.Lk)("path",{ref:u,d:y(e.fill),fill:e.fill?`url(#${a.value})`:"none",stroke:e.fill?"none":`url(#${a.value})`},null),e.fill&&(0,i.Lk)("path",{d:y(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),Mu=(0,u.j)({type:{type:String,default:"trend"},...fu(),...xu()},"VSparkline"),wu=(0,w.RW)()({name:"VSparkline",props:Mu(),setup(e,t){let{slots:n}=t;const{textColorClasses:r,textColorStyles:a}=(0,he.aH)(()=>e.color),s=(0,i.EW)(()=>Boolean(e.showLabels||e.labels.length>0||!!n?.label)),o=(0,i.EW)(()=>{let t=parseInt(e.height,10);return s.value&&(t+=1.5*parseInt(e.labelSize,10)),t});(0,E.C)(()=>{const t="trend"===e.type?Su:mu,s="trend"===e.type?Su.filterProps(e):mu.filterProps(e);return(0,i.bF)(t,(0,i.v6)({key:e.type,class:r.value,style:a.value,viewBox:`0 0 ${e.width} ${parseInt(o.value,10)}`},s),n)})}}),Eu=(0,u.j)({...(0,a.u)(),...li({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),Tu=(0,w.RW)()({name:"VSpeedDial",props:Eu(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,Te.q)(e,"modelValue"),a=(0,s.KR)(),o=(0,i.EW)(()=>{const[t,n="center"]=e.location?.split(" ")??[];return`${t} ${n}`}),l=(0,i.EW)(()=>({[`v-speed-dial__content--${o.value.replace(" ","-")}`]:!0}));return(0,E.C)(()=>{const t=ci.filterProps(e);return(0,i.bF)(ci,(0,i.v6)(t,{modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,class:e.class,style:e.style,contentClass:["v-speed-dial__content",l.value,e.contentClass],location:o.value,ref:a,transition:"fade-transition"}),{...n,default:t=>(0,i.bF)(oe,{defaults:{VBtn:{size:"small"}}},{default:()=>[(0,i.bF)(me.M,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(t)]})]})})}),{}}}),Au=Symbol.for("vuetify:v-stepper"),Cu=(0,u.j)({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),Ru=(0,w.RW)()({name:"VStepperActions",props:Cu(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:r}=t;const{t:a}=(0,S.Ym)();function s(){n("click:prev")}function o(){n("click:next")}return(0,E.C)(()=>{const t={onClick:s},n={onClick:o};return(0,i.Lk)("div",{class:"v-stepper-actions"},[(0,i.bF)(oe,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:a(e.prevText),variant:"text"}}},{default:()=>[r.prev?.({props:t})??(0,i.bF)(Mt,t,null)]}),(0,i.bF)(oe,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:a(e.nextText),variant:"tonal"}}},{default:()=>[r.next?.({props:n})??(0,i.bF)(Mt,n,null)]})])}),{}}}),Lu=At("v-stepper-header"),Pu=(0,u.j)({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:Je.TX,default:"$complete"},editable:Boolean,editIcon:{type:Je.TX,default:"$edit"},error:Boolean,errorIcon:{type:Je.TX,default:"$error"},icon:Je.TX,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),Iu=(0,u.j)({...Pu(),...He()},"VStepperItem"),Du=(0,w.RW)()({name:"VStepperItem",directives:{vRipple:xt.A},props:Iu(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Ge(e,Au,!0),s=(0,i.EW)(()=>a?.value.value??e.value),o=(0,i.EW)(()=>e.rules.every(e=>!0===e())),l=(0,i.EW)(()=>!e.disabled&&e.editable),c=(0,i.EW)(()=>!e.disabled&&e.editable),u=(0,i.EW)(()=>e.error||!o.value),d=(0,i.EW)(()=>e.complete||e.rules.length>0&&o.value),h=(0,i.EW)(()=>u.value?e.errorIcon:d.value?e.completeIcon:a.isSelected.value&&e.editable?e.editIcon:e.icon),p=(0,i.EW)(()=>({canEdit:c.value,hasError:u.value,hasCompleted:d.value,title:e.title,subtitle:e.subtitle,step:s.value,value:e.value}));return(0,E.C)(()=>{const t=(!a||a.isSelected.value||d.value||c.value)&&!u.value&&!e.disabled,o=!(null==e.title&&!n.title),f=!(null==e.subtitle&&!n.subtitle);function m(){a?.toggle()}return(0,i.bo)((0,i.Lk)("button",{class:(0,r.C4)(["v-stepper-item",{"v-stepper-item--complete":d.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":u.value},a?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:m},[l.value&&Fe(!0,"v-stepper-item"),(0,i.bF)(Nt,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:t?e.color:void 0,size:24},{default:()=>[n.icon?.(p.value)??(h.value?(0,i.bF)(it,{icon:h.value},null):s.value)]}),(0,i.Lk)("div",{class:"v-stepper-item__content"},[o&&(0,i.Lk)("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(p.value)??e.title]),f&&(0,i.Lk)("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(p.value)??e.subtitle]),n.default?.(p.value)])]),[[xt.A,e.editable&&e.ripple,null]])}),{}}}),Ou=(0,u.j)({...(0,o.cJ)(Fr(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),Nu=(0,w.RW)()({name:"VStepperWindow",props:Ou(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,i.WQ)(Au,null),a=(0,Te.q)(e,"modelValue"),s=(0,i.EW)({get(){return null==a.value&&r?r.items.value.find(e=>r.selected.value.includes(e.id))?.value:a.value},set(e){a.value=e}});return(0,E.C)(()=>{const t=Ur.filterProps(e);return(0,i.bF)(Ur,(0,i.v6)({_as:"VStepperWindow"},t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),ku=(0,u.j)({...Wr()},"VStepperWindowItem"),Fu=(0,w.RW)()({name:"VStepperWindowItem",props:ku(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>{const t=Hr.filterProps(e);return(0,i.bF)(Hr,(0,i.v6)({_as:"VStepperWindowItem"},t,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),Uu=(0,u.j)({altLabels:Boolean,bgColor:String,completeIcon:Je.TX,editIcon:Je.TX,editable:Boolean,errorIcon:Je.TX,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...(0,qt.hx)()},"Stepper"),Bu=(0,u.j)({...Uu(),...We({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...Ka(),...(0,o.Up)(Cu(),["prevText","nextText"])},"VStepper"),Vu=(0,w.RW)()({name:"VStepper",props:Bu(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:r,next:a,prev:l,selected:c}=je(e,Au),{displayClasses:u,mobile:d}=(0,qt._F)(e),{completeIcon:h,editIcon:p,errorIcon:f,color:m,editable:v,prevText:g,nextText:y}=(0,s.QW)(e),_=(0,i.EW)(()=>e.items.map((t,n)=>{const i=(0,o.TD)(t,e.itemTitle,t),r=(0,o.TD)(t,e.itemValue,n+1);return{title:i,value:r,raw:t}})),b=(0,i.EW)(()=>r.value.findIndex(e=>c.value.includes(e.id))),x=(0,i.EW)(()=>e.disabled?e.disabled:0===b.value?"prev":b.value===r.value.length-1&&"next");return(0,ae.Uh)({VStepperItem:{editable:v,errorIcon:f,completeIcon:h,editIcon:p,prevText:g,nextText:y},VStepperActions:{color:m,disabled:x,prevText:g,nextText:y}}),(0,E.C)(()=>{const t=Za.filterProps(e),r=!(!n.header&&!e.items.length),s=e.items.length>0,o=!e.hideActions&&!(!s&&!n.actions);return(0,i.bF)(Za,(0,i.v6)(t,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":d.value},u.value,e.class],style:e.style}),{default:()=>[r&&(0,i.bF)(Lu,{key:"stepper-header"},{default:()=>[_.value.map((e,t)=>{let{raw:r,...a}=e;return(0,i.Lk)(i.FK,null,[!!t&&(0,i.bF)(hn,null,null),(0,i.bF)(Du,a,{default:n[`header-item.${a.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),s&&(0,i.bF)(Nu,{key:"stepper-window"},{default:()=>[_.value.map(e=>(0,i.bF)(Fu,{value:e.value},{default:()=>n[`item.${e.value}`]?.(e)??n.item?.(e)}))]}),n.default?.({prev:l,next:a}),o&&(n.actions?.({next:a,prev:l})??(0,i.bF)(Ru,{key:"stepper-actions","onClick:prev":l,"onClick:next":a},n))]})}),{prev:l,next:a}}}),zu=(0,u.j)({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Li(),...Wt()},"VSwitch"),Wu=(0,w.RW)()({name:"VSwitch",inheritAttrs:!1,props:zu(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const c=(0,Te.q)(e,"indeterminate"),u=(0,Te.q)(e,"modelValue"),{loaderClasses:d}=ft(e),{isFocused:h,focus:p,blur:f}=vi(e),m=(0,s.KR)(),v=(0,s.KR)(),g=l.ZK&&window.matchMedia("(forced-colors: active)").matches,y=(0,s.lW)(()=>"string"===typeof e.loading&&""!==e.loading?e.loading:e.color),_=(0,i.Bi)(),b=(0,s.lW)(()=>e.id||`switch-${_}`);function x(){c.value&&(c.value=!1)}function S(e){e.stopPropagation(),e.preventDefault(),m.value?.input?.click()}return(0,E.C)(()=>{const[t,s]=(0,o.ph)(n),l=Pi.filterProps(e),_=Gt.filterProps(e);return(0,i.bF)(Pi,(0,i.v6)({ref:v,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":c.value},d.value,e.class]},t,l,{modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,id:b.value,focused:h.value,style:e.style}),{...a,default:t=>{let{id:n,messagesId:o,isDisabled:l,isReadonly:d,isValid:h}=t;const v={model:u,isValid:h};return(0,i.bF)(Gt,(0,i.v6)({ref:m},_,{modelValue:u.value,"onUpdate:modelValue":[e=>u.value=e,x],id:n.value,"aria-describedby":o.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:l.value,readonly:d.value,onFocus:p,onBlur:f},s),{...a,default:e=>{let{backgroundColorClasses:t,backgroundColorStyles:n}=e;return(0,i.Lk)("div",{class:(0,r.C4)(["v-switch__track",g?void 0:t.value]),style:(0,r.Tr)(n.value),onClick:S},[a["track-true"]&&(0,i.Lk)("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](v)]),a["track-false"]&&(0,i.Lk)("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](v)])])},input:t=>{let{inputNode:n,icon:s,backgroundColorClasses:o,backgroundColorStyles:l}=t;return(0,i.Lk)(i.FK,null,[n,(0,i.Lk)("div",{class:(0,r.C4)(["v-switch__thumb",{"v-switch__thumb--filled":s||e.loading},e.inset||g?void 0:o.value]),style:(0,r.Tr)(e.inset?void 0:l.value)},[a.thumb?(0,i.bF)(oe,{defaults:{VIcon:{icon:s,size:"x-small"}}},{default:()=>[a.thumb({...v,icon:s})]}):(0,i.bF)($,null,{default:()=>[e.loading?(0,i.bF)(mt,{name:"v-switch",active:!0,color:!1===h.value?void 0:y.value},{default:e=>a.loader?a.loader(e):(0,i.bF)(st,{active:e.isActive,color:e.color,indeterminate:!0,size:"16",width:"2"},null)}):s&&(0,i.bF)(it,{key:String(s),icon:s,size:"x-small"},null)]})])])}})}})}),(0,ai.O)({},v)}}),Hu=(0,u.j)({color:String,height:[Number,String],window:Boolean,...(0,a.u)(),...xe(),...g(),...pe(),...C(),...(0,M.yx)()},"VSystemBar"),Gu=(0,w.RW)()({name:"VSystemBar",props:Hu(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{backgroundColorClasses:o,backgroundColorStyles:l}=(0,he.z6)(()=>e.color),{elevationClasses:c}=Se(e),{roundedClasses:u}=fe(e),{ssrBootStyles:d}=Re(),h=(0,i.EW)(()=>e.height??(e.window?32:24)),{layoutItemStyles:p}=_({id:e.name,order:(0,i.EW)(()=>parseInt(e.order,10)),position:(0,s.IJ)("top"),layoutSize:h,elementSize:h,active:(0,i.EW)(()=>!0),absolute:(0,s.lW)(()=>e.absolute)});return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-system-bar",{"v-system-bar--window":e.window},a.value,o.value,c.value,u.value,e.class]),style:(0,r.Tr)([l.value,p.value,d.value,e.style])},n)),{}}}),ju=Symbol.for("vuetify:v-tabs"),Xu=(0,u.j)({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...(0,o.cJ)(St({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),qu=(0,w.RW)()({name:"VTab",props:Xu(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:o,textColorStyles:l}=(0,he.aH)(()=>e.sliderColor),c=(0,s.KR)(),u=(0,s.KR)(),d=(0,i.EW)(()=>"horizontal"===e.direction),h=(0,i.EW)(()=>c.value?.group?.isSelected.value??!1);function p(e){let{value:t}=e;if(t){const e=c.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),t=u.value;if(!e||!t)return;const n=getComputedStyle(e).color,i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=d.value?"x":"y",s=d.value?"X":"Y",o=d.value?"right":"bottom",l=d.value?"width":"height",h=i[a],p=r[a],f=h>p?i[o]-r[o]:i[a]-r[a],m=Math.sign(f)>0?d.value?"right":"bottom":Math.sign(f)<0?d.value?"left":"top":"center",v=Math.abs(f)+(Math.sign(f)<0?i[l]:r[l]),g=v/Math.max(i[l],r[l])||0,y=i[l]/r[l]||0,_=1.5;(0,k.i)(t,{backgroundColor:[n,"currentcolor"],transform:[`translate${s}(${f}px) scale${s}(${y})`,`translate${s}(${f/_}px) scale${s}(${(g-1)/_+1})`,"none"],transformOrigin:Array(3).fill(m)},{duration:225,easing:F.B2})}}return(0,E.C)(()=>{const t=Mt.filterProps(e);return(0,i.bF)(Mt,(0,i.v6)({symbol:ju,ref:c,class:["v-tab",e.class],style:e.style,tabindex:h.value?0:-1,role:"tab","aria-selected":String(h.value),active:!1},t,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":p}),{...n,default:()=>(0,i.Lk)(i.FK,null,[n.default?.()??e.text,!e.hideSlider&&(0,i.Lk)("div",{ref:u,class:(0,r.C4)(["v-tab__slider",o.value]),style:(0,r.Tr)(l.value)},null)])})}),(0,ai.O)({},c)}}),$u=(0,u.j)({...(0,o.cJ)(Fr(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Yu=(0,w.RW)()({name:"VTabsWindow",props:$u(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=(0,i.WQ)(ju,null),a=(0,Te.q)(e,"modelValue"),s=(0,i.EW)({get(){return null==a.value&&r?r.items.value.find(e=>r.selected.value.includes(e.id))?.value:a.value},set(e){a.value=e}});return(0,E.C)(()=>{const t=Ur.filterProps(e);return(0,i.bF)(Ur,(0,i.v6)({_as:"VTabsWindow"},t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),Ku=(0,u.j)({...Wr()},"VTabsWindowItem"),Zu=(0,w.RW)()({name:"VTabsWindowItem",props:Ku(),setup(e,t){let{slots:n}=t;return(0,E.C)(()=>{const t=Hr.filterProps(e);return(0,i.bF)(Hr,(0,i.v6)({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function Ju(e){return e?e.map(e=>(0,o.Gv)(e)?e:{text:e,value:e}):[]}const Qu=(0,u.j)({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...rn({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Oe(),...C()},"VTabs"),ed=(0,w.RW)()({name:"VTabs",props:Qu(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const a=(0,Te.q)(e,"modelValue"),l=(0,i.EW)(()=>Ju(e.items)),{densityClasses:c}=Ne(e),{backgroundColorClasses:u,backgroundColorStyles:d}=(0,he.z6)(()=>e.bgColor),{scopeId:h}=(0,si.b)();return(0,ae.Uh)({VTab:{color:(0,s.lW)(()=>e.color),direction:(0,s.lW)(()=>e.direction),stacked:(0,s.lW)(()=>e.stacked),fixed:(0,s.lW)(()=>e.fixedTabs),sliderColor:(0,s.lW)(()=>e.sliderColor),hideSlider:(0,s.lW)(()=>e.hideSlider)}}),(0,E.C)(()=>{const t=an.filterProps(e),s=!!(r.window||e.items.length>0);return(0,i.Lk)(i.FK,null,[(0,i.bF)(an,(0,i.v6)(t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},c.value,u.value,e.class],style:[{"--v-tabs-height":(0,o.Dg)(e.height)},d.value,e.style],role:"tablist",symbol:ju},h,n),{default:()=>[r.default?.()??l.value.map(e=>r.tab?.({item:e})??(0,i.bF)(qu,(0,i.v6)(e,{key:e.text,value:e.value}),{default:r[`tab.${e.value}`]?()=>r[`tab.${e.value}`]?.({item:e}):void 0}))]}),s&&(0,i.bF)(Yu,(0,i.v6)({modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,key:"tabs-window"},h),{default:()=>[l.value.map(e=>r.item?.({item:e})??(0,i.bF)(Zu,{value:e.value},{default:()=>r[`item.${e.value}`]?.({item:e})})),r.window?.()]})])}),{}}}),td=(0,u.j)({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Li(),...yi()},"VTextarea"),nd=(0,w.RW)()({name:"VTextarea",directives:{vIntersect:ve.A},inheritAttrs:!1,props:td(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:l}=t;const c=(0,Te.q)(e,"modelValue"),{isFocused:u,focus:d,blur:h}=vi(e),{onIntersect:p}=Ii(e),f=(0,i.EW)(()=>"function"===typeof e.counterValue?e.counterValue(c.value):(c.value||"").toString().length),m=(0,i.EW)(()=>n.maxlength?n.maxlength:!e.counter||"number"!==typeof e.counter&&"string"!==typeof e.counter?void 0:e.counter),v=(0,s.KR)(),g=(0,s.KR)(),y=(0,s.IJ)(""),_=(0,s.KR)(),b=(0,i.EW)(()=>e.persistentPlaceholder||u.value||e.active);function x(){_.value!==document.activeElement&&_.value?.focus(),u.value||d()}function S(e){x(),a("click:control",e)}function M(e){a("mousedown:control",e)}function w(t){t.stopPropagation(),x(),(0,i.dY)(()=>{c.value="",(0,o.P)(e["onClick:clear"],t)})}function T(t){const n=t.target;if(c.value=n.value,e.modelModifiers?.trim){const e=[n.selectionStart,n.selectionEnd];(0,i.dY)(()=>{n.selectionStart=e[0],n.selectionEnd=e[1]})}}const A=(0,s.KR)(),C=(0,s.KR)(Number(e.rows)),R=(0,i.EW)(()=>["plain","underlined"].includes(e.variant));function L(){e.autoGrow&&(0,i.dY)(()=>{if(!A.value||!g.value)return;const t=getComputedStyle(A.value),n=getComputedStyle(g.value.$el),i=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),r=A.value.scrollHeight,a=parseFloat(t.lineHeight),s=Math.max(parseFloat(e.rows)*a+i,parseFloat(n.getPropertyValue("--v-input-control-height"))),l=parseFloat(e.maxRows)*a+i||1/0,c=(0,o.qE)(r??0,s,l);C.value=Math.floor((c-i)/a),y.value=(0,o.Dg)(c)})}let I;return(0,i.nT)(()=>{e.autoGrow||(C.value=Number(e.rows))}),(0,i.sV)(L),(0,i.wB)(c,L),(0,i.wB)(()=>e.rows,L),(0,i.wB)(()=>e.maxRows,L),(0,i.wB)(()=>e.density,L),(0,i.wB)(C,e=>{a("update:rows",e)}),(0,i.wB)(A,e=>{e?(I=new ResizeObserver(L),I.observe(A.value)):I?.disconnect()}),(0,i.xo)(()=>{I?.disconnect()}),(0,E.C)(()=>{const t=!!(l.counter||e.counter||e.counterValue),a=!(!t&&!l.details),[s,d]=(0,o.ph)(n),{modelValue:E,...L}=Pi.filterProps(e),I={..._i.filterProps(e),"onClick:clear":w};return(0,i.bF)(Pi,(0,i.v6)({ref:v,modelValue:c.value,"onUpdate:modelValue":e=>c.value=e,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":R.value},e.class],style:e.style},s,L,{centerAffix:1===C.value&&!R.value,focused:u.value}),{...l,default:t=>{let{id:n,isDisabled:a,isDirty:s,isReadonly:o,isValid:f,hasDetails:m}=t;return(0,i.bF)(_i,(0,i.v6)({ref:g,style:{"--v-textarea-control-height":y.value},onClick:S,onMousedown:M,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},I,{id:n.value,active:b.value||s.value,centerAffix:1===C.value&&!R.value,dirty:s.value||e.dirty,disabled:a.value,focused:u.value,details:m.value,error:!1===f.value}),{...l,default:t=>{let{props:{class:n,...s}}=t;return(0,i.Lk)(i.FK,null,[e.prefix&&(0,i.Lk)("span",{class:"v-text-field__prefix"},[e.prefix]),(0,i.bo)((0,i.Lk)("textarea",(0,i.v6)({ref:_,class:n,value:c.value,onInput:T,autofocus:e.autofocus,readonly:o.value,disabled:a.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:x,onBlur:h},s,d),null),[[ve.A,{handler:p},null,{once:!0}]]),e.autoGrow&&(0,i.bo)((0,i.Lk)("textarea",{class:(0,r.C4)([n,"v-textarea__sizer"]),id:`${s.id}-sizer`,"onUpdate:modelValue":e=>c.value=e,ref:A,readonly:!0,"aria-hidden":"true"},null),[[P.Jo,c.value]]),e.suffix&&(0,i.Lk)("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:a?n=>(0,i.Lk)(i.FK,null,[l.details?.(n),t&&(0,i.Lk)(i.FK,null,[(0,i.Lk)("span",null,null),(0,i.bF)(di,{active:e.persistentCounter||u.value,value:f.value,max:m.value,disabled:e.disabled},l.counter)])]):void 0})}),(0,ai.O)({},v,g,_)}}),id=(0,u.j)({withBackground:Boolean,...(0,a.u)(),...(0,M.yx)(),...C()},"VThemeProvider"),rd=(0,w.RW)()({name:"VThemeProvider",props:id(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e);return()=>e.withBackground?(0,i.bF)(e.tag,{class:(0,r.C4)(["v-theme-provider",a.value,e.class]),style:(0,r.Tr)(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),ad=(0,u.j)({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Je.TX,iconColor:String,lineColor:String,...(0,a.u)(),...pe(),...et(),...xe()},"VTimelineDivider"),sd=(0,w.RW)()({name:"VTimelineDivider",props:ad(),setup(e,t){let{slots:n}=t;const{sizeClasses:a,sizeStyles:s}=tt(e,"v-timeline-divider__dot"),{backgroundColorStyles:o,backgroundColorClasses:l}=(0,he.z6)(()=>e.dotColor),{roundedClasses:c}=fe(e,"v-timeline-divider__dot"),{elevationClasses:u}=Se(e),{backgroundColorClasses:d,backgroundColorStyles:h}=(0,he.z6)(()=>e.lineColor);return(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:(0,r.Tr)(e.style)},[(0,i.Lk)("div",{class:(0,r.C4)(["v-timeline-divider__before",d.value]),style:(0,r.Tr)(h.value)},null),!e.hideDot&&(0,i.Lk)("div",{key:"dot",class:(0,r.C4)(["v-timeline-divider__dot",u.value,c.value,a.value]),style:(0,r.Tr)(s.value)},[(0,i.Lk)("div",{class:(0,r.C4)(["v-timeline-divider__inner-dot",l.value,c.value]),style:(0,r.Tr)(o.value)},[n.default?(0,i.bF)(oe,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):(0,i.bF)(it,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),(0,i.Lk)("div",{class:(0,r.C4)(["v-timeline-divider__after",d.value]),style:(0,r.Tr)(h.value)},null)])),{}}}),od=(0,u.j)({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Je.TX,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>null==e||["start","end"].includes(e)},...(0,a.u)(),...(0,le.X)(),...xe(),...pe(),...et(),...C()},"VTimelineItem"),ld=(0,w.RW)()({name:"VTimelineItem",props:od(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=(0,le.S)(e),l=(0,s.IJ)(0),c=(0,s.KR)();return(0,i.wB)(c,e=>{e&&(l.value=e.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":"start"===e.side,"v-timeline-item--side-end":"end"===e.side},e.class]),style:(0,r.Tr)([{"--v-timeline-dot-size":(0,o.Dg)(l.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${(0,o.Dg)(e.lineInset)})`:(0,o.Dg)(0)},e.style])},[(0,i.Lk)("div",{class:"v-timeline-item__body",style:(0,r.Tr)(a.value)},[n.default?.()]),(0,i.bF)(sd,{ref:c,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),"compact"!==e.density&&(0,i.Lk)("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),cd=(0,u.j)({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>null==e||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...(0,o.Up)(od({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...(0,a.u)(),...Oe(),...C(),...(0,M.yx)()},"VTimeline"),ud=(0,w.RW)()({name:"VTimeline",props:cd(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,M.NX)(e),{densityClasses:l}=Ne(e),{rtlClasses:c}=(0,S.IA)();(0,ae.Uh)({VTimelineDivider:{lineColor:(0,s.lW)(()=>e.lineColor)},VTimelineItem:{density:(0,s.lW)(()=>e.density),dotColor:(0,s.lW)(()=>e.dotColor),fillDot:(0,s.lW)(()=>e.fillDot),hideOpposite:(0,s.lW)(()=>e.hideOpposite),iconColor:(0,s.lW)(()=>e.iconColor),lineColor:(0,s.lW)(()=>e.lineColor),lineInset:(0,s.lW)(()=>e.lineInset),size:(0,s.lW)(()=>e.size)}});const u=(0,i.EW)(()=>{const t=e.side?e.side:"default"!==e.density?"end":null;return t&&`v-timeline--side-${t}`}),d=(0,i.EW)(()=>{const t=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return t;case"start":return t[0];case"end":return t[1];default:return null}});return(0,E.C)(()=>(0,i.bF)(e.tag,{class:(0,r.C4)(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,d.value,{"v-timeline--inset-line":!!e.lineInset},a.value,l.value,u.value,c.value,e.class]),style:(0,r.Tr)([{"--v-timeline-line-thickness":(0,o.Dg)(e.lineThickness)},e.style])},n)),{}}});function dd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")}const hd=(0,u.j)({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),pd=(0,w.RW)()({name:"VTimePickerClock",props:hd(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const a=(0,s.KR)(null),l=(0,s.KR)(null),c=(0,s.KR)(void 0),u=(0,s.KR)(!1),d=(0,s.KR)(null),h=(0,s.KR)(null),p=(0,o.sg)(e=>n("change",e),750),{textColorClasses:f,textColorStyles:m}=(0,he.aH)(()=>e.color),{backgroundColorClasses:v,backgroundColorStyles:g}=(0,he.z6)(()=>e.color),y=(0,i.EW)(()=>e.max-e.min+1),_=(0,i.EW)(()=>e.double?y.value/2:y.value),b=(0,i.EW)(()=>360/_.value),x=(0,i.EW)(()=>b.value*Math.PI/180),S=(0,i.EW)(()=>null==e.modelValue?e.min:e.modelValue),M=(0,i.EW)(()=>.62),w=(0,i.EW)(()=>{const t=[];for(let n=e.min;n<=e.max;n+=e.step)t.push(n);return t});function T(e){c.value!==e&&(c.value=e),n("input",e)}function A(t){return!e.allowedValues||e.allowedValues(t)}function C(t){if(!e.scrollable||e.disabled)return;t.preventDefault();const n=Math.sign(-t.deltaY||1);let i=S.value;do{i+=n,i=(i-e.min+y.value)%y.value+e.min}while(!A(i)&&i!==S.value);i!==e.displayedValue&&T(i),p(i)}function R(t){return e.double&&t-e.min>=_.value}function L(e){return R(e)?M.value:1}function P(t){const n=e.rotate*Math.PI/180;return{x:Math.sin((t-e.min)*x.value+n)*L(t),y:-Math.cos((t-e.min)*x.value+n)*L(t)}}function I(t,n){const i=(Math.round(t/b.value)+(n?_.value:0))%y.value+e.min;return t<360-b.value/2?i:n?e.max-_.value+1:e.min}function D(e){const{x:t,y:n}=P(e);return{left:`${Math.round(50+50*t)}%`,top:`${Math.round(50+50*n)}%`}}function O(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function N(e,t){const n=2*Math.atan2(t.y-e.y-O(e,t),t.x-e.x);return Math.abs(180*n/Math.PI)}function k(e){null===d.value&&(d.value=e),h.value=e,T(e)}function F(t){if(t.preventDefault(),!u.value&&"click"!==t.type||!a.value)return;const{width:n,top:i,left:r}=a.value?.getBoundingClientRect(),{width:s}=l.value?.getBoundingClientRect()??{width:0},{clientX:o,clientY:c}="touches"in t?t.touches[0]:t,d={x:n/2,y:-n/2},h={x:o-r,y:i-c},p=Math.round(N(d,h)-e.rotate+360)%360,f=e.double&&O(d,h)<(s+s*M.value)/4,m=Math.ceil(15/b.value);let v;for(let e=0;e<m;e++){if(v=I(p+e*b.value,f),A(v))return k(v);if(v=I(p-e*b.value,f),A(v))return k(v)}}function U(t){e.disabled||(t.preventDefault(),window.addEventListener("mousemove",F),window.addEventListener("touchmove",F),window.addEventListener("mouseup",B),window.addEventListener("touchend",B),d.value=null,h.value=null,u.value=!0,F(t))}function B(e){e.stopPropagation(),window.removeEventListener("mousemove",F),window.removeEventListener("touchmove",F),window.removeEventListener("mouseup",B),window.removeEventListener("touchend",B),u.value=!1,null!==h.value&&A(h.value)&&n("change",h.value)}(0,i.wB)(()=>e.modelValue,e=>{c.value=e}),(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":null==e.modelValue,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:U,onTouchstart:U,onWheel:C,ref:a},[(0,i.Lk)("div",{class:"v-time-picker-clock__inner",ref:l},[(0,i.Lk)("div",{class:(0,r.C4)([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":R(e.modelValue)},f.value]),style:(0,r.Tr)([{transform:`rotate(${e.rotate+b.value*(S.value-e.min)}deg) scaleY(${L(S.value)})`},m.value])},null),w.value.map(t=>{const n=t===S.value;return(0,i.Lk)("div",{class:(0,r.C4)([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":n,"v-time-picker-clock__item--disabled":e.disabled||!A(t)},n&&v.value]),style:(0,r.Tr)([D(t),n&&g.value])},[(0,i.Lk)("span",null,[e.format(t)])])})])]))}}),fd=(0,u.j)({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),md=(0,w.RW)()({name:"VTimePickerControls",props:fd(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:s}=(0,S.Ym)();return(0,E.C)(()=>{let t=e.hour;return e.ampm&&(t=t?(t-1)%12+1:12),(0,i.Lk)("div",{class:"v-time-picker-controls"},[(0,i.Lk)("div",{class:(0,r.C4)({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[(0,i.bF)(Mt,{active:"hour"===e.viewMode,color:"hour"===e.viewMode?e.color:void 0,disabled:e.disabled,variant:"tonal",class:(0,r.C4)({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:null==e.hour?"--":dd(`${t}`),onClick:()=>n("update:viewMode","hour")},null),(0,i.Lk)("span",{class:(0,r.C4)(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[(0,i.eW)(":")]),(0,i.bF)(Mt,{active:"minute"===e.viewMode,color:"minute"===e.viewMode?e.color:void 0,class:(0,r.C4)({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":"minute"===e.viewMode,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:null==e.minute?"--":dd(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&(0,i.Lk)("span",{class:(0,r.C4)(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[(0,i.eW)(":")]),e.useSeconds&&(0,i.bF)(Mt,{key:"secondsVal",active:"second"===e.viewMode,color:"second"===e.viewMode?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:(0,r.C4)({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":"second"===e.viewMode,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:null==e.second?"--":dd(e.second)},null),e.ampm&&(0,i.Lk)("div",{class:"v-time-picker-controls__ampm"},[(0,i.bF)(Mt,{active:"am"===e.period,color:"am"===e.period?e.color:void 0,class:(0,r.C4)({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":"am"===e.period}),disabled:e.disabled,text:s("$vuetify.timePicker.am"),variant:e.disabled&&"am"===e.period?"elevated":"tonal",onClick:()=>"am"!==e.period?n("update:period","am"):null},null),(0,i.bF)(Mt,{active:"pm"===e.period,color:"pm"===e.period?e.color:void 0,class:(0,r.C4)({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":"pm"===e.period}),disabled:e.disabled,text:s("$vuetify.timePicker.pm"),variant:e.disabled&&"pm"===e.period?"elevated":"tonal",onClick:()=>"pm"!==e.period?n("update:period","pm"):null},null)])])])}),{}}}),vd=(0,o.Sd)(24),gd=(0,o.Sd)(12),yd=gd.map(e=>e+12),_d=(0,o.Sd)(60),bd=(0,u.j)({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...(0,o.cJ)(Ja({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),xd=(0,w.RW)()({name:"VTimePicker",props:bd(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const{t:a}=(0,S.Ym)(),l=(0,s.KR)(null),c=(0,s.KR)(null),u=(0,s.KR)(null),d=(0,s.KR)(null),h=(0,s.KR)(null),p=(0,s.KR)(null),f=(0,s.KR)("am"),m=(0,Te.q)(e,"viewMode","hour"),v=(0,s.KR)(null),g=(0,s.KR)(null),y=(0,i.EW)(()=>{let t;if(t=e.allowedHours instanceof Array?t=>e.allowedHours.includes(t):e.allowedHours,!e.min&&!e.max)return t;const n=e.min?Number(e.min.split(":")[0]):0,i=e.max?Number(e.max.split(":")[0]):23;return e=>e>=Number(n)&&e<=Number(i)&&(!t||t(e))}),_=(0,i.EW)(()=>{let t;const n=!y.value||null===l.value||y.value(l.value);if(t=e.allowedMinutes instanceof Array?t=>e.allowedMinutes.includes(t):e.allowedMinutes,!e.min&&!e.max)return n?t:()=>!1;const[i,r]=e.min?e.min.split(":").map(Number):[0,0],[a,s]=e.max?e.max.split(":").map(Number):[23,59],o=60*i+Number(r),c=60*a+Number(s);return e=>{const i=60*l.value+e;return i>=o&&i<=c&&n&&(!t||t(e))}}),b=(0,i.EW)(()=>{let t;const n=!y.value||null===l.value||y.value(l.value),i=n&&(!_.value||null===c.value||_.value(c.value));if(t=e.allowedSeconds instanceof Array?t=>e.allowedSeconds.includes(t):e.allowedSeconds,!e.min&&!e.max)return i?t:()=>!1;const[r,a,s]=e.min?e.min.split(":").map(Number):[0,0,0],[o,u,d]=e.max?e.max.split(":").map(Number):[23,59,59],h=3600*r+60*a+Number(s||0),p=3600*o+60*u+Number(d||0);return e=>{const n=3600*l.value+60*c.value+e;return n>=h&&n<=p&&i&&(!t||t(e))}}),x=(0,i.EW)(()=>"ampm"===e.format);function M(){return null==l.value||null==c.value||e.useSeconds&&null==u.value?null:`${dd(l.value)}:${dd(c.value)}`+(e.useSeconds?`:${dd(u.value)}`:"")}function w(){const e=M();null!==e&&n("update:modelValue",e)}function T(e){return e?(e-1)%12+1:12}function A(e,t){return e%12+("pm"===t?12:0)}function C(e){if(null==e||""===e)l.value=null,c.value=null,u.value=null;else if(e instanceof Date)l.value=e.getHours(),c.value=e.getMinutes(),u.value=e.getSeconds();else{const[t,,n,,i,r]=e.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);l.value=r?A(parseInt(t,10),r):parseInt(t,10),c.value=parseInt(n,10),u.value=parseInt(i||0,10)}f.value=null==l.value||l.value<12?"am":"pm"}function R(e,t){const n="hour"===e?y.value:"minute"===e?_.value:b.value;if(!n)return t;const i="minute"===e||"second"===e?_d:x.value?t<12?gd:yd:vd,r=i.find(e=>n((e+t)%i.length+i[0]));return((r||0)+t)%i.length+i[0]}function L(e){if(f.value=e,null!=l.value){const e=l.value+("am"===f.value?-12:12);l.value=R("hour",e)}return n("update:period",e),w(),!0}function P(e){"hour"===m.value?l.value=x.value?A(e,f.value):e:"minute"===m.value?c.value=e:u.value=e}function I(t){switch(m.value||"hour"){case"hour":n("update:hour",t);break;case"minute":n("update:minute",t);break;case"second":n("update:second",t);break;default:break}const i=null!==l.value&&null!==c.value&&(!e.useSeconds||null!==u.value);if("hour"===m.value?m.value="minute":e.useSeconds&&"minute"===m.value&&(m.value="second"),l.value===d.value&&c.value===h.value&&(!e.useSeconds||u.value===p.value))return;const r=M();null!==r&&(d.value=l.value,h.value=c.value,e.useSeconds&&(p.value=u.value),i&&w())}(0,i.wB)(()=>e.modelValue,e=>C(e)),(0,i.sV)(()=>{C(e.modelValue)}),(0,E.C)(()=>{const t=Qa.filterProps(e),n=md.filterProps(e),s=pd.filterProps((0,o.cJ)(e,["format","modelValue","min","max"]));return(0,i.bF)(Qa,(0,i.v6)(t,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>r.title?.()??(0,i.Lk)("div",{class:"v-time-picker__title"},[a(e.title)]),header:()=>(0,i.bF)(md,(0,i.v6)(n,{ampm:x.value,hour:l.value,minute:c.value,period:f.value,second:u.value,viewMode:m.value,"onUpdate:period":e=>L(e),"onUpdate:viewMode":e=>m.value=e,ref:v}),null),default:()=>(0,i.bF)(pd,(0,i.v6)(s,{allowedValues:"hour"===m.value?y.value:"minute"===m.value?_.value:b.value,double:"hour"===m.value&&!x.value,format:"hour"===m.value?x.value?T:e=>e:e=>dd(e,2),max:"hour"===m.value?x.value&&"am"===f.value?11:23:59,min:"hour"===m.value&&x.value&&"pm"===f.value?12:0,size:20,step:"hour"===m.value?1:5,modelValue:"hour"===m.value?l.value:"minute"===m.value?c.value:u.value,onChange:I,onInput:P,ref:g}),null),actions:r.actions})})}}),Sd=(0,u.j)({...(0,a.u)(),...Ue({variant:"text"})},"VToolbarItems"),Md=(0,w.RW)()({name:"VToolbarItems",props:Sd(),setup(e,t){let{slots:n}=t;return(0,ae.Uh)({VBtn:{color:(0,s.lW)(()=>e.color),height:"inherit",variant:(0,s.lW)(()=>e.variant)}}),(0,E.C)(()=>(0,i.Lk)("div",{class:(0,r.C4)(["v-toolbar-items",e.class]),style:(0,r.Tr)(e.style)},[n.default?.()])),{}}});var wd=n(9283);const Ed=(0,u.j)({...(0,o.cJ)(kn({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),Td=(0,w.RW)()({name:"VTreeviewGroup",props:Ed(),setup(e,t){let{slots:n}=t;const r=(0,s.KR)(),a=(0,i.EW)(()=>r.value?.isOpen?e.collapseIcon:e.expandIcon),o=(0,i.EW)(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:a.value}}));return(0,E.C)(()=>{const t=Fn.filterProps(e);return(0,i.bF)(Fn,(0,i.v6)(t,{ref:r,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?e=>(0,i.Lk)(i.FK,null,[(0,i.bF)(oe,{defaults:o.value},{default:()=>[n.activator?.(e)]})]):void 0})}),{}}}),Ad=Symbol.for("vuetify:v-treeview"),Cd=(0,u.j)({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:Je.TX,...zn({slim:!0})},"VTreeviewItem"),Rd=(0,w.RW)()({name:"VTreeviewItem",props:Cd(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const o=(0,i.WQ)(Ad,{visibleIds:(0,s.KR)()}).visibleIds,l=(0,s.KR)(),c=(0,i.EW)(()=>l.value?.root.activatable.value&&l.value?.isGroupActivator),u=(0,i.EW)(()=>l.value?.link.isClickable.value||null!=e.value&&!!l.value?.list),d=(0,i.EW)(()=>!e.disabled&&!1!==e.link&&(e.link||u.value||c.value)),h=(0,i.EW)(()=>o.value&&!o.value.has((0,s.ux)(l.value?.id)));function p(e){d.value&&c.value&&l.value?.activate(!l.value?.isActivated,e)}function f(e){e.preventDefault(),e.stopPropagation(),a("toggleExpand",e)}return(0,E.C)(()=>{const t=Wn.filterProps(e),a=n.prepend||e.toggleIcon||e.indentLines;return(0,i.bF)(Wn,(0,i.v6)({ref:l},t,{active:l.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":c.value,"v-treeview-item--filtered":h.value},e.class],ripple:!1,onClick:p}),{...n,prepend:a?t=>(0,i.Lk)(i.FK,null,[e.indentLines&&e.indentLines.length>0?(0,i.Lk)("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(e=>(0,i.Lk)("div",{class:(0,r.C4)(`v-treeview-indent-line v-treeview-indent-line--${e}`)},null))]):"",!e.hideActions&&(0,i.bF)(mc,{start:!0},{default:()=>[e.toggleIcon?(0,i.bF)(Mt,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:f},{loader:()=>(0,i.bF)(st,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):(0,i.Lk)("div",{class:"v-treeview-item__level"},null)]}),n.prepend?.(t)]):void 0})}),(0,ai.O)({},l)}});function Ld(e){let{depth:t,isLast:n,isLastGroup:i,leafLinks:r,separateRoots:a,parentIndentLines:s,variant:o}=e;if(!s||!t)return{leaf:void 0,node:void 0,children:s};if("simple"===o)return{leaf:[...s,"line"],node:[...s,"line"],children:[...s,"line"]};const l=n&&(!i||a||t>1);return{leaf:[...s,l?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...s,l?"last-leaf":"leaf"],children:[...s,l?"none":"line"]}}const Pd=(0,u.j)({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:Je.TX,default:"$checkboxIndeterminate"},falseIcon:Je.TX,trueIcon:Je.TX,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...(0,o.Up)(Cd(),["hideActions"]),...Oe()},"VTreeviewChildren"),Id=(0,w.RW)()({name:"VTreeviewChildren",props:Pd(),setup(e,t){let{slots:n}=t;const r=(0,s.Kh)(new Set),a=(0,s.KR)([]),l=(0,i.EW)(()=>!e.disabled&&(null!=e.openOnClick?e.openOnClick:e.selectable&&!e.activatable));async function c(t){try{if(!e.items?.length||!e.loadChildren)return;0===t?.children?.length&&(r.add(t.value),await e.loadChildren(t.raw))}finally{r.delete(t.value)}}function u(t,n){e.selectable&&t(n)}return()=>n.default?.()??e.items?.map((t,d,h)=>{const{children:p,props:f}=t,m=r.has(t.value),v=!!h.at(d+1)?.children,g=e.path?.length??0,y=h.length-1===d,_={index:d,depth:g,isFirst:0===d,isLast:y,path:[...e.path,d],hideAction:e.hideActions},b=Ld({depth:g,isLast:y,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),x={prepend:r=>(0,i.Lk)(i.FK,null,[e.selectable&&(!p||p&&!["leaf","single-leaf"].includes(e.selectStrategy))&&(0,i.Lk)("div",null,[(0,i.bF)(Xt,{key:t.value,modelValue:r.isSelected,disabled:e.disabled,loading:m,color:e.selectedColor,density:e.density,indeterminate:r.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":e=>u(r.select,e),onClick:e=>e.stopPropagation(),onKeydown:e=>{["Enter","Space"].includes(e.key)&&(e.stopPropagation(),u(r.select,r.isSelected))}},null)]),n.prepend?.({...r,..._,item:t.raw,internalItem:t})]),append:n.append?e=>n.append?.({...e,..._,item:t.raw,internalItem:t}):void 0,title:n.title?e=>n.title?.({...e,item:t.raw,internalItem:t}):void 0,subtitle:n.subtitle?e=>n.subtitle?.({...e,item:t.raw,internalItem:t}):void 0},S=Td.filterProps(f),M=Id.filterProps({...e,..._});return p?(0,i.bF)(Td,(0,i.v6)(S,{value:e.returnObject?t.raw:S?.value,rawId:S?.value}),{activator:n=>{let{props:r}=n;const s={...f,...r,value:f?.value,onToggleExpand:[()=>c(t),r.onClick],onClick:l.value?[()=>c(t),r.onClick]:()=>u(a.value[d]?.select,!a.value[d]?.isSelected)};return(0,i.bF)(Rd,(0,i.v6)({ref:e=>a.value[d]=e},s,{hideActions:e.hideActions,indentLines:b.node,value:e.returnObject?t.raw:f.value,loading:m}),x)},default:()=>(0,i.bF)(Id,(0,i.v6)(M,{items:p,indentLinesVariant:e.indentLinesVariant,parentIndentLines:b.children,isLastGroup:v,returnObject:e.returnObject}),n)}):(0,o.RG)(n.item,{props:f,item:t.raw,internalItem:t},()=>"divider"===t.type?(0,o.RG)(n.divider,{props:t.raw},()=>(0,i.bF)(hn,t.props,null)):"subheader"===t.type?(0,o.RG)(n.subheader,{props:t.raw},()=>(0,i.bF)(Gn,t.props,null)):(0,i.bF)(Rd,(0,i.v6)(f,{hideActions:e.hideActions,indentLines:b.leaf,value:e.returnObject?(0,s.ux)(t.raw):f.value}),x))})}});function Dd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const n of e)t.push(n),n.children&&Dd(n.children,t);return t}const Od=(0,u.j)({openAll:Boolean,indentLines:[Boolean,String],search:String,...Qi({filterKeys:["title"]}),...(0,o.cJ)(Pd(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...(0,o.cJ)(ni({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),Nd=(0,w.RW)()({name:"VTreeview",props:Od(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:r}=t;const{items:a}=ti(e),o=(0,s.lW)(()=>e.activeColor),l=(0,s.lW)(()=>e.baseColor),c=(0,s.lW)(()=>e.color),u=(0,Te.q)(e,"activated"),d=(0,Te.q)(e,"selected"),h=(0,i.EW)({get:()=>e.modelValue??d.value,set(e){d.value=e,r("update:modelValue",e)}}),p=(0,s.KR)(),f=(0,i.EW)(()=>e.openAll?b(a.value):e.opened),m=(0,i.EW)(()=>Dd(a.value)),v=(0,s.lW)(()=>e.search),{filteredItems:g}=tr(e,m,v),y=(0,i.EW)(()=>{if(!v.value)return null;const t=p.value?.getPath;return t?new Set(g.value.flatMap(n=>{const i=e.returnObject?n.raw:n.props.value;return[...t(i),..._(i)].map(s.ux)})):null});function _(e){const t=[],n=(p.value?.children.get(e)??[]).slice();while(n.length){const e=n.shift();e&&(t.push(e),n.push(...(p.value?.children.get(e)??[]).slice()))}return t}function b(t){let n=[];for(const i of t)i.children&&(n.push(e.returnObject?(0,s.ux)(i.raw):i.value),i.children&&(n=n.concat(b(i.children))));return n}return(0,i.Gt)(Ad,{visibleIds:y}),(0,ae.Uh)({VTreeviewGroup:{activeColor:o,baseColor:l,color:c,collapseIcon:(0,s.lW)(()=>e.collapseIcon),expandIcon:(0,s.lW)(()=>e.expandIcon)},VTreeviewItem:{activeClass:(0,s.lW)(()=>e.activeClass),activeColor:o,baseColor:l,color:c,density:(0,s.lW)(()=>e.density),disabled:(0,s.lW)(()=>e.disabled),lines:(0,s.lW)(()=>e.lines),variant:(0,s.lW)(()=>e.variant)}}),(0,E.C)(()=>{const t=ii.filterProps(e),r=Id.filterProps(e),s="boolean"===typeof e.indentLines?"default":e.indentLines;return(0,i.bF)(ii,(0,i.v6)({ref:p},t,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:f.value,activated:u.value,"onUpdate:activated":e=>u.value=e,selected:h.value,"onUpdate:selected":e=>h.value=e}),{default:()=>[(0,i.bF)(Id,(0,i.v6)(r,{density:e.density,returnObject:e.returnObject,items:a.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:s}),n)]})}),{}}}),kd=(0,w.RW)()({name:"VValidation",props:Ci(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Ri(e,"validation");return()=>n.default?.(i)}})},1916:function(e,t,n){var i=n(6849),r="__lodash_hash_undefined__";function a(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?r:t,this}e.exports=a},1976:function(e,t,n){var i=n(4823),r=n(3223),a=n(9692),s=n(2530),o=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,d=c.toString,h=u.hasOwnProperty,p=RegExp("^"+d.call(h).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(e){if(!a(e)||r(e))return!1;var t=i(e)?p:l;return t.test(s(e))}e.exports=f},2046:function(e,t,n){"use strict";n.d(t,{bI:function(){return g},RR:function(){return _},Q1:function(){return x},Ym:function(){return b},IA:function(){return E}});var i=n(6768),r=n(144),a=n(8432),s=n(7443),o=n(6455),l={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}};const c="$vuetify.",u=(e,t)=>e.replace(/\{(\d+)\}/g,(e,n)=>String(t[Number(n)])),d=(e,t,n)=>function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];if(!i.startsWith(c))return u(i,a);const d=i.replace(c,""),h=e.value&&n.value[e.value],p=t.value&&n.value[t.value];let f=(0,s.no)(h,d,null);return f||((0,o.OP)(`Translation key "${i}" not found in "${e.value}", trying fallback locale`),f=(0,s.no)(p,d,null)),f||((0,o.yA)(`Translation key "${i}" not found in fallback`),f=i),"string"!==typeof f&&((0,o.yA)(`Translation key "${i}" has a non-string value`),f=i),u(f,a)};function h(e,t){return(n,i)=>{const r=new Intl.NumberFormat([e.value,t.value],i);return r.format(n)}}function p(e,t){const n=h(e,t);return n(.1).includes(",")?",":"."}function f(e,t,n){const r=(0,a.q)(e,t,e[t]??n.value);return r.value=e[t]??n.value,(0,i.wB)(n,i=>{null==e[t]&&(r.value=n.value)}),r}function m(e){return t=>{const n=f(t,"locale",e.current),i=f(t,"fallback",e.fallback),a=f(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:i,messages:a,decimalSeparator:(0,r.lW)(()=>p(n,i)),t:d(n,i,a),n:h(n,i),provide:m({current:n,fallback:i,messages:a})}}}function v(e){const t=(0,r.IJ)(e?.locale??"en"),n=(0,r.IJ)(e?.fallback??"en"),i=(0,r.KR)({en:l,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:i,decimalSeparator:(0,r.lW)(()=>e?.decimalSeparator??p(t,n)),t:d(t,n,i),n:h(t,n),provide:m({current:t,fallback:n,messages:i})}}const g=Symbol.for("vuetify:locale");function y(e){return null!=e.name}function _(e){const t=e?.adapter&&y(e?.adapter)?e?.adapter:v(e),n=M(t,e);return{...t,...n}}function b(){const e=(0,i.WQ)(g);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function x(e){const t=(0,i.WQ)(g);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),r=w(n,t.rtl,e),a={...n,...r};return(0,i.Gt)(g,a),a}Symbol.for("vuetify:rtl");function S(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function M(e,t){const n=(0,r.KR)(t?.rtl??S()),a=(0,i.EW)(()=>n.value[e.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:(0,r.lW)(()=>"v-locale--is-"+(a.value?"rtl":"ltr"))}}function w(e,t,n){const a=(0,i.EW)(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:a,rtl:t,rtlClasses:(0,r.lW)(()=>"v-locale--is-"+(a.value?"rtl":"ltr"))}}function E(){const e=(0,i.WQ)(g);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}},2106:function(e,t,n){"use strict";var i=n(283),r=n(4913);e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),r.f(e,t,n)}},2140:function(e,t,n){"use strict";var i=n(8227),r=i("toStringTag"),a={};a[r]="z",e.exports="[object z]"===String(a)},2195:function(e,t,n){"use strict";var i=n(9504),r=i({}.toString),a=i("".slice);e.exports=function(e){return a(r(e),8,-1)}},2211:function(e,t,n){"use strict";var i=n(9039);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},2225:function(e,t,n){"use strict";n.d(t,{DP:function(){return E},NX:function(){return w},Qc:function(){return d},an:function(){return M},yx:function(){return h}});n(4114),n(8111),n(531),n(1701),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(6768),r=n(144),a=n(5241),s=n(6455),o=n(3398),l=n(8306),c=n(7443),u=n(8392);const d=Symbol.for("vuetify:theme"),h=(0,u.j)({theme:String},"theme");function p(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();const t=p();if(!e)return{...t,isDisabled:!0};const n={};for(const[i,r]of Object.entries(e.themes??{})){const e=r.dark||"dark"===i?t.themes?.dark:t.themes?.light;n[i]=(0,c.D9)(e,r)}return(0,c.D9)(t,{...e,themes:n})}function m(e,t,n,i){e.push(`${b(t,i)} {\n`,...n.map(e=>`  ${e};\n`),"}\n")}function v(e,t){const n=e.dark?2:1,i=e.dark?1:2,r=[];for(const[s,o]of Object.entries(e.colors)){const e=(0,a.H0)(o);r.push(`--${t}theme-${s}: ${e.r},${e.g},${e.b}`),s.startsWith("on-")||r.push(`--${t}theme-${s}-overlay-multiplier: ${(0,a.MA)(o)>.18?n:i}`)}for(const[s,o]of Object.entries(e.variables)){const e="string"===typeof o&&o.startsWith("#")?(0,a.H0)(o):void 0,n=e?`${e.r}, ${e.g}, ${e.b}`:void 0;r.push(`--${t}${s}: ${n??o}`)}return r}function g(e,t,n){const i={};if(n)for(const r of["lighten","darken"]){const s="lighten"===r?a.a:a.e$;for(const o of(0,c.Sd)(n[r],1))i[`${e}-${r}-${o}`]=(0,a.ex)(s((0,a.H0)(t),o))}return i}function y(e,t){if(!t)return{};let n={};for(const i of t.colors){const r=e[i];r&&(n={...n,...g(i,r,t)})}return n}function _(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const i=`on-${n}`,r=(0,a.H0)(e[n]);t[i]=(0,a.Ot)(r)}return t}function b(e,t){if(!t)return e;const n=`:where(${t})`;return":root"===e?n:`${n} ${e}`}function x(e,t,n){const i=S(e,t);i&&(i.innerHTML=n)}function S(e,t){if(!l.ZK)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function M(e){const t=f(e),n=(0,r.IJ)(t.defaultTheme),a=(0,r.KR)(t.themes),o=(0,r.IJ)("light"),c=(0,i.EW)({get(){return"system"===n.value?o.value:n.value},set(e){n.value=e}}),u=(0,i.EW)(()=>{const e={};for(const[n,i]of Object.entries(a.value)){const r={...i.colors,...y(i.colors,t.variations)};e[n]={...i,colors:{...r,..._(r)}}}return e}),d=(0,r.lW)(()=>u.value[c.value]),h=(0,r.lW)(()=>"system"===n.value),p=(0,i.EW)(()=>{const e=[],n=t.unimportant?"":" !important",i=t.scoped?t.prefix:"";d.value?.dark&&m(e,":root",["color-scheme: dark"],t.scope),m(e,":root",v(d.value,t.prefix),t.scope);for(const[r,a]of Object.entries(u.value))m(e,`.${t.prefix}theme--${r}`,["color-scheme: "+(a.dark?"dark":"normal"),...v(a,t.prefix)],t.scope);if(t.utilities){const r=[],a=[],s=new Set(Object.values(u.value).flatMap(e=>Object.keys(e.colors)));for(const e of s)e.startsWith("on-")?m(a,`.${e}`,[`color: rgb(var(--${t.prefix}theme-${e}))${n}`],t.scope):(m(r,`.${i}bg-${e}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${e}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${e}))${n}`,`color: rgb(var(--${t.prefix}theme-on-${e}))${n}`],t.scope),m(a,`.${i}text-${e}`,[`color: rgb(var(--${t.prefix}theme-${e}))${n}`],t.scope),m(a,`.${i}border-${e}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${e})`],t.scope));e.push(...r,...a)}return e.map((e,t)=>0===t?e:`    ${e}`).join("")}),g=(0,r.lW)(()=>t.isDisabled?void 0:`${t.prefix}theme--${c.value}`),b=(0,r.lW)(()=>Object.keys(u.value));if(l.yS){const A=window.matchMedia("(prefers-color-scheme: dark)");function C(){o.value=A.matches?"dark":"light"}C(),A.addEventListener("change",C,{passive:!0}),(0,r.o5)()&&(0,r.jr)(()=>{A.removeEventListener("change",C)})}function S(e){if(t.isDisabled)return;const n=e._context.provides.usehead;if(n){function a(){return{style:[{textContent:p.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}}if(n.push){const s=n.push(a);l.ZK&&(0,i.wB)(p,()=>{s.patch(a)})}else l.ZK?(n.addHeadObjs((0,r.lW)(a)),(0,i.nT)(()=>n.updateDOM())):n.addHeadObjs(a())}else{function o(){x(t.stylesheetId,t.cspNonce,p.value)}l.ZK?(0,i.wB)(p,o,{immediate:!0}):o()}}function M(e){"system"===e||b.value.includes(e)?c.value=e:(0,s.OP)(`Theme "${e}" not found on the Vuetify theme instance`)}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.value;const t=e.indexOf(c.value),n=-1===t?0:(t+1)%e.length;M(e[n])}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["light","dark"];w(e)}const T=new Proxy(c,{get(e,t){return Reflect.get(e,t)},set(e,t,n){return"value"===t&&(0,s.CI)(`theme.global.name.value = ${n}`,`theme.change('${n}')`),Reflect.set(e,t,n)}});return{install:S,change:M,cycle:w,toggle:E,isDisabled:t.isDisabled,isSystem:h,name:c,themes:a,current:d,computedThemes:u,prefix:t.prefix,themeClasses:g,styles:p,global:{name:T,current:d}}}function w(e){(0,o.n)("provideTheme");const t=(0,i.WQ)(d,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=(0,r.lW)(()=>e.theme??t.name.value),a=(0,r.lW)(()=>t.themes.value[n.value]),s=(0,r.lW)(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),l={...t,name:n,current:a,themeClasses:s};return(0,i.Gt)(d,l),l}function E(){(0,o.n)("useTheme");const e=(0,i.WQ)(d,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}},2230:function(e,t,n){"use strict";n.d(t,{q:function(){return v}});n(4114);var i=n(8776);const r={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},a={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},s={x:0,y:0},o={camera:new i.kn4,gizmos:new i.kn4},l={type:"change"},c={type:"start"},u={type:"end"},d=new i.tBo,h=new i.Pq0,p=new i.kn4,f=new i.kn4,m=new i.Pq0;class v extends i.Qev{constructor(e,t,n=null){super(),this.camera=null,this.domElement=t,this.scene=n,this.target=new i.Pq0,this._currentTarget=new i.Pq0,this.radiusFactor=.67,this.mouseActions=[],this._mouseOp=null,this._v2_1=new i.I9Y,this._v3_1=new i.Pq0,this._v3_2=new i.Pq0,this._m4_1=new i.kn4,this._m4_2=new i.kn4,this._quat=new i.PTz,this._translationMatrix=new i.kn4,this._rotationMatrix=new i.kn4,this._scaleMatrix=new i.kn4,this._rotationAxis=new i.Pq0,this._cameraMatrixState=new i.kn4,this._cameraProjectionState=new i.kn4,this._fovState=1,this._upState=new i.Pq0,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new i.kn4,this._up0=new i.Pq0,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new i.kn4,this._gizmoMatrixState0=new i.kn4,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=a.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._downStart=0,this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new i.Pq0,this._startCursorPosition=new i.Pq0,this._grid=null,this._gridPosition=new i.Pq0,this._gizmos=new i.YJl,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new i.Pq0,this._cursorPosCurr=new i.Pq0,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.rotateSpeed=1,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.enableGizmos=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this._tbRadius=1,this._state=r.IDLE,this.setCamera(e),null!=this.scene&&this.scene.add(this._gizmos),this.domElement.style.touchAction="none",this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this._onContextMenu=y.bind(this),this._onWheel=M.bind(this),this._onPointerUp=S.bind(this),this._onPointerMove=x.bind(this),this._onPointerDown=b.bind(this),this._onPointerCancel=_.bind(this),this._onWindowResize=g.bind(this),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onWheel),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),window.addEventListener("resize",this._onWindowResize)}onSinglePanStart(e,t){if(this.enabled)switch(this.dispatchEvent(c),this.setCenter(e.clientX,e.clientY),t){case"PAN":if(!this.enablePan)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(l)),this.updateTbState(r.PAN,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement)),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(l));break;case"ROTATE":if(!this.enableRotate)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.updateTbState(r.ROTATE,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,s.x,s.y,this.domElement,this._tbRadius)),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr),this.dispatchEvent(l);break;case"FOV":if(!this.camera.isPerspectiveCamera||!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(l)),this.updateTbState(r.FOV,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition);break;case"ZOOM":if(!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(l)),this.updateTbState(r.SCALE,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition);break}}onSinglePanMove(e,t){if(this.enabled){const n=t!=this._state;switch(this.setCenter(e.clientX,e.clientY),t){case r.PAN:this.enablePan&&(n?(this.dispatchEvent(u),this.dispatchEvent(c),this.updateTbState(t,!0),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement)),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)):(this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))));break;case r.ROTATE:if(this.enableRotate)if(n)this.dispatchEvent(u),this.dispatchEvent(c),this.updateTbState(t,!0),this._startCursorPosition.copy(this.unprojectOnTbSurface(this.camera,s.x,s.y,this.domElement,this._tbRadius)),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0);else{this._currentCursorPosition.copy(this.unprojectOnTbSurface(this.camera,s.x,s.y,this.domElement,this._tbRadius));const e=this._startCursorPosition.distanceTo(this._currentCursorPosition),t=this._startCursorPosition.angleTo(this._currentCursorPosition),n=Math.max(e/this._tbRadius,t)*this.rotateSpeed;this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),n)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=n,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case r.SCALE:if(this.enableZoom)if(n)this.dispatchEvent(u),this.dispatchEvent(c),this.updateTbState(t,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{const e=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y);const t=this._currentCursorPosition.y-this._startCursorPosition.y;let n=1;t<0?n=1/Math.pow(this.scaleFactor,-t*e):t>0&&(n=Math.pow(this.scaleFactor,t*e)),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this.applyTransformMatrix(this.scale(n,this._v3_1))}break;case r.FOV:if(this.enableZoom&&this.camera.isPerspectiveCamera)if(n)this.dispatchEvent(u),this.dispatchEvent(c),this.updateTbState(t,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{const e=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y);const t=this._currentCursorPosition.y-this._startCursorPosition.y;let n=1;t<0?n=1/Math.pow(this.scaleFactor,-t*e):t>0&&(n=Math.pow(this.scaleFactor,t*e)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const r=this._v3_1.distanceTo(this._gizmos.position);let a=r/n;a=i.cj9.clamp(a,this.minDistance,this.maxDistance);const o=r*Math.tan(i.cj9.DEG2RAD*this._fovState*.5);let l=i.cj9.RAD2DEG*(2*Math.atan(o/a));l=i.cj9.clamp(l,this.minFov,this.maxFov);const c=o/Math.tan(i.cj9.DEG2RAD*(l/2));n=r/c,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(l),this.applyTransformMatrix(this.scale(n,this._v3_2,!1)),h.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(c/r),this._m4_1.makeTranslation(h.x,h.y,h.z)}break}this.dispatchEvent(l)}}onSinglePanEnd(){if(this._state==r.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations){const e=performance.now()-this._timeCurrent;if(e<120){const e=Math.abs((this._wPrev+this._wCurr)/2),t=this;this._animationId=window.requestAnimationFrame(function(n){t.updateTbState(r.ANIMATION_ROTATE,!0);const i=t.calculateRotationAxis(t._cursorPosPrev,t._cursorPosCurr);t.onRotationAnim(n,i,Math.min(e,t.wMax))})}else this.updateTbState(r.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l)}else this.updateTbState(r.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l)}else this._state!=r.PAN&&this._state!=r.IDLE||(this.updateTbState(r.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(l));this.dispatchEvent(u)}onDoubleTap(e){if(this.enabled&&this.enablePan&&null!=this.scene){this.dispatchEvent(c),this.setCenter(e.clientX,e.clientY);const t=this.unprojectOnObj(this.getCursorNDC(s.x,s.y,this.domElement),this.camera);if(null!=t&&this.enableAnimations){const e=this;-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(n){e.updateTbState(r.ANIMATION_FOCUS,!0),e.onFocusAnim(n,t,e._cameraMatrixState,e._gizmoMatrixState)})}else null==t||this.enableAnimations||(this.updateTbState(r.FOCUS,!0),this.focus(t,this.scaleFactor),this.updateTbState(r.IDLE,!1),this.dispatchEvent(l))}this.dispatchEvent(u)}onDoublePanStart(){this.enabled&&this.enablePan&&(this.dispatchEvent(c),this.updateTbState(r.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._startCursorPosition.copy(this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement,!0)),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1))}onDoublePanMove(){this.enabled&&this.enablePan&&(this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=r.PAN&&(this.updateTbState(r.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition)),this._currentCursorPosition.copy(this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement,!0)),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(l))}onDoublePanEnd(){this.updateTbState(r.IDLE,!1),this.dispatchEvent(u)}onRotateStart(){this.enabled&&this.enableRotate&&(this.dispatchEvent(c),this.updateTbState(r.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,this.camera.getWorldDirection(this._rotationAxis),this.enablePan||this.enableZoom||this.activateGizmos(!0))}onRotateMove(){if(this.enabled&&this.enableRotate){let e;this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=r.ZROTATE&&(this.updateTbState(r.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),e=this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):e=(new i.Pq0).setFromMatrixPosition(this._gizmoMatrixState);const t=i.cj9.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);this.applyTransformMatrix(this.zRotate(e,t)),this.dispatchEvent(l)}}onRotateEnd(){this.updateTbState(r.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(u)}onPinchStart(){this.enabled&&this.enableZoom&&(this.dispatchEvent(c),this.updateTbState(r.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}onPinchMove(){if(this.enabled&&this.enableZoom){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const e=12;this._state!=r.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(r.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),e*this._devPxRatio);const t=this._currentFingerDistance/this._startFingerDistance;let n;this.enablePan?this.camera.isOrthographicCamera?n=this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(n=this.unprojectOnTbPlane(this.camera,s.x,s.y,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):n=this._gizmos.position,this.applyTransformMatrix(this.scale(t,n)),this.dispatchEvent(l)}}onPinchEnd(){this.updateTbState(r.IDLE,!1),this.dispatchEvent(u)}onTriplePanStart(){if(this.enabled&&this.enableZoom){this.dispatchEvent(c),this.updateTbState(r.SCALE,!0);let e=0,t=0;const n=this._touchCurrent.length;for(let i=0;i<n;i++)e+=this._touchCurrent[i].clientX,t+=this._touchCurrent[i].clientY;this.setCenter(e/n,t/n),this._startCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}}onTriplePanMove(){if(this.enabled&&this.enableZoom){let e=0,t=0;const n=this._touchCurrent.length;for(let i=0;i<n;i++)e+=this._touchCurrent[i].clientX,t+=this._touchCurrent[i].clientY;this.setCenter(e/n,t/n);const r=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(s.x,s.y,this.domElement).y);const a=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;a<0?o=1/Math.pow(this.scaleFactor,-a*r):a>0&&(o=Math.pow(this.scaleFactor,a*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const c=this._v3_1.distanceTo(this._gizmos.position);let u=c/o;u=i.cj9.clamp(u,this.minDistance,this.maxDistance);const d=c*Math.tan(i.cj9.DEG2RAD*this._fovState*.5);let p=i.cj9.RAD2DEG*(2*Math.atan(d/u));p=i.cj9.clamp(p,this.minFov,this.maxFov);const f=d/Math.tan(i.cj9.DEG2RAD*(p/2));o=c/f,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(p),this.applyTransformMatrix(this.scale(o,this._v3_2,!1)),h.copy(this._gizmos.position).sub(this.camera.position).normalize().multiplyScalar(f/c),this._m4_1.makeTranslation(h.x,h.y,h.z),this.dispatchEvent(l)}}onTriplePanEnd(){this.updateTbState(r.IDLE,!1),this.dispatchEvent(u)}setCenter(e,t){s.x=e,s.y=t}initializeMouseActions(){this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}compareMouseAction(e,t){return e.operation==t.operation&&(e.mouse==t.mouse&&e.key==t.key)}setMouseAction(e,t,n=null){const i=["PAN","ROTATE","ZOOM","FOV"],a=[0,1,2,"WHEEL"],s=["CTRL","SHIFT",null];let o;if(!i.includes(e)||!a.includes(t)||!s.includes(n))return!1;if("WHEEL"==t&&"ZOOM"!=e&&"FOV"!=e)return!1;switch(e){case"PAN":o=r.PAN;break;case"ROTATE":o=r.ROTATE;break;case"ZOOM":o=r.SCALE;break;case"FOV":o=r.FOV;break}const l={operation:e,mouse:t,key:n,state:o};for(let r=0;r<this.mouseActions.length;r++)if(this.mouseActions[r].mouse==l.mouse&&this.mouseActions[r].key==l.key)return this.mouseActions.splice(r,1,l),!0;return this.mouseActions.push(l),!0}unsetMouseAction(e,t=null){for(let n=0;n<this.mouseActions.length;n++)if(this.mouseActions[n].mouse==e&&this.mouseActions[n].key==t)return this.mouseActions.splice(n,1),!0;return!1}getOpFromAction(e,t){let n;for(let i=0;i<this.mouseActions.length;i++)if(n=this.mouseActions[i],n.mouse==e&&n.key==t)return n.operation;if(null!=t)for(let i=0;i<this.mouseActions.length;i++)if(n=this.mouseActions[i],n.mouse==e&&null==n.key)return n.operation;return null}getOpStateFromAction(e,t){let n;for(let i=0;i<this.mouseActions.length;i++)if(n=this.mouseActions[i],n.mouse==e&&n.key==t)return n.state;if(null!=t)for(let i=0;i<this.mouseActions.length;i++)if(n=this.mouseActions[i],n.mouse==e&&null==n.key)return n.state;return null}getAngle(e,t){return 180*Math.atan2(t.clientY-e.clientY,t.clientX-e.clientX)/Math.PI}updateTouchEvent(e){for(let t=0;t<this._touchCurrent.length;t++)if(this._touchCurrent[t].pointerId==e.pointerId){this._touchCurrent.splice(t,1,e);break}}applyTransformMatrix(e){if(null!=e.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),this._state!=r.ROTATE&&this._state!=r.ZROTATE&&this._state!=r.ANIMATION_ROTATE||this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),null!=e.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),this._state==r.SCALE||this._state==r.FOCUS||this._state==r.ANIMATION_FOCUS)if(this._tbRadius=this.calculateTbRadius(this.camera),this.adjustNearFar){const e=this.camera.position.distanceTo(this._gizmos.position),t=new i.NRn;t.setFromObject(this._gizmos);const n=new i.iyt;t.getBoundingSphere(n);const r=Math.max(this._nearPos0,n.radius+n.center.length()),a=e-this._initialNear,s=Math.min(r,a);this.camera.near=e-s;const o=Math.min(this._farPos0,-n.radius+n.center.length()),l=e-this._initialFar,c=Math.min(o,l);this.camera.far=e-c,this.camera.updateProjectionMatrix()}else{let e=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,e=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,e=!0),e&&this.camera.updateProjectionMatrix()}}calculateAngularSpeed(e,t,n,i){const r=t-e,a=(i-n)/1e3;return 0==a?0:r/a}calculatePointersDistance(e,t){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))}calculateRotationAxis(e,t){return this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(e,t).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()}calculateTbRadius(e){const t=e.position.distanceTo(this._gizmos.position);if("PerspectiveCamera"==e.type){const n=i.cj9.DEG2RAD*e.fov*.5,r=Math.atan(e.aspect*Math.tan(n));return Math.tan(Math.min(n,r))*t*this.radiusFactor}if("OrthographicCamera"==e.type)return Math.min(e.top,e.right)*this.radiusFactor}focus(e,t,n=1){h.copy(e).sub(this._gizmos.position).multiplyScalar(n),this._translationMatrix.makeTranslation(h.x,h.y,h.z),p.copy(this._gizmoMatrixState),this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),f.copy(this._cameraMatrixState),this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.scale(t,this._gizmos.position)),this._gizmoMatrixState.copy(p),this._cameraMatrixState.copy(f)}drawGrid(){if(null!=this.scene){const e=8947848,t=3;let n,r,a,s;if(this.camera.isOrthographicCamera){const e=this.camera.right-this.camera.left,i=this.camera.bottom-this.camera.top;a=Math.max(e,i),s=a/20,n=a/this.camera.zoom*t,r=n/s*this.camera.zoom}else if(this.camera.isPerspectiveCamera){const e=this.camera.position.distanceTo(this._gizmos.position),o=i.cj9.DEG2RAD*this.camera.fov*.5,l=Math.atan(this.camera.aspect*Math.tan(o));a=Math.tan(Math.max(o,l))*e*2,s=a/20,n=a*t,r=n/s}null==this._grid&&(this._grid=new i.fTw(n,r,e,e),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(.5*Math.PI),this.scene.add(this._grid))}}dispose(){-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),window.removeEventListener("resize",this._onWindowResize),null!==this.scene&&this.scene.remove(this._gizmos),this.disposeGrid()}disposeGrid(){null!=this._grid&&null!=this.scene&&(this.scene.remove(this._grid),this._grid=null)}easeOutCubic(e){return 1-Math.pow(1-e,3)}activateGizmos(e){const t=this._gizmos.children[0],n=this._gizmos.children[1],i=this._gizmos.children[2];e?(t.material.setValues({opacity:1}),n.material.setValues({opacity:1}),i.material.setValues({opacity:1})):(t.material.setValues({opacity:.6}),n.material.setValues({opacity:.6}),i.material.setValues({opacity:.6}))}getCursorNDC(e,t,n){const i=n.getBoundingClientRect();return this._v2_1.setX((e-i.left)/i.width*2-1),this._v2_1.setY((i.bottom-t)/i.height*2-1),this._v2_1.clone()}getCursorPosition(e,t,n){return this._v2_1.copy(this.getCursorNDC(e,t,n)),this._v2_1.x*=.5*(this.camera.right-this.camera.left),this._v2_1.y*=.5*(this.camera.top-this.camera.bottom),this._v2_1.clone()}setCamera(e){e.lookAt(this.target),e.updateMatrix(),"PerspectiveCamera"==e.type&&(this._fov0=e.fov,this._fovState=e.fov),this._cameraMatrixState0.copy(e.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(e.projectionMatrix),this._zoom0=e.zoom,this._zoomState=this._zoom0,this._initialNear=e.near,this._nearPos0=e.position.distanceTo(this.target)-e.near,this._nearPos=this._initialNear,this._initialFar=e.far,this._farPos0=e.position.distanceTo(this.target)-e.far,this._farPos=this._initialFar,this._up0.copy(e.up),this._upState.copy(e.up),this.camera=e,this.camera.updateProjectionMatrix(),this._tbRadius=this.calculateTbRadius(e),this.makeGizmos(this.target,this._tbRadius)}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(l)}setTbRadius(e){this.radiusFactor=e,this._tbRadius=this.calculateTbRadius(this.camera);const t=new i.S20(0,0,this._tbRadius,this._tbRadius),n=t.getPoints(this._curvePts),r=(new i.LoY).setFromPoints(n);for(const i in this._gizmos.children)this._gizmos.children[i].geometry=r;this.dispatchEvent(l)}makeGizmos(e,t){const n=new i.S20(0,0,t,t),r=n.getPoints(this._curvePts),a=(new i.LoY).setFromPoints(r),s=new i.mrM({color:16744576,fog:!1,transparent:!0,opacity:.6}),o=new i.mrM({color:8454016,fog:!1,transparent:!0,opacity:.6}),l=new i.mrM({color:8421631,fog:!1,transparent:!0,opacity:.6}),c=new i.N1A(a,s),u=new i.N1A(a,o),d=new i.N1A(a,l),h=.5*Math.PI;if(c.rotation.x=h,u.rotation.y=h,this._gizmoMatrixState0.identity().setPosition(e),this._gizmoMatrixState.copy(this._gizmoMatrixState0),1!==this.camera.zoom){const t=1/this.camera.zoom;this._scaleMatrix.makeScale(t,t,t),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(e.x,e.y,e.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.traverse(function(e){e.isLine&&(e.geometry.dispose(),e.material.dispose())}),this._gizmos.clear(),this._gizmos.add(c),this._gizmos.add(u),this._gizmos.add(d)}onFocusAnim(e,t,n,i){if(-1==this._timeStart&&(this._timeStart=e),this._state==r.ANIMATION_FOCUS){const a=e-this._timeStart,s=a/this.focusAnimationTime;if(this._gizmoMatrixState.copy(i),s>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,this.scaleFactor),this._timeStart=-1,this.updateTbState(r.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l);else{const e=this.easeOutCubic(s),r=1-e+this.scaleFactor*e;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,r,e),this.dispatchEvent(l);const a=this;this._animationId=window.requestAnimationFrame(function(e){a.onFocusAnim(e,t,n,i.clone())})}}else this._animationId=-1,this._timeStart=-1}onRotationAnim(e,t,n){if(-1==this._timeStart&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=e),this._state==r.ANIMATION_ROTATE){const i=(e-this._timeStart)/1e3,a=n+-this.dampingFactor*i;if(a>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(i,2)+n*i+0,this.applyTransformMatrix(this.rotate(t,this._angleCurrent)),this.dispatchEvent(l);const e=this;this._animationId=window.requestAnimationFrame(function(i){e.onRotationAnim(i,t,n)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(r.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l)}else this._animationId=-1,this._timeStart=-1,this._state!=r.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(l))}pan(e,t,n=!1){const i=e.clone().sub(t);if(this.camera.isOrthographicCamera)i.multiplyScalar(1/this.camera.zoom);else if(this.camera.isPerspectiveCamera&&n){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const e=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);i.multiplyScalar(1/e)}return this._v3_1.set(i.x,i.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1),o}reset(){this.camera.zoom=this._zoom0,this.camera.isPerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(r.IDLE,!1),this.dispatchEvent(l)}rotate(e,t){const n=this._gizmos.position;return this._translationMatrix.makeTranslation(-n.x,-n.y,-n.z),this._rotationMatrix.makeRotationAxis(e,-t),this._m4_1.makeTranslation(n.x,n.y,n.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),o}copyState(){let e;this.camera.isOrthographicCamera?e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}):this.camera.isPerspectiveCamera&&(e=JSON.stringify({arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}})),navigator.clipboard.writeText(e)}pasteState(){const e=this;navigator.clipboard.readText().then(function(t){e.setStateFromJSON(t)})}saveState(){this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.isPerspectiveCamera&&(this._fov0=this.camera.fov)}scale(e,t,n=!0){m.copy(t);let i=1/e;if(this.camera.isOrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=e,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,i=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,i=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(i,i,i),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),m.sub(this._v3_1);const t=m.clone().multiplyScalar(i);return m.sub(t),this._m4_1.makeTranslation(m.x,m.y,m.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),o}if(this.camera.isPerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let e=this._v3_1.distanceTo(m),t=e-e*i;const r=e-t;if(r<this.minDistance?(i=this.minDistance/e,t=e-e*i):r>this.maxDistance&&(i=this.maxDistance/e,t=e-e*i),h.copy(m).sub(this._v3_1).normalize().multiplyScalar(t),this._m4_1.makeTranslation(h.x,h.y,h.z),n){const n=this._v3_2;e=n.distanceTo(m),t=e-e*i,h.copy(m).sub(this._v3_2).normalize().multiplyScalar(t),this._translationMatrix.makeTranslation(n.x,n.y,n.z),this._scaleMatrix.makeScale(i,i,i),this._m4_2.makeTranslation(h.x,h.y,h.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-n.x,-n.y,-n.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return o}}setFov(e){this.camera.isPerspectiveCamera&&(this.camera.fov=i.cj9.clamp(e,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}setTransformationMatrices(e=null,t=null){null!=e?null!=o.camera?o.camera.copy(e):o.camera=e.clone():o.camera=null,null!=t?null!=o.gizmos?o.gizmos.copy(t):o.gizmos=t.clone():o.gizmos=null}zRotate(e,t){return this._rotationMatrix.makeRotationAxis(this._rotationAxis,t),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._m4_1.makeTranslation(e.x,e.y,e.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(e),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,t),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),o}getRaycaster(){return d}unprojectOnObj(e,t){const n=this.getRaycaster();n.near=t.near,n.far=t.far,n.setFromCamera(e,t);const i=n.intersectObjects(this.scene.children,!0);for(let r=0;r<i.length;r++)if(i[r].object.uuid!=this._gizmos.uuid&&null!=i[r].face)return i[r].point.clone();return null}unprojectOnTbSurface(e,t,n,r,a){if("OrthographicCamera"==e.type){this._v2_1.copy(this.getCursorPosition(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const e=Math.pow(this._v2_1.x,2),i=Math.pow(this._v2_1.y,2),a=Math.pow(this._tbRadius,2);return e+i<=.5*a?this._v3_1.setZ(Math.sqrt(a-(e+i))):this._v3_1.setZ(.5*a/Math.sqrt(e+i)),this._v3_1}if("PerspectiveCamera"==e.type){this._v2_1.copy(this.getCursorNDC(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);const s=this._v3_1.clone().normalize(),o=e.position.distanceTo(this._gizmos.position),l=Math.pow(a,2),c=this._v3_1.z,u=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(0==u)return s.set(this._v3_1.x,this._v3_1.y,a),s;const d=c/u,h=o;let p=Math.pow(d,2)+1,f=2*d*h,m=Math.pow(h,2)-l,v=Math.pow(f,2)-4*p*m;if(v>=0){this._v2_1.setX((-f-Math.sqrt(v))/(2*p)),this._v2_1.setY(d*this._v2_1.x+h);const e=i.cj9.RAD2DEG*this._v2_1.angle();if(e>=45){const e=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(o-this._v2_1.y,2));return s.multiplyScalar(e),s.z+=o,s}}p=d,f=h,m=.5*-l,v=Math.pow(f,2)-4*p*m,this._v2_1.setX((-f-Math.sqrt(v))/(2*p)),this._v2_1.setY(d*this._v2_1.x+h);const g=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(o-this._v2_1.y,2));return s.multiplyScalar(g),s.z+=o,s}}unprojectOnTbPlane(e,t,n,i,r=!1){if("OrthographicCamera"==e.type)return this._v2_1.copy(this.getCursorPosition(t,n,i)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if("PerspectiveCamera"==e.type){this._v2_1.copy(this.getCursorNDC(t,n,i)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);const a=this._v3_1.clone().normalize(),s=this._v3_1.z,o=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let l;if(l=r?this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):e.position.distanceTo(this._gizmos.position),0==o)return a.set(0,0,0),a;const c=s/o,u=l,d=-u/c,h=Math.sqrt(Math.pow(u,2)+Math.pow(d,2));return a.multiplyScalar(h),a.z=0,a}}updateMatrixState(){this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.isOrthographicCamera?(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom):this.camera.isPerspectiveCamera&&(this._fovState=this.camera.fov)}updateTbState(e,t){this._state=e,t&&this.updateMatrixState()}update(){const e=1e-6;if(!1===this.target.equals(this._currentTarget)&&(this._gizmos.position.copy(this.target),this._tbRadius=this.calculateTbRadius(this.camera),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)),this.camera.isOrthographicCamera){if(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom){const e=i.cj9.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.scale(e/this.camera.zoom,this._gizmos.position,!0))}}else if(this.camera.isPerspectiveCamera){const t=this.camera.position.distanceTo(this._gizmos.position);if(t>this.maxDistance+e||t<this.minDistance-e){const e=i.cj9.clamp(t,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.scale(e/t,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=i.cj9.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const n=this._tbRadius;if(this._tbRadius=this.calculateTbRadius(this.camera),n<this._tbRadius-e||n>this._tbRadius+e){const e=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,t=this._tbRadius/e,n=new i.S20(0,0,t,t),r=n.getPoints(this._curvePts),a=(new i.LoY).setFromPoints(r);for(const i in this._gizmos.children)this._gizmos.children[i].geometry=a}}this.camera.lookAt(this._gizmos.position)}setStateFromJSON(e){const t=JSON.parse(e);if(void 0!=t.arcballState){this._cameraMatrixState.fromArray(t.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(t.arcballState.cameraUp),this.camera.near=t.arcballState.cameraNear,this.camera.far=t.arcballState.cameraFar,this.camera.zoom=t.arcballState.cameraZoom,this.camera.isPerspectiveCamera&&(this.camera.fov=t.arcballState.cameraFov),this._gizmoMatrixState.fromArray(t.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix(),this._tbRadius=this.calculateTbRadius(this.camera);const e=(new i.kn4).copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(e),this.camera.lookAt(this._gizmos.position),this.updateTbState(r.IDLE,!1),this.dispatchEvent(l)}}}function g(){const e=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;this._tbRadius=this.calculateTbRadius(this.camera);const t=this._tbRadius/e,n=new i.S20(0,0,t,t),r=n.getPoints(this._curvePts),a=(new i.LoY).setFromPoints(r);for(const i in this._gizmos.children)this._gizmos.children[i].geometry=a;this.dispatchEvent(l)}function y(e){if(this.enabled)for(let t=0;t<this.mouseActions.length;t++)if(2==this.mouseActions[t].mouse){e.preventDefault();break}}function _(){this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=a.NONE}function b(e){if(0==e.button&&e.isPrimary?(this._downValid=!0,this._downEvents.push(e),this._downStart=performance.now()):this._downValid=!1,"touch"==e.pointerType&&this._input!=a.CURSOR)switch(this._touchStart.push(e),this._touchCurrent.push(e),this._input){case a.NONE:this._input=a.ONE_FINGER,this.onSinglePanStart(e,"ROTATE"),window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp);break;case a.ONE_FINGER:case a.ONE_FINGER_SWITCHED:this._input=a.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case a.TWO_FINGER:this._input=a.MULT_FINGER,this.onTriplePanStart(e);break}else if("touch"!=e.pointerType&&this._input==a.NONE){let t=null;e.ctrlKey||e.metaKey?t="CTRL":e.shiftKey&&(t="SHIFT"),this._mouseOp=this.getOpFromAction(e.button,t),null!=this._mouseOp&&(window.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointerup",this._onPointerUp),this._input=a.CURSOR,this._button=e.button,this.onSinglePanStart(e,this._mouseOp))}}function x(e){if("touch"==e.pointerType&&this._input!=a.CURSOR)switch(this._input){case a.ONE_FINGER:this.updateTouchEvent(e),this.onSinglePanMove(e,r.ROTATE);break;case a.ONE_FINGER_SWITCHED:const t=this.calculatePointersDistance(this._touchCurrent[0],e)*this._devPxRatio;if(t>=this._switchSensibility){this._input=a.ONE_FINGER,this.updateTouchEvent(e),this.onSinglePanStart(e,"ROTATE");break}break;case a.TWO_FINGER:this.updateTouchEvent(e),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case a.MULT_FINGER:this.updateTouchEvent(e),this.onTriplePanMove(e);break}else if("touch"!=e.pointerType&&this._input==a.CURSOR){let t=null;e.ctrlKey||e.metaKey?t="CTRL":e.shiftKey&&(t="SHIFT");const n=this.getOpStateFromAction(this._button,t);null!=n&&this.onSinglePanMove(e,n)}if(this._downValid){const t=this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],e)*this._devPxRatio;t>this._movementThreshold&&(this._downValid=!1)}}function S(e){if("touch"==e.pointerType&&this._input!=a.CURSOR){const t=this._touchCurrent.length;for(let n=0;n<t;n++)if(this._touchCurrent[n].pointerId==e.pointerId){this._touchCurrent.splice(n,1),this._touchStart.splice(n,1);break}switch(this._input){case a.ONE_FINGER:case a.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=a.NONE,this.onSinglePanEnd();break;case a.TWO_FINGER:this.onDoublePanEnd(e),this.onPinchEnd(e),this.onRotateEnd(e),this._input=a.ONE_FINGER_SWITCHED;break;case a.MULT_FINGER:0==this._touchCurrent.length&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=a.NONE,this.onTriplePanEnd());break}}else"touch"!=e.pointerType&&this._input==a.CURSOR&&(window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointerup",this._onPointerUp),this._input=a.NONE,this.onSinglePanEnd(),this._button=-1);if(e.isPrimary)if(this._downValid){const t=e.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp;if(t<=this._maxDownTime)if(0==this._nclicks)this._nclicks=1,this._clickStart=performance.now();else{const t=e.timeStamp-this._clickStart,n=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;t<=this._maxInterval&&n<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(e)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}function M(e){if(this.enabled&&this.enableZoom){let t=null;e.ctrlKey||e.metaKey?t="CTRL":e.shiftKey&&(t="SHIFT");const n=this.getOpFromAction("WHEEL",t);if(null!=n){e.preventDefault(),this.dispatchEvent(c);const t=125;let a=e.deltaY/t,s=1;switch(a>0?s=1/this.scaleFactor:a<0&&(s=this.scaleFactor),n){case"ZOOM":if(this.updateTbState(r.SCALE,!0),a>0?s=1/Math.pow(this.scaleFactor,a):a<0&&(s=Math.pow(this.scaleFactor,-a)),this.cursorZoom&&this.enablePan){let t;this.camera.isOrthographicCamera?t=this.unprojectOnTbPlane(this.camera,e.clientX,e.clientY,this.domElement).applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera.isPerspectiveCamera&&(t=this.unprojectOnTbPlane(this.camera,e.clientX,e.clientY,this.domElement).applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),this.applyTransformMatrix(this.scale(s,t))}else this.applyTransformMatrix(this.scale(s,this._gizmos.position));null!=this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(r.IDLE,!1),this.dispatchEvent(l),this.dispatchEvent(u);break;case"FOV":if(this.camera.isPerspectiveCamera){this.updateTbState(r.FOV,!0),0!=e.deltaX&&(a=e.deltaX/t,s=1,a>0?s=1/Math.pow(this.scaleFactor,a):a<0&&(s=Math.pow(this.scaleFactor,-a))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const n=this._v3_1.distanceTo(this._gizmos.position);let o=n/s;o=i.cj9.clamp(o,this.minDistance,this.maxDistance);const l=n*Math.tan(i.cj9.DEG2RAD*this.camera.fov*.5);let c=i.cj9.RAD2DEG*(2*Math.atan(l/o));c>this.maxFov?c=this.maxFov:c<this.minFov&&(c=this.minFov);const u=l/Math.tan(i.cj9.DEG2RAD*(c/2));s=n/u,this.setFov(c),this.applyTransformMatrix(this.scale(s,this._gizmos.position,!1))}null!=this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(r.IDLE,!1),this.dispatchEvent(l),this.dispatchEvent(u);break}}}}},2248:function(e,t,n){"use strict";var i=n(9504),r=Map.prototype;e.exports={Map:Map,set:i(r.set),get:i(r.get),has:i(r.has),remove:i(r["delete"]),proto:r}},2288:function(e,t,n){var i=n(9531),r=n(8606),a=i(r,"Set");e.exports=a},2297:function(e){function t(e,t){var n=-1,i=t.length,r=e.length;while(++n<i)e[r+n]=t[n];return e}e.exports=t},2303:function(e,t,n){"use strict";var i=n(4576),r=n(9504),a=i.Uint8Array,s=i.SyntaxError,o=i.parseInt,l=Math.min,c=/[^\da-f]/i,u=r(c.exec),d=r("".slice);e.exports=function(e,t){var n=e.length;if(n%2!==0)throw new s("String should be an even number of characters");var i=t?l(t.length,n/2):n/2,r=t||new a(i),h=0,p=0;while(p<i){var f=d(e,h,h+=2);if(u(c,f))throw new s("String should only contain hex characters");r[p++]=o(f,16)}return{bytes:r,read:h}}},2329:function(e,t,n){var i=n(1268),r=n(9915),a=n(8987);function s(e){return i(e,a,r)}e.exports=s},2353:function(e,t,n){var i=n(6636);function r(e){var t=i(this,e)["delete"](e);return this.size-=t?1:0,t}e.exports=r},2360:function(e,t,n){"use strict";var i,r=n(8551),a=n(6801),s=n(8727),o=n(421),l=n(397),c=n(4055),u=n(6119),d=">",h="<",p="prototype",f="script",m=u("IE_PROTO"),v=function(){},g=function(e){return h+f+d+e+h+"/"+f+d},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},_=function(){var e,t=c("iframe"),n="java"+f+":";return t.style.display="none",l.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},b=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}b="undefined"!=typeof document?document.domain&&i?y(i):_():y(i);var e=s.length;while(e--)delete b[p][s[e]];return b()};o[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[p]=r(e),n=new v,v[p]=null,n[m]=e):n=b(),void 0===t?n:a.f(n,t)}},2409:function(e,t,n){var i=n(6517),r=n(3698),a=n(5340);function s(e,t){return a(r(e,t,i),e+"")}e.exports=s},2475:function(e,t,n){"use strict";var i=n(6518),r=n(8527),a=n(4916),s=!a("isSupersetOf",function(e){return!e});i({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:r})},2489:function(e,t,n){"use strict";var i=n(6518),r=n(9565),a=n(9306),s=n(8551),o=n(1767),l=n(9462),c=n(6319),u=n(6395),d=n(9539),h=n(684),p=n(4549),f=!u&&!h("filter",function(){}),m=!u&&!f&&p("filter",TypeError),v=u||f||m,g=l(function(){var e,t,n,i=this.iterator,a=this.predicate,o=this.next;while(1){if(e=s(r(o,i)),t=this.done=!!e.done,t)return;if(n=e.value,c(i,a,[n,this.counter++],!0))return n}});i({target:"Iterator",proto:!0,real:!0,forced:v},{filter:function(e){s(this);try{a(e)}catch(t){d(this,"throw",t)}return m?r(m,this,e):new g(o(this),{predicate:e})}})},2512:function(e,t,n){"use strict";n.d(t,{P:function(){return r},i:function(){return a}});var i=n(955);function r(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),r=n.transform;if(r){let a,s,o,l,c;if(r.startsWith("matrix3d("))a=r.slice(9,-1).split(/, /),s=Number(a[0]),o=Number(a[5]),l=Number(a[12]),c=Number(a[13]);else{if(!r.startsWith("matrix("))return new i.az(t);a=r.slice(7,-1).split(/, /),s=Number(a[0]),o=Number(a[3]),l=Number(a[4]),c=Number(a[5])}const u=n.transformOrigin,d=t.x-l-(1-s)*parseFloat(u),h=t.y-c-(1-o)*parseFloat(u.slice(u.indexOf(" ")+1)),p=s?t.width/s:e.offsetWidth+1,f=o?t.height/o:e.offsetHeight+1;return new i.az({x:d,y:h,width:p,height:f})}return new i.az(t)}function a(e,t,n){if("undefined"===typeof e.animate)return{finished:Promise.resolve()};let i;try{i=e.animate(t,n)}catch(r){return{finished:Promise.resolve()}}return"undefined"===typeof i.finished&&(i.finished=new Promise(e=>{i.onfinish=()=>{e(i)}})),i}},2529:function(e){"use strict";e.exports=function(e,t){return{value:e,done:t}}},2530:function(e){var t=Function.prototype,n=t.toString;function i(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}e.exports=i},2550:function(e){function t(e){return this.__data__.has(e)}e.exports=t},2603:function(e,t,n){"use strict";var i=n(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},2626:function(e){function t(e){return this.__data__.get(e)}e.exports=t},2652:function(e,t,n){"use strict";var i=n(6080),r=n(9565),a=n(8551),s=n(6823),o=n(4209),l=n(6198),c=n(1625),u=n(81),d=n(851),h=n(9539),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,n){var v,g,y,_,b,x,S,M=n&&n.that,w=!(!n||!n.AS_ENTRIES),E=!(!n||!n.IS_RECORD),T=!(!n||!n.IS_ITERATOR),A=!(!n||!n.INTERRUPTED),C=i(t,M),R=function(e){return v&&h(v,"normal"),new f(!0,e)},L=function(e){return w?(a(e),A?C(e[0],e[1],R):C(e[0],e[1])):A?C(e,R):C(e)};if(E)v=e.iterator;else if(T)v=e;else{if(g=d(e),!g)throw new p(s(e)+" is not iterable");if(o(g)){for(y=0,_=l(e);_>y;y++)if(b=L(e[y]),b&&c(m,b))return b;return new f(!1)}v=u(e,g)}x=E?e.next:v.next;while(!(S=r(x,v)).done){try{b=L(S.value)}catch(P){h(v,"throw",P)}if("object"==typeof b&&b&&c(m,b))return b}return new f(!1)}},2777:function(e,t,n){"use strict";var i=n(9565),r=n(34),a=n(757),s=n(5966),o=n(4270),l=n(8227),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!r(e)||a(e))return e;var n,l=s(e,u);if(l){if(void 0===t&&(t="default"),n=i(l,e,t),!r(n)||a(n))return n;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},2787:function(e,t,n){"use strict";var i=n(9297),r=n(4901),a=n(8981),s=n(6119),o=n(2211),l=s("IE_PROTO"),c=Object,u=c.prototype;e.exports=o?c.getPrototypeOf:function(e){var t=a(e);if(i(t,l))return t[l];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},2796:function(e,t,n){"use strict";var i=n(9039),r=n(4901),a=/#|\.prototype\./,s=function(e,t){var n=l[o(e)];return n===u||n!==c&&(r(t)?i(t):!!t)},o=s.normalize=function(e){return String(e).replace(a,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},2804:function(e){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t+"+/",i=t+"-_",r=function(e){for(var t={},n=0;n<64;n++)t[e.charAt(n)]=n;return t};e.exports={i2c:n,c2i:r(n),i2cUrl:i,c2iUrl:r(i)}},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},2834:function(e,t,n){"use strict";n.d(t,{TX:function(){return u},XH:function(){return v},_F:function(){return y},fi:function(){return c},hx:function(){return g}});var i=n(6768),r=n(144),a=n(3398),s=n(7443),o=n(8392),l=n(8306);const c=["sm","md","lg","xl","xxl"],u=Symbol.for("vuetify:display"),d={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return(0,s.D9)(d,e)};function p(e){return l.ZK&&!e?window.innerWidth:"object"===typeof e&&e.clientWidth||0}function f(e){return l.ZK&&!e?window.innerHeight:"object"===typeof e&&e.clientHeight||0}function m(e){const t=l.ZK&&!e?window.navigator.userAgent:"ssr";function n(e){return Boolean(t.match(e))}const i=n(/android/i),r=n(/iphone|ipad|ipod/i),a=n(/cordova/i),s=n(/electron/i),o=n(/chrome/i),c=n(/edge/i),u=n(/firefox/i),d=n(/opera/i),h=n(/win/i),p=n(/mac/i),f=n(/linux/i);return{android:i,ios:r,cordova:a,electron:s,chrome:o,edge:c,firefox:u,opera:d,win:h,mac:p,linux:f,touch:l.vd,ssr:"ssr"===t}}function v(e,t){const{thresholds:n,mobileBreakpoint:a}=h(e),s=(0,r.IJ)(f(t)),o=(0,r.IJ)(m(t)),c=(0,r.Kh)({}),u=(0,r.IJ)(p(t));function d(){s.value=f(),u.value=p()}function v(){d(),o.value=m()}return(0,i.nT)(()=>{const e=u.value<n.sm,t=u.value<n.md&&!e,i=u.value<n.lg&&!(t||e),r=u.value<n.xl&&!(i||t||e),l=u.value<n.xxl&&!(r||i||t||e),d=u.value>=n.xxl,h=e?"xs":t?"sm":i?"md":r?"lg":l?"xl":"xxl",p="number"===typeof a?a:n[a],f=u.value<p;c.xs=e,c.sm=t,c.md=i,c.lg=r,c.xl=l,c.xxl=d,c.smAndUp=!e,c.mdAndUp=!(e||t),c.lgAndUp=!(e||t||i),c.xlAndUp=!(e||t||i||r),c.smAndDown=!(i||r||l||d),c.mdAndDown=!(r||l||d),c.lgAndDown=!(l||d),c.xlAndDown=!d,c.name=h,c.height=s.value,c.width=u.value,c.mobile=f,c.mobileBreakpoint=a,c.platform=o.value,c.thresholds=n}),l.ZK&&(window.addEventListener("resize",d,{passive:!0}),(0,r.jr)(()=>{window.removeEventListener("resize",d)},!0)),{...(0,r.QW)(c),update:v,ssr:!!t}}const g=(0,o.j)({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mobile:null},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.M)();const n=(0,i.WQ)(u);if(!n)throw new Error("Could not find Vuetify display injection");const s=(0,i.EW)(()=>!!e.mobile||("number"===typeof e.mobileBreakpoint?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:null===e.mobile&&n.mobile.value)),o=(0,r.lW)(()=>t?{[`${t}--mobile`]:s.value}:{});return{...n,displayClasses:o,mobile:s}}},2839:function(e,t,n){"use strict";var i=n(4576),r=i.navigator,a=r&&r.userAgent;e.exports=a?String(a):""},2911:function(e,t,n){var i=n(968),r=n(8664);function a(e){return i(e,r(e))}e.exports=a},2967:function(e,t,n){"use strict";var i=n(6706),r=n(34),a=n(7750),s=n(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=i(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(o){}return function(n,i){return a(n),s(i),r(n)?(t?e(n,i):n.__proto__=i,n):n}}():void 0)},3066:function(e,t,n){var i=n(6281),r=n(2353),a=n(984),s=n(9276),o=n(3612);function l(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype["delete"]=r,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},3167:function(e,t,n){"use strict";var i=n(4901),r=n(34),a=n(2967);e.exports=function(e,t,n){var s,o;return a&&i(s=t.constructor)&&s!==n&&r(o=s.prototype)&&o!==n.prototype&&a(e,o),e}},3223:function(e,t,n){var i=n(3886),r=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function a(e){return!!r&&r in e}e.exports=a},3227:function(e){function t(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}e.exports=t},3236:function(e){function t(){return!1}e.exports=t},3238:function(e,t,n){n(4114);var i=n(7305),r=n(5219),a=n(5366),s=n(317),o=n(7744),l=n(9562),c=Object.prototype,u=c.hasOwnProperty;function d(e,t){var n=a(e),c=!n&&r(e),d=!n&&!c&&s(e),h=!n&&!c&&!d&&l(e),p=n||c||d||h,f=p?i(e.length,String):[],m=f.length;for(var v in e)!t&&!u.call(e,v)||p&&("length"==v||d&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||o(v,m))||f.push(v);return f}e.exports=d},3388:function(e,t,n){var i=n(6849),r=Object.prototype,a=r.hasOwnProperty;function s(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)}e.exports=s},3392:function(e,t,n){"use strict";var i=n(9504),r=0,a=Math.random(),s=i(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++r+a,36)}},3398:function(e,t,n){"use strict";n.d(t,{M:function(){return s},n:function(){return a}});var i=n(6768),r=n(7443);function a(e,t){const n=(0,i.nI)();if(!n)throw new Error(`[Vuetify] ${e} ${t||"must be called from inside a setup function"}`);return n}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"composables";const t=a(e).type;return(0,r.fX)(t?.aliasName||t?.name)}},3425:function(e,t,n){"use strict";n.r(t),n.d(t,{ClickOutside:function(){return i.i},Intersect:function(){return r.o},Mutate:function(){return o},Resize:function(){return u},Ripple:function(){return d.n},Scroll:function(){return m},Tooltip:function(){return E},Touch:function(){return v.U}});var i=n(1397),r=n(1694);function a(e,t){const n=t.modifiers||{},i=t.value,{once:r,immediate:a,...o}=n,l=!Object.keys(o).length,{handler:c,options:u}="object"===typeof i?i:{handler:i,options:{attributes:o?.attr??l,characterData:o?.char??l,childList:o?.child??l,subtree:o?.sub??l}},d=new MutationObserver(function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;c?.(n,i),r&&s(e,t)});a&&c?.([],d),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:d},d.observe(e,u)}function s(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const o={mounted:a,unmounted:s};function l(e,t){const n=t.value,i={passive:!t.modifiers?.active};window.addEventListener("resize",n,i),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:i},t.modifiers?.quiet||n()}function c(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:i}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,i),delete e._onResize[t.instance.$.uid]}const u={mounted:l,unmounted:c};var d=n(7354);function h(e,t){const{self:n=!1}=t.modifiers??{},i=t.value,r="object"===typeof i&&i.options||{passive:!0},a="function"===typeof i||"handleEvent"in i?i:i.handler,s=n?e:t.arg?document.querySelector(t.arg):window;s&&(s.addEventListener("scroll",a,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:a,options:r,target:n?void 0:s})}function p(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:i,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,i),delete e._onScroll[t.instance.$.uid]}function f(e,t){t.value!==t.oldValue&&(p(e,t),h(e,t))}const m={mounted:h,unmounted:p,updated:f};var v=n(3588),g=n(9283),y=(n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(6768)),_=n(5130),b=n(7443),x=n(6455);function S(e,t){const n="string"===typeof e?(0,y.g2)(e):e,i=M(n,t);return{mounted:i,updated:i,unmounted(e){(0,_.XX)(null,e)}}}function M(e,t){return function(n,i,r){const a="function"===typeof t?t(i):t,s=i.value?.text??i.value??a?.text,o=(0,b.Gv)(i.value)?i.value:{},l=()=>s??n.textContent,c=(r.ctx===i.instance.$?w(r,i.instance.$)?.provides:r.ctx?.provides)??i.instance.$.provides,u=(0,y.h)(e,(0,y.v6)(a,o),l);u.appContext=Object.assign(Object.create(null),i.instance.$.appContext,{provides:c}),(0,_.XX)(u,n)}}function w(e,t){const n=new Set,i=t=>{for(const r of t){if(!r)continue;if(r===e||r.el&&e.el&&r.el===e.el)return!0;let t;if(n.add(r),r.suspense?t=i([r.ssContent]):Array.isArray(r.children)?t=i(r.children):r.component?.vnode&&(t=i([r.component?.subTree])),t)return t;n.delete(r)}return!1};if(!i([t.subTree]))return(0,x.yA)("Could not find original vnode, component will not inherit provides"),t;const r=Array.from(n).reverse();for(const a of r)if(a.component)return a.component;return t}const E=S(g.y,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:"boolean"===typeof e.value?void 0:e.value}))},3440:function(e,t,n){"use strict";var i=n(7080),r=n(4402),a=n(9286),s=n(5170),o=n(3789),l=n(8469),c=n(507),u=r.has,d=r.remove;e.exports=function(e){var t=i(this),n=o(e),r=a(t);return s(t)<=n.size?l(t,function(e){n.includes(e)&&d(r,e)}):c(n.getIterator(),function(e){u(r,e)&&d(r,e)}),r}},3463:function(e){"use strict";var t=TypeError;e.exports=function(e){if("string"==typeof e)return e;throw new t("Argument is not a string")}},3506:function(e,t,n){"use strict";var i=n(3925),r=String,a=TypeError;e.exports=function(e){if(i(e))return e;throw new a("Can't set "+r(e)+" as a prototype")}},3517:function(e,t,n){"use strict";var i=n(9504),r=n(9039),a=n(4901),s=n(6955),o=n(7751),l=n(3706),c=function(){},u=o("Reflect","construct"),d=/^\s*(?:class|function)\b/,h=i(d.exec),p=!d.test(c),f=function(e){if(!a(e))return!1;try{return u(c,[],e),!0}catch(t){return!1}},m=function(e){if(!a(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(d,l(e))}catch(t){return!0}};m.sham=!0,e.exports=!u||r(function(){var e;return f(f.call)||!f(Object)||!f(function(){e=!0})||e})?m:f},3534:function(e,t,n){var i=n(2329),r=1,a=Object.prototype,s=a.hasOwnProperty;function o(e,t,n,a,o,l){var c=n&r,u=i(e),d=u.length,h=i(t),p=h.length;if(d!=p&&!c)return!1;var f=d;while(f--){var m=u[f];if(!(c?m in t:s.call(t,m)))return!1}var v=l.get(e),g=l.get(t);if(v&&g)return v==t&&g==e;var y=!0;l.set(e,t),l.set(t,e);var _=c;while(++f<d){m=u[f];var b=e[m],x=t[m];if(a)var S=c?a(x,b,m,t,e,l):a(b,x,m,e,t,l);if(!(void 0===S?b===x||o(b,x,n,a,l):S)){y=!1;break}_||(_="constructor"==m)}if(y&&!_){var M=e.constructor,w=t.constructor;M==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof M&&M instanceof M&&"function"==typeof w&&w instanceof w||(y=!1)}return l["delete"](e),l["delete"](t),y}e.exports=o},3559:function(e,t,n){var i=n(8606),r=i.Uint8Array;e.exports=r},3579:function(e,t,n){"use strict";var i=n(6518),r=n(9565),a=n(2652),s=n(9306),o=n(8551),l=n(1767),c=n(9539),u=n(4549),d=u("some",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(e){o(this);try{s(e)}catch(i){c(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;return a(t,function(t,i){if(e(t,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3588:function(e,t,n){"use strict";n.d(t,{U:function(){return d}});n(8111),n(7588);var i=n(7443);const r=e=>{const{touchstartX:t,touchendX:n,touchstartY:i,touchendY:r}=e,a=.5,s=16;e.offsetX=n-t,e.offsetY=r-i,Math.abs(e.offsetY)<a*Math.abs(e.offsetX)&&(e.left&&n<t-s&&e.left(e),e.right&&n>t+s&&e.right(e)),Math.abs(e.offsetX)<a*Math.abs(e.offsetY)&&(e.up&&r<i-s&&e.up(e),e.down&&r>i+s&&e.down(e))};function a(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function s(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),r(t)}function o(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>a(e,t),touchend:e=>s(e,t),touchmove:e=>o(e,t)}}function c(e,t){const n=t.value,r=n?.parent?e.parentElement:e,a=n?.options??{passive:!0},s=t.instance?.$.uid;if(!r||!s)return;const o=l(t.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[s]=o,(0,i.HP)(o).forEach(e=>{r.addEventListener(e,o[e],a)})}function u(e,t){const n=t.value?.parent?e.parentElement:e,r=t.instance?.$.uid;if(!n?._touchHandlers||!r)return;const a=n._touchHandlers[r];(0,i.HP)(a).forEach(e=>{n.removeEventListener(e,a[e])}),delete n._touchHandlers[r]}const d={mounted:c,unmounted:u};t.A=d},3612:function(e,t,n){var i=n(6636);function r(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}e.exports=r},3627:function(e,t,n){"use strict";n.d(t,{S:function(){return o},X:function(){return s}});var i=n(6768),r=n(7443),a=n(8392);const s=(0,a.j)({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function o(e){const t=(0,i.EW)(()=>{const t={},n=(0,r.Dg)(e.height),i=(0,r.Dg)(e.maxHeight),a=(0,r.Dg)(e.maxWidth),s=(0,r.Dg)(e.minHeight),o=(0,r.Dg)(e.minWidth),l=(0,r.Dg)(e.width);return null!=n&&(t.height=n),null!=i&&(t.maxHeight=i),null!=a&&(t.maxWidth=a),null!=s&&(t.minHeight=s),null!=o&&(t.minWidth=o),null!=l&&(t.width=l),t});return{dimensionStyles:t}}},3650:function(e,t,n){"use strict";var i=n(7080),r=n(4402),a=n(9286),s=n(3789),o=n(507),l=r.add,c=r.has,u=r.remove;e.exports=function(e){var t=i(this),n=s(e).getIterator(),r=a(t);return o(n,function(e){c(t,e)?u(r,e):l(r,e)}),r}},3698:function(e,t,n){var i=n(288),r=Math.max;function a(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){var a=arguments,s=-1,o=r(a.length-t,0),l=Array(o);while(++s<o)l[s]=a[t+s];s=-1;var c=Array(t+1);while(++s<t)c[s]=a[s];return c[t]=n(l),i(e,this,c)}}e.exports=a},3706:function(e,t,n){"use strict";var i=n(9504),r=n(4901),a=n(7629),s=i(Function.toString);r(a.inspectSource)||(a.inspectSource=function(e){return s(e)}),e.exports=a.inspectSource},3717:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},3724:function(e,t,n){"use strict";var i=n(9039);e.exports=!i(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3789:function(e,t,n){"use strict";var i=n(9306),r=n(8551),a=n(9565),s=n(1291),o=n(1767),l="Invalid size",c=RangeError,u=TypeError,d=Math.max,h=function(e,t){this.set=e,this.size=d(t,0),this.has=i(e.has),this.keys=i(e.keys)};h.prototype={getIterator:function(){return o(r(a(this.keys,this.set)))},includes:function(e){return a(this.has,this.set,e)}},e.exports=function(e){r(e);var t=+e.size;if(t!==t)throw new u(l);var n=s(t);if(n<0)throw new c(l);return new h(e,n)}},3838:function(e,t,n){"use strict";var i=n(7080),r=n(5170),a=n(8469),s=n(3789);e.exports=function(e){var t=i(this),n=s(e);return!(r(t)>n.size)&&!1!==a(t,function(e){if(!n.includes(e))return!1},!0)}},3853:function(e,t,n){"use strict";var i=n(6518),r=n(4449),a=n(4916),s=!a("isDisjointFrom",function(e){return!e});i({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:r})},3867:function(e,t,n){var i=n(7083),r=n(5556),a=n(6517),s=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:a;e.exports=s},3883:function(e){function t(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=t},3886:function(e,t,n){var i=n(8606),r=i["__core-js_shared__"];e.exports=r},3925:function(e,t,n){"use strict";var i=n(34);e.exports=function(e){return i(e)||null===e}},3939:function(e,t,n){"use strict";n.d(t,{D_:function(){return a},Rd:function(){return r},mH:function(){return i}});n(4114);function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];while(e){if(t?s(e):a(e))return e;e=e.parentElement}return document.scrollingElement}function r(e,t){const n=[];if(t&&e&&!t.contains(e))return n;while(e){if(a(e)&&n.push(e),e===t)break;e=e.parentElement}return n}function a(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n="scroll"===t.overflowY||"auto"===t.overflowY&&e.scrollHeight>e.clientHeight,i="scroll"===t.overflowX||"auto"===t.overflowX&&e.scrollWidth>e.clientWidth;return n||i}function s(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}},3972:function(e,t,n){"use strict";var i=n(34),r=String,a=TypeError;e.exports=function(e){if(void 0===e||i(e))return e;throw new a(r(e)+" is not an object or undefined")}},4032:function(e){function t(e,t){return e.has(t)}e.exports=t},4055:function(e,t,n){"use strict";var i=n(4576),r=n(34),a=i.document,s=r(a)&&r(a.createElement);e.exports=function(e){return s?a.createElement(e):{}}},4114:function(e,t,n){"use strict";var i=n(6518),r=n(8981),a=n(6198),s=n(4527),o=n(6837),l=n(9039),c=l(function(){return 4294967297!==[].push.call({length:4294967296},1)}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=c||!u();i({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=r(this),n=a(t),i=arguments.length;o(n+i);for(var l=0;l<i;l++)t[n]=arguments[l],n++;return s(t,n),n}})},4117:function(e){"use strict";e.exports=function(e){return null===e||void 0===e}},4119:function(e,t,n){"use strict";n.d(t,{qY:function(){return p},TX:function(){return h},GP:function(){return y},vx:function(){return m},Hx:function(){return g},UV:function(){return v},Tz:function(){return b},bD:function(){return x}});n(8111),n(116),n(1701);var i=n(6768),r=n(4232);const a={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},s={component:e=>(0,i.h)(y,{...e,class:"mdi"})};var o=n(144),l=n(8392),c=n(4396),u=n(7443),d=n(6455);const h=[String,Function,Object,Array],p=Symbol.for("vuetify:icons"),f=(0,l.j)({icon:{type:h},tag:{type:[String,Object,Function],required:!0}},"icon"),m=(0,c.RW)()({name:"VComponentIcon",props:f(),setup(e,t){let{slots:n}=t;return()=>{const t=e.icon;return(0,i.bF)(e.tag,null,{default:()=>[e.icon?(0,i.bF)(t,null,null):n.default?.()]})}}}),v=(0,c.pM)({name:"VSvgIcon",inheritAttrs:!1,props:f(),setup(e,t){let{attrs:n}=t;return()=>(0,i.bF)(e.tag,(0,i.v6)(n,{style:null}),{default:()=>[(0,i.Lk)("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(e=>Array.isArray(e)?(0,i.Lk)("path",{d:e[0],"fill-opacity":e[1]},null):(0,i.Lk)("path",{d:e},null)):(0,i.Lk)("path",{d:e.icon},null)])]})}}),g=(0,c.pM)({name:"VLigatureIcon",props:f(),setup(e){return()=>(0,i.bF)(e.tag,null,{default:()=>[e.icon]})}}),y=(0,c.pM)({name:"VClassIcon",props:f(),setup(e){return()=>(0,i.bF)(e.tag,{class:(0,r.C4)(e.icon)},null)}});function _(){return{svg:{component:v},class:{component:y}}}function b(e){const t=_(),n=e?.defaultSet??"mdi";return"mdi"!==n||t.mdi||(t.mdi=s),(0,u.D9)({defaultSet:n,sets:t,aliases:{...a,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const x=e=>{const t=(0,i.WQ)(p);if(!t)throw new Error("Missing Vuetify Icons provide!");const n=(0,i.EW)(()=>{const n=(0,o.BA)(e);if(!n)return{component:m};let i=n;if("string"===typeof i&&(i=i.trim(),i.startsWith("$")&&(i=t.aliases?.[i.slice(1)])),i||(0,d.OP)(`Could not find aliased icon "${n}"`),Array.isArray(i))return{component:v,icon:i};if("string"!==typeof i)return{component:m,icon:i};const r=Object.keys(t.sets).find(e=>"string"===typeof i&&i.startsWith(`${e}:`)),a=r?i.slice(r.length+1):i,s=t.sets[r??t.defaultSet];return{component:s.component,icon:a}});return{iconData:n}}},4154:function(e,t,n){"use strict";var i=n(6955),r=TypeError;e.exports=function(e){if("Uint8Array"===i(e))return e;throw new r("Argument is not an Uint8Array")}},4204:function(e,t,n){"use strict";var i=n(7080),r=n(4402).add,a=n(9286),s=n(3789),o=n(507);e.exports=function(e){var t=i(this),n=s(e).getIterator(),l=a(t);return o(n,function(e){r(l,e)}),l}},4209:function(e,t,n){"use strict";var i=n(8227),r=n(6269),a=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||s[a]===e)}},4215:function(e,t,n){"use strict";var i=n(4576),r=n(2839),a=n(2195),s=function(e){return r.slice(0,e.length)===e};e.exports=function(){return s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===a(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"}()},4226:function(e,t,n){"use strict";var i=n(6518),r=n(4576),a=n(3463),s=n(4154),o=n(5169),l=n(2303);r.Uint8Array&&i({target:"Uint8Array",proto:!0},{setFromHex:function(e){s(this),a(e),o(this.buffer);var t=l(e,this).read;return{read:t,written:t/2}}})},4232:function(e,t,n){"use strict";n.d(t,{$3:function(){return p},$H:function(){return F},BH:function(){return j},BX:function(){return ie},Bm:function(){return x},C4:function(){return Z},CE:function(){return m},CP:function(){return c},DY:function(){return U},Gv:function(){return S},J$:function(){return ee},Kg:function(){return b},MZ:function(){return r},Mp:function(){return l},NO:function(){return o},Oj:function(){return a},PT:function(){return I},Qd:function(){return A},Ro:function(){return z},SU:function(){return R},TF:function(){return d},Tg:function(){return O},Tn:function(){return _},Tr:function(){return X},We:function(){return H},X$:function(){return u},Y2:function(){return te},ZH:function(){return N},Zf:function(){return T},_B:function(){return J},bB:function(){return V},cy:function(){return f},gd:function(){return y},pD:function(){return i},rU:function(){return k},tE:function(){return s},u3:function(){return re},vM:function(){return v},v_:function(){return se},yI:function(){return C},yL:function(){return M},yQ:function(){return B}});n(4114),n(8111),n(2489),n(7588);
/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function i(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}const r={},a=[],s=()=>{},o=()=>!1,l=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),c=e=>e.startsWith("onUpdate:"),u=Object.assign,d=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},h=Object.prototype.hasOwnProperty,p=(e,t)=>h.call(e,t),f=Array.isArray,m=e=>"[object Map]"===E(e),v=e=>"[object Set]"===E(e),g=e=>"[object Date]"===E(e),y=e=>"[object RegExp]"===E(e),_=e=>"function"===typeof e,b=e=>"string"===typeof e,x=e=>"symbol"===typeof e,S=e=>null!==e&&"object"===typeof e,M=e=>(S(e)||_(e))&&_(e.then)&&_(e.catch),w=Object.prototype.toString,E=e=>w.call(e),T=e=>E(e).slice(8,-1),A=e=>"[object Object]"===E(e),C=e=>b(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,R=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=e=>{const t=Object.create(null);return n=>{const i=t[n];return i||(t[n]=e(n))}},P=/-(\w)/g,I=L(e=>e.replace(P,(e,t)=>t?t.toUpperCase():"")),D=/\B([A-Z])/g,O=L(e=>e.replace(D,"-$1").toLowerCase()),N=L(e=>e.charAt(0).toUpperCase()+e.slice(1)),k=L(e=>{const t=e?`on${N(e)}`:"";return t}),F=(e,t)=>!Object.is(e,t),U=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},B=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},V=e=>{const t=parseFloat(e);return isNaN(t)?e:t},z=e=>{const t=b(e)?Number(e):NaN;return isNaN(t)?e:t};let W;const H=()=>W||(W="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const G="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",j=i(G);function X(e){if(f(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=b(i)?K(i):X(i);if(r)for(const e in r)t[e]=r[e]}return t}if(b(e)||S(e))return e}const q=/;(?![^(]*\))/g,$=/:([^]+)/,Y=/\/\*[^]*?\*\//g;function K(e){const t={};return e.replace(Y,"").split(q).forEach(e=>{if(e){const n=e.split($);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Z(e){let t="";if(b(e))t=e;else if(f(e))for(let n=0;n<e.length;n++){const i=Z(e[n]);i&&(t+=i+" ")}else if(S(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function J(e){if(!e)return null;let{class:t,style:n}=e;return t&&!b(t)&&(e.class=Z(t)),n&&(e.style=X(n)),e}const Q="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ee=i(Q);function te(e){return!!e||""===e}function ne(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=ie(e[i],t[i]);return n}function ie(e,t){if(e===t)return!0;let n=g(e),i=g(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=x(e),i=x(t),n||i)return e===t;if(n=f(e),i=f(t),n||i)return!(!n||!i)&&ne(e,t);if(n=S(e),i=S(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!ie(e[n],t[n]))return!1}}return String(e)===String(t)}function re(e,t){return e.findIndex(e=>ie(e,t))}const ae=e=>!(!e||!0!==e["__v_isRef"]),se=e=>b(e)?e:null==e?"":f(e)||S(e)&&(e.toString===w||!_(e.toString))?ae(e)?se(e.value):JSON.stringify(e,oe,2):String(e),oe=(e,t)=>ae(t)?oe(e,t.value):m(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],i)=>(e[le(t,i)+" =>"]=n,e),{})}:v(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>le(e))}:x(t)?le(t):!S(t)||f(t)||A(t)?t:String(t),le=(e,t="")=>{var n;return x(e)?`Symbol(${null!=(n=e.description)?n:t})`:e}},4270:function(e,t,n){"use strict";var i=n(9565),r=n(4901),a=n(34),s=TypeError;e.exports=function(e,t){var n,o;if("string"===t&&r(n=e.toString)&&!a(o=i(n,e)))return o;if(r(n=e.valueOf)&&!a(o=i(n,e)))return o;if("string"!==t&&r(n=e.toString)&&!a(o=i(n,e)))return o;throw new s("Can't convert object to primitive value")}},4276:function(e){function t(e){return function(t){return e(t)}}e.exports=t},4301:function(){},4376:function(e,t,n){"use strict";var i=n(2195);e.exports=Array.isArray||function(e){return"Array"===i(e)}},4391:function(e){function t(e,t){var n=-1,i=null==e?0:e.length,r=0,a=[];while(++n<i){var s=e[n];t(s,n,e)&&(a[r++]=s)}return a}e.exports=t},4396:function(e,t,n){"use strict";n.d(t,{RW:function(){return c},cq:function(){return u},pM:function(){return l}});n(8111),n(2489);var i=n(1240),r=n(6768),a=n(6455),s=n(7443),o=n(8392);function l(e){if(e._setup=e._setup??e.setup,!e.name)return(0,a.OP)("The component is missing an explicit name, unable to generate default prop value"),e;if(e._setup){e.props=(0,o.j)(e.props??{},e.name)();const t=Object.keys(e.props).filter(e=>"class"!==e&&"style"!==e);e.filterProps=function(e){return(0,s.Up)(e,t)},e.props._as=String,e.setup=function(t,n){const r=(0,i.Y8)();if(!r.value)return e._setup(t,n);const{props:a,provideSubDefaults:s}=(0,i.bL)(t,t._as??e.name,r),o=e._setup(a,n);return s(),o}}return e}function c(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t=>(e?l:r.pM)(t)}function u(e,t){return t.props=e,t}},4402:function(e,t,n){"use strict";var i=n(9504),r=Set.prototype;e.exports={Set:Set,add:i(r.add),has:i(r.has),remove:i(r["delete"]),proto:r}},4449:function(e,t,n){"use strict";var i=n(7080),r=n(4402).has,a=n(5170),s=n(3789),o=n(8469),l=n(507),c=n(9539);e.exports=function(e){var t=i(this),n=s(e);if(a(t)<=n.size)return!1!==o(t,function(e){if(n.includes(e))return!1},!0);var u=n.getIterator();return!1!==l(u,function(e){if(r(t,e))return c(u,"normal",!1)})}},4473:function(e,t,n){var i=n(6849);function r(){this.__data__=i?i(null):{},this.size=0}e.exports=r},4483:function(e,t,n){"use strict";var i,r,a,s,o=n(4576),l=n(9429),c=n(1548),u=o.structuredClone,d=o.ArrayBuffer,h=o.MessageChannel,p=!1;if(c)p=function(e){u(e,{transfer:[e]})};else if(d)try{h||(i=l("worker_threads"),i&&(h=i.MessageChannel)),h&&(r=new h,a=new d(2),s=function(e){r.port1.postMessage(null,[e])},2===a.byteLength&&(s(a),0===a.byteLength&&(p=s)))}catch(f){}e.exports=p},4495:function(e,t,n){"use strict";var i=n(9519),r=n(9039),a=n(4576),s=a.String;e.exports=!!Object.getOwnPropertySymbols&&!r(function(){var e=Symbol("symbol detection");return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41})},4520:function(e,t,n){var i=n(2409),r=n(1207);function a(e){return i(function(t,n){var i=-1,a=n.length,s=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;s=e.length>3&&"function"==typeof s?(a--,s):void 0,o&&r(n[0],n[1],o)&&(s=a<3?void 0:s,a=1),t=Object(t);while(++i<a){var l=n[i];l&&e(t,l,i,s)}return t})}e.exports=a},4527:function(e,t,n){"use strict";var i=n(3724),r=n(4376),a=TypeError,s=Object.getOwnPropertyDescriptor,o=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=o?function(e,t){if(r(e)&&!s(e,"length").writable)throw new a("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4549:function(e,t,n){"use strict";var i=n(4576);e.exports=function(e,t){var n=i.Iterator,r=n&&n.prototype,a=r&&r[e],s=!1;if(a)try{a.call({next:function(){return{done:!0}},return:function(){s=!0}},-1)}catch(o){o instanceof t||(s=!1)}if(!s)return a}},4576:function(e,t,n){"use strict";var i=function(e){return e&&e.Math===Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4603:function(e,t,n){"use strict";var i=n(6840),r=n(9504),a=n(655),s=n(2812),o=URLSearchParams,l=o.prototype,c=r(l.append),u=r(l["delete"]),d=r(l.forEach),h=r([].push),p=new o("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&i(l,"delete",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var i=[];d(this,function(e,t){h(i,{key:t,value:e})}),s(t,1);var r,o=a(e),l=a(n),p=0,f=0,m=!1,v=i.length;while(p<v)r=i[p++],m||r.key===o?(m=!0,u(this,r.key)):f++;while(f<v)r=i[f++],r.key===o&&r.value===l||c(this,r.key,r.value)},{enumerable:!0,unsafe:!0})},4644:function(e,t,n){"use strict";var i,r,a,s=n(7811),o=n(3724),l=n(4576),c=n(4901),u=n(34),d=n(9297),h=n(6955),p=n(6823),f=n(6699),m=n(6840),v=n(2106),g=n(1625),y=n(2787),_=n(2967),b=n(8227),x=n(3392),S=n(1181),M=S.enforce,w=S.get,E=l.Int8Array,T=E&&E.prototype,A=l.Uint8ClampedArray,C=A&&A.prototype,R=E&&y(E),L=T&&y(T),P=Object.prototype,I=l.TypeError,D=b("toStringTag"),O=x("TYPED_ARRAY_TAG"),N="TypedArrayConstructor",k=s&&!!_&&"Opera"!==h(l.opera),F=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},V=function(e){if(!u(e))return!1;var t=h(e);return"DataView"===t||d(U,t)||d(B,t)},z=function(e){var t=y(e);if(u(t)){var n=w(t);return n&&d(n,N)?n[N]:z(t)}},W=function(e){if(!u(e))return!1;var t=h(e);return d(U,t)||d(B,t)},H=function(e){if(W(e))return e;throw new I("Target is not a typed array")},G=function(e){if(c(e)&&(!_||g(R,e)))return e;throw new I(p(e)+" is not a typed array constructor")},j=function(e,t,n,i){if(o){if(n)for(var r in U){var a=l[r];if(a&&d(a.prototype,e))try{delete a.prototype[e]}catch(s){try{a.prototype[e]=t}catch(c){}}}L[e]&&!n||m(L,e,n?t:k&&T[e]||t,i)}},X=function(e,t,n){var i,r;if(o){if(_){if(n)for(i in U)if(r=l[i],r&&d(r,e))try{delete r[e]}catch(a){}if(R[e]&&!n)return;try{return m(R,e,n?t:k&&R[e]||t)}catch(a){}}for(i in U)r=l[i],!r||r[e]&&!n||m(r,e,t)}};for(i in U)r=l[i],a=r&&r.prototype,a?M(a)[N]=r:k=!1;for(i in B)r=l[i],a=r&&r.prototype,a&&(M(a)[N]=r);if((!k||!c(R)||R===Function.prototype)&&(R=function(){throw new I("Incorrect invocation")},k))for(i in U)l[i]&&_(l[i],R);if((!k||!L||L===P)&&(L=R.prototype,k))for(i in U)l[i]&&_(l[i].prototype,L);if(k&&y(C)!==L&&_(C,L),o&&!d(L,D))for(i in F=!0,v(L,D,{configurable:!0,get:function(){return u(this)?this[O]:void 0}}),U)l[i]&&f(l[i],O,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:F&&O,aTypedArray:H,aTypedArrayConstructor:G,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:X,getTypedArrayConstructor:z,isView:V,isTypedArray:W,TypedArray:R,TypedArrayPrototype:L}},4659:function(e,t,n){"use strict";var i=n(3724),r=n(4913),a=n(6980);e.exports=function(e,t,n){i?r.f(e,t,a(0,n)):e[t]=n}},4762:function(e,t,n){var i=n(4473),r=n(1297),a=n(5576),s=n(3388),o=n(1916);function l(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype["delete"]=r,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},4794:function(e,t,n){var i=n(9889),r=n(6061);function a(e,t,n){(void 0!==n&&!r(e[t],n)||void 0===n&&!(t in e))&&i(e,t,n)}e.exports=a},4823:function(e,t,n){var i=n(9315),r=n(9692),a="[object AsyncFunction]",s="[object Function]",o="[object GeneratorFunction]",l="[object Proxy]";function c(e){if(!r(e))return!1;var t=i(e);return t==s||t==o||t==a||t==l}e.exports=c},4901:function(e){"use strict";var t="object"==typeof document&&document.all;e.exports="undefined"==typeof t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},4907:function(e,t,n){var i=n(1068),r=n(4794),a=n(100),s=n(9765),o=n(9692),l=n(8664),c=n(3227);function u(e,t,n,d,h){e!==t&&a(t,function(a,l){if(h||(h=new i),o(a))s(e,t,l,n,u,d,h);else{var p=d?d(c(e,l),a,l+"",e,t,h):void 0;void 0===p&&(p=a),r(e,l,p)}},l)}e.exports=u},4913:function(e,t,n){"use strict";var i=n(3724),r=n(5917),a=n(8686),s=n(8551),o=n(6969),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=i?a?function(e,t,n){if(s(e),t=o(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var i=u(e,t);i&&i[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:d in n?n[d]:i[d],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(s(e),t=o(t),s(n),r)try{return c(e,t,n)}catch(i){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},4916:function(e,t,n){"use strict";var i=n(7751),r=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},a=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var n=i("Set");try{(new n)[e](r(0));try{return(new n)[e](r(-1)),!1}catch(o){if(!t)return!0;try{return(new n)[e](a(-1/0)),!1}catch(l){var s=new n;return s.add(1),s.add(2),t(s[e](a(1/0)))}}}catch(l){return!1}}},4979:function(e,t,n){"use strict";var i=n(6518),r=n(4576),a=n(7751),s=n(6980),o=n(4913).f,l=n(9297),c=n(679),u=n(3167),d=n(2603),h=n(5002),p=n(8574),f=n(3724),m=n(6395),v="DOMException",g=a("Error"),y=a(v),_=function(){c(this,b);var e=arguments.length,t=d(e<1?void 0:arguments[0]),n=d(e<2?void 0:arguments[1],"Error"),i=new y(t,n),r=new g(t);return r.name=v,o(i,"stack",s(1,p(r.stack,1))),u(i,this,_),i},b=_.prototype=y.prototype,x="stack"in new g(v),S="stack"in new y(1,2),M=y&&f&&Object.getOwnPropertyDescriptor(r,v),w=!!M&&!(M.writable&&M.configurable),E=x&&!w&&!S;i({global:!0,constructor:!0,forced:m||E},{DOMException:E?_:y});var T=a(v),A=T.prototype;if(A.constructor!==T)for(var C in m||o(A,"constructor",s(1,T)),h)if(l(h,C)){var R=h[C],L=R.s;l(T,L)||o(T,L,s(6,R.c))}},5002:function(e){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:function(e,t,n){"use strict";var i=n(6518),r=n(3650),a=n(9835),s=n(4916),o=!s("symmetricDifference")||!a("symmetricDifference");i({target:"Set",proto:!0,real:!0,forced:o},{symmetricDifference:r})},5031:function(e,t,n){"use strict";var i=n(7751),r=n(9504),a=n(8480),s=n(3717),o=n(8551),l=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=a.f(o(e)),n=s.f;return n?l(t,n(e)):t}},5043:function(e,t,n){"use strict";n.d(t,{aH:function(){return o},by:function(){return s},z6:function(){return l}});n(4114);var i=n(144),r=n(5241),a=n(7443);function s(e){return(0,a.yc)(()=>{const t=(0,i.BA)(e),n=[],a={};if(t.background)if((0,r.VP)(t.background)){if(a.backgroundColor=t.background,!t.text&&(0,r.gP)(t.background)){const e=(0,r.H0)(t.background);if(null==e.a||1===e.a){const t=(0,r.Ot)(e);a.color=t,a.caretColor=t}}}else n.push(`bg-${t.background}`);return t.text&&((0,r.VP)(t.text)?(a.color=t.text,a.caretColor=t.text):n.push(`text-${t.text}`)),{colorClasses:n,colorStyles:a}})}function o(e){const{colorClasses:t,colorStyles:n}=s(()=>({text:(0,i.BA)(e)}));return{textColorClasses:t,textColorStyles:n}}function l(e){const{colorClasses:t,colorStyles:n}=s(()=>({background:(0,i.BA)(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}},5081:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var i=n(3398);function r(e){const t=(0,i.n)("useRender");t.render=e}},5091:function(e){function t(e){return null!=e&&"object"==typeof e}e.exports=t},5102:function(e,t,n){n(4114);var i=n(6202),r=n(7546),a=n(3066),s=200;function o(e,t){var n=this.__data__;if(n instanceof i){var o=n.__data__;if(!r||o.length<s-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}e.exports=o},5130:function(e,t,n){"use strict";n.d(t,{D$:function(){return Re},Ef:function(){return Oe},F:function(){return ge},Jo:function(){return Te},XX:function(){return De},aG:function(){return U},eB:function(){return b}});n(4114),n(8111),n(2489),n(7588),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(6768),r=n(4232),a=n(144);
/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let s;const o="undefined"!==typeof window&&window.trustedTypes;if(o)try{s=o.createPolicy("vue",{createHTML:e=>e})}catch(Fe){}const l=s?e=>s.createHTML(e):e=>e,c="http://www.w3.org/2000/svg",u="http://www.w3.org/1998/Math/MathML",d="undefined"!==typeof document?document:null,h=d&&d.createElement("template"),p={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r="svg"===t?d.createElementNS(c,e):"mathml"===t?d.createElementNS(u,e):n?d.createElement(e,{is:n}):d.createElement(e);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>d.createTextNode(e),createComment:e=>d.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>d.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,a){const s=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),n),r===a||!(r=r.nextSibling))break}else{h.innerHTML=l("svg"===i?`<svg>${e}</svg>`:"mathml"===i?`<math>${e}</math>`:e);const r=h.content;if("svg"===i||"mathml"===i){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},f="transition",m="animation",v=Symbol("_vtc"),g={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},y=(0,r.X$)({},i.QP,g),_=e=>(e.displayName="Transition",e.props=y,e),b=_((e,{slots:t})=>(0,i.h)(i.pR,M(e),t)),x=(e,t=[])=>{(0,r.cy)(e)?e.forEach(e=>e(...t)):e&&e(...t)},S=e=>!!e&&((0,r.cy)(e)?e.some(e=>e.length>1):e.length>1);function M(e){const t={};for(const r in e)r in g||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:a,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,m=w(a),v=m&&m[0],y=m&&m[1],{onBeforeEnter:_,onEnter:b,onEnterCancelled:M,onLeave:E,onLeaveCancelled:R,onBeforeAppear:P=_,onAppear:I=b,onAppearCancelled:D=M}=t,N=(e,t,n,i)=>{e._enterCancelled=i,A(e,t?d:l),A(e,t?u:o),n&&n()},k=(e,t)=>{e._isLeaving=!1,A(e,h),A(e,f),A(e,p),t&&t()},F=e=>(t,n)=>{const r=e?I:b,a=()=>N(t,e,n);x(r,[t,a]),C(()=>{A(t,e?c:s),T(t,e?d:l),S(r)||L(t,i,v,a)})};return(0,r.X$)(t,{onBeforeEnter(e){x(_,[e]),T(e,s),T(e,o)},onBeforeAppear(e){x(P,[e]),T(e,c),T(e,u)},onEnter:F(!1),onAppear:F(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>k(e,t);T(e,h),e._enterCancelled?(T(e,p),O()):(O(),T(e,p)),C(()=>{e._isLeaving&&(A(e,h),T(e,f),S(E)||L(e,i,y,n))}),x(E,[e,n])},onEnterCancelled(e){N(e,!1,void 0,!0),x(M,[e])},onAppearCancelled(e){N(e,!0,void 0,!0),x(D,[e])},onLeaveCancelled(e){k(e),x(R,[e])}})}function w(e){if(null==e)return null;if((0,r.Gv)(e))return[E(e.enter),E(e.leave)];{const t=E(e);return[t,t]}}function E(e){const t=(0,r.Ro)(e);return t}function T(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[v]||(e[v]=new Set)).add(t)}function A(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const n=e[v];n&&(n.delete(t),n.size||(e[v]=void 0))}function C(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let R=0;function L(e,t,n,i){const r=e._endId=++R,a=()=>{r===e._endId&&i()};if(null!=n)return setTimeout(a,n);const{type:s,timeout:o,propCount:l}=P(e,t);if(!s)return i();const c=s+"end";let u=0;const d=()=>{e.removeEventListener(c,h),a()},h=t=>{t.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),e.addEventListener(c,h)}function P(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i(`${f}Delay`),a=i(`${f}Duration`),s=I(r,a),o=i(`${m}Delay`),l=i(`${m}Duration`),c=I(o,l);let u=null,d=0,h=0;t===f?s>0&&(u=f,d=s,h=a.length):t===m?c>0&&(u=m,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?f:m:null,h=u?u===f?a.length:l.length:0);const p=u===f&&/\b(transform|all)(,|$)/.test(i(`${f}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:p}}function I(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,n)=>D(t)+D(e[n])))}function D(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function O(){return document.body.offsetHeight}function N(e,t,n){const i=e[v];i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const k=Symbol("_vod"),F=Symbol("_vsh"),U={name:"show",beforeMount(e,{value:t},{transition:n}){e[k]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):B(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!==!n&&(i?t?(i.beforeEnter(e),B(e,!0),i.enter(e)):i.leave(e,()=>{B(e,!1)}):B(e,t))},beforeUnmount(e,{value:t}){B(e,t)}};function B(e,t){e.style.display=t?e[k]:"none",e[F]=!t}const V=Symbol("");const z=/(^|;)\s*display\s*:/;function W(e,t,n){const i=e.style,a=(0,r.Kg)(n);let s=!1;if(n&&!a){if(t)if((0,r.Kg)(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&G(i,t,"")}else for(const e in t)null==n[e]&&G(i,e,"");for(const e in n)"display"===e&&(s=!0),G(i,e,n[e])}else if(a){if(t!==n){const e=i[V];e&&(n+=";"+e),i.cssText=n,s=z.test(n)}}else t&&e.removeAttribute("style");k in e&&(e[k]=s?i.display:"",e[F]&&(i.display="none"))}const H=/\s*!important$/;function G(e,t,n){if((0,r.cy)(n))n.forEach(n=>G(e,t,n));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=q(e,t);H.test(n)?e.setProperty((0,r.Tg)(i),n.replace(H,""),"important"):e[i]=n}}const j=["Webkit","Moz","ms"],X={};function q(e,t){const n=X[t];if(n)return n;let i=(0,r.PT)(t);if("filter"!==i&&i in e)return X[t]=i;i=(0,r.ZH)(i);for(let r=0;r<j.length;r++){const n=j[r]+i;if(n in e)return X[t]=n}return t}const $="http://www.w3.org/1999/xlink";function Y(e,t,n,i,a,s=(0,r.J$)(t)){i&&t.startsWith("xlink:")?null==n?e.removeAttributeNS($,t.slice(6,t.length)):e.setAttributeNS($,t,n):null==n||s&&!(0,r.Y2)(n)?e.removeAttribute(t):e.setAttribute(t,s?"":(0,r.Bm)(n)?String(n):n)}function K(e,t,n,i,a){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?l(n):n));const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){const i="OPTION"===s?e.getAttribute("value")||"":e.value,r=null==n?"checkbox"===e.type?"on":"":String(n);return i===r&&"_value"in e||(e.value=r),null==n&&e.removeAttribute(t),void(e._value=n)}let o=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=(0,r.Y2)(n):null==n&&"string"===i?(n="",o=!0):"number"===i&&(n=0,o=!0)}try{e[t]=n}catch(Fe){0}o&&e.removeAttribute(a||t)}function Z(e,t,n,i){e.addEventListener(t,n,i)}function J(e,t,n,i){e.removeEventListener(t,n,i)}const Q=Symbol("_vei");function ee(e,t,n,i,r=null){const a=e[Q]||(e[Q]={}),s=a[t];if(i&&s)s.value=i;else{const[n,o]=ne(t);if(i){const s=a[t]=se(i,r);Z(e,n,s,o)}else s&&(J(e,n,s,o),a[t]=void 0)}}const te=/(?:Once|Passive|Capture)$/;function ne(e){let t;if(te.test(e)){let n;t={};while(n=e.match(te))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,r.Tg)(e.slice(2));return[n,t]}let ie=0;const re=Promise.resolve(),ae=()=>ie||(re.then(()=>ie=0),ie=Date.now());function se(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,i.qL)(oe(e,n.value),t,5,[e])};return n.value=e,n.attached=ae(),n}function oe(e,t){if((0,r.cy)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}const le=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ce=(e,t,n,i,a,s)=>{const o="svg"===a;"class"===t?N(e,i,o):"style"===t?W(e,n,i):(0,r.Mp)(t)?(0,r.CP)(t)||ee(e,t,n,i,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):ue(e,t,i,o))?(K(e,t,i),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Y(e,t,i,o,s,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&(0,r.Kg)(i)?("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),Y(e,t,i,o)):K(e,(0,r.PT)(t),i,s,t)};function ue(e,t,n,i){if(i)return"innerHTML"===t||"textContent"===t||!!(t in e&&le(t)&&(0,r.Tn)(n));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!le(t)||!(0,r.Kg)(n))&&t in e}"undefined"!==typeof HTMLElement&&HTMLElement;const de=new WeakMap,he=new WeakMap,pe=Symbol("_moveCb"),fe=Symbol("_enterCb"),me=e=>(delete e.props.mode,e),ve=me({name:"TransitionGroup",props:(0,r.X$)({},y,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,i.nI)(),r=(0,i.Gy)();let s,o;return(0,i.$u)(()=>{if(!s.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!xe(s[0].el,n.vnode.el,t))return void(s=[]);s.forEach(ye),s.forEach(_e);const i=s.filter(be);O(),i.forEach(e=>{const n=e.el,i=n.style;T(n,t),i.transform=i.webkitTransform=i.transitionDuration="";const r=n[pe]=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n[pe]=null,A(n,t))};n.addEventListener("transitionend",r)}),s=[]}),()=>{const l=(0,a.ux)(e),c=M(l);let u=l.tag||i.FK;if(s=[],o)for(let e=0;e<o.length;e++){const t=o[e];t.el&&t.el instanceof Element&&(s.push(t),(0,i.MZ)(t,(0,i.OW)(t,c,r,n)),de.set(t,t.el.getBoundingClientRect()))}o=t.default?(0,i.Df)(t.default()):[];for(let e=0;e<o.length;e++){const t=o[e];null!=t.key&&(0,i.MZ)(t,(0,i.OW)(t,c,r,n))}return(0,i.bF)(u,null,o)}}}),ge=ve;function ye(e){const t=e.el;t[pe]&&t[pe](),t[fe]&&t[fe]()}function _e(e){he.set(e,e.el.getBoundingClientRect())}function be(e){const t=de.get(e),n=he.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${i}px,${r}px)`,t.transitionDuration="0s",e}}function xe(e,t,n){const i=e.cloneNode(),r=e[v];r&&r.forEach(e=>{e.split(/\s+/).forEach(e=>e&&i.classList.remove(e))}),n.split(/\s+/).forEach(e=>e&&i.classList.add(e)),i.style.display="none";const a=1===t.nodeType?t:t.parentNode;a.appendChild(i);const{hasTransform:s}=P(i);return a.removeChild(i),s}const Se=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,r.cy)(t)?e=>(0,r.DY)(t,e):t};function Me(e){e.target.composing=!0}function we(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ee=Symbol("_assign"),Te={created(e,{modifiers:{lazy:t,trim:n,number:i}},a){e[Ee]=Se(a);const s=i||a.props&&"number"===a.props.type;Z(e,t?"change":"input",t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),s&&(i=(0,r.bB)(i)),e[Ee](i)}),n&&Z(e,"change",()=>{e.value=e.value.trim()}),t||(Z(e,"compositionstart",Me),Z(e,"compositionend",we),Z(e,"change",we))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:a,number:s}},o){if(e[Ee]=Se(o),e.composing)return;const l=!s&&"number"!==e.type||/^0\d/.test(e.value)?e.value:(0,r.bB)(e.value),c=null==t?"":t;if(l!==c){if(document.activeElement===e&&"range"!==e.type){if(i&&t===n)return;if(a&&e.value.trim()===c)return}e.value=c}}};const Ae=["ctrl","shift","alt","meta"],Ce={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Ae.some(n=>e[`${n}Key`]&&!t.includes(n))},Re=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(n,...i)=>{for(let e=0;e<t.length;e++){const i=Ce[t[e]];if(i&&i(n,t))return}return e(n,...i)})},Le=(0,r.X$)({patchProp:ce},p);let Pe;function Ie(){return Pe||(Pe=(0,i.K9)(Le))}const De=(...e)=>{Ie().render(...e)},Oe=(...e)=>{const t=Ie().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=ke(e);if(!i)return;const a=t._component;(0,r.Tn)(a)||a.render||a.template||(a.template=i.innerHTML),1===i.nodeType&&(i.textContent="");const s=n(i,!1,Ne(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function Ne(e){return e instanceof SVGElement?"svg":"function"===typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function ke(e){if((0,r.Kg)(e)){const t=document.querySelector(e);return t}return e}},5169:function(e,t,n){"use strict";var i=n(857),r=TypeError;e.exports=function(e){if(i(e))throw new r("ArrayBuffer is detached");return e}},5170:function(e,t,n){"use strict";var i=n(6706),r=n(4402);e.exports=i(r.proto,"size","get")||function(e){return e.size}},5213:function(e,t,n){"use strict";var i=n(4576),r=n(9039),a=i.RegExp,s=!r(function(){var e=!0;try{a(".","d")}catch(c){e=!1}var t={},n="",i=e?"dgimsy":"gimsy",r=function(e,i){Object.defineProperty(t,e,{get:function(){return n+=i,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(s.hasIndices="d"),s)r(o,s[o]);var l=Object.getOwnPropertyDescriptor(a.prototype,"flags").get.call(t);return l!==i||n!==i});e.exports={correct:s}},5219:function(e,t,n){var i=n(8843),r=n(5091),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},5241:function(e,t,n){"use strict";n.d(t,{uJ:function(){return H},eP:function(){return j},ax:function(){return W},w1:function(){return K},ko:function(){return B},yY:function(){return Y},kH:function(){return G},WN:function(){return z},ex:function(){return q},e$:function(){return Q},bJ:function(){return te},Ot:function(){return ne},MA:function(){return ee},VP:function(){return O},gP:function(){return N},a:function(){return J},H0:function(){return U}});n(8111),n(1701);
/**
 * WCAG 3.0 APCA perceptual contrast algorithm from https://github.com/Myndex/SAPC-APCA
 * @licence https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document
 * @see https://www.w3.org/WAI/GL/task-forces/silver/wiki/Visual_Contrast_of_Text_Subgroup
 */
const i=2.4,r=.2126729,a=.7151522,s=.072175,o=.55,l=.58,c=.57,u=.62,d=.03,h=1.45,p=5e-4,f=1.25,m=1.25,v=.078,g=12.82051282051282,y=.06,_=.001;function b(e,t){const n=(e.r/255)**i,b=(e.g/255)**i,x=(e.b/255)**i,S=(t.r/255)**i,M=(t.g/255)**i,w=(t.b/255)**i;let E,T=n*r+b*a+x*s,A=S*r+M*a+w*s;if(T<=d&&(T+=(d-T)**h),A<=d&&(A+=(d-A)**h),Math.abs(A-T)<p)return 0;if(A>T){const e=(A**o-T**l)*f;E=e<_?0:e<v?e-e*g*y:e-y}else{const e=(A**u-T**c)*m;E=e>-_?0:e>-v?e-e*g*y:e+y}return 100*E}var x=n(6455),S=n(7443);const M=.20689655172413793,w=e=>e>M**3?Math.cbrt(e):e/(3*M**2)+4/29,E=e=>e>M?e**3:3*M**2*(e-4/29);function T(e){const t=w,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function A(e){const t=E,n=(e[0]+16)/116;return[.95047*t(n+e[1]/500),t(n),1.08883*t(n-e[2]/200)]}const C=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],R=e=>e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055,L=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],P=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function I(e){const t=Array(3),n=R,i=C;for(let r=0;r<3;++r)t[r]=Math.round(255*(0,S.qE)(n(i[r][0]*e[0]+i[r][1]*e[1]+i[r][2]*e[2])));return{r:t[0],g:t[1],b:t[2]}}function D(e){let{r:t,g:n,b:i}=e;const r=[0,0,0],a=P,s=L;t=a(t/255),n=a(n/255),i=a(i/255);for(let o=0;o<3;++o)r[o]=s[o][0]*t+s[o][1]*n+s[o][2]*i;return r}function O(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function N(e){return O(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const k=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,F={rgb:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),rgba:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),hsl:(e,t,n,i)=>V({h:e,s:t,l:n,a:i}),hsla:(e,t,n,i)=>V({h:e,s:t,l:n,a:i}),hsv:(e,t,n,i)=>B({h:e,s:t,v:n,a:i}),hsva:(e,t,n,i)=>B({h:e,s:t,v:n,a:i})};function U(e){if("number"===typeof e)return(isNaN(e)||e<0||e>16777215)&&(0,x.OP)(`'${e}' is not a valid hex color`),{r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e};if("string"===typeof e&&k.test(e)){const{groups:t}=e.match(k),{fn:n,values:i}=t,r=i.split(/,\s*|\s*\/\s*|\s+/).map((e,t)=>e.endsWith("%")||t>0&&t<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(e)/100:parseFloat(e));return F[n](...r)}if("string"===typeof e){let t=e.startsWith("#")?e.slice(1):e;[3,4].includes(t.length)?t=t.split("").map(e=>e+e).join(""):[6,8].includes(t.length)||(0,x.OP)(`'${e}' is not a valid hex(a) color`);const n=parseInt(t,16);return(isNaN(n)||n<0||n>4294967295)&&(0,x.OP)(`'${e}' is not a valid hex(a) color`),$(t)}if("object"===typeof e){if((0,S.zy)(e,["r","g","b"]))return e;if((0,S.zy)(e,["h","s","l"]))return B(H(e));if((0,S.zy)(e,["h","s","v"]))return B(e)}throw new TypeError(`Invalid color: ${null==e?e:String(e)||e.constructor.name}\nExpected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function B(e){const{h:t,s:n,v:i,a:r}=e,a=e=>{const r=(e+t/60)%6;return i-i*n*Math.max(Math.min(r,4-r,1),0)},s=[a(5),a(3),a(1)].map(e=>Math.round(255*e));return{r:s[0],g:s[1],b:s[2],a:r}}function V(e){return B(H(e))}function z(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),a=Math.min(t,n,i);let s=0;r!==a&&(r===t?s=60*(0+(n-i)/(r-a)):r===n?s=60*(2+(i-t)/(r-a)):r===i&&(s=60*(4+(t-n)/(r-a)))),s<0&&(s+=360);const o=0===r?0:(r-a)/r,l=[s,o,r];return{h:l[0],s:l[1],v:l[2],a:e.a}}function W(e){const{h:t,s:n,v:i,a:r}=e,a=i-i*n/2,s=1===a||0===a?0:(i-a)/Math.min(a,1-a);return{h:t,s:s,l:a,a:r}}function H(e){const{h:t,s:n,l:i,a:r}=e,a=i+n*Math.min(i,1-i),s=0===a?0:2-2*i/a;return{h:t,s:s,v:a,a:r}}function G(e){let{r:t,g:n,b:i,a:r}=e;return void 0===r?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${r})`}function j(e){return G(B(e))}function X(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function q(e){let{r:t,g:n,b:i,a:r}=e;return`#${[X(t),X(n),X(i),void 0!==r?X(Math.round(255*r)):""].join("")}`}function $(e){e=Z(e);let[t,n,i,r]=(0,S.iv)(e,2).map(e=>parseInt(e,16));return r=void 0===r?r:r/255,{r:t,g:n,b:i,a:r}}function Y(e){const t=$(e);return z(t)}function K(e){return q(B(e))}function Z(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),3!==e.length&&4!==e.length||(e=e.split("").map(e=>e+e).join("")),6!==e.length&&(e=(0,S.f)((0,S.f)(e,6),8,"F")),e}function J(e,t){const n=T(D(e));return n[0]=n[0]+10*t,I(A(n))}function Q(e,t){const n=T(D(e));return n[0]=n[0]-10*t,I(A(n))}function ee(e){const t=U(e);return D(t)[1]}function te(e,t){const n=ee(e),i=ee(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function ne(e){const t=Math.abs(b(U(0),U(e))),n=Math.abs(b(U(16777215),U(e)));return n>Math.min(t,50)?"#fff":"#000"}},5340:function(e,t,n){var i=n(3867),r=n(1780),a=r(i);e.exports=a},5366:function(e){var t=Array.isArray;e.exports=t},5390:function(e,t,n){var i=n(8465),r=n(5091);function a(e){return r(e)&&i(e)}e.exports=a},5397:function(e,t,n){"use strict";var i=n(7055),r=n(7750);e.exports=function(e){return i(r(e))}},5522:function(e){function t(e,t){var n=-1,i=e.length;t||(t=Array(i));while(++n<i)t[n]=e[n];return t}e.exports=t},5524:function(){},5556:function(e,t,n){var i=n(9531),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=r},5576:function(e,t,n){var i=n(6849),r="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;function o(e){var t=this.__data__;if(i){var n=t[e];return n===r?void 0:n}return s.call(t,e)?t[e]:void 0}e.exports=o},5610:function(e,t,n){"use strict";var i=n(1291),r=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):a(n,t)}},5623:function(e,t,n){"use strict";n(456)},5636:function(e,t,n){"use strict";var i=n(4576),r=n(9504),a=n(6706),s=n(7696),o=n(5169),l=n(7394),c=n(4483),u=n(1548),d=i.structuredClone,h=i.ArrayBuffer,p=i.DataView,f=Math.min,m=h.prototype,v=p.prototype,g=r(m.slice),y=a(m,"resizable","get"),_=a(m,"maxByteLength","get"),b=r(v.getInt8),x=r(v.setInt8);e.exports=(u||c)&&function(e,t,n){var i,r=l(e),a=void 0===t?r:s(t),m=!y||!y(e);if(o(e),u&&(e=d(e,{transfer:[e]}),r===a&&(n||m)))return e;if(r>=a&&(!n||m))i=g(e,0,a);else{var v=n&&!m&&_?{maxByteLength:_(e)}:void 0;i=new h(a,v);for(var S=new p(e),M=new p(i),w=f(a,r),E=0;E<w;E++)x(M,E,b(S,E))}return u||c(e),i}},5677:function(e){var t=Object.prototype,n=t.toString;function i(e){return n.call(e)}e.exports=i},5745:function(e,t,n){"use strict";var i=n(7629);e.exports=function(e,t){return i[e]||(i[e]=t||{})}},5753:function(e,t,n){"use strict";n.d(t,{$N:function(){return m}});var i=n(8121),r=n(1240),a=n(2834),s=n(7565),o=n(4119),l=n(2046),c=n(2225),u=n(6768),d=n(144),h=n(4396),p=n(8306),f=n(7443);function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{blueprint:t,...n}=e,m=(0,f.D9)(t,n),{aliases:v={},components:y={},directives:_={}}=m,b=(0,d.uY)();return b.run(()=>{const e=(0,r.Ty)(m.defaults),t=(0,a.XH)(m.display,m.ssr),n=(0,c.an)(m.theme),f=(0,o.Tz)(m.icons),x=(0,l.RR)(m.locale),S=(0,i.JO)(m.date,x),M=(0,s.Kz)(m.goTo,x);function w(b){for(const e in _)b.directive(e,_[e]);for(const e in y)b.component(e,y[e]);for(const e in v)b.component(e,(0,h.pM)({...v[e],name:e,aliasName:v[e].name}));const w=(0,d.uY)();if(w.run(()=>{n.install(b)}),b.onUnmount(()=>w.stop()),b.provide(r.hj,e),b.provide(a.TX,t),b.provide(c.Qc,n),b.provide(o.qY,f),b.provide(l.bI,x),b.provide(i.H9,S.options),b.provide(i.w1,S.instance),b.provide(s.aF,M),p.ZK&&m.ssr)if(b.$nuxt)b.$nuxt.hook("app:suspense:resolve",()=>{t.update()});else{const{mount:e}=b;b.mount=function(){const n=e(...arguments);return(0,u.dY)(()=>t.update()),b.mount=e,n}}b.mixin({computed:{$vuetify(){return(0,d.Kh)({defaults:g.call(this,r.hj),display:g.call(this,a.TX),theme:g.call(this,c.Qc),icons:g.call(this,o.qY),locale:g.call(this,l.bI),date:g.call(this,i.w1)})}}})}function E(){b.stop()}return{install:w,unmount:E,defaults:e,display:t,theme:n,icons:f,locale:x,date:S,goTo:M}})}const v="3.9.6";function g(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}m.version=v},5763:function(e,t,n){var i=n(4907),r=n(4520),a=r(function(e,t,n){i(e,t,n)});e.exports=a},5854:function(e,t,n){"use strict";var i=n(2777),r=TypeError;e.exports=function(e){var t=i(e,"number");if("number"==typeof t)throw new r("Can't convert number to bigint");return BigInt(t)}},5876:function(e,t,n){"use strict";var i=n(6518),r=n(3838),a=n(4916),s=!a("isSubsetOf",function(e){return e});i({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:r})},5917:function(e,t,n){"use strict";var i=n(3724),r=n(9039),a=n(4055);e.exports=!i&&!r(function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},5926:function(e){function t(e){return this.__data__.has(e)}e.exports=t},5937:function(e,t,n){"use strict";n.d(t,{M:function(){return l},m:function(){return o}});var i=n(5130),r=n(6768),a=n(7443),s=n(8392);const o=(0,s.j)({transition:{type:null,default:"fade-transition",validator:e=>!0!==e}},"transition"),l=(e,t)=>{let{slots:n}=t;const{transition:s,disabled:o,group:l,...c}=e,{component:u=(l?i.F:i.eB),...d}=(0,a.Gv)(s)?s:{};let h;return h=(0,a.Gv)(s)?(0,r.v6)(d,(0,a.O$)({disabled:o,group:l}),c):(0,r.v6)({name:o||!s?"":s},c),(0,r.h)(u,h,n)}},5966:function(e,t,n){"use strict";var i=n(9306),r=n(4117);e.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}},6039:function(e,t,n){var i=n(6202);function r(){this.__data__=new i,this.size=0}e.exports=r},6061:function(e){function t(e,t){return e===t||e!==e&&t!==t}e.exports=t},6080:function(e,t,n){"use strict";var i=n(7476),r=n(9306),a=n(616),s=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:a?s(e,t):function(){return e.apply(t,arguments)}}},6119:function(e,t,n){"use strict";var i=n(5745),r=n(3392),a=i("keys");e.exports=function(e){return a[e]||(a[e]=r(e))}},6193:function(e,t,n){"use strict";var i=n(4215);e.exports="NODE"===i},6198:function(e,t,n){"use strict";var i=n(8014);e.exports=function(e){return i(e.length)}},6202:function(e,t,n){var i=n(9065),r=n(8513),a=n(9496),s=n(9804),o=n(6316);function l(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype["delete"]=r,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},6249:function(e,t,n){"use strict";var i=n(9039),r=n(6980);e.exports=!i(function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",r(1,7)),7!==e.stack)})},6269:function(e){"use strict";e.exports={}},6279:function(e,t,n){"use strict";var i=n(6840);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},6281:function(e,t,n){var i=n(4762),r=n(6202),a=n(7546);function s(){this.size=0,this.__data__={hash:new i,map:new(a||r),string:new i}}e.exports=s},6315:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});n(4114);const i=Symbol("Forwarded refs");function r(e,t){let n=e;while(n){const e=Reflect.getOwnPropertyDescriptor(n,t);if(e)return e;n=Object.getPrototypeOf(n)}}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[i]=n,new Proxy(e,{get(e,t){if(Reflect.has(e,t))return Reflect.get(e,t);if("symbol"!==typeof t&&!t.startsWith("$")&&!t.startsWith("__"))for(const i of n)if(i.value&&Reflect.has(i.value,t)){const e=Reflect.get(i.value,t);return"function"===typeof e?e.bind(i.value):e}},has(e,t){if(Reflect.has(e,t))return!0;if("symbol"===typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const i of n)if(i.value&&Reflect.has(i.value,t))return!0;return!1},set(e,t,i){if(Reflect.has(e,t))return Reflect.set(e,t,i);if("symbol"===typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,t))return Reflect.set(r.value,t,i);return!1},getOwnPropertyDescriptor(e,t){const a=Reflect.getOwnPropertyDescriptor(e,t);if(a)return a;if("symbol"!==typeof t&&!t.startsWith("$")&&!t.startsWith("__")){for(const e of n){if(!e.value)continue;const n=r(e.value,t)??("_"in e.value?r(e.value._?.setupState,t):void 0);if(n)return n}for(const e of n){const n=e.value&&e.value[i];if(!n)continue;const a=n.slice();while(a.length){const e=a.shift(),n=r(e.value,t);if(n)return n;const s=e.value&&e.value[i];s&&a.push(...s)}}}}})}},6316:function(e,t,n){n(4114);var i=n(9386);function r(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}e.exports=r},6319:function(e,t,n){"use strict";var i=n(8551),r=n(9539);e.exports=function(e,t,n,a){try{return a?t(i(n)[0],n[1]):t(n)}catch(s){r(e,"throw",s)}}},6323:function(e){function t(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}e.exports=t},6349:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var i=n(3398);function r(){const e=(0,i.n)("useScopeId"),t=e.vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}},6395:function(e){"use strict";e.exports=!1},6409:function(e,t,n){var i=n(8230),r=i(Object.keys,Object);e.exports=r},6421:function(e){var t="__lodash_hash_undefined__";function n(e){return this.__data__.set(e,t),this}e.exports=n},6455:function(e,t,n){"use strict";n.d(t,{CI:function(){return s},OP:function(){return r},yA:function(){return a}});n(8111),n(1701);var i=n(6768);function r(e){(0,i.R8)(`Vuetify: ${e}`)}function a(e){(0,i.R8)(`Vuetify error: ${e}`)}function s(e,t){t=Array.isArray(t)?t.slice(0,-1).map(e=>`'${e}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`,(0,i.R8)(`[Vuetify UPGRADE] '${e}' is deprecated, use ${t} instead.`)}},6517:function(e){function t(e){return e}e.exports=t},6518:function(e,t,n){"use strict";var i=n(4576),r=n(7347).f,a=n(6699),s=n(6840),o=n(9433),l=n(7740),c=n(2796);e.exports=function(e,t){var n,u,d,h,p,f,m=e.target,v=e.global,g=e.stat;if(u=v?i:g?i[m]||o(m,{}):i[m]&&i[m].prototype,u)for(d in t){if(p=t[d],e.dontCallGetSet?(f=r(u,d),h=f&&f.value):h=u[d],n=c(v?d:m+(g?".":"#")+d,e.forced),!n&&void 0!==h){if(typeof p==typeof h)continue;l(p,h)}(e.sham||h&&h.sham)&&a(p,"sham",!0),s(u,d,p,e)}}},6573:function(e,t,n){"use strict";var i=n(3724),r=n(2106),a=n(857),s=ArrayBuffer.prototype;i&&!("detached"in s)&&r(s,"detached",{configurable:!0,get:function(){return a(this)}})},6632:function(e,t,n){"use strict";var i=n(6518),r=n(4576),a=n(9143),s=n(4154),o=r.Uint8Array,l=!o||!o.prototype.setFromBase64||!function(){var e=new o([255,255,255,255,255]);try{return void e.setFromBase64("",null)}catch(t){}try{return void e.setFromBase64("a")}catch(t){}try{e.setFromBase64("MjYyZg===")}catch(t){return 50===e[0]&&54===e[1]&&50===e[2]&&255===e[3]&&255===e[4]}}();o&&i({target:"Uint8Array",proto:!0,forced:l},{setFromBase64:function(e){s(this);var t=a(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:t.read,written:t.written}}})},6636:function(e,t,n){n(8111),n(1701);var i=n(3883);function r(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=r},6699:function(e,t,n){"use strict";var i=n(3724),r=n(4913),a=n(6980);e.exports=i?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},6706:function(e,t,n){"use strict";var i=n(9504),r=n(9306);e.exports=function(e,t,n){try{return i(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(a){}}},6768:function(e,t,n){"use strict";n.d(t,{$u:function(){return Me},$y:function(){return De},Bi:function(){return se},CE:function(){return mn},Df:function(){return re},E3:function(){return En},EW:function(){return ti},EY:function(){return an},FK:function(){return rn},Gt:function(){return ot},Gy:function(){return X},Ic:function(){return Se},Im:function(){return z},K9:function(){return Rt},KC:function(){return be},Lk:function(){return xn},MZ:function(){return ie},Mw:function(){return sn},Ng:function(){return wn},OW:function(){return ee},Q3:function(){return An},QP:function(){return $},R8:function(){return ri},WQ:function(){return lt},Wv:function(){return vn},Y4:function(){return pe},bF:function(){return Sn},bo:function(){return R},dY:function(){return v},eW:function(){return Tn},g2:function(){return Pe},h:function(){return ni},hi:function(){return Ee},k6:function(){return C},n:function(){return he},nI:function(){return Fn},nT:function(){return Vt},pI:function(){return ke},pM:function(){return ae},pR:function(){return J},qL:function(){return s},sV:function(){return xe},uX:function(){return un},v6:function(){return Pn},vv:function(){return gn},wB:function(){return zt},xo:function(){return we}});n(4114),n(8111),n(1148),n(2489),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(144),r=n(4232);function a(e,t,n,i){try{return i?e(...i):e()}catch(r){o(r,t,n)}}function s(e,t,n,i){if((0,r.Tn)(e)){const s=a(e,t,n,i);return s&&(0,r.yL)(s)&&s.catch(e=>{o(e,t,n)}),s}if((0,r.cy)(e)){const r=[];for(let a=0;a<e.length;a++)r.push(s(e[a],t,n,i));return r}}function o(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:c,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||r.MZ;if(t){let r=t.parent;const s=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,s,o))return;r=r.parent}if(c)return(0,i.C4)(),a(c,null,10,[e,s,o]),void(0,i.bl)()}l(e,n,o,s,u)}function l(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const c=[];let u=-1;const d=[];let h=null,p=0;const f=Promise.resolve();let m=null;function v(e){const t=m||f;return e?t.then(this?e.bind(this):e):t}function g(e){let t=u+1,n=c.length;while(t<n){const i=t+n>>>1,r=c[i],a=M(r);a<e||a===e&&2&r.flags?t=i+1:n=i}return t}function y(e){if(!(1&e.flags)){const t=M(e),n=c[c.length-1];!n||!(2&e.flags)&&t>=M(n)?c.push(e):c.splice(g(t),0,e),e.flags|=1,_()}}function _(){m||(m=f.then(w))}function b(e){(0,r.cy)(e)?d.push(...e):h&&-1===e.id?h.splice(p+1,0,e):1&e.flags||(d.push(e),e.flags|=1),_()}function x(e,t,n=u+1){for(0;n<c.length;n++){const t=c[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;0,c.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function S(e){if(d.length){const e=[...new Set(d)].sort((e,t)=>M(e)-M(t));if(d.length=0,h)return void h.push(...e);for(h=e,p=0;p<h.length;p++){const e=h[p];0,4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}h=null,p=0}}const M=e=>null==e.id?2&e.flags?-1:1/0:e.id;function w(e){r.tE;try{for(u=0;u<c.length;u++){const e=c[u];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),a(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;u<c.length;u++){const e=c[u];e&&(e.flags&=-2)}u=-1,c.length=0,S(e),m=null,(c.length||d.length)&&w(e)}}let E=null,T=null;function A(e){const t=E;return E=e,T=e&&e.type.__scopeId||null,t}function C(e,t=E,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&pn(-1);const r=A(t);let a;try{a=e(...n)}finally{A(r),i._d&&pn(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function R(e,t){if(null===E)return e;const n=Jn(E),a=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[e,o,l,c=r.MZ]=t[s];e&&((0,r.Tn)(e)&&(e={mounted:e,updated:e}),e.deep&&(0,i.hV)(o),a.push({dir:e,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return e}function L(e,t,n,r){const a=e.dirs,o=t&&t.dirs;for(let l=0;l<a.length;l++){const c=a[l];o&&(c.oldValue=o[l].value);let u=c.dir[r];u&&((0,i.C4)(),s(u,n,8,[e.el,c,e,t]),(0,i.bl)())}}const P=Symbol("_vte"),I=e=>e.__isTeleport,D=e=>e&&(e.disabled||""===e.disabled),O=e=>e&&(e.defer||""===e.defer),N=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,k=e=>"function"===typeof MathMLElement&&e instanceof MathMLElement,F=(e,t)=>{const n=e&&e.to;if((0,r.Kg)(n)){if(t){const e=t(n);return e}return null}return n},U={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,a,s,o,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:f,createText:m,createComment:v}}=c,g=D(t.props);let{shapeFlag:y,children:_,dynamicChildren:b}=t;if(null==e){const e=t.el=m(""),c=t.anchor=m("");p(e,n,i),p(c,n,i);const d=(e,t)=>{16&y&&(r&&r.isCE&&(r.ce._teleportTarget=e),u(_,e,t,r,a,s,o,l))},h=()=>{const e=t.target=F(t.props,f),n=H(e,t,m,p);e&&("svg"!==s&&N(e)?s="svg":"mathml"!==s&&k(e)&&(s="mathml"),g||(d(e,n),W(t,!1)))};g&&(d(n,c),W(t,!0)),O(t.props)?(t.el.__isMounted=!1,Ct(()=>{h(),delete t.el.__isMounted},a)):h()}else{if(O(t.props)&&!1===e.el.__isMounted)return void Ct(()=>{U.process(e,t,n,i,r,a,s,o,l,c)},a);t.el=e.el,t.targetStart=e.targetStart;const u=t.anchor=e.anchor,p=t.target=e.target,m=t.targetAnchor=e.targetAnchor,v=D(e.props),y=v?n:p,_=v?u:m;if("svg"===s||N(p)?s="svg":("mathml"===s||k(p))&&(s="mathml"),b?(h(e.dynamicChildren,b,y,r,a,s,o),Ot(e,t,!0)):l||d(e,t,y,_,r,a,s,o,!1),g)v?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):B(t,n,u,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=F(t.props,f);e&&B(t,e,null,c,0)}else v&&B(t,p,m,c,1);W(t,g)}},remove(e,t,n,{um:i,o:{remove:r}},a){const{shapeFlag:s,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=e;if(d&&(r(c),r(u)),a&&r(l),16&s){const e=a||!D(h);for(let r=0;r<o.length;r++){const a=o[r];i(a,t,n,e,!!a.dynamicChildren)}}},move:B,hydrate:V};function B(e,t,n,{o:{insert:i},m:r},a=2){0===a&&i(e.targetAnchor,t,n);const{el:s,anchor:o,shapeFlag:l,children:c,props:u}=e,d=2===a;if(d&&i(s,t,n),(!d||D(u))&&16&l)for(let h=0;h<c.length;h++)r(c[h],t,n,2);d&&i(o,t,n)}function V(e,t,n,i,r,a,{o:{nextSibling:s,parentNode:o,querySelector:l,insert:c,createText:u}},d){const h=t.target=F(t.props,l);if(h){const l=D(t.props),p=h._lpa||h.firstChild;if(16&t.shapeFlag)if(l)t.anchor=d(s(e),t,o(e),n,i,r,a),t.targetStart=p,t.targetAnchor=p&&s(p);else{t.anchor=s(e);let o=p;while(o){if(o&&8===o.nodeType)if("teleport start anchor"===o.data)t.targetStart=o;else if("teleport anchor"===o.data){t.targetAnchor=o,h._lpa=t.targetAnchor&&s(t.targetAnchor);break}o=s(o)}t.targetAnchor||H(h,t,u,c),d(p&&s(p),t,h,n,i,r,a)}W(t,l)}return t.anchor&&s(t.anchor)}const z=U;function W(e,t){const n=e.ctx;if(n&&n.ut){let i,r;t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);while(i&&i!==r)1===i.nodeType&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function H(e,t,n,i){const r=t.targetStart=n(""),a=t.targetAnchor=n("");return r[P]=a,e&&(i(r,e),i(a,e)),a}const G=Symbol("_leaveCb"),j=Symbol("_enterCb");function X(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xe(()=>{e.isMounted=!0}),we(()=>{e.isUnmounting=!0}),e}const q=[Function,Array],$={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:q,onEnter:q,onAfterEnter:q,onEnterCancelled:q,onBeforeLeave:q,onLeave:q,onAfterLeave:q,onLeaveCancelled:q,onBeforeAppear:q,onAppear:q,onAfterAppear:q,onAppearCancelled:q},Y=e=>{const t=e.subTree;return t.component?Y(t.component):t},K={name:"BaseTransition",props:$,setup(e,{slots:t}){const n=Fn(),r=X();return()=>{const a=t.default&&re(t.default(),!0);if(!a||!a.length)return;const s=Z(a),o=(0,i.ux)(e),{mode:l}=o;if(r.isLeaving)return te(s);const c=ne(s);if(!c)return te(s);let u=ee(c,o,r,n,e=>u=e);c.type!==sn&&ie(c,u);let d=n.subTree&&ne(n.subTree);if(d&&d.type!==sn&&!yn(c,d)&&Y(n).type!==sn){let e=ee(d,o,r,n);if(ie(d,e),"out-in"===l&&c.type!==sn)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,8&n.job.flags||n.update(),delete e.afterLeave,d=void 0},te(s);"in-out"===l&&c.type!==sn?e.delayLeave=(e,t,n)=>{const i=Q(r,d);i[String(d.key)]=d,e[G]=()=>{t(),e[G]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{n(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function Z(e){let t=e[0];if(e.length>1){let n=!1;for(const i of e)if(i.type!==sn){0,t=i,n=!0;break}}return t}const J=K;function Q(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function ee(e,t,n,i,a){const{appear:o,mode:l,persisted:c=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:f,onLeave:m,onAfterLeave:v,onLeaveCancelled:g,onBeforeAppear:y,onAppear:_,onAfterAppear:b,onAppearCancelled:x}=t,S=String(e.key),M=Q(n,e),w=(e,t)=>{e&&s(e,i,9,t)},E=(e,t)=>{const n=t[1];w(e,t),(0,r.cy)(e)?e.every(e=>e.length<=1)&&n():e.length<=1&&n()},T={mode:l,persisted:c,beforeEnter(t){let i=u;if(!n.isMounted){if(!o)return;i=y||u}t[G]&&t[G](!0);const r=M[S];r&&yn(e,r)&&r.el[G]&&r.el[G](),w(i,[t])},enter(e){let t=d,i=h,r=p;if(!n.isMounted){if(!o)return;t=_||d,i=b||h,r=x||p}let a=!1;const s=e[j]=t=>{a||(a=!0,w(t?r:i,[e]),T.delayedLeave&&T.delayedLeave(),e[j]=void 0)};t?E(t,[e,s]):s()},leave(t,i){const r=String(e.key);if(t[j]&&t[j](!0),n.isUnmounting)return i();w(f,[t]);let a=!1;const s=t[G]=n=>{a||(a=!0,i(),w(n?g:v,[t]),t[G]=void 0,M[r]===e&&delete M[r])};M[r]=e,m?E(m,[t,s]):s()},clone(e){const r=ee(e,t,n,i,a);return a&&a(r),r}};return T}function te(e){if(ue(e))return e=En(e),e.children=null,e}function ne(e){if(!ue(e))return I(e.type)&&e.children?Z(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&(0,r.Tn)(n.default))return n.default()}}function ie(e,t){6&e.shapeFlag&&e.component?(e.transition=t,ie(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function re(e,t=!1,n){let i=[],r=0;for(let a=0;a<e.length;a++){let s=e[a];const o=null==n?s.key:String(n)+String(null!=s.key?s.key:a);s.type===rn?(128&s.patchFlag&&r++,i=i.concat(re(s.children,t,o))):(t||s.type!==sn)&&i.push(null!=o?En(s,{key:o}):s)}if(r>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}
/*! #__NO_SIDE_EFFECTS__ */function ae(e,t){return(0,r.Tn)(e)?(()=>(0,r.X$)({name:e.name},t,{setup:e}))():e}function se(){const e=Fn();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function oe(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function le(e,t,n,s,o=!1){if((0,r.cy)(e))return void e.forEach((e,i)=>le(e,t&&((0,r.cy)(t)?t[i]:t),n,s,o));if(ce(s)&&!o)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&le(e,t,n,s.component.subTree));const l=4&s.shapeFlag?Jn(s.component):s.el,c=o?null:l,{i:u,r:d}=e;const h=t&&t.r,p=u.refs===r.MZ?u.refs={}:u.refs,f=u.setupState,m=(0,i.ux)(f),v=f===r.MZ?r.NO:e=>(0,r.$3)(m,e),g=e=>!0;if(null!=h&&h!==d)if((0,r.Kg)(h))p[h]=null,v(h)&&(f[h]=null);else if((0,i.i9)(h)){g(h)&&(h.value=null);const e=t;e.k&&(p[e.k]=null)}if((0,r.Tn)(d))a(d,u,12,[c,p]);else{const t=(0,r.Kg)(d),a=(0,i.i9)(d);if(t||a){const i=()=>{if(e.f){const n=t?v(d)?f[d]:p[d]:g(d)||!e.k?d.value:p[e.k];if(o)(0,r.cy)(n)&&(0,r.TF)(n,l);else if((0,r.cy)(n))n.includes(l)||n.push(l);else if(t)p[d]=[l],v(d)&&(f[d]=p[d]);else{const t=[l];g(d)&&(d.value=t),e.k&&(p[e.k]=t)}}else t?(p[d]=c,v(d)&&(f[d]=c)):a&&(g(d)&&(d.value=c),e.k&&(p[e.k]=c))};c?(i.id=-1,Ct(i,n)):i()}else 0}}(0,r.We)().requestIdleCallback,(0,r.We)().cancelIdleCallback;const ce=e=>!!e.type.__asyncLoader;
/*! #__NO_SIDE_EFFECTS__ */const ue=e=>e.type.__isKeepAlive;RegExp,RegExp;function de(e,t){return(0,r.cy)(e)?e.some(e=>de(e,t)):(0,r.Kg)(e)?e.split(",").includes(t):!!(0,r.gd)(e)&&(e.lastIndex=0,e.test(t))}function he(e,t){fe(e,"a",t)}function pe(e,t){fe(e,"da",t)}function fe(e,t,n=kn){const i=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(ye(t,i,n),n){let e=n.parent;while(e&&e.parent)ue(e.parent.vnode)&&me(i,t,n,e),e=e.parent}}function me(e,t,n,i){const a=ye(t,e,i,!0);Ee(()=>{(0,r.TF)(i[t],a)},n)}function ve(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ge(e){return 128&e.shapeFlag?e.ssContent:e}function ye(e,t,n=kn,r=!1){if(n){const a=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{(0,i.C4)();const a=Vn(n),o=s(t,n,e,r);return a(),(0,i.bl)(),o});return r?a.unshift(o):a.push(o),o}}const _e=e=>(t,n=kn)=>{jn&&"sp"!==e||ye(e,(...e)=>t(...e),n)},be=_e("bm"),xe=_e("m"),Se=_e("bu"),Me=_e("u"),we=_e("bum"),Ee=_e("um"),Te=_e("sp"),Ae=_e("rtg"),Ce=_e("rtc");function Re(e,t=kn){ye("ec",e,t)}const Le="components";function Pe(e,t){return Oe(Le,e,!0,t)||e}const Ie=Symbol.for("v-ndc");function De(e){return(0,r.Kg)(e)?Oe(Le,e,!1)||e:e||Ie}function Oe(e,t,n=!0,i=!1){const a=E||kn;if(a){const n=a.type;if(e===Le){const e=Qn(n,!1);if(e&&(e===t||e===(0,r.PT)(t)||e===(0,r.ZH)((0,r.PT)(t))))return n}const s=Ne(a[e]||n[e],t)||Ne(a.appContext[e],t);return!s&&i?n:s}}function Ne(e,t){return e&&(e[t]||e[(0,r.PT)(t)]||e[(0,r.ZH)((0,r.PT)(t))])}function ke(e,t,n,a){let s;const o=n&&n[a],l=(0,r.cy)(e);if(l||(0,r.Kg)(e)){const n=l&&(0,i.g8)(e);let r=!1,a=!1;n&&(r=!(0,i.fE)(e),a=(0,i.Tm)(e),e=(0,i.qA)(e)),s=new Array(e.length);for(let l=0,c=e.length;l<c;l++)s[l]=t(r?a?(0,i.a1)((0,i.lJ)(e[l])):(0,i.lJ)(e[l]):e[l],l,void 0,o&&o[l])}else if("number"===typeof e){0,s=new Array(e);for(let n=0;n<e;n++)s[n]=t(n+1,n,void 0,o&&o[n])}else if((0,r.Gv)(e))if(e[Symbol.iterator])s=Array.from(e,(e,n)=>t(e,n,void 0,o&&o[n]));else{const n=Object.keys(e);s=new Array(n.length);for(let i=0,r=n.length;i<r;i++){const r=n[i];s[i]=t(e[r],r,i,o&&o[i])}}else s=[];return n&&(n[a]=s),s}const Fe=e=>e?Wn(e)?Jn(e):Fe(e.parent):null,Ue=(0,r.X$)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fe(e.parent),$root:e=>Fe(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qe(e),$forceUpdate:e=>e.f||(e.f=()=>{y(e.update)}),$nextTick:e=>e.n||(e.n=v.bind(e.proxy)),$watch:e=>Ht.bind(e)}),Be=(e,t)=>e!==r.MZ&&!e.__isScriptSetup&&(0,r.$3)(e,t),Ve={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:a,data:s,props:o,accessCache:l,type:c,appContext:u}=e;let d;if("$"!==t[0]){const i=l[t];if(void 0!==i)switch(i){case 1:return a[t];case 2:return s[t];case 4:return n[t];case 3:return o[t]}else{if(Be(a,t))return l[t]=1,a[t];if(s!==r.MZ&&(0,r.$3)(s,t))return l[t]=2,s[t];if((d=e.propsOptions[0])&&(0,r.$3)(d,t))return l[t]=3,o[t];if(n!==r.MZ&&(0,r.$3)(n,t))return l[t]=4,n[t];We&&(l[t]=0)}}const h=Ue[t];let p,f;return h?("$attrs"===t&&(0,i.u4)(e.attrs,"get",""),h(e)):(p=c.__cssModules)&&(p=p[t])?p:n!==r.MZ&&(0,r.$3)(n,t)?(l[t]=4,n[t]):(f=u.config.globalProperties,(0,r.$3)(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:i,setupState:a,ctx:s}=e;return Be(a,t)?(a[t]=n,!0):i!==r.MZ&&(0,r.$3)(i,t)?(i[t]=n,!0):!(0,r.$3)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:a,propsOptions:s,type:o}},l){let c,u;return!!(n[l]||e!==r.MZ&&"$"!==l[0]&&(0,r.$3)(e,l)||Be(t,l)||(c=s[0])&&(0,r.$3)(c,l)||(0,r.$3)(i,l)||(0,r.$3)(Ue,l)||(0,r.$3)(a.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,r.$3)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ze(e){return(0,r.cy)(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let We=!0;function He(e){const t=qe(e),n=e.proxy,a=e.ctx;We=!1,t.beforeCreate&&je(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:l,watch:c,provide:u,inject:d,created:h,beforeMount:p,mounted:f,beforeUpdate:m,updated:v,activated:g,deactivated:y,beforeDestroy:_,beforeUnmount:b,destroyed:x,unmounted:S,render:M,renderTracked:w,renderTriggered:E,errorCaptured:T,serverPrefetch:A,expose:C,inheritAttrs:R,components:L,directives:P,filters:I}=t,D=null;if(d&&Ge(d,a,D),l)for(const i in l){const e=l[i];(0,r.Tn)(e)&&(a[i]=e.bind(n))}if(s){0;const t=s.call(n,n);0,(0,r.Gv)(t)&&(e.data=(0,i.Kh)(t))}if(We=!0,o)for(const i in o){const e=o[i],t=(0,r.Tn)(e)?e.bind(n,n):(0,r.Tn)(e.get)?e.get.bind(n,n):r.tE;0;const s=!(0,r.Tn)(e)&&(0,r.Tn)(e.set)?e.set.bind(n):r.tE,l=ti({get:t,set:s});Object.defineProperty(a,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(c)for(const i in c)Xe(c[i],a,n,i);if(u){const e=(0,r.Tn)(u)?u.call(n):u;Reflect.ownKeys(e).forEach(t=>{ot(t,e[t])})}function O(e,t){(0,r.cy)(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(h&&je(h,e,"c"),O(be,p),O(xe,f),O(Se,m),O(Me,v),O(he,g),O(pe,y),O(Re,T),O(Ce,w),O(Ae,E),O(we,b),O(Ee,S),O(Te,A),(0,r.cy)(C))if(C.length){const t=e.exposed||(e.exposed={});C.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t,enumerable:!0})})}else e.exposed||(e.exposed={});M&&e.render===r.tE&&(e.render=M),null!=R&&(e.inheritAttrs=R),L&&(e.components=L),P&&(e.directives=P),A&&oe(e)}function Ge(e,t,n=r.tE){(0,r.cy)(e)&&(e=Je(e));for(const a in e){const n=e[a];let s;s=(0,r.Gv)(n)?"default"in n?lt(n.from||a,n.default,!0):lt(n.from||a):lt(n),(0,i.i9)(s)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[a]=s}}function je(e,t,n){s((0,r.cy)(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Xe(e,t,n,i){let a=i.includes(".")?Gt(n,i):()=>n[i];if((0,r.Kg)(e)){const n=t[e];(0,r.Tn)(n)&&zt(a,n)}else if((0,r.Tn)(e))zt(a,e.bind(n));else if((0,r.Gv)(e))if((0,r.cy)(e))e.forEach(e=>Xe(e,t,n,i));else{const i=(0,r.Tn)(e.handler)?e.handler.bind(n):t[e.handler];(0,r.Tn)(i)&&zt(a,i,e)}else 0}function qe(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:a,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,l=s.get(t);let c;return l?c=l:a.length||n||i?(c={},a.length&&a.forEach(e=>$e(c,e,o,!0)),$e(c,t,o)):c=t,(0,r.Gv)(t)&&s.set(t,c),c}function $e(e,t,n,i=!1){const{mixins:r,extends:a}=t;a&&$e(e,a,n,!0),r&&r.forEach(t=>$e(e,t,n,!0));for(const s in t)if(i&&"expose"===s);else{const i=Ye[s]||n&&n[s];e[s]=i?i(e[s],t[s]):t[s]}return e}const Ye={data:Ke,props:tt,emits:tt,methods:et,computed:et,beforeCreate:Qe,created:Qe,beforeMount:Qe,mounted:Qe,beforeUpdate:Qe,updated:Qe,beforeDestroy:Qe,beforeUnmount:Qe,destroyed:Qe,unmounted:Qe,activated:Qe,deactivated:Qe,errorCaptured:Qe,serverPrefetch:Qe,components:et,directives:et,watch:nt,provide:Ke,inject:Ze};function Ke(e,t){return t?e?function(){return(0,r.X$)((0,r.Tn)(e)?e.call(this,this):e,(0,r.Tn)(t)?t.call(this,this):t)}:t:e}function Ze(e,t){return et(Je(e),Je(t))}function Je(e){if((0,r.cy)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Qe(e,t){return e?[...new Set([].concat(e,t))]:t}function et(e,t){return e?(0,r.X$)(Object.create(null),e,t):t}function tt(e,t){return e?(0,r.cy)(e)&&(0,r.cy)(t)?[...new Set([...e,...t])]:(0,r.X$)(Object.create(null),ze(e),ze(null!=t?t:{})):t}function nt(e,t){if(!e)return t;if(!t)return e;const n=(0,r.X$)(Object.create(null),e);for(const i in t)n[i]=Qe(e[i],t[i]);return n}function it(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rt=0;function at(e,t){return function(n,i=null){(0,r.Tn)(n)||(n=(0,r.X$)({},n)),null==i||(0,r.Gv)(i)||(i=null);const a=it(),o=new WeakSet,l=[];let c=!1;const u=a.app={_uid:rt++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:ii,get config(){return a.config},set config(e){0},use(e,...t){return o.has(e)||(e&&(0,r.Tn)(e.install)?(o.add(e),e.install(u,...t)):(0,r.Tn)(e)&&(o.add(e),e(u,...t))),u},mixin(e){return a.mixins.includes(e)||a.mixins.push(e),u},component(e,t){return t?(a.components[e]=t,u):a.components[e]},directive(e,t){return t?(a.directives[e]=t,u):a.directives[e]},mount(r,s,o){if(!c){0;const l=u._ceVNode||Sn(n,i);return l.appContext=a,!0===o?o="svg":!1===o&&(o=void 0),s&&t?t(l,r):e(l,r,o),c=!0,u._container=r,r.__vue_app__=u,Jn(l.component)}},onUnmount(e){l.push(e)},unmount(){c&&(s(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(e,t){return a.provides[e]=t,u},runWithContext(e){const t=st;st=u;try{return e()}finally{st=t}}};return u}}let st=null;function ot(e,t){if(kn){let n=kn.provides;const i=kn.parent&&kn.parent.provides;i===n&&(n=kn.provides=Object.create(i)),n[e]=t}else 0}function lt(e,t,n=!1){const i=Fn();if(i||st){let a=st?st._context.provides:i?null==i.parent||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&(0,r.Tn)(t)?t.call(i&&i.proxy):t}else 0}const ct={},ut=()=>Object.create(ct),dt=e=>Object.getPrototypeOf(e)===ct;function ht(e,t,n,r=!1){const a={},s=ut();e.propsDefaults=Object.create(null),ft(e,t,a,s);for(const i in e.propsOptions[0])i in a||(a[i]=void 0);n?e.props=r?a:(0,i.Gc)(a):e.type.props?e.props=a:e.props=s,e.attrs=s}function pt(e,t,n,a){const{props:s,attrs:o,vnode:{patchFlag:l}}=e,c=(0,i.ux)(s),[u]=e.propsOptions;let d=!1;if(!(a||l>0)||16&l){let i;ft(e,t,s,o)&&(d=!0);for(const a in c)t&&((0,r.$3)(t,a)||(i=(0,r.Tg)(a))!==a&&(0,r.$3)(t,i))||(u?!n||void 0===n[a]&&void 0===n[i]||(s[a]=mt(u,c,a,void 0,e,!0)):delete s[a]);if(o!==c)for(const e in o)t&&(0,r.$3)(t,e)||(delete o[e],d=!0)}else if(8&l){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let a=n[i];if($t(e.emitsOptions,a))continue;const l=t[a];if(u)if((0,r.$3)(o,a))l!==o[a]&&(o[a]=l,d=!0);else{const t=(0,r.PT)(a);s[t]=mt(u,c,t,l,e,!1)}else l!==o[a]&&(o[a]=l,d=!0)}}d&&(0,i.hZ)(e.attrs,"set","")}function ft(e,t,n,a){const[s,o]=e.propsOptions;let l,c=!1;if(t)for(let i in t){if((0,r.SU)(i))continue;const u=t[i];let d;s&&(0,r.$3)(s,d=(0,r.PT)(i))?o&&o.includes(d)?(l||(l={}))[d]=u:n[d]=u:$t(e.emitsOptions,i)||i in a&&u===a[i]||(a[i]=u,c=!0)}if(o){const t=(0,i.ux)(n),a=l||r.MZ;for(let i=0;i<o.length;i++){const l=o[i];n[l]=mt(s,t,l,a[l],e,!(0,r.$3)(a,l))}}return c}function mt(e,t,n,i,a,s){const o=e[n];if(null!=o){const e=(0,r.$3)(o,"default");if(e&&void 0===i){const e=o.default;if(o.type!==Function&&!o.skipFactory&&(0,r.Tn)(e)){const{propsDefaults:r}=a;if(n in r)i=r[n];else{const s=Vn(a);i=r[n]=e.call(null,t),s()}}else i=e;a.ce&&a.ce._setProp(n,i)}o[0]&&(s&&!e?i=!1:!o[1]||""!==i&&i!==(0,r.Tg)(n)||(i=!0))}return i}const vt=new WeakMap;function gt(e,t,n=!1){const i=n?vt:t.propsCache,a=i.get(e);if(a)return a;const s=e.props,o={},l=[];let c=!1;if(!(0,r.Tn)(e)){const i=e=>{c=!0;const[n,i]=gt(e,t,!0);(0,r.X$)(o,n),i&&l.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!s&&!c)return(0,r.Gv)(e)&&i.set(e,r.Oj),r.Oj;if((0,r.cy)(s))for(let d=0;d<s.length;d++){0;const e=(0,r.PT)(s[d]);yt(e)&&(o[e]=r.MZ)}else if(s){0;for(const e in s){const t=(0,r.PT)(e);if(yt(t)){const n=s[e],i=o[t]=(0,r.cy)(n)||(0,r.Tn)(n)?{type:n}:(0,r.X$)({},n),a=i.type;let c=!1,u=!0;if((0,r.cy)(a))for(let e=0;e<a.length;++e){const t=a[e],n=(0,r.Tn)(t)&&t.name;if("Boolean"===n){c=!0;break}"String"===n&&(u=!1)}else c=(0,r.Tn)(a)&&"Boolean"===a.name;i[0]=c,i[1]=u,(c||(0,r.$3)(i,"default"))&&l.push(t)}}}const u=[o,l];return(0,r.Gv)(e)&&i.set(e,u),u}function yt(e){return"$"!==e[0]&&!(0,r.SU)(e)}const _t=e=>"_"===e||"_ctx"===e||"$stable"===e,bt=e=>(0,r.cy)(e)?e.map(Cn):[Cn(e)],xt=(e,t,n)=>{if(t._n)return t;const i=C((...e)=>bt(t(...e)),n);return i._c=!1,i},St=(e,t,n)=>{const i=e._ctx;for(const a in e){if(_t(a))continue;const n=e[a];if((0,r.Tn)(n))t[a]=xt(a,n,i);else if(null!=n){0;const e=bt(n);t[a]=()=>e}}},Mt=(e,t)=>{const n=bt(t);e.slots.default=()=>n},wt=(e,t,n)=>{for(const i in t)!n&&_t(i)||(e[i]=t[i])},Et=(e,t,n)=>{const i=e.slots=ut();if(32&e.vnode.shapeFlag){const e=t._;e?(wt(i,t,n),n&&(0,r.yQ)(i,"_",e,!0)):St(t,i)}else t&&Mt(e,t)},Tt=(e,t,n)=>{const{vnode:i,slots:a}=e;let s=!0,o=r.MZ;if(32&i.shapeFlag){const e=t._;e?n&&1===e?s=!1:wt(a,t,n):(s=!t.$stable,St(t,a)),o=t}else t&&(Mt(e,t),o={default:1});if(s)for(const r in a)_t(r)||null!=o[r]||delete a[r]};function At(){}const Ct=nn;function Rt(e){return Lt(e)}function Lt(e,t){At();const n=(0,r.We)();n.__VUE__=!0;const{insert:a,remove:s,patchProp:o,createElement:l,createText:c,createComment:u,setText:d,setElementText:h,parentNode:p,nextSibling:f,setScopeId:m=r.tE,insertStaticContent:v}=e,g=(e,t,n,i=null,r=null,a=null,s=void 0,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!yn(e,t)&&(i=Z(e),X(e,r,a,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case an:_(e,t,n,i);break;case sn:b(e,t,n,i);break;case on:null==e&&M(t,n,i,s);break;case rn:N(e,t,n,i,r,a,s,o,l);break;default:1&d?T(e,t,n,i,r,a,s,o,l):6&d?k(e,t,n,i,r,a,s,o,l):(64&d||128&d)&&c.process(e,t,n,i,r,a,s,o,l,ee)}null!=u&&r?le(u,e&&e.ref,a,t||e,!t):null==u&&e&&null!=e.ref&&le(e.ref,null,a,e,!0)},_=(e,t,n,i)=>{if(null==e)a(t.el=c(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&d(n,t.children)}},b=(e,t,n,i)=>{null==e?a(t.el=u(t.children||""),n,i):t.el=e.el},M=(e,t,n,i)=>{[e.el,e.anchor]=v(e.children,t,n,i,e.el,e.anchor)},w=({el:e,anchor:t},n,i)=>{let r;while(e&&e!==t)r=f(e),a(e,n,i),e=r;a(t,n,i)},E=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=f(e),s(e),e=n;s(t)},T=(e,t,n,i,r,a,s,o,l)=>{"svg"===t.type?s="svg":"math"===t.type&&(s="mathml"),null==e?A(t,n,i,r,a,s,o,l):I(e,t,r,a,s,o,l)},A=(e,t,n,i,s,c,u,d)=>{let p,f;const{props:m,shapeFlag:v,transition:g,dirs:y}=e;if(p=e.el=l(e.type,c,m&&m.is,m),8&v?h(p,e.children):16&v&&R(e.children,p,null,i,s,Pt(e,c),u,d),y&&L(e,null,i,"created"),C(p,e,e.scopeId,u,i),m){for(const e in m)"value"===e||(0,r.SU)(e)||o(p,e,null,m[e],c,i);"value"in m&&o(p,"value",null,m.value,c),(f=m.onVnodeBeforeMount)&&In(f,i,e)}y&&L(e,null,i,"beforeMount");const _=Dt(s,g);_&&g.beforeEnter(p),a(p,t,n),((f=m&&m.onVnodeMounted)||_||y)&&Ct(()=>{f&&In(f,i,e),_&&g.enter(p),y&&L(e,null,i,"mounted")},s)},C=(e,t,n,i,r)=>{if(n&&m(e,n),i)for(let a=0;a<i.length;a++)m(e,i[a]);if(r){let n=r.subTree;if(t===n||tn(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=r.vnode;C(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},R=(e,t,n,i,r,a,s,o,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=o?Rn(e[c]):Cn(e[c]);g(null,l,t,n,i,r,a,s,o)}},I=(e,t,n,i,a,s,l)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||r.MZ,m=t.props||r.MZ;let v;if(n&&It(n,!1),(v=m.onVnodeBeforeUpdate)&&In(v,n,t,e),p&&L(t,e,n,"beforeUpdate"),n&&It(n,!0),(f.innerHTML&&null==m.innerHTML||f.textContent&&null==m.textContent)&&h(c,""),d?D(e.dynamicChildren,d,c,n,i,Pt(t,a),s):l||z(e,t,c,null,n,i,Pt(t,a),s,!1),u>0){if(16&u)O(c,f,m,n,a);else if(2&u&&f.class!==m.class&&o(c,"class",null,m.class,a),4&u&&o(c,"style",f.style,m.style,a),8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const i=e[t],r=f[i],s=m[i];s===r&&"value"!==i||o(c,i,r,s,a,n)}}1&u&&e.children!==t.children&&h(c,t.children)}else l||null!=d||O(c,f,m,n,a);((v=m.onVnodeUpdated)||p)&&Ct(()=>{v&&In(v,n,t,e),p&&L(t,e,n,"updated")},i)},D=(e,t,n,i,r,a,s)=>{for(let o=0;o<t.length;o++){const l=e[o],c=t[o],u=l.el&&(l.type===rn||!yn(l,c)||198&l.shapeFlag)?p(l.el):n;g(l,c,u,null,i,r,a,s,!0)}},O=(e,t,n,i,a)=>{if(t!==n){if(t!==r.MZ)for(const s in t)(0,r.SU)(s)||s in n||o(e,s,t[s],null,a,i);for(const s in n){if((0,r.SU)(s))continue;const l=n[s],c=t[s];l!==c&&"value"!==s&&o(e,s,c,l,a,i)}"value"in n&&o(e,"value",t.value,n.value,a)}},N=(e,t,n,i,r,s,o,l,u)=>{const d=t.el=e?e.el:c(""),h=t.anchor=e?e.anchor:c("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(l=l?l.concat(m):m),null==e?(a(d,n,i),a(h,n,i),R(t.children||[],n,h,r,s,o,l,u)):p>0&&64&p&&f&&e.dynamicChildren?(D(e.dynamicChildren,f,n,r,s,o,l),(null!=t.key||r&&t===r.subTree)&&Ot(e,t,!0)):z(e,t,n,h,r,s,o,l,u)},k=(e,t,n,i,r,a,s,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,s,l):F(t,n,i,r,a,s,l):U(e,t,l)},F=(e,t,n,i,r,a,s)=>{const o=e.component=Nn(e,i,r);if(ue(e)&&(o.ctx.renderer=ee),Xn(o,!1,s),o.asyncDep){if(r&&r.registerDep(o,B,s),!e.el){const i=o.subTree=Sn(sn);b(null,i,t,n),e.placeholder=i.el}}else B(o,e,t,n,r,a,s)},U=(e,t,n)=>{const i=t.component=e.component;if(Jt(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void V(i,t,n);i.next=t,i.update()}else t.el=e.el,i.vnode=t},B=(e,t,n,a,s,o,l)=>{const c=()=>{if(e.isMounted){let{next:t,bu:n,u:i,parent:a,vnode:u}=e;{const n=kt(e);if(n)return t&&(t.el=u.el,V(e,t,l)),void n.asyncDep.then(()=>{e.isUnmounted||c()})}let d,h=t;0,It(e,!1),t?(t.el=u.el,V(e,t,l)):t=u,n&&(0,r.DY)(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&In(d,a,t,u),It(e,!0);const f=Yt(e);0;const m=e.subTree;e.subTree=f,g(m,f,p(m.el),Z(m),e,s,o),t.el=f.el,null===h&&en(e,f.el),i&&Ct(i,s),(d=t.props&&t.props.onVnodeUpdated)&&Ct(()=>In(d,a,t,u),s)}else{let i;const{el:l,props:c}=t,{bm:u,m:d,parent:h,root:p,type:f}=e,m=ce(t);if(It(e,!1),u&&(0,r.DY)(u),!m&&(i=c&&c.onVnodeBeforeMount)&&In(i,h,t),It(e,!0),l&&ne){const t=()=>{e.subTree=Yt(e),ne(l,e.subTree,e,s,null)};m&&f.__asyncHydrate?f.__asyncHydrate(l,e,t):t()}else{p.ce&&!1!==p.ce._def.shadowRoot&&p.ce._injectChildStyle(f);const i=e.subTree=Yt(e);0,g(null,i,n,a,e,s,o),t.el=i.el}if(d&&Ct(d,s),!m&&(i=c&&c.onVnodeMounted)){const e=t;Ct(()=>In(i,h,e),s)}(256&t.shapeFlag||h&&ce(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&Ct(e.a,s),e.isMounted=!0,t=n=a=null}};e.scope.on();const u=e.effect=new i.X2(c);e.scope.off();const d=e.update=u.run.bind(u),h=e.job=u.runIfDirty.bind(u);h.i=e,h.id=e.uid,u.scheduler=()=>y(h),It(e,!0),d()},V=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,pt(e,t.props,r,n),Tt(e,t.children,n),(0,i.C4)(),x(e),(0,i.bl)()},z=(e,t,n,i,r,a,s,o,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void H(c,d,n,i,r,a,s,o,l);if(256&p)return void W(c,d,n,i,r,a,s,o,l)}8&f?(16&u&&K(c,r,a),d!==c&&h(n,d)):16&u?16&f?H(c,d,n,i,r,a,s,o,l):K(c,r,a,!0):(8&u&&h(n,""),16&f&&R(d,n,i,r,a,s,o,l))},W=(e,t,n,i,a,s,o,l,c)=>{e=e||r.Oj,t=t||r.Oj;const u=e.length,d=t.length,h=Math.min(u,d);let p;for(p=0;p<h;p++){const i=t[p]=c?Rn(t[p]):Cn(t[p]);g(e[p],i,n,null,a,s,o,l,c)}u>d?K(e,a,s,!0,!1,h):R(t,n,i,a,s,o,l,c,h)},H=(e,t,n,i,a,s,o,l,c)=>{let u=0;const d=t.length;let h=e.length-1,p=d-1;while(u<=h&&u<=p){const i=e[u],r=t[u]=c?Rn(t[u]):Cn(t[u]);if(!yn(i,r))break;g(i,r,n,null,a,s,o,l,c),u++}while(u<=h&&u<=p){const i=e[h],r=t[p]=c?Rn(t[p]):Cn(t[p]);if(!yn(i,r))break;g(i,r,n,null,a,s,o,l,c),h--,p--}if(u>h){if(u<=p){const e=p+1,r=e<d?t[e].el:i;while(u<=p)g(null,t[u]=c?Rn(t[u]):Cn(t[u]),n,r,a,s,o,l,c),u++}}else if(u>p)while(u<=h)X(e[u],a,s,!0),u++;else{const f=u,m=u,v=new Map;for(u=m;u<=p;u++){const e=t[u]=c?Rn(t[u]):Cn(t[u]);null!=e.key&&v.set(e.key,u)}let y,_=0;const b=p-m+1;let x=!1,S=0;const M=new Array(b);for(u=0;u<b;u++)M[u]=0;for(u=f;u<=h;u++){const i=e[u];if(_>=b){X(i,a,s,!0);continue}let r;if(null!=i.key)r=v.get(i.key);else for(y=m;y<=p;y++)if(0===M[y-m]&&yn(i,t[y])){r=y;break}void 0===r?X(i,a,s,!0):(M[r-m]=u+1,r>=S?S=r:x=!0,g(i,t[r],n,null,a,s,o,l,c),_++)}const w=x?Nt(M):r.Oj;for(y=w.length-1,u=b-1;u>=0;u--){const e=m+u,r=t[e],h=t[e+1],p=e+1<d?h.el||h.placeholder:i;0===M[u]?g(null,r,n,p,a,s,o,l,c):x&&(y<0||u!==w[y]?j(r,n,p,2):y--)}}},j=(e,t,n,i,r=null)=>{const{el:o,type:l,transition:c,children:u,shapeFlag:d}=e;if(6&d)return void j(e.component.subTree,t,n,i);if(128&d)return void e.suspense.move(t,n,i);if(64&d)return void l.move(e,t,n,ee);if(l===rn){a(o,t,n);for(let e=0;e<u.length;e++)j(u[e],t,n,i);return void a(e.anchor,t,n)}if(l===on)return void w(e,t,n);const h=2!==i&&1&d&&c;if(h)if(0===i)c.beforeEnter(o),a(o,t,n),Ct(()=>c.enter(o),r);else{const{leave:i,delayLeave:r,afterLeave:l}=c,u=()=>{e.ctx.isUnmounted?s(o):a(o,t,n)},d=()=>{o._isLeaving&&o[G](!0),i(o,()=>{u(),l&&l()})};r?r(o,u,d):d()}else a(o,t,n)},X=(e,t,n,r=!1,a=!1)=>{const{type:s,props:o,ref:l,children:c,dynamicChildren:u,shapeFlag:d,patchFlag:h,dirs:p,cacheIndex:f}=e;if(-2===h&&(a=!1),null!=l&&((0,i.C4)(),le(l,null,n,e,!0),(0,i.bl)()),null!=f&&(t.renderCache[f]=void 0),256&d)return void t.ctx.deactivate(e);const m=1&d&&p,v=!ce(e);let g;if(v&&(g=o&&o.onVnodeBeforeUnmount)&&In(g,t,e),6&d)Y(e.component,n,r);else{if(128&d)return void e.suspense.unmount(n,r);m&&L(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,n,ee,r):u&&!u.hasOnce&&(s!==rn||h>0&&64&h)?K(u,t,n,!1,!0):(s===rn&&384&h||!a&&16&d)&&K(c,t,n),r&&q(e)}(v&&(g=o&&o.onVnodeUnmounted)||m)&&Ct(()=>{g&&In(g,t,e),m&&L(e,null,t,"unmounted")},n)},q=e=>{const{type:t,el:n,anchor:i,transition:r}=e;if(t===rn)return void $(n,i);if(t===on)return void E(e);const a=()=>{s(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:i}=r,s=()=>t(n,a);i?i(e.el,a,s):s()}else a()},$=(e,t)=>{let n;while(e!==t)n=f(e),s(e),e=n;s(t)},Y=(e,t,n)=>{const{bum:i,scope:a,job:s,subTree:o,um:l,m:c,a:u}=e;Ft(c),Ft(u),i&&(0,r.DY)(i),a.stop(),s&&(s.flags|=8,X(o,e,t,n)),l&&Ct(l,t),Ct(()=>{e.isUnmounted=!0},t)},K=(e,t,n,i=!1,r=!1,a=0)=>{for(let s=a;s<e.length;s++)X(e[s],t,n,i,r)},Z=e=>{if(6&e.shapeFlag)return Z(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=f(e.anchor||e.el),n=t&&t[P];return n?f(n):t};let J=!1;const Q=(e,t,n)=>{null==e?t._vnode&&X(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,n),t._vnode=e,J||(J=!0,x(),S(),J=!1)},ee={p:g,um:X,m:j,r:q,mt:F,mc:R,pc:z,pbc:D,n:Z,o:e};let te,ne;return t&&([te,ne]=t(ee)),{render:Q,hydrate:te,createApp:at(Q,te)}}function Pt({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function It({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dt(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ot(e,t,n=!1){const i=e.children,a=t.children;if((0,r.cy)(i)&&(0,r.cy)(a))for(let r=0;r<i.length;r++){const e=i[r];let t=a[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=a[r]=Rn(a[r]),t.el=e.el),n||-2===t.patchFlag||Ot(e,t)),t.type===an&&-1!==t.patchFlag&&(t.el=e.el),t.type!==sn||t.el||(t.el=e.el)}}function Nt(e){const t=e.slice(),n=[0];let i,r,a,s,o;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}a=0,s=n.length-1;while(a<s)o=a+s>>1,e[n[o]]<l?a=o+1:s=o;l<e[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}a=n.length,s=n[a-1];while(a-- >0)n[a]=s,s=t[s];return n}function kt(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:kt(t)}function Ft(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ut=Symbol.for("v-scx"),Bt=()=>{{const e=lt(Ut);return e}};function Vt(e,t){return Wt(e,null,t)}function zt(e,t,n){return Wt(e,t,n)}function Wt(e,t,n=r.MZ){const{immediate:a,deep:o,flush:l,once:c}=n;const u=(0,r.X$)({},n);const d=t&&a||!t&&"post"!==l;let h;if(jn)if("sync"===l){const e=Bt();h=e.__watcherHandles||(e.__watcherHandles=[])}else if(!d){const e=()=>{};return e.stop=r.tE,e.resume=r.tE,e.pause=r.tE,e}const p=kn;u.call=(e,t,n)=>s(e,p,t,n);let f=!1;"post"===l?u.scheduler=e=>{Ct(e,p&&p.suspense)}:"sync"!==l&&(f=!0,u.scheduler=(e,t)=>{t?e():y(e)}),u.augmentJob=e=>{t&&(e.flags|=4),f&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};const m=(0,i.wB)(e,t,u);return jn&&(h?h.push(m):d&&m()),m}function Ht(e,t,n){const i=this.proxy,a=(0,r.Kg)(e)?e.includes(".")?Gt(i,e):()=>i[e]:e.bind(i,i);let s;(0,r.Tn)(t)?s=t:(s=t.handler,n=t);const o=Vn(this),l=Wt(a,s.bind(i),n);return o(),l}function Gt(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const jt=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${(0,r.PT)(t)}Modifiers`]||e[`${(0,r.Tg)(t)}Modifiers`];function Xt(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||r.MZ;let a=n;const o=t.startsWith("update:"),l=o&&jt(i,t.slice(7));let c;l&&(l.trim&&(a=n.map(e=>(0,r.Kg)(e)?e.trim():e)),l.number&&(a=n.map(r.bB)));let u=i[c=(0,r.rU)(t)]||i[c=(0,r.rU)((0,r.PT)(t))];!u&&o&&(u=i[c=(0,r.rU)((0,r.Tg)(t))]),u&&s(u,e,6,a);const d=i[c+"Once"];if(d){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,s(d,e,6,a)}}function qt(e,t,n=!1){const i=t.emitsCache,a=i.get(e);if(void 0!==a)return a;const s=e.emits;let o={},l=!1;if(!(0,r.Tn)(e)){const i=e=>{const n=qt(e,t,!0);n&&(l=!0,(0,r.X$)(o,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return s||l?((0,r.cy)(s)?s.forEach(e=>o[e]=null):(0,r.X$)(o,s),(0,r.Gv)(e)&&i.set(e,o),o):((0,r.Gv)(e)&&i.set(e,null),null)}function $t(e,t){return!(!e||!(0,r.Mp)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,r.$3)(e,t[0].toLowerCase()+t.slice(1))||(0,r.$3)(e,(0,r.Tg)(t))||(0,r.$3)(e,t))}function Yt(e){const{type:t,vnode:n,proxy:i,withProxy:a,propsOptions:[s],slots:l,attrs:c,emit:u,render:d,renderCache:h,props:p,data:f,setupState:m,ctx:v,inheritAttrs:g}=e,y=A(e);let _,b;try{if(4&n.shapeFlag){const e=a||i,t=e;_=Cn(d.call(t,e,h,p,m,f,v)),b=c}else{const e=t;0,_=Cn(e.length>1?e(p,{attrs:c,slots:l,emit:u}):e(p,null)),b=t.props?c:Kt(c)}}catch(S){ln.length=0,o(S,e,1),_=Sn(sn)}let x=_;if(b&&!1!==g){const e=Object.keys(b),{shapeFlag:t}=x;e.length&&7&t&&(s&&e.some(r.CP)&&(b=Zt(b,s)),x=En(x,b,!1,!0))}return n.dirs&&(x=En(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&ie(x,n.transition),_=x,A(y),_}const Kt=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,r.Mp)(n))&&((t||(t={}))[n]=e[n]);return t},Zt=(e,t)=>{const n={};for(const i in e)(0,r.CP)(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function Jt(e,t,n){const{props:i,children:r,component:a}=e,{props:s,children:o,patchFlag:l}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!o||o&&o.$stable)||i!==s&&(i?!s||Qt(i,s,c):!!s);if(1024&l)return!0;if(16&l)return i?Qt(i,s,c):!!s;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==i[n]&&!$t(c,n))return!0}}return!1}function Qt(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const a=i[r];if(t[a]!==e[a]&&!$t(n,a))return!0}return!1}function en({vnode:e,parent:t},n){while(t){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i!==e)break;(e=t.vnode).el=n,t=t.parent}}const tn=e=>e.__isSuspense;function nn(e,t){t&&t.pendingBranch?(0,r.cy)(e)?t.effects.push(...e):t.effects.push(e):b(e)}const rn=Symbol.for("v-fgt"),an=Symbol.for("v-txt"),sn=Symbol.for("v-cmt"),on=Symbol.for("v-stc"),ln=[];let cn=null;function un(e=!1){ln.push(cn=e?null:[])}function dn(){ln.pop(),cn=ln[ln.length-1]||null}let hn=1;function pn(e,t=!1){hn+=e,e<0&&cn&&t&&(cn.hasOnce=!0)}function fn(e){return e.dynamicChildren=hn>0?cn||r.Oj:null,dn(),hn>0&&cn&&cn.push(e),e}function mn(e,t,n,i,r,a){return fn(xn(e,t,n,i,r,a,!0))}function vn(e,t,n,i,r){return fn(Sn(e,t,n,i,r,!0))}function gn(e){return!!e&&!0===e.__v_isVNode}function yn(e,t){return e.type===t.type&&e.key===t.key}const _n=({key:e})=>null!=e?e:null,bn=({ref:e,ref_key:t,ref_for:n})=>("number"===typeof e&&(e=""+e),null!=e?(0,r.Kg)(e)||(0,i.i9)(e)||(0,r.Tn)(e)?{i:E,r:e,k:t,f:!!n}:e:null);function xn(e,t=null,n=null,i=0,a=null,s=(e===rn?0:1),o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_n(t),ref:t&&bn(t),scopeId:T,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:E};return l?(Ln(c,n),128&s&&e.normalize(c)):n&&(c.shapeFlag|=(0,r.Kg)(n)?8:16),hn>0&&!o&&cn&&(c.patchFlag>0||6&s)&&32!==c.patchFlag&&cn.push(c),c}const Sn=Mn;function Mn(e,t=null,n=null,a=0,s=null,o=!1){if(e&&e!==Ie||(e=sn),gn(e)){const i=En(e,t,!0);return n&&Ln(i,n),hn>0&&!o&&cn&&(6&i.shapeFlag?cn[cn.indexOf(e)]=i:cn.push(i)),i.patchFlag=-2,i}if(ei(e)&&(e=e.__vccOpts),t){t=wn(t);let{class:e,style:n}=t;e&&!(0,r.Kg)(e)&&(t.class=(0,r.C4)(e)),(0,r.Gv)(n)&&((0,i.ju)(n)&&!(0,r.cy)(n)&&(n=(0,r.X$)({},n)),t.style=(0,r.Tr)(n))}const l=(0,r.Kg)(e)?1:tn(e)?128:I(e)?64:(0,r.Gv)(e)?4:(0,r.Tn)(e)?2:0;return xn(e,t,n,a,s,l,o,!0)}function wn(e){return e?(0,i.ju)(e)||dt(e)?(0,r.X$)({},e):e:null}function En(e,t,n=!1,i=!1){const{props:a,ref:s,patchFlag:o,children:l,transition:c}=e,u=t?Pn(a||{},t):a,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&_n(u),ref:t&&t.ref?n&&s?(0,r.cy)(s)?s.concat(bn(t)):[s,bn(t)]:bn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==rn?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&En(e.ssContent),ssFallback:e.ssFallback&&En(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&i&&ie(d,c.clone(d)),d}function Tn(e=" ",t=0){return Sn(an,null,e,t)}function An(e="",t=!1){return t?(un(),vn(sn,null,e)):Sn(sn,null,e)}function Cn(e){return null==e||"boolean"===typeof e?Sn(sn):(0,r.cy)(e)?Sn(rn,null,e.slice()):gn(e)?Rn(e):Sn(an,null,String(e))}function Rn(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:En(e)}function Ln(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if((0,r.cy)(t))n=16;else if("object"===typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),Ln(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||dt(t)?3===i&&E&&(1===E.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=E}}else(0,r.Tn)(t)?(t={default:t,_ctx:E},n=32):(t=String(t),64&i?(n=16,t=[Tn(t)]):n=8);e.children=t,e.shapeFlag|=n}function Pn(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=(0,r.C4)([t.class,i.class]));else if("style"===e)t.style=(0,r.Tr)([t.style,i.style]);else if((0,r.Mp)(e)){const n=t[e],a=i[e];!a||n===a||(0,r.cy)(n)&&n.includes(a)||(t[e]=n?[].concat(n,a):a)}else""!==e&&(t[e]=i[e])}return t}function In(e,t,n,i=null){s(e,t,7,[n,i])}const Dn=it();let On=0;function Nn(e,t,n){const a=e.type,s=(t?t.appContext:e.appContext)||Dn,o={uid:On++,vnode:e,type:a,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new i.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gt(a,s),emitsOptions:qt(a,s),emit:null,emitted:null,propsDefaults:r.MZ,inheritAttrs:a.inheritAttrs,ctx:r.MZ,data:r.MZ,props:r.MZ,attrs:r.MZ,slots:r.MZ,refs:r.MZ,setupState:r.MZ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Xt.bind(null,o),e.ce&&e.ce(o),o}let kn=null;const Fn=()=>kn||E;let Un,Bn;{const e=(0,r.We)(),t=(t,n)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(n),e=>{i.length>1?i.forEach(t=>t(e)):i[0](e)}};Un=t("__VUE_INSTANCE_SETTERS__",e=>kn=e),Bn=t("__VUE_SSR_SETTERS__",e=>jn=e)}const Vn=e=>{const t=kn;return Un(e),e.scope.on(),()=>{e.scope.off(),Un(t)}},zn=()=>{kn&&kn.scope.off(),Un(null)};function Wn(e){return 4&e.vnode.shapeFlag}let Hn,Gn,jn=!1;function Xn(e,t=!1,n=!1){t&&Bn(t);const{props:i,children:r}=e.vnode,a=Wn(e);ht(e,i,a,t),Et(e,r,n||t);const s=a?qn(e,t):void 0;return t&&Bn(!1),s}function qn(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ve);const{setup:s}=n;if(s){(0,i.C4)();const n=e.setupContext=s.length>1?Zn(e):null,l=Vn(e),c=a(s,e,0,[e.props,n]),u=(0,r.yL)(c);if((0,i.bl)(),l(),!u&&!e.sp||ce(e)||oe(e),u){if(c.then(zn,zn),t)return c.then(n=>{$n(e,n,t)}).catch(t=>{o(t,e,0)});e.asyncDep=c}else $n(e,c,t)}else Yn(e,t)}function $n(e,t,n){(0,r.Tn)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,r.Gv)(t)&&(e.setupState=(0,i.Pr)(t)),Yn(e,n)}function Yn(e,t,n){const a=e.type;if(!e.render){if(!t&&Hn&&!a.render){const t=a.template||qe(e).template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:s,compilerOptions:o}=a,l=(0,r.X$)((0,r.X$)({isCustomElement:n,delimiters:s},i),o);a.render=Hn(t,l)}}e.render=a.render||r.tE,Gn&&Gn(e)}{const t=Vn(e);(0,i.C4)();try{He(e)}finally{(0,i.bl)(),t()}}}const Kn={get(e,t){return(0,i.u4)(e,"get",""),e[t]}};function Zn(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Kn),slots:e.slots,emit:e.emit,expose:t}}function Jn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy((0,i.Pr)((0,i.IG)(e.exposed)),{get(t,n){return n in t?t[n]:n in Ue?Ue[n](e):void 0},has(e,t){return t in e||t in Ue}})):e.proxy}function Qn(e,t=!0){return(0,r.Tn)(e)?e.displayName||e.name:e.name||t&&e.__name}function ei(e){return(0,r.Tn)(e)&&"__vccOpts"in e}const ti=(e,t)=>{const n=(0,i.EW)(e,t,jn);return n};function ni(e,t,n){const i=arguments.length;return 2===i?(0,r.Gv)(t)&&!(0,r.cy)(t)?gn(t)?Sn(e,null,[t]):Sn(e,t):Sn(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&gn(n)&&(n=[n]),Sn(e,t,n))}const ii="3.5.20",ri=r.tE},6801:function(e,t,n){"use strict";var i=n(3724),r=n(8686),a=n(4913),s=n(8551),o=n(5397),l=n(1072);t.f=i&&!r?Object.defineProperties:function(e,t){s(e);var n,i=o(t),r=l(t),c=r.length,u=0;while(c>u)a.f(e,n=r[u++],i[n]);return e}},6817:function(e,t,n){var i=n(1068),r=n(8478),a=n(797),s=n(3534),o=n(710),l=n(5366),c=n(317),u=n(9562),d=1,h="[object Arguments]",p="[object Array]",f="[object Object]",m=Object.prototype,v=m.hasOwnProperty;function g(e,t,n,m,g,y){var _=l(e),b=l(t),x=_?p:o(e),S=b?p:o(t);x=x==h?f:x,S=S==h?f:S;var M=x==f,w=S==f,E=x==S;if(E&&c(e)){if(!c(t))return!1;_=!0,M=!1}if(E&&!M)return y||(y=new i),_||u(e)?r(e,t,n,m,g,y):a(e,t,x,n,m,g,y);if(!(n&d)){var T=M&&v.call(e,"__wrapped__"),A=w&&v.call(t,"__wrapped__");if(T||A){var C=T?e.value():e,R=A?t.value():t;return y||(y=new i),g(C,R,n,m,y)}}return!!E&&(y||(y=new i),s(e,t,n,m,g,y))}e.exports=g},6823:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},6837:function(e){"use strict";var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},6840:function(e,t,n){"use strict";var i=n(4901),r=n(4913),a=n(283),s=n(9433);e.exports=function(e,t,n,o){o||(o={});var l=o.enumerable,c=void 0!==o.name?o.name:t;if(i(n)&&a(n,c,o),o.global)l?e[t]=n:s(t,n);else{try{o.unsafe?e[t]&&(l=!0):delete e[t]}catch(u){}l?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},6849:function(e,t,n){var i=n(9531),r=i(Object,"create");e.exports=r},6903:function(e,t,n){var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},6955:function(e,t,n){"use strict";var i=n(2140),r=n(4901),a=n(2195),s=n(8227),o=s("toStringTag"),l=Object,c="Arguments"===a(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(n){}};e.exports=i?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=u(t=l(e),o))?n:c?a(t):"Object"===(i=a(t))&&r(t.callee)?"Arguments":i}},6969:function(e,t,n){"use strict";var i=n(2777),r=n(757);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},6980:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7040:function(e,t,n){"use strict";var i=n(4495);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:function(e,t,n){"use strict";var i=n(9504),r=n(9039),a=n(2195),s=Object,o=i("".split);e.exports=r(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return"String"===a(e)?o(e,""):s(e)}:s},7080:function(e,t,n){"use strict";var i=n(4402).has;e.exports=function(e){return i(e),e}},7083:function(e){function t(e){return function(){return e}}e.exports=t},7136:function(e,t,n){var i=n(8230),r=i(Object.getPrototypeOf,Object);e.exports=r},7186:function(e,t){"use strict";
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const n="158",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},r={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,o=2,l=3,c=0,u=1,d=2,h=3,p=0,f=1,m=2,v=2,g=0,y=1,_=2,b=3,x=4,S=5,M=100,w=101,E=102,T=103,A=104,C=200,R=201,L=202,P=203,I=204,D=205,O=206,N=207,k=208,F=209,U=210,B=211,V=212,z=213,W=214,H=0,G=1,j=2,X=3,q=4,$=5,Y=6,K=7,Z=0,J=1,Q=2,ee=0,te=1,ne=2,ie=3,re=4,ae=5,se="attached",oe="detached",le=300,ce=301,ue=302,de=303,he=304,pe=306,fe=1e3,me=1001,ve=1002,ge=1003,ye=1004,_e=1004,be=1005,xe=1005,Se=1006,Me=1007,we=1007,Ee=1008,Te=1008,Ae=1009,Ce=1010,Re=1011,Le=1012,Pe=1013,Ie=1014,De=1015,Oe=1016,Ne=1017,ke=1018,Fe=1020,Ue=1021,Be=1023,Ve=1024,ze=1025,We=1026,He=1027,Ge=1028,je=1029,Xe=1030,qe=1031,$e=1033,Ye=33776,Ke=33777,Ze=33778,Je=33779,Qe=35840,et=35841,tt=35842,nt=35843,it=36196,rt=37492,at=37496,st=37808,ot=37809,lt=37810,ct=37811,ut=37812,dt=37813,ht=37814,pt=37815,ft=37816,mt=37817,vt=37818,gt=37819,yt=37820,_t=37821,bt=36492,xt=36494,St=36495,Mt=36283,wt=36284,Et=36285,Tt=36286,At=2200,Ct=2201,Rt=2202,Lt=2300,Pt=2301,It=2302,Dt=2400,Ot=2401,Nt=2402,kt=2500,Ft=2501,Ut=0,Bt=1,Vt=2,zt=3e3,Wt=3001,Ht=3200,Gt=3201,jt=0,Xt=1,qt="",$t="srgb",Yt="srgb-linear",Kt="display-p3",Zt="display-p3-linear",Jt="linear",Qt="srgb",en="rec709",tn="p3",nn=0,rn=7680,an=7681,sn=7682,on=7683,ln=34055,cn=34056,un=5386,dn=512,hn=513,pn=514,fn=515,mn=516,vn=517,gn=518,yn=519,_n=512,bn=513,xn=514,Sn=515,Mn=516,wn=517,En=518,Tn=519,An=35044,Cn=35048,Rn=35040,Ln=35045,Pn=35049,In=35041,Dn=35046,On=35050,Nn=35042,kn="100",Fn="300 es",Un=1035,Bn=2e3,Vn=2001;class zn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners,i=n[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);e.target=null}}}const Wn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Hn=1234567;const Gn=Math.PI/180,jn=180/Math.PI;function Xn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=Wn[255&e]+Wn[e>>8&255]+Wn[e>>16&255]+Wn[e>>24&255]+"-"+Wn[255&t]+Wn[t>>8&255]+"-"+Wn[t>>16&15|64]+Wn[t>>24&255]+"-"+Wn[63&n|128]+Wn[n>>8&255]+"-"+Wn[n>>16&255]+Wn[n>>24&255]+Wn[255&i]+Wn[i>>8&255]+Wn[i>>16&255]+Wn[i>>24&255];return r.toLowerCase()}function qn(e,t,n){return Math.max(t,Math.min(n,e))}function $n(e,t){return(e%t+t)%t}function Yn(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)}function Kn(e,t,n){return e!==t?(n-e)/(t-e):0}function Zn(e,t,n){return(1-n)*e+n*t}function Jn(e,t,n,i){return Zn(e,t,1-Math.exp(-n*i))}function Qn(e,t=1){return t-Math.abs($n(e,2*t)-t)}function ei(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function ti(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function ni(e,t){return e+Math.floor(Math.random()*(t-e+1))}function ii(e,t){return e+Math.random()*(t-e)}function ri(e){return e*(.5-Math.random())}function ai(e){void 0!==e&&(Hn=e);let t=Hn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function si(e){return e*Gn}function oi(e){return e*jn}function li(e){return 0===(e&e-1)&&0!==e}function ci(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ui(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function di(e,t,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+i)/2),u=s((t+i)/2),d=a((t-i)/2),h=s((t-i)/2),p=a((i-t)/2),f=s((i-t)/2);switch(r){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function hi(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function pi(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const fi={DEG2RAD:Gn,RAD2DEG:jn,generateUUID:Xn,clamp:qn,euclideanModulo:$n,mapLinear:Yn,inverseLerp:Kn,lerp:Zn,damp:Jn,pingpong:Qn,smoothstep:ei,smootherstep:ti,randInt:ni,randFloat:ii,randFloatSpread:ri,seededRandom:ai,degToRad:si,radToDeg:oi,isPowerOfTwo:li,ceilPowerOfTwo:ci,floorPowerOfTwo:ui,setQuaternionFromProperEuler:di,normalize:pi,denormalize:hi};class mi{constructor(e=0,t=0){mi.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const e=Math.atan2(-this.y,-this.x)+Math.PI;return e}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(qn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class vi{constructor(e,t,n,i,r,a,s,o,l){vi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l)}set(e,t,n,i,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],_=i[7],b=i[2],x=i[5],S=i[8];return r[0]=a*f+s*g+o*b,r[3]=a*m+s*y+o*x,r[6]=a*v+s*_+o*S,r[1]=l*f+c*g+u*b,r[4]=l*m+c*y+u*x,r[7]=l*v+c*_+u*S,r[2]=d*f+h*g+p*b,r[5]=d*m+h*y+p*x,r[8]=d*v+h*_+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*r*c+n*s*o+i*r*l-i*a*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,d=s*o-c*r,h=l*r-a*o,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(s*n-i*a)*f,e[3]=d*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-s*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(gi.makeScale(e,t)),this}rotate(e){return this.premultiply(gi.makeRotation(-e)),this}translate(e,t){return this.premultiply(gi.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const gi=new vi;function yi(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const _i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function bi(e,t){return new _i[e](t)}function xi(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Si(){const e=xi("canvas");return e.style.display="block",e}const Mi={};function wi(e){e in Mi||(Mi[e]=!0,console.warn(e))}const Ei=(new vi).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Ti=(new vi).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ai={[Yt]:{transfer:Jt,primaries:en,toReference:e=>e,fromReference:e=>e},[$t]:{transfer:Qt,primaries:en,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Zt]:{transfer:Jt,primaries:tn,toReference:e=>e.applyMatrix3(Ti),fromReference:e=>e.applyMatrix3(Ei)},[Kt]:{transfer:Qt,primaries:tn,toReference:e=>e.convertSRGBToLinear().applyMatrix3(Ti),fromReference:e=>e.applyMatrix3(Ei).convertLinearToSRGB()}},Ci=new Set([Yt,Zt]),Ri={enabled:!0,_workingColorSpace:Yt,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Ci.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=Ai[t].toReference,r=Ai[n].fromReference;return r(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Ai[e].primaries},getTransfer:function(e){return e===qt?Jt:Ai[e].transfer}};function Li(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Pi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Ii;class Di{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ii&&(Ii=xi("canvas")),Ii.width=e.width,Ii.height=e.height;const n=Ii.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ii}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=xi("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Li(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Li(t[e]/255)):t[e]=Li(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Oi=0;class Ni{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Oi++}),this.uuid=Xn(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(ki(i[t].image)):e.push(ki(i[t]))}else e=ki(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function ki(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Di.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Fi=0;class Ui extends zn{constructor(e=Ui.DEFAULT_IMAGE,t=Ui.DEFAULT_MAPPING,n=me,i=me,r=Se,a=Ee,s=Be,o=Ae,l=Ui.DEFAULT_ANISOTROPY,c=qt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Fi++}),this.uuid=Xn(),this.name="",this.source=new Ni(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new mi(0,0),this.repeat=new mi(1,1),this.center=new mi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(wi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Wt?$t:qt),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==le)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case fe:e.x=e.x-Math.floor(e.x);break;case me:e.x=e.x<0?0:1;break;case ve:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case fe:e.y=e.y-Math.floor(e.y);break;case me:e.y=e.y<0?0:1;break;case ve:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return wi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===$t?Wt:zt}set encoding(e){wi("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Wt?$t:qt}}Ui.DEFAULT_IMAGE=null,Ui.DEFAULT_MAPPING=le,Ui.DEFAULT_ANISOTROPY=1;class Bi{constructor(e=0,t=0,n=0,i=1){Bi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],f=o[2],m=o[6],v=o[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+h+v-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,g=(v+1)/2,y=(c+d)/4,_=(u+f)/4,b=(p+m)/4;return e>o&&e>g?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=_/n):o>g?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=b/i):g<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=_/r,i=b/r),this.set(n,i,r,t),this}let g=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(g)<.001&&(g=1),this.x=(m-p)/g,this.y=(u-f)/g,this.z=(d-c)/g,this.w=Math.acos((l+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vi extends zn{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Bi(0,0,e,t),this.scissorTest=!1,this.viewport=new Bi(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(wi("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Wt?$t:qt),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Se,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Ui(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ni(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zi extends Vi{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Wi extends Ui{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ge,this.minFilter=ge,this.wrapR=me,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hi extends zi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Wi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Gi extends Ui{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ge,this.minFilter=ge,this.wrapR=me,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ji extends zi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Gi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Xi extends zi{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=r.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class qi{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,s){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[a+0],h=r[a+1],p=r[a+2],f=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==d||l!==h||c!==p){let e=1-s;const t=o*d+l*h+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[a],d=r[a+1],h=r[a+2],p=r[a+3];return e[t]=s*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-s*h,e[t+2]=l*p+c*h+s*d-o*u,e[t+3]=c*p-s*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),d=o(n/2),h=o(i/2),p=o(r/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+i*l-r*o,this._y=i*c+a*o+r*s-n*l,this._z=r*c+a*l+n*o-i*s,this._w=a*c-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class $i{constructor(e=0,t=0,n=0){$i.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Ki.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ki.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*i-s*n),c=2*(s*t-r*i),u=2*(r*n-a*t);return this.x=t+o*l+a*u-s*c,this.y=n+o*c+s*l-r*u,this.z=i+o*u+r*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Yi.copy(this).projectOnVector(e),this.sub(Yi)}reflect(e){return this.sub(Yi.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(qn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yi=new $i,Ki=new qi;class Zi{constructor(e=new $i(1/0,1/0,1/0),t=new $i(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Qi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Qi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Qi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Qi):Qi.fromBufferAttribute(i,t),Qi.applyMatrix4(e.matrixWorld),this.expandByPoint(Qi);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),er.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),er.copy(n.boundingBox)),er.applyMatrix4(e.matrixWorld),this.union(er)}const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Qi),Qi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(or),lr.subVectors(this.max,or),tr.subVectors(e.a,or),nr.subVectors(e.b,or),ir.subVectors(e.c,or),rr.subVectors(nr,tr),ar.subVectors(ir,nr),sr.subVectors(tr,ir);let t=[0,-rr.z,rr.y,0,-ar.z,ar.y,0,-sr.z,sr.y,rr.z,0,-rr.x,ar.z,0,-ar.x,sr.z,0,-sr.x,-rr.y,rr.x,0,-ar.y,ar.x,0,-sr.y,sr.x,0];return!!dr(t,tr,nr,ir,lr)&&(t=[1,0,0,0,1,0,0,0,1],!!dr(t,tr,nr,ir,lr)&&(cr.crossVectors(rr,ar),t=[cr.x,cr.y,cr.z],dr(t,tr,nr,ir,lr)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Qi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Qi).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ji[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ji[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ji[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ji[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ji[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ji[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ji[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ji[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ji)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ji=[new $i,new $i,new $i,new $i,new $i,new $i,new $i,new $i],Qi=new $i,er=new Zi,tr=new $i,nr=new $i,ir=new $i,rr=new $i,ar=new $i,sr=new $i,or=new $i,lr=new $i,cr=new $i,ur=new $i;function dr(e,t,n,i,r){for(let a=0,s=e.length-3;a<=s;a+=3){ur.fromArray(e,a);const s=r.x*Math.abs(ur.x)+r.y*Math.abs(ur.y)+r.z*Math.abs(ur.z),o=t.dot(ur),l=n.dot(ur),c=i.dot(ur);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const hr=new Zi,pr=new $i,fr=new $i;class mr{constructor(e=new $i,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):hr.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;pr.subVectors(e,this.center);const t=pr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(pr,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(fr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(pr.copy(e.center).add(fr)),this.expandByPoint(pr.copy(e.center).sub(fr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const vr=new $i,gr=new $i,yr=new $i,_r=new $i,br=new $i,xr=new $i,Sr=new $i;class Mr{constructor(e=new $i,t=new $i(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=vr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vr.copy(this.origin).addScaledVector(this.direction,t),vr.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){gr.copy(e).add(t).multiplyScalar(.5),yr.copy(t).sub(e).normalize(),_r.copy(this.origin).sub(gr);const r=.5*e.distanceTo(t),a=-this.direction.dot(yr),s=_r.dot(this.direction),o=-_r.dot(yr),l=_r.lengthSq(),c=Math.abs(1-a*a);let u,d,h,p;if(c>0)if(u=a*o-s,d=a*s-o,p=r*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*s)+d*(a*u+d+2*o)+l}else d=r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-a*r+s)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(a*r+s)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=a>0?-r:r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(gr).addScaledVector(yr,d),h}intersectSphere(e,t){vr.subVectors(e.center,this.origin);const n=vr.dot(this.direction),i=vr.dot(vr)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;const n=e.normal.dot(this.direction);return n*t<0}intersectBox(e,t){let n,i,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||s>i?null:((s>n||n!==n)&&(n=s),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,vr)}intersectTriangle(e,t,n,i,r){br.subVectors(t,e),xr.subVectors(n,e),Sr.crossVectors(br,xr);let a,s=this.direction.dot(Sr);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}_r.subVectors(this.origin,e);const o=a*this.direction.dot(xr.crossVectors(_r,xr));if(o<0)return null;const l=a*this.direction.dot(br.cross(_r));if(l<0)return null;if(o+l>s)return null;const c=-a*_r.dot(Sr);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class wr{constructor(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m){wr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m)}set(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=s,v[13]=o,v[2]=l,v[6]=c,v[10]=u,v[14]=d,v[3]=h,v[7]=p,v[11]=f,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new wr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Er.setFromMatrixColumn(e,0).length(),r=1/Er.setFromMatrixColumn(e,1).length(),a=1/Er.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*s,t[4]=-a*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ar,e,Cr)}lookAt(e,t,n){const i=this.elements;return Pr.subVectors(e,t),0===Pr.lengthSq()&&(Pr.z=1),Pr.normalize(),Rr.crossVectors(n,Pr),0===Rr.lengthSq()&&(1===Math.abs(n.z)?Pr.x+=1e-4:Pr.z+=1e-4,Pr.normalize(),Rr.crossVectors(n,Pr)),Rr.normalize(),Lr.crossVectors(Pr,Rr),i[0]=Rr.x,i[4]=Lr.x,i[8]=Pr.x,i[1]=Rr.y,i[5]=Lr.y,i[9]=Pr.y,i[2]=Rr.z,i[6]=Lr.z,i[10]=Pr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],x=i[0],S=i[4],M=i[8],w=i[12],E=i[1],T=i[5],A=i[9],C=i[13],R=i[2],L=i[6],P=i[10],I=i[14],D=i[3],O=i[7],N=i[11],k=i[15];return r[0]=a*x+s*E+o*R+l*D,r[4]=a*S+s*T+o*L+l*O,r[8]=a*M+s*A+o*P+l*N,r[12]=a*w+s*C+o*I+l*k,r[1]=c*x+u*E+d*R+h*D,r[5]=c*S+u*T+d*L+h*O,r[9]=c*M+u*A+d*P+h*N,r[13]=c*w+u*C+d*I+h*k,r[2]=p*x+f*E+m*R+v*D,r[6]=p*S+f*T+m*L+v*O,r[10]=p*M+f*A+m*P+v*N,r[14]=p*w+f*C+m*I+v*k,r[3]=g*x+y*E+_*R+b*D,r[7]=g*S+y*T+_*L+b*O,r[11]=g*M+y*A+_*P+b*N,r[15]=g*w+y*C+_*I+b*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14],p=e[3],f=e[7],m=e[11],v=e[15];return p*(+r*o*u-i*l*u-r*s*d+n*l*d+i*s*h-n*o*h)+f*(+t*o*h-t*l*d+r*a*d-i*a*h+i*l*c-r*o*c)+m*(+t*l*u-t*s*h-r*a*u+n*a*h+r*s*c-n*l*c)+v*(-i*s*c-t*o*u+t*s*d+i*a*u-n*a*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],v=e[15],g=u*m*l-f*d*l+f*o*h-s*m*h-u*o*v+s*d*v,y=p*d*l-c*m*l-p*o*h+a*m*h+c*o*v-a*d*v,_=c*f*l-p*u*l+p*s*h-a*f*h-c*s*v+a*u*v,b=p*u*o-c*f*o-p*s*d+a*f*d+c*s*m-a*u*m,x=t*g+n*y+i*_+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=g*S,e[1]=(f*d*r-u*m*r-f*i*h+n*m*h+u*i*v-n*d*v)*S,e[2]=(s*m*r-f*o*r+f*i*l-n*m*l-s*i*v+n*o*v)*S,e[3]=(u*o*r-s*d*r-u*i*l+n*d*l+s*i*h-n*o*h)*S,e[4]=y*S,e[5]=(c*m*r-p*d*r+p*i*h-t*m*h-c*i*v+t*d*v)*S,e[6]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*v-t*o*v)*S,e[7]=(a*d*r-c*o*r+c*i*l-t*d*l-a*i*h+t*o*h)*S,e[8]=_*S,e[9]=(p*u*r-c*f*r-p*n*h+t*f*h+c*n*v-t*u*v)*S,e[10]=(a*f*r-p*s*r+p*n*l-t*f*l-a*n*v+t*s*v)*S,e[11]=(c*s*r-a*u*r-c*n*l+t*u*l+a*n*h-t*s*h)*S,e[12]=b*S,e[13]=(c*f*i-p*u*i+p*n*d-t*f*d-c*n*m+t*u*m)*S,e[14]=(p*s*i-a*f*i-p*n*o+t*f*o+a*n*m-t*s*m)*S,e[15]=(a*u*i-c*s*i+c*n*o-t*u*o-a*n*d+t*s*d)*S,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,c*s+n,c*o-i*a,0,l*o-i*s,c*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,u=s+s,d=r*l,h=r*c,p=r*u,f=a*c,m=a*u,v=s*u,g=o*l,y=o*c,_=o*u,b=n.x,x=n.y,S=n.z;return i[0]=(1-(f+v))*b,i[1]=(h+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(h-_)*x,i[5]=(1-(d+v))*x,i[6]=(m+g)*x,i[7]=0,i[8]=(p+y)*S,i[9]=(m-g)*S,i[10]=(1-(d+f))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Er.set(i[0],i[1],i[2]).length();const a=Er.set(i[4],i[5],i[6]).length(),s=Er.set(i[8],i[9],i[10]).length(),o=this.determinant();o<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Tr.copy(this);const l=1/r,c=1/a,u=1/s;return Tr.elements[0]*=l,Tr.elements[1]*=l,Tr.elements[2]*=l,Tr.elements[4]*=c,Tr.elements[5]*=c,Tr.elements[6]*=c,Tr.elements[8]*=u,Tr.elements[9]*=u,Tr.elements[10]*=u,t.setFromRotationMatrix(Tr),n.x=r,n.y=a,n.z=s,this}makePerspective(e,t,n,i,r,a,s=Bn){const o=this.elements,l=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,p;if(s===Bn)h=-(a+r)/(a-r),p=-2*a*r/(a-r);else{if(s!==Vn)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-a/(a-r),p=-a*r/(a-r)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,a,s=Bn){const o=this.elements,l=1/(t-e),c=1/(n-i),u=1/(a-r),d=(t+e)*l,h=(n+i)*c;let p,f;if(s===Bn)p=(a+r)*u,f=-2*u;else{if(s!==Vn)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=r*u,f=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=f,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Er=new $i,Tr=new wr,Ar=new $i(0,0,0),Cr=new $i(1,1,1),Rr=new $i,Lr=new $i,Pr=new $i,Ir=new wr,Dr=new qi;class Or{constructor(e=0,t=0,n=0,i=Or.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(qn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-qn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(qn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-qn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-qn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ir.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ir,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Dr.setFromEuler(this),this.setFromQuaternion(Dr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Or.DEFAULT_ORDER="XYZ";class Nr{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let kr=0;const Fr=new $i,Ur=new qi,Br=new wr,Vr=new $i,zr=new $i,Wr=new $i,Hr=new qi,Gr=new $i(1,0,0),jr=new $i(0,1,0),Xr=new $i(0,0,1),qr={type:"added"},$r={type:"removed"};class Yr extends zn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:kr++}),this.uuid=Xn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yr.DEFAULT_UP.clone();const e=new $i,t=new Or,n=new qi,i=new $i(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new wr},normalMatrix:{value:new vi}}),this.matrix=new wr,this.matrixWorld=new wr,this.matrixAutoUpdate=Yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Nr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.multiply(Ur),this}rotateOnWorldAxis(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.premultiply(Ur),this}rotateX(e){return this.rotateOnAxis(Gr,e)}rotateY(e){return this.rotateOnAxis(jr,e)}rotateZ(e){return this.rotateOnAxis(Xr,e)}translateOnAxis(e,t){return Fr.copy(e).applyQuaternion(this.quaternion),this.position.add(Fr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Gr,e)}translateY(e){return this.translateOnAxis(jr,e)}translateZ(e){return this.translateOnAxis(Xr,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Br.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Vr.copy(e):Vr.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),zr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Br.lookAt(zr,Vr,this.up):Br.lookAt(Vr,zr,this.up),this.quaternion.setFromRotationMatrix(Br),i&&(Br.extractRotation(i.matrixWorld),Ur.setFromRotationMatrix(Br),this.quaternion.premultiply(Ur.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(qr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($r)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Br.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Br.multiply(e.parent.matrixWorld)),e.applyMatrix4(Br),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n],r=i.getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(e,t);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zr,e,Wr),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zr,Hr,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Yr.DEFAULT_UP=new $i(0,1,0),Yr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Kr=new $i,Zr=new $i,Jr=new $i,Qr=new $i,ea=new $i,ta=new $i,na=new $i,ia=new $i,ra=new $i,aa=new $i;let sa=!1;class oa{constructor(e=new $i,t=new $i,n=new $i){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Kr.subVectors(e,t),i.cross(Kr);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Kr.subVectors(i,t),Zr.subVectors(n,t),Jr.subVectors(e,t);const a=Kr.dot(Kr),s=Kr.dot(Zr),o=Kr.dot(Jr),l=Zr.dot(Zr),c=Zr.dot(Jr),u=a*l-s*s;if(0===u)return r.set(-2,-1,-1);const d=1/u,h=(l*o-s*c)*d,p=(a*c-s*o)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Qr),Qr.x>=0&&Qr.y>=0&&Qr.x+Qr.y<=1}static getUV(e,t,n,i,r,a,s,o){return!1===sa&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),sa=!0),this.getInterpolation(e,t,n,i,r,a,s,o)}static getInterpolation(e,t,n,i,r,a,s,o){return this.getBarycoord(e,t,n,i,Qr),o.setScalar(0),o.addScaledVector(r,Qr.x),o.addScaledVector(a,Qr.y),o.addScaledVector(s,Qr.z),o}static isFrontFacing(e,t,n,i){return Kr.subVectors(n,t),Zr.subVectors(e,t),Kr.cross(Zr).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kr.subVectors(this.c,this.b),Zr.subVectors(this.a,this.b),.5*Kr.cross(Zr).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return oa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return oa.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return!1===sa&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),sa=!0),oa.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}getInterpolation(e,t,n,i,r){return oa.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return oa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return oa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,s;ea.subVectors(i,n),ta.subVectors(r,n),ia.subVectors(e,n);const o=ea.dot(ia),l=ta.dot(ia);if(o<=0&&l<=0)return t.copy(n);ra.subVectors(e,i);const c=ea.dot(ra),u=ta.dot(ra);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(ea,a);aa.subVectors(e,r);const h=ea.dot(aa),p=ta.dot(aa);if(p>=0&&h<=p)return t.copy(r);const f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(ta,s);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return na.subVectors(r,i),s=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(na,s);const v=1/(m+f+d);return a=f*v,s=d*v,t.copy(n).addScaledVector(ea,a).addScaledVector(ta,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const la={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ca={h:0,s:0,l:0},ua={h:0,s:0,l:0};function da(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class ha{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$t){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ri.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Ri.workingColorSpace){return this.r=e,this.g=t,this.b=n,Ri.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Ri.workingColorSpace){if(e=$n(e,1),t=qn(t,0,1),n=qn(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=da(r,i,e+1/3),this.g=da(r,i,e),this.b=da(r,i,e-1/3)}return Ri.toWorkingColorSpace(this,i),this}setStyle(e,t=$t){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=$t){const n=la[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Li(e.r),this.g=Li(e.g),this.b=Li(e.b),this}copyLinearToSRGB(e){return this.r=Pi(e.r),this.g=Pi(e.g),this.b=Pi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$t){return Ri.fromWorkingColorSpace(pa.copy(this),e),65536*Math.round(qn(255*pa.r,0,255))+256*Math.round(qn(255*pa.g,0,255))+Math.round(qn(255*pa.b,0,255))}getHexString(e=$t){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ri.workingColorSpace){Ri.fromWorkingColorSpace(pa.copy(this),t);const n=pa.r,i=pa.g,r=pa.b,a=Math.max(n,i,r),s=Math.min(n,i,r);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4;break}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=Ri.workingColorSpace){return Ri.fromWorkingColorSpace(pa.copy(this),t),e.r=pa.r,e.g=pa.g,e.b=pa.b,e}getStyle(e=$t){Ri.fromWorkingColorSpace(pa.copy(this),e);const t=pa.r,n=pa.g,i=pa.b;return e!==$t?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(ca),this.setHSL(ca.h+e,ca.s+t,ca.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ca),e.getHSL(ua);const n=Zn(ca.h,ua.h,t),i=Zn(ca.s,ua.s,t),r=Zn(ca.l,ua.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pa=new ha;ha.NAMES=la;let fa=0;class ma extends zn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:fa++}),this.uuid=Xn(),this.name="",this.type="Material",this.blending=y,this.side=p,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=I,this.blendDst=D,this.blendEquation=M,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ha(0,0,0),this.blendAlpha=0,this.depthFunc=X,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=yn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rn,this.stencilZFail=rn,this.stencilZPass=rn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==y&&(n.blending=this.blending),this.side!==p&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==I&&(n.blendSrc=this.blendSrc),this.blendDst!==D&&(n.blendDst=this.blendDst),this.blendEquation!==M&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==X&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==yn&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==rn&&(n.stencilFail=this.stencilFail),this.stencilZFail!==rn&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==rn&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class va extends ma{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ha(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ga=ya();function ya(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;while(0===(8388608&e))e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function _a(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=qn(e,-65504,65504),ga.floatView[0]=e;const t=ga.uint32View[0],n=t>>23&511;return ga.baseTable[n]+((8388607&t)>>ga.shiftTable[n])}function ba(e){const t=e>>10;return ga.uint32View[0]=ga.mantissaTable[ga.offsetTable[t]+(1023&e)]+ga.exponentTable[t],ga.floatView[0]}const xa={toHalfFloat:_a,fromHalfFloat:ba},Sa=new $i,Ma=new mi;class wa{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=An,this.updateRange={offset:0,count:-1},this.gpuType=De,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ma.fromBufferAttribute(this,t),Ma.applyMatrix3(e),this.setXY(t,Ma.x,Ma.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Sa.fromBufferAttribute(this,t),Sa.applyMatrix3(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Sa.fromBufferAttribute(this,t),Sa.applyMatrix4(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Sa.fromBufferAttribute(this,t),Sa.applyNormalMatrix(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Sa.fromBufferAttribute(this,t),Sa.transformDirection(e),this.setXYZ(t,Sa.x,Sa.y,Sa.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=hi(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=pi(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array),i=pi(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==An&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class Ea extends wa{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ta extends wa{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Aa extends wa{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Ca extends wa{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Ra extends wa{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class La extends wa{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Pa extends wa{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ia extends wa{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=ba(this.array[e*this.itemSize]);return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize]=_a(t),this}getY(e){let t=ba(this.array[e*this.itemSize+1]);return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize+1]=_a(t),this}getZ(e){let t=ba(this.array[e*this.itemSize+2]);return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize+2]=_a(t),this}getW(e){let t=ba(this.array[e*this.itemSize+3]);return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=pi(t,this.array)),this.array[e*this.itemSize+3]=_a(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array)),this.array[e+0]=_a(t),this.array[e+1]=_a(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array),i=pi(i,this.array)),this.array[e+0]=_a(t),this.array[e+1]=_a(n),this.array[e+2]=_a(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array)),this.array[e+0]=_a(t),this.array[e+1]=_a(n),this.array[e+2]=_a(i),this.array[e+3]=_a(r),this}}class Da extends wa{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Oa extends wa{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Na=0;const ka=new wr,Fa=new Yr,Ua=new $i,Ba=new Zi,Va=new Zi,za=new $i;class Wa extends zn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Na++}),this.uuid=Xn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yi(e)?Pa:Ra)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new vi).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ka.makeRotationFromQuaternion(e),this.applyMatrix4(ka),this}rotateX(e){return ka.makeRotationX(e),this.applyMatrix4(ka),this}rotateY(e){return ka.makeRotationY(e),this.applyMatrix4(ka),this}rotateZ(e){return ka.makeRotationZ(e),this.applyMatrix4(ka),this}translate(e,t,n){return ka.makeTranslation(e,t,n),this.applyMatrix4(ka),this}scale(e,t,n){return ka.makeScale(e,t,n),this.applyMatrix4(ka),this}lookAt(e){return Fa.lookAt(e),Fa.updateMatrix(),this.applyMatrix4(Fa.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ua).negate(),this.translate(Ua.x,Ua.y,Ua.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Da(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Zi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new $i(-1/0,-1/0,-1/0),new $i(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];Ba.setFromBufferAttribute(e),this.morphTargetsRelative?(za.addVectors(this.boundingBox.min,Ba.min),this.boundingBox.expandByPoint(za),za.addVectors(this.boundingBox.max,Ba.max),this.boundingBox.expandByPoint(za)):(this.boundingBox.expandByPoint(Ba.min),this.boundingBox.expandByPoint(Ba.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new mr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new $i,1/0);if(e){const n=this.boundingSphere.center;if(Ba.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];Va.setFromBufferAttribute(n),this.morphTargetsRelative?(za.addVectors(Ba.min,Va.min),Ba.expandByPoint(za),za.addVectors(Ba.max,Va.max),Ba.expandByPoint(za)):(Ba.expandByPoint(Va.min),Ba.expandByPoint(Va.max))}Ba.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)za.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(za));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)za.fromBufferAttribute(a,t),s&&(Ua.fromBufferAttribute(e,t),za.add(Ua)),i=Math.max(i,n.distanceToSquared(za))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new wa(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<s;E++)l[E]=new $i,c[E]=new $i;const u=new $i,d=new $i,h=new $i,p=new mi,f=new mi,m=new mi,v=new $i,g=new $i;function y(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(v.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(r),g.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(v),l[t].add(v),l[n].add(v),c[e].add(g),c[t].add(g),c[n].add(g))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start,i=e.count;for(let r=t,a=t+i;r<a;r+=3)y(n[r+0],n[r+1],n[r+2])}const b=new $i,x=new $i,S=new $i,M=new $i;function w(e){S.fromArray(r,3*e),M.copy(S);const t=l[e];b.copy(t),b.sub(S.multiplyScalar(S.dot(t))).normalize(),x.crossVectors(M,t);const n=x.dot(c[e]),i=n<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=i}for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start,i=e.count;for(let r=t,a=t+i;r<a;r+=3)w(n[r+0]),w(n[r+1]),w(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new wa(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new $i,r=new $i,a=new $i,s=new $i,o=new $i,l=new $i,c=new $i,u=new $i;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)za.fromBufferAttribute(e,t),za.normalize(),e.setXYZ(t,za.x,za.y,za.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)a[o++]=n[s++]}return new wa(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Wa,n=this.index.array,i=this.attributes;for(const s in i){const r=i[s],a=e(r,n);t.setAttribute(s,a)}const r=this.morphAttributes;for(const s in r){const i=[],a=r[s];for(let t=0,r=a.length;t<r;t++){const r=a[t],s=e(r,n);i.push(s)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ha=new wr,Ga=new Mr,ja=new mr,Xa=new $i,qa=new $i,$a=new $i,Ya=new $i,Ka=new $i,Za=new $i,Ja=new mi,Qa=new mi,es=new mi,ts=new $i,ns=new $i,is=new $i,rs=new $i,as=new $i;class ss extends Yr{constructor(e=new Wa,t=new va){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){Za.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],o=r[n];0!==i&&(Ka.fromBufferAttribute(o,e),a?Za.addScaledVector(Ka,i):Za.addScaledVector(Ka.sub(t),i))}t.add(Za)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),ja.copy(n.boundingSphere),ja.applyMatrix4(r),Ga.copy(e.ray).recast(e.near),!1===ja.containsPoint(Ga.origin)){if(null===Ga.intersectSphere(ja,Xa))return;if(Ga.origin.distanceToSquared(Xa)>(e.far-e.near)**2)return}Ha.copy(r).invert(),Ga.copy(e.ray).applyMatrix4(Ha),null!==n.boundingBox&&!1===Ga.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Ga)}}_computeIntersections(e,t,n){let i;const r=this.geometry,a=this.material,s=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,d=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const r=d[p],o=a[r.materialIndex],f=Math.max(r.start,h.start),m=Math.min(s.count,Math.min(r.start+r.count,h.start+h.count));for(let a=f,d=m;a<d;a+=3){const d=s.getX(a),h=s.getX(a+1),p=s.getX(a+2);i=ls(this,o,e,n,l,c,u,d,h,p),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{const r=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);for(let d=r,h=o;d<h;d+=3){const r=s.getX(d),o=s.getX(d+1),h=s.getX(d+2);i=ls(this,a,e,n,l,c,u,r,o,h),i&&(i.faceIndex=Math.floor(d/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const r=d[p],s=a[r.materialIndex],f=Math.max(r.start,h.start),m=Math.min(o.count,Math.min(r.start+r.count,h.start+h.count));for(let a=f,o=m;a<o;a+=3){const o=a,d=a+1,h=a+2;i=ls(this,s,e,n,l,c,u,o,d,h),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{const r=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);for(let o=r,d=s;o<d;o+=3){const r=o,s=o+1,d=o+2;i=ls(this,a,e,n,l,c,u,r,s,d),i&&(i.faceIndex=Math.floor(o/3),t.push(i))}}}}function os(e,t,n,i,r,a,s,o){let l;if(l=t.side===f?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,t.side===p,o),null===l)return null;as.copy(o),as.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(as);return c<n.near||c>n.far?null:{distance:c,point:as.clone(),object:e}}function ls(e,t,n,i,r,a,s,o,l,c){e.getVertexPosition(o,qa),e.getVertexPosition(l,$a),e.getVertexPosition(c,Ya);const u=os(e,t,n,i,qa,$a,Ya,rs);if(u){r&&(Ja.fromBufferAttribute(r,o),Qa.fromBufferAttribute(r,l),es.fromBufferAttribute(r,c),u.uv=oa.getInterpolation(rs,qa,$a,Ya,Ja,Qa,es,new mi)),a&&(Ja.fromBufferAttribute(a,o),Qa.fromBufferAttribute(a,l),es.fromBufferAttribute(a,c),u.uv1=oa.getInterpolation(rs,qa,$a,Ya,Ja,Qa,es,new mi),u.uv2=u.uv1),s&&(ts.fromBufferAttribute(s,o),ns.fromBufferAttribute(s,l),is.fromBufferAttribute(s,c),u.normal=oa.getInterpolation(rs,qa,$a,Ya,ts,ns,is,new $i),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new $i,materialIndex:0};oa.getNormal(qa,$a,Ya,e.normal),u.face=e}return u}class cs extends Wa{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,i,r,a,p,f,m,v,g){const y=a/m,_=p/v,b=a/2,x=p/2,S=f/2,M=m+1,w=v+1;let E=0,T=0;const A=new $i;for(let s=0;s<w;s++){const a=s*_-x;for(let o=0;o<M;o++){const d=o*y-b;A[e]=d*i,A[t]=a*r,A[n]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-s/v),E+=1}}for(let s=0;s<v;s++)for(let e=0;e<m;e++){const t=d+e+M*s,n=d+e+M*(s+1),i=d+(e+1)+M*(s+1),r=d+(e+1)+M*s;o.push(t,n,r),o.push(n,i,r),T+=6}s.addGroup(h,T,g),h+=T,d+=E}p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,i,a,2),p("x","z","y",1,-1,e,n,-t,i,a,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new Da(l,3)),this.setAttribute("normal",new Da(c,3)),this.setAttribute("uv",new Da(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cs(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function us(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function ds(e){const t={};for(let n=0;n<e.length;n++){const i=us(e[n]);for(const e in i)t[e]=i[e]}return t}function hs(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}function ps(e){return null===e.getRenderTarget()?e.outputColorSpace:Ri.workingColorSpace}const fs={clone:us,merge:ds};var ms="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",vs="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class gs extends ma{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ms,this.fragmentShader=vs,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=us(e.uniforms),this.uniformsGroups=hs(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i],r=n.value;r&&r.isTexture?t.uniforms[i]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[i]={type:"m4",value:r.toArray()}:t.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ys extends Yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wr,this.projectionMatrix=new wr,this.projectionMatrixInverse=new wr,this.coordinateSystem=Bn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class _s extends ys{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*jn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Gn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*jn*Math.atan(Math.tan(.5*Gn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Gn*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/s,i*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const bs=-90,xs=1;class Ss extends Yr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new _s(bs,xs,e,t);i.layers=this.layers,this.add(i);const r=new _s(bs,xs,e,t);r.layers=this.layers,this.add(r);const a=new _s(bs,xs,e,t);a.layers=this.layers,this.add(a);const s=new _s(bs,xs,e,t);s.layers=this.layers,this.add(s);const o=new _s(bs,xs,e,t);o.layers=this.layers,this.add(o);const l=new _s(bs,xs,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,a,s,o]=t;for(const l of t)this.remove(l);if(e===Bn)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==Vn)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,s,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,o),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Ms extends Ui{constructor(e,t,n,i,r,a,s,o,l,c){e=void 0!==e?e:[],t=void 0!==t?t:ce,super(e,t,n,i,r,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ws extends zi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(wi("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Wt?$t:qt),this.texture=new Ms(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Se}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new cs(5,5,5),r=new gs({name:"CubemapFromEquirect",uniforms:us(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:g});r.uniforms.tEquirect.value=t;const a=new ss(i,r),s=t.minFilter;t.minFilter===Ee&&(t.minFilter=Se);const o=new Ss(1,10,this);return o.update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}const Es=new $i,Ts=new $i,As=new vi;class Cs{constructor(e=new $i(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Es.subVectors(n,t).cross(Ts.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Es),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||As.getNormalMatrix(e),i=this.coplanarPoint(Es).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Rs=new mr,Ls=new $i;class Ps{constructor(e=new Cs,t=new Cs,n=new Cs,i=new Cs,r=new Cs,a=new Cs){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Bn){const n=this.planes,i=e.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],_=i[15];if(n[0].setComponents(o-r,d-l,m-h,_-v).normalize(),n[1].setComponents(o+r,d+l,m+h,_+v).normalize(),n[2].setComponents(o+a,d+c,m+p,_+g).normalize(),n[3].setComponents(o-a,d-c,m-p,_-g).normalize(),n[4].setComponents(o-s,d-u,m-f,_-y).normalize(),t===Bn)n[5].setComponents(o+s,d+u,m+f,_+y).normalize();else{if(t!==Vn)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Rs.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Rs.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rs)}intersectsSprite(e){return Rs.center.set(0,0,0),Rs.radius=.7071067811865476,Rs.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rs)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){const e=t[r].distanceToPoint(n);if(e<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ls.x=i.normal.x>0?e.max.x:e.min.x,Ls.y=i.normal.y>0?e.max.y:e.min.y,Ls.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ls)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Is(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ds(e,t){const n=t.isWebGL2,i=new WeakMap;function r(t,i){const r=t.array,a=t.usage,s=e.createBuffer();let o;if(e.bindBuffer(i,s),e.bufferData(i,r,a),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=e.HALF_FLOAT}else o=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function a(t,i,r){const a=i.array,s=i.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}function s(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)}function o(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))}function l(e,t){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);void 0===n?i.set(e,r(e,t)):n.version<e.version&&(a(n.buffer,e,t),n.version=e.version)}return{get:s,remove:o,update:l}}class Os extends Wa{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,s=Math.floor(n),o=Math.floor(i),l=s+1,c=o+1,u=e/s,d=t/o,h=[],p=[],f=[],m=[];for(let v=0;v<c;v++){const e=v*d-a;for(let t=0;t<l;t++){const n=t*u-r;p.push(n,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-v/o)}}for(let v=0;v<o;v++)for(let e=0;e<s;e++){const t=e+l*v,n=e+l*(v+1),i=e+1+l*(v+1),r=e+1+l*v;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new Da(p,3)),this.setAttribute("normal",new Da(f,3)),this.setAttribute("uv",new Da(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Os(e.width,e.height,e.widthSegments,e.heightSegments)}}var Ns="#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",ks="#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",Fs="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",Us="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Bs="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",Vs="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",zs="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Ws="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Hs="vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",Gs="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",js="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",Xs="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",qs="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",$s="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Ys="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Ks="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Zs="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Js="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Qs="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",eo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",to="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",no="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",io="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",ro="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",ao="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",so="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",oo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",lo="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",co="gl_FragColor = linearToOutputTexel( gl_FragColor );",uo="\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",ho="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",po="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",fo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",mo="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",vo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",go="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",yo="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",_o="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",bo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",xo="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",So="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",Mo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",wo="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",Eo="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",To="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",Ao="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",Co="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Ro="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",Lo="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Po="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",Io="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",Do="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Oo="\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",No="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",ko="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",Fo="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Uo="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Bo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Vo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",zo="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",Wo="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Ho="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Go="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",jo="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Xo="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",qo="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",$o="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Yo="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Ko="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Zo="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",Jo="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Qo="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",el="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",tl="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",nl="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",il="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",rl="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",al="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",sl="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",ol="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",ll="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",cl="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",ul="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dl="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",hl="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",pl="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",fl="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",ml="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",vl="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",gl="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",yl="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",_l="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",bl="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",xl="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Sl="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Ml="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",wl="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",El="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Tl="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",Al="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",Cl="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",Rl="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",Ll="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",Pl="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",Il="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const Dl="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ol="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",Nl="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",kl="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",Fl="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Ul="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",Bl="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Vl="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",zl="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Wl="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Hl="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Gl="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",jl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Xl="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",ql="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",$l="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Yl="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Kl="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Zl="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Jl="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ql="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",ec="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",tc="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",nc="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ic="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",rc="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ac="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sc="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",oc="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",lc="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",cc="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",uc="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",dc="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",hc="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",pc={alphahash_fragment:Ns,alphahash_pars_fragment:ks,alphamap_fragment:Fs,alphamap_pars_fragment:Us,alphatest_fragment:Bs,alphatest_pars_fragment:Vs,aomap_fragment:zs,aomap_pars_fragment:Ws,begin_vertex:Hs,beginnormal_vertex:Gs,bsdfs:js,iridescence_fragment:Xs,bumpmap_pars_fragment:qs,clipping_planes_fragment:$s,clipping_planes_pars_fragment:Ys,clipping_planes_pars_vertex:Ks,clipping_planes_vertex:Zs,color_fragment:Js,color_pars_fragment:Qs,color_pars_vertex:eo,color_vertex:to,common:no,cube_uv_reflection_fragment:io,defaultnormal_vertex:ro,displacementmap_pars_vertex:ao,displacementmap_vertex:so,emissivemap_fragment:oo,emissivemap_pars_fragment:lo,colorspace_fragment:co,colorspace_pars_fragment:uo,envmap_fragment:ho,envmap_common_pars_fragment:po,envmap_pars_fragment:fo,envmap_pars_vertex:mo,envmap_physical_pars_fragment:Ao,envmap_vertex:vo,fog_vertex:go,fog_pars_vertex:yo,fog_fragment:_o,fog_pars_fragment:bo,gradientmap_pars_fragment:xo,lightmap_fragment:So,lightmap_pars_fragment:Mo,lights_lambert_fragment:wo,lights_lambert_pars_fragment:Eo,lights_pars_begin:To,lights_toon_fragment:Co,lights_toon_pars_fragment:Ro,lights_phong_fragment:Lo,lights_phong_pars_fragment:Po,lights_physical_fragment:Io,lights_physical_pars_fragment:Do,lights_fragment_begin:Oo,lights_fragment_maps:No,lights_fragment_end:ko,logdepthbuf_fragment:Fo,logdepthbuf_pars_fragment:Uo,logdepthbuf_pars_vertex:Bo,logdepthbuf_vertex:Vo,map_fragment:zo,map_pars_fragment:Wo,map_particle_fragment:Ho,map_particle_pars_fragment:Go,metalnessmap_fragment:jo,metalnessmap_pars_fragment:Xo,morphcolor_vertex:qo,morphnormal_vertex:$o,morphtarget_pars_vertex:Yo,morphtarget_vertex:Ko,normal_fragment_begin:Zo,normal_fragment_maps:Jo,normal_pars_fragment:Qo,normal_pars_vertex:el,normal_vertex:tl,normalmap_pars_fragment:nl,clearcoat_normal_fragment_begin:il,clearcoat_normal_fragment_maps:rl,clearcoat_pars_fragment:al,iridescence_pars_fragment:sl,opaque_fragment:ol,packing:ll,premultiplied_alpha_fragment:cl,project_vertex:ul,dithering_fragment:dl,dithering_pars_fragment:hl,roughnessmap_fragment:pl,roughnessmap_pars_fragment:fl,shadowmap_pars_fragment:ml,shadowmap_pars_vertex:vl,shadowmap_vertex:gl,shadowmask_pars_fragment:yl,skinbase_vertex:_l,skinning_pars_vertex:bl,skinning_vertex:xl,skinnormal_vertex:Sl,specularmap_fragment:Ml,specularmap_pars_fragment:wl,tonemapping_fragment:El,tonemapping_pars_fragment:Tl,transmission_fragment:Al,transmission_pars_fragment:Cl,uv_pars_fragment:Rl,uv_pars_vertex:Ll,uv_vertex:Pl,worldpos_vertex:Il,background_vert:Dl,background_frag:Ol,backgroundCube_vert:Nl,backgroundCube_frag:kl,cube_vert:Fl,cube_frag:Ul,depth_vert:Bl,depth_frag:Vl,distanceRGBA_vert:zl,distanceRGBA_frag:Wl,equirect_vert:Hl,equirect_frag:Gl,linedashed_vert:jl,linedashed_frag:Xl,meshbasic_vert:ql,meshbasic_frag:$l,meshlambert_vert:Yl,meshlambert_frag:Kl,meshmatcap_vert:Zl,meshmatcap_frag:Jl,meshnormal_vert:Ql,meshnormal_frag:ec,meshphong_vert:tc,meshphong_frag:nc,meshphysical_vert:ic,meshphysical_frag:rc,meshtoon_vert:ac,meshtoon_frag:sc,points_vert:oc,points_frag:lc,shadow_vert:cc,shadow_frag:uc,sprite_vert:dc,sprite_frag:hc},fc={common:{diffuse:{value:new ha(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vi},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vi}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vi},normalScale:{value:new mi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ha(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ha(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0},uvTransform:{value:new vi}},sprite:{diffuse:{value:new ha(16777215)},opacity:{value:1},center:{value:new mi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vi},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0}}},mc={basic:{uniforms:ds([fc.common,fc.specularmap,fc.envmap,fc.aomap,fc.lightmap,fc.fog]),vertexShader:pc.meshbasic_vert,fragmentShader:pc.meshbasic_frag},lambert:{uniforms:ds([fc.common,fc.specularmap,fc.envmap,fc.aomap,fc.lightmap,fc.emissivemap,fc.bumpmap,fc.normalmap,fc.displacementmap,fc.fog,fc.lights,{emissive:{value:new ha(0)}}]),vertexShader:pc.meshlambert_vert,fragmentShader:pc.meshlambert_frag},phong:{uniforms:ds([fc.common,fc.specularmap,fc.envmap,fc.aomap,fc.lightmap,fc.emissivemap,fc.bumpmap,fc.normalmap,fc.displacementmap,fc.fog,fc.lights,{emissive:{value:new ha(0)},specular:{value:new ha(1118481)},shininess:{value:30}}]),vertexShader:pc.meshphong_vert,fragmentShader:pc.meshphong_frag},standard:{uniforms:ds([fc.common,fc.envmap,fc.aomap,fc.lightmap,fc.emissivemap,fc.bumpmap,fc.normalmap,fc.displacementmap,fc.roughnessmap,fc.metalnessmap,fc.fog,fc.lights,{emissive:{value:new ha(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pc.meshphysical_vert,fragmentShader:pc.meshphysical_frag},toon:{uniforms:ds([fc.common,fc.aomap,fc.lightmap,fc.emissivemap,fc.bumpmap,fc.normalmap,fc.displacementmap,fc.gradientmap,fc.fog,fc.lights,{emissive:{value:new ha(0)}}]),vertexShader:pc.meshtoon_vert,fragmentShader:pc.meshtoon_frag},matcap:{uniforms:ds([fc.common,fc.bumpmap,fc.normalmap,fc.displacementmap,fc.fog,{matcap:{value:null}}]),vertexShader:pc.meshmatcap_vert,fragmentShader:pc.meshmatcap_frag},points:{uniforms:ds([fc.points,fc.fog]),vertexShader:pc.points_vert,fragmentShader:pc.points_frag},dashed:{uniforms:ds([fc.common,fc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pc.linedashed_vert,fragmentShader:pc.linedashed_frag},depth:{uniforms:ds([fc.common,fc.displacementmap]),vertexShader:pc.depth_vert,fragmentShader:pc.depth_frag},normal:{uniforms:ds([fc.common,fc.bumpmap,fc.normalmap,fc.displacementmap,{opacity:{value:1}}]),vertexShader:pc.meshnormal_vert,fragmentShader:pc.meshnormal_frag},sprite:{uniforms:ds([fc.sprite,fc.fog]),vertexShader:pc.sprite_vert,fragmentShader:pc.sprite_frag},background:{uniforms:{uvTransform:{value:new vi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pc.background_vert,fragmentShader:pc.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:pc.backgroundCube_vert,fragmentShader:pc.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pc.cube_vert,fragmentShader:pc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pc.equirect_vert,fragmentShader:pc.equirect_frag},distanceRGBA:{uniforms:ds([fc.common,fc.displacementmap,{referencePosition:{value:new $i},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pc.distanceRGBA_vert,fragmentShader:pc.distanceRGBA_frag},shadow:{uniforms:ds([fc.lights,fc.fog,{color:{value:new ha(0)},opacity:{value:1}}]),vertexShader:pc.shadow_vert,fragmentShader:pc.shadow_frag}};mc.physical={uniforms:ds([mc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vi},clearcoatNormalScale:{value:new mi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vi},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vi},sheen:{value:0},sheenColor:{value:new ha(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vi},transmissionSamplerSize:{value:new mi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vi},attenuationDistance:{value:0},attenuationColor:{value:new ha(0)},specularColor:{value:new ha(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vi},anisotropyVector:{value:new mi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vi}}]),vertexShader:pc.meshphysical_vert,fragmentShader:pc.meshphysical_frag};const vc={r:0,b:0,g:0};function gc(e,t,n,i,r,a,s){const o=new ha(0);let l,c,u=!0===a?0:1,d=null,h=0,m=null;function v(a,v){let y=!1,_=!0===v.isScene?v.background:null;if(_&&_.isTexture){const e=v.backgroundBlurriness>0;_=(e?n:t).get(_)}null===_?g(o,u):_&&_.isColor&&(g(_,1),y=!0);const b=e.xr.getEnvironmentBlendMode();"additive"===b?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===b&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),_&&(_.isCubeTexture||_.mapping===pe)?(void 0===c&&(c=new ss(new cs(1,1,1),new gs({name:"BackgroundCubeMaterial",uniforms:us(mc.backgroundCube.uniforms),vertexShader:mc.backgroundCube.vertexShader,fragmentShader:mc.backgroundCube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Ri.getTransfer(_.colorSpace)!==Qt,d===_&&h===_.version&&m===e.toneMapping||(c.material.needsUpdate=!0,d=_,h=_.version,m=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(void 0===l&&(l=new ss(new Os(2,2),new gs({name:"BackgroundMaterial",uniforms:us(mc.background.uniforms),vertexShader:mc.background.vertexShader,fragmentShader:mc.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=_,l.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,l.material.toneMapped=Ri.getTransfer(_.colorSpace)!==Qt,!0===_.matrixAutoUpdate&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),d===_&&h===_.version&&m===e.toneMapping||(l.material.needsUpdate=!0,d=_,h=_.version,m=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}function g(t,n){t.getRGB(vc,ps(e)),i.buffers.color.setClear(vc.r,vc.g,vc.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,g(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,g(o,u)},render:v}}function yc(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,o={},l=v(null);let c=l,u=!1;function d(t,i,r,a,o){let l=!1;if(s){const e=m(a,r,i);c!==e&&(c=e,p(c.object)),l=g(t,a,r,o),l&&y(t,a,r,o)}else{const e=!0===i.wireframe;c.geometry===a.id&&c.program===r.id&&c.wireframe===e||(c.geometry=a.id,c.program=r.id,c.wireframe=e,l=!0)}null!==o&&n.update(o,e.ELEMENT_ARRAY_BUFFER),(l||u)&&(u=!1,w(t,i,r,a),null!==o&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(o).buffer))}function h(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function p(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function f(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function m(e,t,n){const i=!0===n.wireframe;let r=o[e.id];void 0===r&&(r={},o[e.id]=r);let a=r[t.id];void 0===a&&(a={},r[t.id]=a);let s=a[i];return void 0===s&&(s=v(h()),a[i]=s),s}function v(e){const t=[],n=[],i=[];for(let a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function g(e,t,n,i){const r=c.attributes,a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){const t=o[l];if(t.location>=0){const t=r[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==i}function y(e,t,n,i){const r={},a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){const t=o[l];if(t.location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[l]=n,s++}}c.attributes=r,c.attributesNum=s,c.index=i}function _(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function b(e){x(e,0)}function x(n,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==r){const a=i.isWebGL2?e:t.get("ANGLE_instanced_arrays");a[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function S(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function M(t,n,i,r,a,s,o){!0===o?e.vertexAttribIPointer(t,n,i,a,s):e.vertexAttribPointer(t,n,i,r,a,s)}function w(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;_();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const a=c[t];if(a.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,p=!0===i.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||s.gpuType===Pe);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)x(a.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)b(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)M(a.location+e,l/a.locationSize,d,t,i*h,(c+l/a.locationSize*e)*h,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)x(a.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<a.locationSize;e++)b(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)M(a.location+e,l/a.locationSize,d,t,l*h,l/a.locationSize*e*h,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}S()}function E(){C();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)f(n[e].object),delete n[e];delete t[e]}delete o[e]}}function T(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)f(e[t].object),delete e[t];delete t[n]}delete o[e.id]}function A(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)f(i[e].object),delete i[e];delete n[e.id]}}function C(){R(),u=!0,c!==l&&(c=l,p(c.object))}function R(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:C,resetDefaultState:R,dispose:E,releaseStatesOfGeometry:T,releaseStatesOfProgram:A,initAttributes:_,enableAttribute:b,disableUnusedAttributes:S}}function _c(e,t,n,i){const r=i.isWebGL2;let a;function s(e){a=e}function o(t,i){e.drawArrays(a,t,i),n.update(i,a,1)}function l(i,s,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,i,s,o),n.update(s,a,o)}this.setMode=s,this.render=o,this.renderInstances=l}function bc(e,t,n){let i;function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let o=void 0!==n.precision?n.precision:"highp";const l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=s||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),v=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),y=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,b=s||t.has("OES_texture_float"),x=_&&b,S=s?e.getParameter(e.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:S}}function xc(e){const t=this;let n=null,i=0,r=!1,a=!1;const s=new Cs,o=new vi,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==a;++n,l+=4)s.copy(e[n]).applyMatrix4(r,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(t,s,o){const d=t.clippingPlanes,h=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!r||null===d||0===d.length||a&&!p)a?u(null):c();else{const e=a?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=u(d,s,t,o);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Sc(e){let t=new WeakMap;function n(e,t){return t===de?e.mapping=ce:t===he&&(e.mapping=ue),e}function i(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===de||a===he){if(t.has(i)){const e=t.get(i).texture;return n(e,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=new ws(a.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}class Mc extends ys{constructor(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const wc=4,Ec=[.125,.215,.35,.446,.526,.582],Tc=20,Ac=new Mc,Cc=new ha;let Rc=null,Lc=0,Pc=0;const Ic=(1+Math.sqrt(5))/2,Dc=1/Ic,Oc=[new $i(1,1,1),new $i(-1,1,1),new $i(1,1,-1),new $i(-1,1,-1),new $i(0,Ic,Dc),new $i(0,Ic,-Dc),new $i(Dc,0,Ic),new $i(-Dc,0,Ic),new $i(Ic,Dc,0),new $i(-Ic,Dc,0)];class Nc{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Rc=this._renderer.getRenderTarget(),Lc=this._renderer.getActiveCubeFace(),Pc=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=zc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Vc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Rc,Lc,Pc),e.scissorTest=!1,Uc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ce||e.mapping===ue?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Rc=this._renderer.getRenderTarget(),Lc=this._renderer.getActiveCubeFace(),Pc=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Se,minFilter:Se,generateMipmaps:!1,type:Oe,format:Be,colorSpace:Yt,depthBuffer:!1},i=Fc(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Fc(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=kc(i)),this._blurMaterial=Bc(i,e,t)}return i}_compileMaterial(e){const t=new ss(this._lodPlanes[0],e);this._renderer.compile(t,Ac)}_sceneToCubeUV(e,t,n,i){const r=90,a=1,s=new _s(r,a,t,n),o=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,d=c.toneMapping;c.getClearColor(Cc),c.toneMapping=ee,c.autoClear=!1;const h=new va({name:"PMREM.Background",side:f,depthWrite:!1,depthTest:!1}),p=new ss(new cs,h);let m=!1;const v=e.background;v?v.isColor&&(h.color.copy(v),e.background=null,m=!0):(h.color.copy(Cc),m=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(s.up.set(0,o[f],0),s.lookAt(l[f],0,0)):1===t?(s.up.set(0,0,o[f]),s.lookAt(0,l[f],0)):(s.up.set(0,o[f],0),s.lookAt(0,0,l[f]));const n=this._cubeSize;Uc(i,t*n,f>2?n:0,n,n),c.setRenderTarget(i),m&&c.render(p,s),c.render(e,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=d,c.autoClear=u,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===ce||e.mapping===ue;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=zc()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Vc());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new ss(this._lodPlanes[0],r),s=r.uniforms;s["envMap"].value=e;const o=this._cubeSize;Uc(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Ac)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=Oc[(i-1)%Oc.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new ss(this._lodPlanes[i],l),d=l.uniforms,h=this._sizeLods[n]-1,p=isFinite(r)?Math.PI/(2*h):2*Math.PI/(2*Tc-1),f=r/p,m=isFinite(r)?1+Math.floor(c*f):Tc;m>Tc&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Tc}`);const v=[];let g=0;for(let S=0;S<Tc;++S){const e=S/f,t=Math.exp(-e*e/2);v.push(t),0===S?g+=t:S<m&&(g+=2*t)}for(let S=0;S<v.length;S++)v[S]=v[S]/g;d["envMap"].value=e.texture,d["samples"].value=m,d["weights"].value=v,d["latitudinal"].value="latitudinal"===a,s&&(d["poleAxis"].value=s);const{_lodMax:y}=this;d["dTheta"].value=p,d["mipInt"].value=y-n;const _=this._sizeLods[i],b=3*_*(i>y-wc?i-y+wc:0),x=4*(this._cubeSize-_);Uc(t,b,x,3*_,2*_),o.setRenderTarget(t),o.render(u,Ac)}}function kc(e){const t=[],n=[],i=[];let r=e;const a=e-wc+1+Ec.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);n.push(a);let o=1/a;s>e-wc?o=Ec[s-e+wc-1]:0===s&&(o=0),i.push(o);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,v=1,g=new Float32Array(f*p*h),y=new Float32Array(m*p*h),_=new Float32Array(v*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,f*p*e),y.set(d,m*p*e);const r=[e,e,e,e,e,e];_.set(r,v*p*e)}const b=new Wa;b.setAttribute("position",new wa(g,f)),b.setAttribute("uv",new wa(y,m)),b.setAttribute("faceIndex",new wa(_,v)),t.push(b),r>wc&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}function Fc(e,t,n){const i=new zi(e,t,n);return i.texture.mapping=pe,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Uc(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Bc(e,t,n){const i=new Float32Array(Tc),r=new $i(0,1,0),a=new gs({name:"SphericalGaussianBlur",defines:{n:Tc,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Wc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:g,depthTest:!1,depthWrite:!1});return a}function Vc(){return new gs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Wc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:g,depthTest:!1,depthWrite:!1})}function zc(){return new gs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Wc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:g,depthTest:!1,depthWrite:!1})}function Wc(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Hc(e){let t=new WeakMap,n=null;function i(i){if(i&&i.isTexture){const s=i.mapping,o=s===de||s===he,l=s===ce||s===ue;if(o||l){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new Nc(e)),r=o?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const s=i.image;if(o&&s&&s.height>0||l&&s&&r(s)){null===n&&(n=new Nc(e));const r=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,r),i.addEventListener("dispose",a),r.texture}return null}}}return i}function r(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}function a(e){const n=e.target;n.removeEventListener("dispose",a);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function s(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:i,dispose:s}}function Gc(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function jc(e,t,n,i){const r={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);for(const n in o.morphAttributes){const e=o.morphAttributes[n];for(let n=0,i=e.length;n<i;n++)t.remove(e[n])}o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t}function l(n){const i=n.attributes;for(const a in i)t.update(i[a],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const a in r){const n=r[a];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}}function c(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const o=new(yi(n)?Pa:Ra)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}function u(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&c(e)}else c(e);return a.get(e)}return{get:o,update:l,getWireframeAttribute:u}}function Xc(e,t,n,i){const r=i.isWebGL2;let a,s,o;function l(e){a=e}function c(e){s=e.type,o=e.bytesPerElement}function u(t,i){e.drawElements(a,i,s,t*o),n.update(i,a,1)}function d(i,l,c){if(0===c)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,s,i*o,c),n.update(l,a,c)}this.setMode=l,this.setIndex=c,this.render=u,this.renderInstances=d}function qc(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(t,i,r){switch(n.calls++,i){case e.TRIANGLES:n.triangles+=r*(t/3);break;case e.LINES:n.lines+=r*(t/2);break;case e.LINE_STRIP:n.lines+=r*(t-1);break;case e.LINE_LOOP:n.lines+=r*t;break;case e.POINTS:n.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:r,update:i}}function $c(e,t){return e[0]-t[0]}function Yc(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Kc(e,t,n){const i={},r=new Float32Array(8),a=new WeakMap,s=new Bi,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==h?h.length:0;let f=a.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const g=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,_=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let M=0;!0===g&&(M=1),!0===y&&(M=2),!0===_&&(M=3);let w=c.attributes.position.count*M,E=1;w>t.maxTextureSize&&(E=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);const T=new Float32Array(w*E*4*p),A=new Wi(T,w,E,p);A.type=De,A.needsUpdate=!0;const C=4*M;for(let L=0;L<p;L++){const P=b[L],I=x[L],D=S[L],O=w*E*4*L;for(let N=0;N<P.count;N++){const k=N*C;!0===g&&(s.fromBufferAttribute(P,N),T[O+k+0]=s.x,T[O+k+1]=s.y,T[O+k+2]=s.z,T[O+k+3]=0),!0===y&&(s.fromBufferAttribute(I,N),T[O+k+4]=s.x,T[O+k+5]=s.y,T[O+k+6]=s.z,T[O+k+7]=0),!0===_&&(s.fromBufferAttribute(D,N),T[O+k+8]=s.x,T[O+k+9]=s.y,T[O+k+10]=s.z,T[O+k+11]=4===D.itemSize?s.w:1)}}function R(){A.dispose(),a.delete(c),c.removeEventListener("dispose",R)}f={count:p,texture:A,size:new mi(w,E)},a.set(c,f),c.addEventListener("dispose",R)}let m=0;for(let F=0;F<d.length;F++)m+=d[F];const v=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",v),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const U=void 0===d?0:d.length;let B=i[c.id];if(void 0===B||B.length!==U){B=[];for(let G=0;G<U;G++)B[G]=[G,0];i[c.id]=B}for(let j=0;j<U;j++){const X=B[j];X[0]=j,X[1]=d[j]}B.sort(Yc);for(let q=0;q<8;q++)q<U&&B[q][1]?(o[q][0]=B[q][0],o[q][1]=B[q][1]):(o[q][0]=Number.MAX_SAFE_INTEGER,o[q][1]=0);o.sort($c);const V=c.morphAttributes.position,z=c.morphAttributes.normal;let W=0;for(let $=0;$<8;$++){const Y=o[$],K=Y[0],Z=Y[1];K!==Number.MAX_SAFE_INTEGER&&Z?(V&&c.getAttribute("morphTarget"+$)!==V[K]&&c.setAttribute("morphTarget"+$,V[K]),z&&c.getAttribute("morphNormal"+$)!==z[K]&&c.setAttribute("morphNormal"+$,z[K]),r[$]=Z,W+=Z):(V&&!0===c.hasAttribute("morphTarget"+$)&&c.deleteAttribute("morphTarget"+$),z&&!0===c.hasAttribute("morphNormal"+$)&&c.deleteAttribute("morphNormal"+$),r[$]=0)}const H=c.morphTargetsRelative?1:1-W;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}return{update:l}}function Zc(e,t,n,i){let r=new WeakMap;function a(a){const s=i.render.frame,l=a.geometry,c=t.get(a,l);if(r.get(c)!==s&&(t.update(c),r.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),r.get(a)!==s&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),r.set(a,s))),a.isSkinnedMesh){const e=a.skeleton;r.get(e)!==s&&(e.update(),r.set(e,s))}return c}function s(){r=new WeakMap}function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:a,dispose:s}}const Jc=new Ui,Qc=new Wi,eu=new Gi,tu=new Ms,nu=[],iu=[],ru=new Float32Array(16),au=new Float32Array(9),su=new Float32Array(4);function ou(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=nu[r];if(void 0===a&&(a=new Float32Array(r),nu[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function lu(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function cu(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function uu(e,t){let n=iu[t];void 0===n&&(n=new Int32Array(t),iu[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function du(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function hu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lu(n,t))return;e.uniform2fv(this.addr,t),cu(n,t)}}function pu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(lu(n,t))return;e.uniform3fv(this.addr,t),cu(n,t)}}function fu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lu(n,t))return;e.uniform4fv(this.addr,t),cu(n,t)}}function mu(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(lu(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),cu(n,t)}else{if(lu(n,i))return;su.set(i),e.uniformMatrix2fv(this.addr,!1,su),cu(n,i)}}function vu(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(lu(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),cu(n,t)}else{if(lu(n,i))return;au.set(i),e.uniformMatrix3fv(this.addr,!1,au),cu(n,i)}}function gu(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(lu(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),cu(n,t)}else{if(lu(n,i))return;ru.set(i),e.uniformMatrix4fv(this.addr,!1,ru),cu(n,i)}}function yu(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function _u(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lu(n,t))return;e.uniform2iv(this.addr,t),cu(n,t)}}function bu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(lu(n,t))return;e.uniform3iv(this.addr,t),cu(n,t)}}function xu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lu(n,t))return;e.uniform4iv(this.addr,t),cu(n,t)}}function Su(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Mu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lu(n,t))return;e.uniform2uiv(this.addr,t),cu(n,t)}}function wu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(lu(n,t))return;e.uniform3uiv(this.addr,t),cu(n,t)}}function Eu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lu(n,t))return;e.uniform4uiv(this.addr,t),cu(n,t)}}function Tu(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||Jc,r)}function Au(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||eu,r)}function Cu(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||tu,r)}function Ru(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Qc,r)}function Lu(e){switch(e){case 5126:return du;case 35664:return hu;case 35665:return pu;case 35666:return fu;case 35674:return mu;case 35675:return vu;case 35676:return gu;case 5124:case 35670:return yu;case 35667:case 35671:return _u;case 35668:case 35672:return bu;case 35669:case 35673:return xu;case 5125:return Su;case 36294:return Mu;case 36295:return wu;case 36296:return Eu;case 35678:case 36198:case 36298:case 36306:case 35682:return Tu;case 35679:case 36299:case 36307:return Au;case 35680:case 36300:case 36308:case 36293:return Cu;case 36289:case 36303:case 36311:case 36292:return Ru}}function Pu(e,t){e.uniform1fv(this.addr,t)}function Iu(e,t){const n=ou(t,this.size,2);e.uniform2fv(this.addr,n)}function Du(e,t){const n=ou(t,this.size,3);e.uniform3fv(this.addr,n)}function Ou(e,t){const n=ou(t,this.size,4);e.uniform4fv(this.addr,n)}function Nu(e,t){const n=ou(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function ku(e,t){const n=ou(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Fu(e,t){const n=ou(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Uu(e,t){e.uniform1iv(this.addr,t)}function Bu(e,t){e.uniform2iv(this.addr,t)}function Vu(e,t){e.uniform3iv(this.addr,t)}function zu(e,t){e.uniform4iv(this.addr,t)}function Wu(e,t){e.uniform1uiv(this.addr,t)}function Hu(e,t){e.uniform2uiv(this.addr,t)}function Gu(e,t){e.uniform3uiv(this.addr,t)}function ju(e,t){e.uniform4uiv(this.addr,t)}function Xu(e,t,n){const i=this.cache,r=t.length,a=uu(n,r);lu(i,a)||(e.uniform1iv(this.addr,a),cu(i,a));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||Jc,a[s])}function qu(e,t,n){const i=this.cache,r=t.length,a=uu(n,r);lu(i,a)||(e.uniform1iv(this.addr,a),cu(i,a));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||eu,a[s])}function $u(e,t,n){const i=this.cache,r=t.length,a=uu(n,r);lu(i,a)||(e.uniform1iv(this.addr,a),cu(i,a));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||tu,a[s])}function Yu(e,t,n){const i=this.cache,r=t.length,a=uu(n,r);lu(i,a)||(e.uniform1iv(this.addr,a),cu(i,a));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||Qc,a[s])}function Ku(e){switch(e){case 5126:return Pu;case 35664:return Iu;case 35665:return Du;case 35666:return Ou;case 35674:return Nu;case 35675:return ku;case 35676:return Fu;case 5124:case 35670:return Uu;case 35667:case 35671:return Bu;case 35668:case 35672:return Vu;case 35669:case 35673:return zu;case 5125:return Wu;case 36294:return Hu;case 36295:return Gu;case 36296:return ju;case 35678:case 36198:case 36298:case 36306:case 35682:return Xu;case 35679:case 36299:case 36307:return qu;case 35680:case 36300:case 36308:case 36293:return $u;case 36289:case 36303:case 36311:case 36292:return Yu}}class Zu{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Lu(t.type)}}class Ju{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Ku(t.type)}}class Qu{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}}}const ed=/(\w+)(\])?(\[|\.)?/g;function td(e,t){e.seq.push(t),e.map[t.id]=t}function nd(e,t,n){const i=e.name,r=i.length;ed.lastIndex=0;while(1){const a=ed.exec(i),s=ed.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){td(n,void 0===c?new Zu(o,e,t):new Ju(o,e,t));break}{const e=n.map;let t=e[o];void 0===t&&(t=new Qu(o),td(n,t)),n=t}}}class id{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i),r=e.getUniformLocation(t,n.name);nd(n,r,this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function rd(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}const ad=37297;let sd=0;function od(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let s=r;s<a;s++){const e=s+1;i.push(`${e===t?">":" "} ${e}: ${n[s]}`)}return i.join("\n")}function ld(e){const t=Ri.getPrimaries(Ri.workingColorSpace),n=Ri.getPrimaries(e);let i;switch(t===n?i="":t===tn&&n===en?i="LinearDisplayP3ToLinearSRGB":t===en&&n===tn&&(i="LinearSRGBToLinearDisplayP3"),e){case Yt:case Zt:return[i,"LinearTransferOETF"];case $t:case Kt:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[i,"LinearTransferOETF"]}}function cd(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+od(e.getShaderSource(t),i)}return r}function ud(e,t){const n=ld(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function dd(e,t){let n;switch(t){case te:n="Linear";break;case ne:n="Reinhard";break;case ie:n="OptimizedCineon";break;case re:n="ACESFilmic";break;case ae:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function hd(e){const t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(md).join("\n")}function pd(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function fd(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}function md(e){return""!==e}function vd(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function gd(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const yd=/^[ \t]*#include +<([\w\d./]+)>/gm;function _d(e){return e.replace(yd,xd)}const bd=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function xd(e,t){let n=pc[t];if(void 0===n){const e=bd.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=pc[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return _d(n)}const Sd=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Md(e){return e.replace(Sd,wd)}function wd(e,t,n,i){let r="";for(let a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Ed(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Td(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===h&&(t="SHADOWMAP_TYPE_VSM"),t}function Ad(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ce:case ue:t="ENVMAP_TYPE_CUBE";break;case pe:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Cd(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ue:t="ENVMAP_MODE_REFRACTION";break}return t}function Rd(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Z:t="ENVMAP_BLENDING_MULTIPLY";break;case J:t="ENVMAP_BLENDING_MIX";break;case Q:t="ENVMAP_BLENDING_ADD";break}return t}function Ld(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t,r=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:r,texelHeight:i,maxMip:n}}function Pd(e,t,n,i){const r=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=Td(n),c=Ad(n),u=Cd(n),d=Rd(n),h=Ld(n),p=n.isWebGL2?"":hd(n),f=pd(a),m=r.createProgram();let v,g,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(md).join("\n"),v.length>0&&(v+="\n"),g=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(md).join("\n"),g.length>0&&(g+="\n")):(v=[Ed(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(md).join("\n"),g=[p,Ed(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ee?"#define TONE_MAPPING":"",n.toneMapping!==ee?pc["tonemapping_pars_fragment"]:"",n.toneMapping!==ee?dd("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",pc["colorspace_pars_fragment"],ud("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(md).join("\n")),s=_d(s),s=vd(s,n),s=gd(s,n),o=_d(o),o=vd(o,n),o=gd(o,n),s=Md(s),o=Md(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===Fn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Fn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const _=y+v+s,b=y+g+o,x=rd(r,r.VERTEX_SHADER,_),S=rd(r,r.FRAGMENT_SHADER,b);function M(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(m).trim(),i=r.getShaderInfoLog(x).trim(),a=r.getShaderInfoLog(S).trim();let s=!0,o=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,m,x,S);else{const e=cd(r,x,"vertex"),t=cd(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==a||(o=!1);o&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:i,prefix:v},fragmentShader:{log:a,prefix:g}})}r.deleteShader(x),r.deleteShader(S),w=new id(r,m),E=fd(r,m)}let w,E;r.attachShader(m,x),r.attachShader(m,S),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===w&&M(this),w},this.getAttributes=function(){return void 0===E&&M(this),E};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=r.getProgramParameter(m,ad)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=sd++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=S,this}let Id=0;class Dd{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Od(e),t.set(e,n)),n}}class Od{constructor(e){this.id=Id++,this.code=e,this.usedTimes=0}}function Nd(e,t,n,i,r,a,s){const o=new Nr,l=new Dd,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return 0===e?"uv":`uv${e}`}function _(a,o,c,_,b){const x=_.fog,S=b.geometry,M=a.isMeshStandardMaterial?_.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||M),E=w&&w.mapping===pe?w.image.height:null,T=v[a.type];null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const A=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,C=void 0!==A?A.length:0;let R,L,P,I,D=0;if(void 0!==S.morphAttributes.position&&(D=1),void 0!==S.morphAttributes.normal&&(D=2),void 0!==S.morphAttributes.color&&(D=3),T){const e=mc[T];R=e.vertexShader,L=e.fragmentShader}else R=a.vertexShader,L=a.fragmentShader,l.update(a),P=l.getVertexShaderID(a),I=l.getFragmentShaderID(a);const O=e.getRenderTarget(),N=!0===b.isInstancedMesh,k=!!a.map,F=!!a.matcap,U=!!w,B=!!a.aoMap,V=!!a.lightMap,z=!!a.bumpMap,W=!!a.normalMap,H=!!a.displacementMap,G=!!a.emissiveMap,j=!!a.metalnessMap,X=!!a.roughnessMap,q=a.anisotropy>0,$=a.clearcoat>0,Y=a.iridescence>0,K=a.sheen>0,Z=a.transmission>0,J=q&&!!a.anisotropyMap,Q=$&&!!a.clearcoatMap,te=$&&!!a.clearcoatNormalMap,ne=$&&!!a.clearcoatRoughnessMap,ie=Y&&!!a.iridescenceMap,re=Y&&!!a.iridescenceThicknessMap,ae=K&&!!a.sheenColorMap,se=K&&!!a.sheenRoughnessMap,oe=!!a.specularMap,le=!!a.specularColorMap,ce=!!a.specularIntensityMap,ue=Z&&!!a.transmissionMap,de=Z&&!!a.thicknessMap,he=!!a.gradientMap,fe=!!a.alphaMap,me=a.alphaTest>0,ve=!!a.alphaHash,ge=!!a.extensions,ye=!!S.attributes.uv1,_e=!!S.attributes.uv2,be=!!S.attributes.uv3;let xe=ee;a.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(xe=e.toneMapping));const Se={isWebGL2:u,shaderID:T,shaderType:a.type,shaderName:a.name,vertexShader:R,fragmentShader:L,defines:a.defines,customVertexShaderID:P,customFragmentShaderID:I,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:N,instancingColor:N&&null!==b.instanceColor,supportsVertexTextures:h,outputColorSpace:null===O?e.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:Yt,map:k,matcap:F,envMap:U,envMapMode:U&&w.mapping,envMapCubeUVHeight:E,aoMap:B,lightMap:V,bumpMap:z,normalMap:W,displacementMap:h&&H,emissiveMap:G,normalMapObjectSpace:W&&a.normalMapType===Xt,normalMapTangentSpace:W&&a.normalMapType===jt,metalnessMap:j,roughnessMap:X,anisotropy:q,anisotropyMap:J,clearcoat:$,clearcoatMap:Q,clearcoatNormalMap:te,clearcoatRoughnessMap:ne,iridescence:Y,iridescenceMap:ie,iridescenceThicknessMap:re,sheen:K,sheenColorMap:ae,sheenRoughnessMap:se,specularMap:oe,specularColorMap:le,specularIntensityMap:ce,transmission:Z,transmissionMap:ue,thicknessMap:de,gradientMap:he,opaque:!1===a.transparent&&a.blending===y,alphaMap:fe,alphaTest:me,alphaHash:ve,combine:a.combine,mapUv:k&&g(a.map.channel),aoMapUv:B&&g(a.aoMap.channel),lightMapUv:V&&g(a.lightMap.channel),bumpMapUv:z&&g(a.bumpMap.channel),normalMapUv:W&&g(a.normalMap.channel),displacementMapUv:H&&g(a.displacementMap.channel),emissiveMapUv:G&&g(a.emissiveMap.channel),metalnessMapUv:j&&g(a.metalnessMap.channel),roughnessMapUv:X&&g(a.roughnessMap.channel),anisotropyMapUv:J&&g(a.anisotropyMap.channel),clearcoatMapUv:Q&&g(a.clearcoatMap.channel),clearcoatNormalMapUv:te&&g(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ne&&g(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ie&&g(a.iridescenceMap.channel),iridescenceThicknessMapUv:re&&g(a.iridescenceThicknessMap.channel),sheenColorMapUv:ae&&g(a.sheenColorMap.channel),sheenRoughnessMapUv:se&&g(a.sheenRoughnessMap.channel),specularMapUv:oe&&g(a.specularMap.channel),specularColorMapUv:le&&g(a.specularColorMap.channel),specularIntensityMapUv:ce&&g(a.specularIntensityMap.channel),transmissionMapUv:ue&&g(a.transmissionMap.channel),thicknessMapUv:de&&g(a.thicknessMap.channel),alphaMapUv:fe&&g(a.alphaMap.channel),vertexTangents:!!S.attributes.tangent&&(W||q),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,vertexUv1s:ye,vertexUv2s:_e,vertexUv3s:be,pointsUvs:!0===b.isPoints&&!!S.attributes.uv&&(k||fe),fog:!!x,useFog:!0===a.fog,fogExp2:x&&x.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==S.morphAttributes.position,morphNormals:void 0!==S.morphAttributes.normal,morphColors:void 0!==S.morphAttributes.color,morphTargetsCount:C,morphTextureStride:D,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:xe,useLegacyLights:e._useLegacyLights,decodeVideoTexture:k&&!0===a.map.isVideoTexture&&Ri.getTransfer(a.map.colorSpace)===Qt,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===m,flipSided:a.side===f,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ge&&!0===a.extensions.derivatives,extensionFragDepth:ge&&!0===a.extensions.fragDepth,extensionDrawBuffers:ge&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ge&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return Se}function b(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(x(n,t),S(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()}function x(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}function S(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),t.anisotropy&&o.enable(17),t.alphaHash&&o.enable(18),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.useLegacyLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),t.decodeVideoTexture&&o.enable(19),e.push(o.mask)}function M(e){const t=v[e.type];let n;if(t){const e=mc[t];n=fs.clone(e.uniforms)}else n=e.uniforms;return n}function w(t,n){let i;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Pd(e,n,t,a),c.push(i)),i}function E(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}}function T(e){l.remove(e)}function A(){l.dispose()}return{getParameters:_,getProgramCacheKey:b,getUniforms:M,acquireProgram:w,releaseProgram:E,releaseShaderCache:T,programs:c,dispose:A}}function kd(){let e=new WeakMap;function t(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function i(t,n,i){e.get(t)[n]=i}function r(){e=new WeakMap}return{get:t,remove:n,update:i,dispose:r}}function Fd(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ud(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Bd(){const e=[];let t=0;const n=[],i=[],r=[];function a(){t=0,n.length=0,i.length=0,r.length=0}function s(n,i,r,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}function o(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)}function l(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)}function c(e,t){n.length>1&&n.sort(e||Fd),i.length>1&&i.sort(t||Ud),r.length>1&&r.sort(t||Ud)}function u(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:o,unshift:l,finish:u,sort:c}}function Vd(){let e=new WeakMap;function t(t,n){const i=e.get(t);let r;return void 0===i?(r=new Bd,e.set(t,[r])):n>=i.length?(r=new Bd,i.push(r)):r=i[n],r}function n(){e=new WeakMap}return{get:t,dispose:n}}function zd(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new $i,color:new ha};break;case"SpotLight":n={position:new $i,direction:new $i,color:new ha,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new $i,color:new ha,distance:0,decay:0};break;case"HemisphereLight":n={direction:new $i,skyColor:new ha,groundColor:new ha};break;case"RectAreaLight":n={color:new ha,position:new $i,halfWidth:new $i,halfHeight:new $i};break}return e[t.id]=n,n}}}function Wd(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mi};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mi};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mi,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let Hd=0;function Gd(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function jd(e,t){const n=new zd,i=Wd(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new $i);const a=new $i,s=new wr,o=new wr;function l(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,v=0,g=0,y=0,_=0,b=0;a.sort(Gd);const x=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,S=t.intensity,M=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*S*x,l+=s.g*S*x,c+=s.b*S*x;else if(t.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],S);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(S*x),e.distance=M,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[h]=e;const a=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,a.updateMatrices(t),t.castShadow&&_++),r.spotLightMatrix[h]=a.matrix,t.castShadow){const e=i.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,r.spotShadow[h]=e,r.spotShadowMap[h]=w,g++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(S),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=w,r.pointShadowMatrix[d]=t.shadow.matrix,v++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(S*x),e.groundColor.copy(t.groundColor).multiplyScalar(S*x),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=fc.LTC_FLOAT_1,r.rectAreaLTC2=fc.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=fc.LTC_HALF_1,r.rectAreaLTC2=fc.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const S=r.hash;S.directionalLength===u&&S.pointLength===d&&S.spotLength===h&&S.rectAreaLength===p&&S.hemiLength===f&&S.numDirectionalShadows===m&&S.numPointShadows===v&&S.numSpotShadows===g&&S.numSpotMaps===y&&S.numLightProbes===b||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=d,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=v,r.pointShadowMap.length=v,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=v,r.spotLightMatrix.length=g+y-_,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=_,r.numLightProbes=b,S.directionalLength=u,S.pointLength=d,S.spotLength=h,S.rectAreaLength=p,S.hemiLength=f,S.numDirectionalShadows=m,S.numPointShadows=v,S.numSpotShadows=g,S.numSpotMaps=y,S.numLightProbes=b,r.version=Hd++)}function c(e,t){let n=0,i=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o.identity(),s.copy(t.matrixWorld),s.premultiply(d),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),i++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}}return{setup:l,setupView:c,state:r}}function Xd(e,t){const n=new jd(e,t),i=[],r=[];function a(){i.length=0,r.length=0}function s(e){i.push(e)}function o(e){r.push(e)}function l(e){n.setup(i,e)}function c(e){n.setupView(i,e)}const u={lightsArray:i,shadowsArray:r,lights:n};return{init:a,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function qd(e,t){let n=new WeakMap;function i(i,r=0){const a=n.get(i);let s;return void 0===a?(s=new Xd(e,t),n.set(i,[s])):r>=a.length?(s=new Xd(e,t),a.push(s)):s=a[r],s}function r(){n=new WeakMap}return{get:i,dispose:r}}class $d extends ma{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ht,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Yd extends ma{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Kd="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Zd="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Jd(e,t,n){let i=new Ps;const r=new mi,a=new mi,s=new Bi,o=new $d({depthPacking:Gt}),l=new Yd,c={},d=n.maxTextureSize,v={[p]:f,[f]:p,[m]:m},y=new gs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mi},radius:{value:4}},vertexShader:Kd,fragmentShader:Zd}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const b=new Wa;b.setAttribute("position",new wa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new ss(b,y),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u;let M=this.type;function w(n,i){const a=t.update(x);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,_.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new zi(r.x,r.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,y,x,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,_,x,null)}function E(t,n,i,r){let a=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=a.clone(),i[t]=r),a=r}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=r===h?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:v[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial){const t=e.properties.get(a);t.light=i}return a}function T(n,r,a,s,o){if(!1===n.visible)return;const l=n.layers.test(r.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===h)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=E(n,u,s,o);e.renderBufferDirect(a,null,i,t,n,c)}}}else if(r.visible){const t=E(n,r,s,o);e.renderBufferDirect(a,null,i,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)T(c[e],r,a,s,o)}this.render=function(t,n,o){if(!1===S.enabled)return;if(!1===S.autoUpdate&&!1===S.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),p=e.state;p.setBlending(g),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const f=M!==h&&this.type===h,m=M===h&&this.type!==h;for(let v=0,g=t.length;v<g;v++){const l=t[v],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const u=c.getFrameExtents();if(r.multiply(u),a.copy(c.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(a.x=Math.floor(d/u.x),r.x=a.x*u.x,c.mapSize.x=a.x),r.y>d&&(a.y=Math.floor(d/u.y),r.y=a.y*u.y,c.mapSize.y=a.y)),null===c.map||!0===f||!0===m){const e=this.type!==h?{minFilter:ge,magFilter:ge}:{};null!==c.map&&c.map.dispose(),c.map=new zi(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),p.viewport(s),c.updateMatrices(l,e),i=c.getFrustum(),T(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===h&&w(c,o),c.needsUpdate=!1}M=this.type,S.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function Qd(e,t,n){const i=n.isWebGL2;function r(){let t=!1;const n=new Bi;let i=null;const r=new Bi(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}}function l(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?Le(e.DEPTH_TEST):Pe(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case H:e.depthFunc(e.NEVER);break;case G:e.depthFunc(e.ALWAYS);break;case j:e.depthFunc(e.LESS);break;case X:e.depthFunc(e.LEQUAL);break;case q:e.depthFunc(e.EQUAL);break;case $:e.depthFunc(e.GEQUAL);break;case Y:e.depthFunc(e.GREATER);break;case K:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function c(){let t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?Le(e.STENCIL_TEST):Pe(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null}}}const u=new r,d=new l,h=new c,p=new WeakMap,v=new WeakMap;let Z={},J={},Q=new WeakMap,ee=[],te=null,ne=!1,ie=null,re=null,ae=null,se=null,oe=null,le=null,ce=null,ue=new ha(0,0,0),de=0,he=!1,pe=null,fe=null,me=null,ve=null,ge=null;const ye=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let _e=!1,be=0;const xe=e.getParameter(e.VERSION);-1!==xe.indexOf("WebGL")?(be=parseFloat(/^WebGL (\d)/.exec(xe)[1]),_e=be>=1):-1!==xe.indexOf("OpenGL ES")&&(be=parseFloat(/^OpenGL ES (\d)/.exec(xe)[1]),_e=be>=2);let Se=null,Me={};const we=e.getParameter(e.SCISSOR_BOX),Ee=e.getParameter(e.VIEWPORT),Te=(new Bi).fromArray(we),Ae=(new Bi).fromArray(Ee);function Ce(t,n,r,a){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<r;l++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const Re={};function Le(t){!0!==Z[t]&&(e.enable(t),Z[t]=!0)}function Pe(t){!1!==Z[t]&&(e.disable(t),Z[t]=!1)}function Ie(t,n){return J[t]!==n&&(e.bindFramebuffer(t,n),J[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(J[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(J[e.DRAW_FRAMEBUFFER]=n)),!0)}function De(i,r){let a=ee,s=!1;if(i)if(a=Q.get(r),void 0===a&&(a=[],Q.set(r,a)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))}function Oe(t){return te!==t&&(e.useProgram(t),te=t,!0)}Re[e.TEXTURE_2D]=Ce(e.TEXTURE_2D,e.TEXTURE_2D,1),Re[e.TEXTURE_CUBE_MAP]=Ce(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Re[e.TEXTURE_2D_ARRAY]=Ce(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),Re[e.TEXTURE_3D]=Ce(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),d.setClear(1),h.setClear(0),Le(e.DEPTH_TEST),d.setFunc(X),Be(!1),Ve(s),Le(e.CULL_FACE),Fe(g);const Ne={[M]:e.FUNC_ADD,[w]:e.FUNC_SUBTRACT,[E]:e.FUNC_REVERSE_SUBTRACT};if(i)Ne[T]=e.MIN,Ne[A]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(Ne[T]=e.MIN_EXT,Ne[A]=e.MAX_EXT)}const ke={[C]:e.ZERO,[R]:e.ONE,[L]:e.SRC_COLOR,[I]:e.SRC_ALPHA,[U]:e.SRC_ALPHA_SATURATE,[k]:e.DST_COLOR,[O]:e.DST_ALPHA,[P]:e.ONE_MINUS_SRC_COLOR,[D]:e.ONE_MINUS_SRC_ALPHA,[F]:e.ONE_MINUS_DST_COLOR,[N]:e.ONE_MINUS_DST_ALPHA,[B]:e.CONSTANT_COLOR,[V]:e.ONE_MINUS_CONSTANT_COLOR,[z]:e.CONSTANT_ALPHA,[W]:e.ONE_MINUS_CONSTANT_ALPHA};function Fe(t,n,i,r,a,s,o,l,c,u){if(t!==g){if(!1===ne&&(Le(e.BLEND),ne=!0),t===S)a=a||n,s=s||i,o=o||r,n===re&&a===oe||(e.blendEquationSeparate(Ne[n],Ne[a]),re=n,oe=a),i===ae&&r===se&&s===le&&o===ce||(e.blendFuncSeparate(ke[i],ke[r],ke[s],ke[o]),ae=i,se=r,le=s,ce=o),!1!==l.equals(ue)&&c===de||(e.blendColor(l.r,l.g,l.b,c),ue.copy(l),de=c),ie=t,he=!1;else if(t!==ie||u!==he){if(re===M&&oe===M||(e.blendEquation(e.FUNC_ADD),re=M,oe=M),u)switch(t){case y:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case _:e.blendFunc(e.ONE,e.ONE);break;case b:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case x:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case y:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case _:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case b:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case x:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}ae=null,se=null,le=null,ce=null,ue.set(0,0,0),de=0,ie=t,he=u}}else!0===ne&&(Pe(e.BLEND),ne=!1)}function Ue(t,n){t.side===m?Pe(e.CULL_FACE):Le(e.CULL_FACE);let i=t.side===f;n&&(i=!i),Be(i),t.blending===y&&!1===t.transparent?Fe(g):Fe(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),d.setFunc(t.depthFunc),d.setTest(t.depthTest),d.setMask(t.depthWrite),u.setMask(t.colorWrite);const r=t.stencilWrite;h.setTest(r),r&&(h.setMask(t.stencilWriteMask),h.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),h.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),We(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Le(e.SAMPLE_ALPHA_TO_COVERAGE):Pe(e.SAMPLE_ALPHA_TO_COVERAGE)}function Be(t){pe!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),pe=t)}function Ve(t){t!==a?(Le(e.CULL_FACE),t!==fe&&(t===s?e.cullFace(e.BACK):t===o?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Pe(e.CULL_FACE),fe=t}function ze(t){t!==me&&(_e&&e.lineWidth(t),me=t)}function We(t,n,i){t?(Le(e.POLYGON_OFFSET_FILL),ve===n&&ge===i||(e.polygonOffset(n,i),ve=n,ge=i)):Pe(e.POLYGON_OFFSET_FILL)}function He(t){t?Le(e.SCISSOR_TEST):Pe(e.SCISSOR_TEST)}function Ge(t){void 0===t&&(t=e.TEXTURE0+ye-1),Se!==t&&(e.activeTexture(t),Se=t)}function je(t,n,i){void 0===i&&(i=null===Se?e.TEXTURE0+ye-1:Se);let r=Me[i];void 0===r&&(r={type:void 0,texture:void 0},Me[i]=r),r.type===t&&r.texture===n||(Se!==i&&(e.activeTexture(i),Se=i),e.bindTexture(t,n||Re[t]),r.type=t,r.texture=n)}function Xe(){const t=Me[Se];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function qe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function $e(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ye(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ke(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ze(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Je(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Qe(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function et(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function tt(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function nt(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function it(t){!1===Te.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),Te.copy(t))}function rt(t){!1===Ae.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Ae.copy(t))}function at(t,n){let i=v.get(n);void 0===i&&(i=new WeakMap,v.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))}function st(t,n){const i=v.get(n),r=i.get(t);p.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),p.set(n,r))}function ot(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),Z={},Se=null,Me={},J={},Q=new WeakMap,ee=[],te=null,ne=!1,ie=null,re=null,ae=null,se=null,oe=null,le=null,ce=null,ue=new ha(0,0,0),de=0,he=!1,pe=null,fe=null,me=null,ve=null,ge=null,Te.set(0,0,e.canvas.width,e.canvas.height),Ae.set(0,0,e.canvas.width,e.canvas.height),u.reset(),d.reset(),h.reset()}return{buffers:{color:u,depth:d,stencil:h},enable:Le,disable:Pe,bindFramebuffer:Ie,drawBuffers:De,useProgram:Oe,setBlending:Fe,setMaterial:Ue,setFlipSided:Be,setCullFace:Ve,setLineWidth:ze,setPolygonOffset:We,setScissorTest:He,activeTexture:Ge,bindTexture:je,unbindTexture:Xe,compressedTexImage2D:qe,compressedTexImage3D:$e,texImage2D:tt,texImage3D:nt,updateUBOMapping:at,uniformBlockBinding:st,texStorage2D:Qe,texStorage3D:et,texSubImage2D:Ye,texSubImage3D:Ke,compressedTexSubImage2D:Ze,compressedTexSubImage3D:Je,scissor:it,viewport:rt,reset:ot}}function eh(e,t,n,i,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ae){}function y(e,t){return g?new OffscreenCanvas(e,t):xi("canvas")}function _(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?ui:Math.floor,a=i(r*e.width),s=i(r*e.height);void 0===m&&(m=y(a,s));const o=n?y(a,s):m;o.width=a,o.height=s;const l=o.getContext("2d");return l.drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return li(e.width)&&li(e.height)}function x(e){return!o&&(e.wrapS!==me||e.wrapT!==me||e.minFilter!==ge&&e.minFilter!==Se)}function S(e,t){return e.generateMipmaps&&t&&e.minFilter!==ge&&e.minFilter!==Se}function M(t){e.generateMipmap(t)}function w(n,i,r,a,s=!1){if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(l=e.R8UI),r===e.UNSIGNED_SHORT&&(l=e.R16UI),r===e.UNSIGNED_INT&&(l=e.R32UI),r===e.BYTE&&(l=e.R8I),r===e.SHORT&&(l=e.R16I),r===e.INT&&(l=e.R32I)),i===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA){const t=s?Jt:Ri.getTransfer(a);r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=t===Qt?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===S(e,n)||e.isFramebufferTexture&&e.minFilter!==ge&&e.minFilter!==Se?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(t){return t===ge||t===ye||t===be?e.NEAREST:e.LINEAR}function A(e){const t=e.target;t.removeEventListener("dispose",A),R(t),t.isVideoTexture&&f.delete(t)}function C(e){const t=e.target;t.removeEventListener("dispose",C),P(t)}function R(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=v.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&L(e),0===Object.keys(r).length&&v.delete(n)}i.remove(e)}function L(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source,a=v.get(r);delete a[n.__cacheKey],s.memory.textures--}function P(t){const n=t.texture,r=i.get(t),a=i.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(r.__webglFramebuffer[i]))for(let t=0;t<r.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(r.__webglFramebuffer[i][t]);else e.deleteFramebuffer(r.__webglFramebuffer[i]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[i])}else{if(Array.isArray(r.__webglFramebuffer))for(let t=0;t<r.__webglFramebuffer.length;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=i.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),i.remove(n[o])}i.remove(n),i.remove(t)}let I=0;function D(){I=0}function O(){const e=I;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),I+=1,e}function N(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}function k(t,r){const a=i.get(t);if(t.isVideoTexture&&ie(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void j(a,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}function F(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?j(a,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)}function U(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?j(a,t,r):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)}function B(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?X(a,t,r):n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+r)}const V={[fe]:e.REPEAT,[me]:e.CLAMP_TO_EDGE,[ve]:e.MIRRORED_REPEAT},z={[ge]:e.NEAREST,[ye]:e.NEAREST_MIPMAP_NEAREST,[be]:e.NEAREST_MIPMAP_LINEAR,[Se]:e.LINEAR,[Me]:e.LINEAR_MIPMAP_NEAREST,[Ee]:e.LINEAR_MIPMAP_LINEAR},W={[_n]:e.NEVER,[Tn]:e.ALWAYS,[bn]:e.LESS,[Sn]:e.LEQUAL,[xn]:e.EQUAL,[En]:e.GEQUAL,[Mn]:e.GREATER,[wn]:e.NOTEQUAL};function H(n,a,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,V[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,V[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,V[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,z[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,z[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===me&&a.wrapT===me||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T(a.minFilter)),a.minFilter!==ge&&a.minFilter!==Se&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,W[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===ge)return;if(a.minFilter!==be&&a.minFilter!==Ee)return;if(a.type===De&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===Oe&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function G(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",A));const r=n.source;let a=v.get(r);void 0===a&&(a={},v.set(r,a));const o=N(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&L(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return i}function j(t,r,s){let l=e.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=e.TEXTURE_3D);const c=G(t,r),d=r.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=i.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=Ri.getPrimaries(Ri.workingColorSpace),i=r.colorSpace===qt?null:Ri.getPrimaries(r.colorSpace),p=r.colorSpace===qt||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=x(r)&&!1===b(r.image);let m=_(r.image,f,!1,u);m=re(r,m);const v=b(m)||o,g=a.convert(r.format,r.colorSpace);let y,T=a.convert(r.type),A=w(r.internalFormat,g,T,r.colorSpace,r.isVideoTexture);H(l,r,v);const C=r.mipmaps,R=o&&!0!==r.isVideoTexture,L=void 0===h.__version||!0===c,P=E(r,m,v);if(r.isDepthTexture)A=e.DEPTH_COMPONENT,o?A=r.type===De?e.DEPTH_COMPONENT32F:r.type===Ie?e.DEPTH_COMPONENT24:r.type===Fe?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:r.type===De&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===We&&A===e.DEPTH_COMPONENT&&r.type!==Le&&r.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ie,T=a.convert(r.type)),r.format===He&&A===e.DEPTH_COMPONENT&&(A=e.DEPTH_STENCIL,r.type!==Fe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Fe,T=a.convert(r.type))),L&&(R?n.texStorage2D(e.TEXTURE_2D,1,A,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,A,m.width,m.height,0,g,T,null));else if(r.isDataTexture)if(C.length>0&&v){R&&L&&n.texStorage2D(e.TEXTURE_2D,P,A,C[0].width,C[0].height);for(let t=0,i=C.length;t<i;t++)y=C[t],R?n.texSubImage2D(e.TEXTURE_2D,t,0,0,y.width,y.height,g,T,y.data):n.texImage2D(e.TEXTURE_2D,t,A,y.width,y.height,0,g,T,y.data);r.generateMipmaps=!1}else R?(L&&n.texStorage2D(e.TEXTURE_2D,P,A,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,g,T,m.data)):n.texImage2D(e.TEXTURE_2D,0,A,m.width,m.height,0,g,T,m.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){R&&L&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,A,C[0].width,C[0].height,m.depth);for(let t=0,i=C.length;t<i;t++)y=C[t],r.format!==Be?null!==g?R?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,y.width,y.height,m.depth,g,y.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,A,y.width,y.height,m.depth,0,y.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,y.width,y.height,m.depth,g,T,y.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,A,y.width,y.height,m.depth,0,g,T,y.data)}else{R&&L&&n.texStorage2D(e.TEXTURE_2D,P,A,C[0].width,C[0].height);for(let t=0,i=C.length;t<i;t++)y=C[t],r.format!==Be?null!==g?R?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,y.width,y.height,g,y.data):n.compressedTexImage2D(e.TEXTURE_2D,t,A,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?n.texSubImage2D(e.TEXTURE_2D,t,0,0,y.width,y.height,g,T,y.data):n.texImage2D(e.TEXTURE_2D,t,A,y.width,y.height,0,g,T,y.data)}else if(r.isDataArrayTexture)R?(L&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,A,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,g,T,m.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,A,m.width,m.height,m.depth,0,g,T,m.data);else if(r.isData3DTexture)R?(L&&n.texStorage3D(e.TEXTURE_3D,P,A,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,g,T,m.data)):n.texImage3D(e.TEXTURE_3D,0,A,m.width,m.height,m.depth,0,g,T,m.data);else if(r.isFramebufferTexture){if(L)if(R)n.texStorage2D(e.TEXTURE_2D,P,A,m.width,m.height);else{let t=m.width,i=m.height;for(let r=0;r<P;r++)n.texImage2D(e.TEXTURE_2D,r,A,t,i,0,g,T,null),t>>=1,i>>=1}}else if(C.length>0&&v){R&&L&&n.texStorage2D(e.TEXTURE_2D,P,A,C[0].width,C[0].height);for(let t=0,i=C.length;t<i;t++)y=C[t],R?n.texSubImage2D(e.TEXTURE_2D,t,0,0,g,T,y):n.texImage2D(e.TEXTURE_2D,t,A,g,T,y);r.generateMipmaps=!1}else R?(L&&n.texStorage2D(e.TEXTURE_2D,P,A,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,g,T,m)):n.texImage2D(e.TEXTURE_2D,0,A,g,T,m);S(r,v)&&M(l),h.__version=d.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function X(t,r,s){if(6!==r.image.length)return;const l=G(t,r),u=r.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const d=i.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=Ri.getPrimaries(Ri.workingColorSpace),i=r.colorSpace===qt?null:Ri.getPrimaries(r.colorSpace),h=r.colorSpace===qt||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=r.isCompressedTexture||r.image[0].isCompressedTexture,f=r.image[0]&&r.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=p||f?f?r.image[e].image:r.image[e]:_(r.image[e],!1,!0,c),m[e]=re(r,m[e]);const v=m[0],g=b(v)||o,y=a.convert(r.format,r.colorSpace),x=a.convert(r.type),T=w(r.internalFormat,y,x,r.colorSpace),A=o&&!0!==r.isVideoTexture,C=void 0===d.__version||!0===l;let R,L=E(r,v,g);if(H(e.TEXTURE_CUBE_MAP,r,g),p){A&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,L,T,v.width,v.height);for(let t=0;t<6;t++){R=m[t].mipmaps;for(let i=0;i<R.length;i++){const a=R[i];r.format!==Be?null!==y?A?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,y,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,T,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,y,x,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,T,a.width,a.height,0,y,x,a.data)}}}else{R=r.mipmaps,A&&C&&(R.length>0&&L++,n.texStorage2D(e.TEXTURE_CUBE_MAP,L,T,m[0].width,m[0].height));for(let t=0;t<6;t++)if(f){A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,y,x,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,m[t].width,m[t].height,0,y,x,m[t].data);for(let i=0;i<R.length;i++){const r=R[i],a=r.image[t].image;A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,a.width,a.height,y,x,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,T,a.width,a.height,0,y,x,a.data)}}else{A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,y,x,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,y,x,m[t]);for(let i=0;i<R.length;i++){const r=R[i];A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,y,x,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,T,y,x,r.image[t])}}}S(r,g)&&M(e.TEXTURE_CUBE_MAP),d.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function q(t,r,s,o,l,c){const u=a.convert(s.format,s.colorSpace),d=a.convert(s.type),p=w(s.internalFormat,u,d,s.colorSpace),f=i.get(r);if(!f.__hasExternalTextures){const t=Math.max(1,r.width>>c),i=Math.max(1,r.height>>c);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,c,p,t,i,r.depth,0,u,d,null):n.texImage2D(l,c,p,t,i,0,u,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),ne(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,i.get(s).__webglTexture,0,te(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,i.get(s).__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function $(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=!0===o?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||ne(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===De?r=e.DEPTH_COMPONENT32F:t.type===Ie&&(r=e.DEPTH_COMPONENT24));const i=te(n);ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=te(n);i&&!1===ne(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const s=t[r],o=a.convert(s.format,s.colorSpace),l=a.convert(s.type),c=w(s.internalFormat,o,l,s.colorSpace),u=te(n);i&&!1===ne(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function Y(t,r){const a=r&&r.isWebGLCubeRenderTarget;if(a)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),k(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,o=te(r);if(r.depthTexture.format===We)ne(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==He)throw new Error("Unknown depthTexture format");ne(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function K(t){const r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");Y(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),$(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),$(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function Z(t,n,r){const a=i.get(t);void 0!==n&&q(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&K(t)}function J(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=b(t)||o;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===ne(t)){const i=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=w(r.internalFormat,s,o,r.colorSpace,!0===t.isXRRenderTarget),u=te(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),$(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),H(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)q(c.__webglFramebuffer[n][i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else q(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);S(l,p)&&M(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const r=t.texture;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),H(e.TEXTURE_2D,s,p),q(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),S(s,p)&&M(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),H(i,l,p),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)q(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,i,n);else q(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i,0);S(l,p)&&M(i),n.unbindTexture()}t.depthBuffer&&K(t)}function Q(t){const r=b(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(S(o,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),M(r),n.unbindTexture()}}}function ee(t){if(o&&t.samples>0&&!1===ne(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),d){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}}function te(e){return Math.min(d,e.samples)}function ne(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ie(e){const t=s.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}function re(e,n){const i=e.colorSpace,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Un||i!==Yt&&i!==qt&&(Ri.getTransfer(i)===Qt?!1===o?!0===t.has("EXT_sRGB")&&r===Be?(e.format=Un,e.minFilter=Se,e.generateMipmaps=!1):n=Di.sRGBToLinear(n):r===Be&&a===Ae||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=O,this.resetTextureUnits=D,this.setTexture2D=k,this.setTexture2DArray=F,this.setTexture3D=U,this.setTextureCube=B,this.rebindTextures=Z,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=ee,this.setupDepthRenderbuffer=K,this.setupFrameBufferTexture=q,this.useMultisampledRTT=ne}function th(e,t,n){const i=n.isWebGL2;function r(n,r=qt){let a;const s=Ri.getTransfer(r);if(n===Ae)return e.UNSIGNED_BYTE;if(n===Ne)return e.UNSIGNED_SHORT_4_4_4_4;if(n===ke)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Ce)return e.BYTE;if(n===Re)return e.SHORT;if(n===Le)return e.UNSIGNED_SHORT;if(n===Pe)return e.INT;if(n===Ie)return e.UNSIGNED_INT;if(n===De)return e.FLOAT;if(n===Oe)return i?e.HALF_FLOAT:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(n===Ue)return e.ALPHA;if(n===Be)return e.RGBA;if(n===Ve)return e.LUMINANCE;if(n===ze)return e.LUMINANCE_ALPHA;if(n===We)return e.DEPTH_COMPONENT;if(n===He)return e.DEPTH_STENCIL;if(n===Un)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(n===Ge)return e.RED;if(n===je)return e.RED_INTEGER;if(n===Xe)return e.RG;if(n===qe)return e.RG_INTEGER;if(n===$e)return e.RGBA_INTEGER;if(n===Ye||n===Ke||n===Ze||n===Je)if(s===Qt){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===Ye)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ke)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ze)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Je)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===Ye)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ke)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ze)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Je)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Qe||n===et||n===tt||n===nt){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===Qe)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===et)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===tt)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===nt)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===it)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===rt||n===at){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===rt)return s===Qt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===at)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===st||n===ot||n===lt||n===ct||n===ut||n===dt||n===ht||n===pt||n===ft||n===mt||n===vt||n===gt||n===yt||n===_t){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===st)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ot)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===lt)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ct)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ut)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===dt)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ht)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===pt)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ft)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===mt)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===vt)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===gt)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===yt)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===_t)return s===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===bt||n===xt||n===St){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(n===bt)return s===Qt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===xt)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===St)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Mt||n===wt||n===Et||n===Tt){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(n===bt)return a.COMPRESSED_RED_RGTC1_EXT;if(n===wt)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Et)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Tt)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Fe?i?e.UNSIGNED_INT_24_8:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}return{convert:r}}class nh extends _s{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ih extends Yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const rh={type:"move"};class ah{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ih,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ih,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $i,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $i),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ih,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $i,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $i),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),i=this._getHandJoint(l,a);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(rh)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new ih;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class sh extends Ui{constructor(e,t,n,i,r,a,s,o,l,c){if(c=void 0!==c?c:We,c!==We&&c!==He)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===We&&(n=Ie),void 0===n&&c===He&&(n=Fe),super(null,i,r,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:ge,this.minFilter=void 0!==o?o:ge,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class oh extends zn{constructor(e,t){super();const n=this;let i=null,r=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let m=null,v=null;const g=[],y=[],_=new _s;_.layers.enable(1),_.viewport=new Bi;const b=new _s;b.layers.enable(2),b.viewport=new Bi;const x=[_,b],S=new nh;S.layers.enable(1),S.layers.enable(2);let M=null,w=null;function E(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function T(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",T),i.removeEventListener("inputsourceschange",A);for(let e=0;e<g.length;e++){const t=y[e];null!==t&&(y[e]=null,g[e].disconnect(t))}M=null,w=null,e.setRenderTarget(m),h=null,d=null,u=null,i=null,v=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=y.indexOf(n);i>=0&&(y[i]=null,g[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=y.indexOf(n);if(-1===i){for(let e=0;e<g.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}const r=g[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new ah,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new ah,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new ah,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",T),i.addEventListener("inputsourceschange",A),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),v=new zi(h.framebufferWidth,h.framebufferHeight,{format:Be,type:Ae,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,a=null,s=null;f.depth&&(s=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?He:We,a=f.stencil?Fe:Ie);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(o),i.updateRenderState({layers:[d]}),v=new zi(d.textureWidth,d.textureHeight,{format:Be,type:Ae,depthTexture:new sh(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});const l=e.properties.get(v);l.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),N.setContext(i),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const C=new $i,R=new $i;function L(e,t,n){C.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const i=C.distanceTo(R),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=s*u,p=s*d,f=i/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const v=s+f,g=o+f,y=h-m,_=p+(i-m),b=l*o/g*v,x=c*o/g*v;e.projectionMatrix.makePerspective(y,_,b,x,v,g),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}function I(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*jn*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}this.updateCamera=function(e){if(null===i)return;S.near=b.near=_.near=e.near,S.far=b.far=_.far=e.far,M===S.near&&w===S.far||(i.updateRenderState({depthNear:S.near,depthFar:S.far}),M=S.near,w=S.far);const t=e.parent,n=S.cameras;P(S,t);for(let i=0;i<n.length;i++)P(n[i],t);2===n.length?L(S,_,b):S.projectionMatrix.copy(_.projectionMatrix),I(e,S,t)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let D=null;function O(t,i){if(c=i.getViewerPose(l||a),p=i,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let a=null;if(null!==h)a=h.getViewport(r);else{const t=u.getViewSubImage(d,r);a=t.viewport,0===i&&(e.setRenderTargetTextures(v,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let s=x[i];void 0===s&&(s=new _s,s.layers.enable(i),s.viewport=new Bi,x[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===i&&(S.matrix.copy(s.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(s)}}for(let e=0;e<g.length;e++){const t=y[e],n=g[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}D&&D(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null}const N=new Is;N.setAnimationLoop(O),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function lh(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(t,n){n.color.getRGB(t.fogColor.value,ps(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)}function r(e,t,n,i,r){t.isMeshBasicMaterial||t.isMeshLambertMaterial?a(e,t):t.isMeshToonMaterial?(a(e,t),d(e,t)):t.isMeshPhongMaterial?(a(e,t),u(e,t)):t.isMeshStandardMaterial?(a(e,t),h(e,t),t.isMeshPhysicalMaterial&&p(e,t,r)):t.isMeshMatcapMaterial?(a(e,t),m(e,t)):t.isMeshDepthMaterial?a(e,t):t.isMeshDistanceMaterial?(a(e,t),v(e,t)):t.isMeshNormalMaterial?a(e,t):t.isLineBasicMaterial?(s(e,t),t.isLineDashedMaterial&&o(e,t)):t.isPointsMaterial?l(e,t,n,i):t.isSpriteMaterial?c(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function a(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===f&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===f&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const a=t.get(r).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}function s(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}function o(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function l(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function c(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function u(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}function d(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function h(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform)),e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));const r=t.get(i).envMap;r&&(e.envMapIntensity.value=i.envMapIntensity)}function p(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===f&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}function m(e,t){t.matcap&&(e.matcap.value=t.matcap)}function v(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function ch(e,t,n,i){let r={},a={},s=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t){const n=t.program;i.uniformBlockBinding(e,n)}function c(e,n){let s=r[e.id];void 0===s&&(f(e),s=u(e),r[e.id]=s,e.addEventListener("dispose",v));const o=n.program;i.updateUBOMapping(e,o);const l=t.render.frame;a[e.id]!==l&&(h(e),a[e.id]=l)}function u(t){const n=d();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}function d(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(t){const n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,s=i.length;r<s;r++){const t=i[r];if(!0===p(t,r,a)){const n=t.__offset,i=Array.isArray(t.value)?t.value:[t.value];let r=0;for(let a=0;a<i.length;a++){const s=i[a],o=m(s);"number"===typeof s?(t.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,n+r,t.__data)):s.isMatrix3?(t.__data[0]=s.elements[0],t.__data[1]=s.elements[1],t.__data[2]=s.elements[2],t.__data[3]=s.elements[0],t.__data[4]=s.elements[3],t.__data[5]=s.elements[4],t.__data[6]=s.elements[5],t.__data[7]=s.elements[0],t.__data[8]=s.elements[6],t.__data[9]=s.elements[7],t.__data[10]=s.elements[8],t.__data[11]=s.elements[0]):(s.toArray(t.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,n,t.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}function p(e,t,n){const i=e.value;if(void 0===n[t]){if("number"===typeof i)n[t]=i;else{const e=Array.isArray(i)?i:[i],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());n[t]=r}return!0}if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],r=Array.isArray(i)?i:[i];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(r[t]))return n.copy(r[t]),!0}}return!1}function f(e){const t=e.uniforms;let n=0;const i=16;let r=0;for(let a=0,s=t.length;a<s;a++){const e=t[a],s={boundary:0,storage:0},o=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=o.length;t<n;t++){const e=o[t],n=m(e);s.boundary+=n.boundary,s.storage+=n.storage}if(e.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,a>0){r=n%i;const t=i-r;0!==r&&t-s.boundary<0&&(n+=i-r,e.__offset=n)}n+=s.storage}return r=n%i,r>0&&(n+=i-r),e.__size=n,e.__cache={},this}function m(e){const t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function v(t){const n=t.target;n.removeEventListener("dispose",v);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}function g(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},a={}}return{bind:l,update:c,dispose:g}}class uh{constructor(e={}){const{canvas:t=Si(),context:i=null,depth:r=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==i?i.getContextAttributes().alpha:s;const v=new Uint32Array(4),g=new Int32Array(4);let y=null,_=null;const b=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=$t,this._useLegacyLights=!1,this.toneMapping=ee,this.toneMappingExposure=1;const S=this;let M=!1,w=0,E=0,T=null,A=-1,C=null;const R=new Bi,L=new Bi;let P=null;const I=new ha(0);let D=0,O=t.width,N=t.height,k=1,F=null,U=null;const B=new Bi(0,0,O,N),V=new Bi(0,0,O,N);let z=!1;const W=new Ps;let H=!1,G=!1,j=null;const X=new wr,q=new mi,$=new $i,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===T?k:1}let Z,J,Q,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ve,ge,ye,_e,be,xe,Se=i;function Me(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${n}`),t.addEventListener("webglcontextlost",Ce,!1),t.addEventListener("webglcontextrestored",Re,!1),t.addEventListener("webglcontextcreationerror",Pe,!1),null===Se){const t=["webgl2","webgl","experimental-webgl"];if(!0===S.isWebGL1Renderer&&t.shift(),Se=Me(t,e),null===Se)throw Me(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&Se instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Se.getShaderPrecisionFormat&&(Se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(lt){throw console.error("THREE.WebGLRenderer: "+lt.message),lt}function we(){Z=new Gc(Se),J=new bc(Se,Z,e),Z.init(J),_e=new th(Se,Z,J),Q=new Qd(Se,Z,J),te=new qc(Se),ne=new kd,ie=new eh(Se,Z,Q,ne,J,_e,te),re=new Sc(S),ae=new Hc(S),se=new Ds(Se,J),be=new yc(Se,Z,se,J),oe=new jc(Se,se,te,be),le=new Zc(Se,oe,se,te),ve=new Kc(Se,J,ie),pe=new xc(ne),ce=new Nd(S,re,ae,Z,J,be,pe),ue=new lh(S,ne),de=new Vd,he=new qd(Z,J),me=new gc(S,re,ae,Q,le,h,l),fe=new Jd(S,le,J),xe=new ch(Se,te,J,Q),ge=new _c(Se,Z,te,J),ye=new Xc(Se,Z,te,J),te.programs=ce.programs,S.capabilities=J,S.extensions=Z,S.properties=ne,S.renderLists=de,S.shadowMap=fe,S.state=Q,S.info=te}we();const Te=new oh(S,Se);function Ce(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Re(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const e=te.autoReset,t=fe.enabled,n=fe.autoUpdate,i=fe.needsUpdate,r=fe.type;we(),te.autoReset=e,fe.enabled=t,fe.autoUpdate=n,fe.needsUpdate=i,fe.type=r}function Pe(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ue(e){const t=e.target;t.removeEventListener("dispose",Ue),Ve(t)}function Ve(e){ze(e),ne.remove(e)}function ze(e){const t=ne.get(e).programs;void 0!==t&&(t.forEach(function(e){ce.releaseProgram(e)}),e.isShaderMaterial&&ce.releaseShaderCache(e))}function We(e,t,n){!0===e.transparent&&e.side===m&&!1===e.forceSinglePass?(e.side=f,e.needsUpdate=!0,nt(e,t,n),e.side=p,e.needsUpdate=!0,nt(e,t,n),e.side=m):nt(e,t,n)}this.xr=Te,this.getContext=function(){return Se},this.getContextAttributes=function(){return Se.getContextAttributes()},this.forceContextLoss=function(){const e=Z.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Z.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(O,N,!1))},this.getSize=function(e){return e.set(O,N)},this.setSize=function(e,n,i=!0){Te.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=e,N=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(O*k,N*k).floor()},this.setDrawingBufferSize=function(e,n,i){O=e,N=n,k=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(R)},this.getViewport=function(e){return e.copy(B)},this.setViewport=function(e,t,n,i){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,n,i),Q.viewport(R.copy(B).multiplyScalar(k).floor())},this.getScissor=function(e){return e.copy(V)},this.setScissor=function(e,t,n,i){e.isVector4?V.set(e.x,e.y,e.z,e.w):V.set(e,t,n,i),Q.scissor(L.copy(V).multiplyScalar(k).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(e){Q.setScissorTest(z=e)},this.setOpaqueSort=function(e){F=e},this.setTransparentSort=function(e){U=e},this.getClearColor=function(e){return e.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==T){const t=T.texture.format;e=t===$e||t===qe||t===je}if(e){const e=T.texture.type,t=e===Ae||e===Ie||e===Le||e===Fe||e===Ne||e===ke,n=me.getClearColor(),i=me.getClearAlpha(),r=n.r,a=n.g,s=n.b;t?(v[0]=r,v[1]=a,v[2]=s,v[3]=i,Se.clearBufferuiv(Se.COLOR,0,v)):(g[0]=r,g[1]=a,g[2]=s,g[3]=i,Se.clearBufferiv(Se.COLOR,0,g))}else i|=Se.COLOR_BUFFER_BIT}t&&(i|=Se.DEPTH_BUFFER_BIT),n&&(i|=Se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Se.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ce,!1),t.removeEventListener("webglcontextrestored",Re,!1),t.removeEventListener("webglcontextcreationerror",Pe,!1),de.dispose(),he.dispose(),ne.dispose(),re.dispose(),ae.dispose(),le.dispose(),be.dispose(),xe.dispose(),ce.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",Xe),Te.removeEventListener("sessionend",Ye),j&&(j.dispose(),j=null),Ke.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=Y);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=at(e,t,n,i,r);Q.setMaterial(i,s);let l=n.index,c=1;if(!0===i.wireframe){if(l=oe.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let m;be.setup(r,i,o,n,l);let v=ge;if(null!==l&&(m=se.get(l),v=ye,v.setIndex(m)),r.isMesh)!0===i.wireframe?(Q.setLineWidth(i.wireframeLinewidth*K()),v.setMode(Se.LINES)):v.setMode(Se.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),Q.setLineWidth(e*K()),r.isLineSegments?v.setMode(Se.LINES):r.isLineLoop?v.setMode(Se.LINE_LOOP):v.setMode(Se.LINE_STRIP)}else r.isPoints?v.setMode(Se.POINTS):r.isSprite&&v.setMode(Se.TRIANGLES);if(r.isInstancedMesh)v.renderInstances(h,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,f,t)}else v.render(h,f)},this.compile=function(e,t,n=null){null===n&&(n=e),_=he.get(n),_.init(),x.push(_),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))}),_.setupLights(S._useLegacyLights);const i=new Set;return e.traverse(function(e){const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];We(a,n,e),i.add(a)}else We(t,n,e),i.add(t)}),x.pop(),_=null,i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){const t=ne.get(e),n=t.currentProgram;n.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==Z.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let He=null;function Ge(e){He&&He(e)}function Xe(){Ke.stop()}function Ye(){Ke.start()}const Ke=new Is;function Ze(e,t,n,i){if(!1===e.visible)return;const r=e.layers.test(t.layers);if(r)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)_.pushLight(e),e.castShadow&&_.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||W.intersectsSprite(e)){i&&$.setFromMatrixPosition(e.matrixWorld).applyMatrix4(X);const t=le.update(e),r=e.material;r.visible&&y.push(e,t,r,n,$.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||W.intersectsObject(e))){const t=le.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),$.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),$.copy(t.boundingSphere.center)),$.applyMatrix4(e.matrixWorld).applyMatrix4(X)),Array.isArray(r)){const i=t.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&y.push(e,t,o,n,$.z,s)}}else r.visible&&y.push(e,t,r,n,$.z,null)}const a=e.children;for(let s=0,o=a.length;s<o;s++)Ze(a[s],t,n,i)}function Je(e,t,n,i){const r=e.opaque,a=e.transmissive,s=e.transparent;_.setupLightsView(n),!0===H&&pe.setGlobalState(S.clippingPlanes,n),a.length>0&&Qe(r,a,t,n),i&&Q.viewport(R.copy(i)),r.length>0&&et(r,t,n),a.length>0&&et(a,t,n),s.length>0&&et(s,t,n),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function Qe(e,t,n,i){const r=!0===n.isScene?n.overrideMaterial:null;if(null!==r)return;const a=J.isWebGL2;null===j&&(j=new zi(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")?Oe:Ae,minFilter:Ee,samples:a?4:0})),S.getDrawingBufferSize(q),a?j.setSize(q.x,q.y):j.setSize(ui(q.x),ui(q.y));const s=S.getRenderTarget();S.setRenderTarget(j),S.getClearColor(I),D=S.getClearAlpha(),D<1&&S.setClearColor(16777215,.5),S.clear();const o=S.toneMapping;S.toneMapping=ee,et(e,n,i),ie.updateMultisampleRenderTarget(j),ie.updateRenderTargetMipmap(j);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],r=e.object,a=e.geometry,s=e.material,o=e.group;if(s.side===m&&r.layers.test(i.layers)){const e=s.side;s.side=f,s.needsUpdate=!0,tt(r,n,i,a,s,o),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(ie.updateMultisampleRenderTarget(j),ie.updateRenderTargetMipmap(j)),S.setRenderTarget(s),S.setClearColor(I,D),S.toneMapping=o}function et(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===i?a.material:i,c=a.group;s.layers.test(n.layers)&&tt(s,t,n,o,l,c)}}function tt(e,t,n,i,r,a){e.onBeforeRender(S,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(S,t,n,i,e,a),!0===r.transparent&&r.side===m&&!1===r.forceSinglePass?(r.side=f,r.needsUpdate=!0,S.renderBufferDirect(n,t,i,r,e,a),r.side=p,r.needsUpdate=!0,S.renderBufferDirect(n,t,i,r,e,a),r.side=m):S.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(S,t,n,i,r,a)}function nt(e,t,n){!0!==t.isScene&&(t=Y);const i=ne.get(e),r=_.state.lights,a=_.state.shadowsArray,s=r.state.version,o=ce.getParameters(e,r.state,a,t,n),l=ce.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ae:re).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",Ue),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===s)return rt(e,o),u}else o.uniforms=ce.getUniforms(e),e.onBuild(n,o,S),e.onBeforeCompile(o,S),u=ce.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const d=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=pe.uniform),rt(e,o),i.needsLights=ot(e),i.lightsStateVersion=s,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function it(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=id.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function rt(e,t){const n=ne.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function at(e,t,n,i,r){!0!==t.isScene&&(t=Y),ie.resetTextureUnits();const a=t.fog,s=i.isMeshStandardMaterial?t.environment:null,o=null===T?S.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:Yt,l=(i.isMeshStandardMaterial?ae:re).get(i.envMap||s),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=ee;i.toneMapped&&(null!==T&&!0!==T.isXRRenderTarget||(f=S.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,g=ne.get(i),y=_.state.lights;if(!0===H&&(!0===G||e!==C)){const t=e===C&&i.id===A;pe.setState(i,e,t)}let b=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputColorSpace!==o||r.isInstancedMesh&&!1===g.instancing?b=!0:r.isInstancedMesh||!0!==g.instancing?r.isSkinnedMesh&&!1===g.skinning?b=!0:r.isSkinnedMesh||!0!==g.skinning?r.isInstancedMesh&&!0===g.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===g.instancingColor&&null!==r.instanceColor||g.envMap!==l||!0===i.fog&&g.fog!==a?b=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===pe.numPlanes&&g.numIntersection===pe.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==u||g.morphTargets!==d||g.morphNormals!==h||g.morphColors!==p||g.toneMapping!==f||!0===J.isWebGL2&&g.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,g.__version=i.version);let x=g.currentProgram;!0===b&&(x=nt(i,t,r));let M=!1,w=!1,E=!1;const R=x.getUniforms(),L=g.uniforms;if(Q.useProgram(x.program)&&(M=!0,w=!0,E=!0),i.id!==A&&(A=i.id,w=!0),M||C!==e){R.setValue(Se,"projectionMatrix",e.projectionMatrix),R.setValue(Se,"viewMatrix",e.matrixWorldInverse);const t=R.map.cameraPosition;void 0!==t&&t.setValue(Se,$.setFromMatrixPosition(e.matrixWorld)),J.logarithmicDepthBuffer&&R.setValue(Se,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&R.setValue(Se,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,w=!0,E=!0)}if(r.isSkinnedMesh){R.setOptional(Se,r,"bindMatrix"),R.setOptional(Se,r,"bindMatrixInverse");const e=r.skeleton;e&&(J.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(Se,"boneTexture",e.boneTexture,ie),R.setValue(Se,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const P=n.morphAttributes;if((void 0!==P.position||void 0!==P.normal||void 0!==P.color&&!0===J.isWebGL2)&&ve.update(r,n,x),(w||g.receiveShadow!==r.receiveShadow)&&(g.receiveShadow=r.receiveShadow,R.setValue(Se,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),w&&(R.setValue(Se,"toneMappingExposure",S.toneMappingExposure),g.needsLights&&st(L,E),a&&!0===i.fog&&ue.refreshFogUniforms(L,a),ue.refreshMaterialUniforms(L,i,k,N,j),id.upload(Se,it(g),L,ie)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(id.upload(Se,it(g),L,ie),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&R.setValue(Se,"center",r.center),R.setValue(Se,"modelViewMatrix",r.modelViewMatrix),R.setValue(Se,"normalMatrix",r.normalMatrix),R.setValue(Se,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(J.isWebGL2){const n=e[t];xe.update(n,x),xe.bind(n,x)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return x}function st(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function ot(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ke.setAnimationLoop(Ge),"undefined"!==typeof self&&Ke.setContext(self),this.setAnimationLoop=function(e){He=e,Te.setAnimationLoop(e),null===e?Ke.stop():Ke.start()},Te.addEventListener("sessionstart",Xe),Te.addEventListener("sessionend",Ye),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===M)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Te.enabled&&!0===Te.isPresenting&&(!0===Te.cameraAutoUpdate&&Te.updateCamera(t),t=Te.getCamera()),!0===e.isScene&&e.onBeforeRender(S,e,t,T),_=he.get(e,x.length),_.init(),x.push(_),X.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),W.setFromProjectionMatrix(X),G=this.localClippingEnabled,H=pe.init(this.clippingPlanes,G),y=de.get(e,b.length),y.init(),b.push(y),Ze(e,t,0,S.sortObjects),y.finish(),!0===S.sortObjects&&y.sort(F,U),this.info.render.frame++,!0===H&&pe.beginShadows();const n=_.state.shadowsArray;if(fe.render(n,e,t),!0===H&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset(),me.render(y,e),_.setupLights(S._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Je(y,e,i,i.viewport)}}else Je(y,e,t);null!==T&&(ie.updateMultisampleRenderTarget(T),ie.updateRenderTargetMipmap(T)),!0===e.isScene&&e.onAfterRender(S,e,t),be.resetDefaultState(),A=-1,C=null,x.pop(),_=x.length>0?x[x.length-1]:null,b.pop(),y=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(e,t,n){ne.get(e.texture).__webglTexture=t,ne.get(e.depthTexture).__webglTexture=n;const i=ne.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=ne.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){T=e,w=t,E=n;let i=!0,r=null,a=!1,s=!1;if(e){const o=ne.get(e);void 0!==o.__useDefaultFramebuffer?(Q.bindFramebuffer(Se.FRAMEBUFFER,null),i=!1):void 0===o.__webglFramebuffer?ie.setupRenderTarget(e):o.__hasExternalTextures&&ie.rebindTextures(e,ne.get(e.texture).__webglTexture,ne.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=ne.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],a=!0):r=J.isWebGL2&&e.samples>0&&!1===ie.useMultisampledRTT(e)?ne.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,R.copy(e.viewport),L.copy(e.scissor),P=e.scissorTest}else R.copy(B).multiplyScalar(k).floor(),L.copy(V).multiplyScalar(k).floor(),P=z;const o=Q.bindFramebuffer(Se.FRAMEBUFFER,r);if(o&&J.drawBuffers&&i&&Q.drawBuffers(e,r),Q.viewport(R),Q.scissor(L),Q.setScissorTest(P),a){const i=ne.get(e.texture);Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=ne.get(e.texture),r=t||0;Se.framebufferTextureLayer(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}A=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=ne.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){Q.bindFramebuffer(Se.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==Be&&_e.convert(o)!==Se.getParameter(Se.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Oe&&(Z.has("EXT_color_buffer_half_float")||J.isWebGL2&&Z.has("EXT_color_buffer_float"));if(l!==Ae&&_e.convert(l)!==Se.getParameter(Se.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==De||!(J.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Se.readPixels(t,n,i,r,_e.convert(o),_e.convert(l),a)}finally{const e=null!==T?ne.get(T).__webglFramebuffer:null;Q.bindFramebuffer(Se.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);ie.setTexture2D(t,0),Se.copyTexSubImage2D(Se.TEXTURE_2D,n,0,0,e.x,e.y,r,a),Q.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,a=t.image.height,s=_e.convert(n.format),o=_e.convert(n.type);ie.setTexture2D(n,0),Se.pixelStorei(Se.UNPACK_FLIP_Y_WEBGL,n.flipY),Se.pixelStorei(Se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Se.pixelStorei(Se.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?Se.texSubImage2D(Se.TEXTURE_2D,i,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?Se.compressedTexSubImage2D(Se.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):Se.texSubImage2D(Se.TEXTURE_2D,i,e.x,e.y,s,o,t.image),0===i&&n.generateMipmaps&&Se.generateMipmap(Se.TEXTURE_2D),Q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(S.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=_e.convert(i.format),c=_e.convert(i.type);let u;if(i.isData3DTexture)ie.setTexture3D(i,0),u=Se.TEXTURE_3D;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ie.setTexture2DArray(i,0),u=Se.TEXTURE_2D_ARRAY}Se.pixelStorei(Se.UNPACK_FLIP_Y_WEBGL,i.flipY),Se.pixelStorei(Se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),Se.pixelStorei(Se.UNPACK_ALIGNMENT,i.unpackAlignment);const d=Se.getParameter(Se.UNPACK_ROW_LENGTH),h=Se.getParameter(Se.UNPACK_IMAGE_HEIGHT),p=Se.getParameter(Se.UNPACK_SKIP_PIXELS),f=Se.getParameter(Se.UNPACK_SKIP_ROWS),m=Se.getParameter(Se.UNPACK_SKIP_IMAGES),v=n.isCompressedTexture?n.mipmaps[0]:n.image;Se.pixelStorei(Se.UNPACK_ROW_LENGTH,v.width),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,v.height),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,e.min.x),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,e.min.y),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?Se.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Se.compressedTexSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,v.data)):Se.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,v),Se.pixelStorei(Se.UNPACK_ROW_LENGTH,d),Se.pixelStorei(Se.UNPACK_IMAGE_HEIGHT,h),Se.pixelStorei(Se.UNPACK_SKIP_PIXELS,p),Se.pixelStorei(Se.UNPACK_SKIP_ROWS,f),Se.pixelStorei(Se.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&Se.generateMipmap(u),Q.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?ie.setTextureCube(e,0):e.isData3DTexture?ie.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ie.setTexture2DArray(e,0):ie.setTexture2D(e,0),Q.unbindTexture()},this.resetState=function(){w=0,E=0,T=null,Q.reset(),be.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Bn}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Kt?"display-p3":"srgb",t.unpackColorSpace=Ri.workingColorSpace===Zt?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===$t?Wt:zt}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Wt?$t:Yt}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class dh extends uh{}dh.prototype.isWebGL1Renderer=!0;class hh{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ha(e),this.density=t}clone(){return new hh(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ph{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ha(e),this.near=t,this.far=n}clone(){return new ph(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class fh extends Yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class mh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=An,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const vh=new $i;class gh{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)vh.fromBufferAttribute(this,t),vh.applyMatrix4(e),this.setXYZ(t,vh.x,vh.y,vh.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)vh.fromBufferAttribute(this,t),vh.applyNormalMatrix(e),this.setXYZ(t,vh.x,vh.y,vh.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)vh.fromBufferAttribute(this,t),vh.transformDirection(e),this.setXYZ(t,vh.x,vh.y,vh.z);return this}setX(e,t){return this.normalized&&(t=pi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=pi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=pi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=pi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=hi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=hi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=hi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=hi(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array),i=pi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=pi(t,this.array),n=pi(n,this.array),i=pi(i,this.array),r=pi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new wa(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new gh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class yh extends ma{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ha(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _h;const bh=new $i,xh=new $i,Sh=new $i,Mh=new mi,wh=new mi,Eh=new wr,Th=new $i,Ah=new $i,Ch=new $i,Rh=new mi,Lh=new mi,Ph=new mi;class Ih extends Yr{constructor(e=new yh){if(super(),this.isSprite=!0,this.type="Sprite",void 0===_h){_h=new Wa;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new mh(e,5);_h.setIndex([0,1,2,0,2,3]),_h.setAttribute("position",new gh(t,3,0,!1)),_h.setAttribute("uv",new gh(t,2,3,!1))}this.geometry=_h,this.material=e,this.center=new mi(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xh.setFromMatrixScale(this.matrixWorld),Eh.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Sh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xh.multiplyScalar(-Sh.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;Dh(Th.set(-.5,-.5,0),Sh,a,xh,i,r),Dh(Ah.set(.5,-.5,0),Sh,a,xh,i,r),Dh(Ch.set(.5,.5,0),Sh,a,xh,i,r),Rh.set(0,0),Lh.set(1,0),Ph.set(1,1);let s=e.ray.intersectTriangle(Th,Ah,Ch,!1,bh);if(null===s&&(Dh(Ah.set(-.5,.5,0),Sh,a,xh,i,r),Lh.set(0,1),s=e.ray.intersectTriangle(Th,Ch,Ah,!1,bh),null===s))return;const o=e.ray.origin.distanceTo(bh);o<e.near||o>e.far||t.push({distance:o,point:bh.clone(),uv:oa.getInterpolation(bh,Th,Ah,Ch,Rh,Lh,Ph,new mi),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Dh(e,t,n,i,r,a){Mh.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(wh.x=a*Mh.x-r*Mh.y,wh.y=r*Mh.x+a*Mh.y):wh.copy(Mh),e.copy(t),e.x+=wh.x,e.y+=wh.y,e.applyMatrix4(Eh)}const Oh=new $i,Nh=new $i;class kh extends Yr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length;r++)if(t<i[r].distance)break;return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){const n=this.levels;if(n.length>0){Oh.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Oh);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Oh.setFromMatrixPosition(e.matrixWorld),Nh.setFromMatrixPosition(this.matrixWorld);const n=Oh.distanceTo(Nh)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Fh=new $i,Uh=new Bi,Bh=new Bi,Vh=new $i,zh=new wr,Wh=new $i,Hh=new mr,Gh=new wr,jh=new Mr;class Xh extends ss{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=se,this.bindMatrix=new wr,this.bindMatrixInverse=new wr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Zi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Wh),this.boundingBox.expandByPoint(Wh)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new mr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Wh),this.boundingSphere.expandByPoint(Wh)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Hh.copy(this.boundingSphere),Hh.applyMatrix4(i),!1!==e.ray.intersectsSphere(Hh)&&(Gh.copy(i).invert(),jh.copy(e.ray).applyMatrix4(Gh),null!==this.boundingBox&&!1===jh.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,jh)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Bi,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===se?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===oe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;Uh.fromBufferAttribute(i.attributes.skinIndex,e),Bh.fromBufferAttribute(i.attributes.skinWeight,e),Fh.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=Bh.getComponent(r);if(0!==e){const i=Uh.getComponent(r);zh.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Vh.copy(Fh).applyMatrix4(zh),e)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class qh extends Yr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class $h extends Ui{constructor(e=null,t=1,n=1,i,r,a,s,o,l=ge,c=ge,u,d){super(null,a,s,o,l,c,i,r,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Yh=new wr,Kh=new wr;class Zh{constructor(e=[],t=[]){this.uuid=Xn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new wr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new wr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const i=e[r]?e[r].matrixWorld:Kh;Yh.multiplyMatrices(i,t[r]),Yh.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new Zh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=ci(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new $h(t,e,e,Be,De);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new qh),this.bones.push(r),this.boneInverses.push((new wr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class Jh extends wa{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qh=new wr,ep=new wr,tp=[],np=new Zi,ip=new wr,rp=new ss,ap=new mr;class sp extends ss{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Jh(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,ip)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Zi),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Qh),np.copy(e.boundingBox).applyMatrix4(Qh),this.boundingBox.union(np)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new mr),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Qh),ap.copy(e.boundingSphere).applyMatrix4(Qh),this.boundingSphere.union(ap)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(rp.geometry=this.geometry,rp.material=this.material,void 0!==rp.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),ap.copy(this.boundingSphere),ap.applyMatrix4(n),!1!==e.ray.intersectsSphere(ap)))for(let r=0;r<i;r++){this.getMatrixAt(r,Qh),ep.multiplyMatrices(n,Qh),rp.matrixWorld=ep,rp.raycast(e,tp);for(let e=0,n=tp.length;e<n;e++){const n=tp[e];n.instanceId=r,n.object=this,t.push(n)}tp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Jh(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class op extends ma{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ha(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const lp=new $i,cp=new $i,up=new wr,dp=new Mr,hp=new mr;class pp extends Yr{constructor(e=new Wa,t=new op){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)lp.fromBufferAttribute(t,e-1),cp.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=lp.distanceTo(cp);e.setAttribute("lineDistance",new Da(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),hp.copy(n.boundingSphere),hp.applyMatrix4(i),hp.radius+=r,!1===e.ray.intersectsSphere(hp))return;up.copy(i).invert(),dp.copy(e.ray).applyMatrix4(up);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new $i,c=new $i,u=new $i,d=new $i,h=this.isLineSegments?2:1,p=n.index,f=n.attributes,m=f.position;if(null!==p){const n=Math.max(0,a.start),i=Math.min(p.count,a.start+a.count);for(let r=n,a=i-1;r<a;r+=h){const n=p.getX(r),i=p.getX(r+1);l.fromBufferAttribute(m,n),c.fromBufferAttribute(m,i);const a=dp.distanceSqToSegment(l,c,d,u);if(a>o)continue;d.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(d);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,a.start),i=Math.min(m.count,a.start+a.count);for(let r=n,a=i-1;r<a;r+=h){l.fromBufferAttribute(m,r),c.fromBufferAttribute(m,r+1);const n=dp.distanceSqToSegment(l,c,d,u);if(n>o)continue;d.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}}const fp=new $i,mp=new $i;class vp extends pp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)fp.fromBufferAttribute(t,e),mp.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+fp.distanceTo(mp);e.setAttribute("lineDistance",new Da(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gp extends pp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class yp extends ma{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ha(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _p=new wr,bp=new Mr,xp=new mr,Sp=new $i;class Mp extends Yr{constructor(e=new Wa,t=new yp){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),xp.copy(n.boundingSphere),xp.applyMatrix4(i),xp.radius+=r,!1===e.ray.intersectsSphere(xp))return;_p.copy(i).invert(),bp.copy(e.ray).applyMatrix4(_p);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes,u=c.position;if(null!==l){const n=Math.max(0,a.start),r=Math.min(l.count,a.start+a.count);for(let a=n,s=r;a<s;a++){const n=l.getX(a);Sp.fromBufferAttribute(u,n),wp(Sp,n,o,i,e,t,this)}}else{const n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let a=n,s=r;a<s;a++)Sp.fromBufferAttribute(u,a),wp(Sp,a,o,i,e,t,this)}}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}}function wp(e,t,n,i,r,a,s){const o=bp.distanceSqToPoint(e);if(o<n){const n=new $i;bp.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}class Ep extends Ui{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:Se,this.magFilter=void 0!==r?r:Se,this.generateMipmaps=!1;const c=this;function u(){c.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image,t="requestVideoFrameCallback"in e;!1===t&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Tp extends Ui{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ge,this.minFilter=ge,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ap extends Ui{constructor(e,t,n,i,r,a,s,o,l,c,u,d){super(null,a,s,o,l,c,i,r,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Cp extends Ap{constructor(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=me}}class Rp extends Ap{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ce),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Lp extends Ui{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Pp{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let s,o=0,l=r-1;while(o<=l)if(i=Math.floor(o+(l-o)/2),s=n[i]-a,s<0)o=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===a)return i/(r-1);const c=n[i],u=n[i+1],d=u-c,h=(a-c)/d,p=(i+h)/(r-1);return p}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),s=this.getPoint(r),o=t||(a.isVector2?new mi:new $i);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new $i,i=[],r=[],a=[],s=new $i,o=new wr;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new $i)}r[0]=new $i,a[0]=new $i;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),a[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),a[h]=a[h-1].clone(),s.crossVectors(i[h-1],i[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(qn(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(o.makeRotationAxis(s,e))}a[h].crossVectors(i[h],r[h])}if(!0===t){let t=Math.acos(qn(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ip extends Pp{constructor(e=0,t=0,n=1,i=1,r=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new mi,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;while(r<0)r+=i;while(r>i)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Dp extends Ip{constructor(e,t,n,i,r,a){super(e,t,n,n,i,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Op(){let e=0,t=0,n=0,i=0;function r(r,a,s,o){e=r,t=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(i-t)/(s+o)+(i-n)/o;l*=s,c*=s,r(t,n,l,c)},calc:function(r){const a=r*r,s=a*r;return e+t*r+n*a+i*s}}}const Np=new $i,kp=new Op,Fp=new Op,Up=new Op;class Bp extends Pp{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new $i){const n=t,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=i[(l-1)%r]:(Np.subVectors(i[0],i[1]).add(i[0]),s=Np);const u=i[l%r],d=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(Np.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=Np),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),i=Math.pow(d.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),kp.initNonuniformCatmullRom(s.x,u.x,d.x,o.x,t,n,i),Fp.initNonuniformCatmullRom(s.y,u.y,d.y,o.y,t,n,i),Up.initNonuniformCatmullRom(s.z,u.z,d.z,o.z,t,n,i)}else"catmullrom"===this.curveType&&(kp.initCatmullRom(s.x,u.x,d.x,o.x,this.tension),Fp.initCatmullRom(s.y,u.y,d.y,o.y,this.tension),Up.initCatmullRom(s.z,u.z,d.z,o.z,this.tension));return n.set(kp.calc(c),Fp.calc(c),Up.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new $i).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Vp(e,t,n,i,r){const a=.5*(i-t),s=.5*(r-n),o=e*e,l=e*o;return(2*n-2*i+a+s)*l+(-3*n+3*i-2*a-s)*o+a*e+n}function zp(e,t){const n=1-e;return n*n*t}function Wp(e,t){return 2*(1-e)*e*t}function Hp(e,t){return e*e*t}function Gp(e,t,n,i){return zp(e,t)+Wp(e,n)+Hp(e,i)}function jp(e,t){const n=1-e;return n*n*n*t}function Xp(e,t){const n=1-e;return 3*n*n*e*t}function qp(e,t){return 3*(1-e)*e*e*t}function $p(e,t){return e*e*e*t}function Yp(e,t,n,i,r){return jp(e,t)+Xp(e,n)+qp(e,i)+$p(e,r)}class Kp extends Pp{constructor(e=new mi,t=new mi,n=new mi,i=new mi){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new mi){const n=t,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(Yp(e,i.x,r.x,a.x,s.x),Yp(e,i.y,r.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Zp extends Pp{constructor(e=new $i,t=new $i,n=new $i,i=new $i){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new $i){const n=t,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(Yp(e,i.x,r.x,a.x,s.x),Yp(e,i.y,r.y,a.y,s.y),Yp(e,i.z,r.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Jp extends Pp{constructor(e=new mi,t=new mi){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new mi){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new mi){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Qp extends Pp{constructor(e=new $i,t=new $i){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $i){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $i){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ef extends Pp{constructor(e=new mi,t=new mi,n=new mi){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new mi){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(Gp(e,i.x,r.x,a.x),Gp(e,i.y,r.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tf extends Pp{constructor(e=new $i,t=new $i,n=new $i){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new $i){const n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(Gp(e,i.x,r.x,a.x),Gp(e,i.y,r.y,a.y),Gp(e,i.z,r.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nf extends Pp{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new mi){const n=t,i=this.points,r=(i.length-1)*e,a=Math.floor(r),s=r-a,o=i[0===a?a:a-1],l=i[a],c=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Vp(s,o.x,l.x,c.x,u.x),Vp(s,o.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new mi).fromArray(n))}return this}}var rf=Object.freeze({__proto__:null,ArcCurve:Dp,CatmullRomCurve3:Bp,CubicBezierCurve:Kp,CubicBezierCurve3:Zp,EllipseCurve:Ip,LineCurve:Jp,LineCurve3:Qp,QuadraticBezierCurve:ef,QuadraticBezierCurve3:tf,SplineCurve:nf});class af extends Pp{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new rf[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;while(r<i.length){if(i[r]>=n){const e=i[r]-n,a=this.curves[r],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new rf[n.type]).fromJSON(n))}return this}}class sf extends af{constructor(e){super(),this.type="Path",this.currentPoint=new mi,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Jp(this.currentPoint.clone(),new mi(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new ef(this.currentPoint.clone(),new mi(e,t),new mi(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,a){const s=new Kp(this.currentPoint.clone(),new mi(e,t),new mi(n,i),new mi(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new nf(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,i,r,a),this}absarc(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}ellipse(e,t,n,i,r,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,a,s,o),this}absellipse(e,t,n,i,r,a,s,o){const l=new Ip(e,t,n,i,r,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class of extends Wa{constructor(e=[new mi(0,-.5),new mi(.5,0),new mi(0,.5)],t=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=qn(i,0,2*Math.PI);const r=[],a=[],s=[],o=[],l=[],c=1/t,u=new $i,d=new mi,h=new $i,p=new $i,f=new $i;let m=0,v=0;for(let g=0;g<=e.length-1;g++)switch(g){case 0:m=e[g+1].x-e[g].x,v=e[g+1].y-e[g].y,h.x=1*v,h.y=-m,h.z=0*v,f.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[g+1].x-e[g].x,v=e[g+1].y-e[g].y,h.x=1*v,h.y=-m,h.z=0*v,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),o.push(h.x,h.y,h.z),f.copy(p)}for(let g=0;g<=t;g++){const r=n+g*c*i,h=Math.sin(r),p=Math.cos(r);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*p,a.push(u.x,u.y,u.z),d.x=g/t,d.y=n/(e.length-1),s.push(d.x,d.y);const i=o[3*n+0]*h,r=o[3*n+1],c=o[3*n+0]*p;l.push(i,r,c)}}for(let g=0;g<t;g++)for(let t=0;t<e.length-1;t++){const n=t+g*e.length,i=n,a=n+e.length,s=n+e.length+1,o=n+1;r.push(i,a,o),r.push(s,o,a)}this.setIndex(r),this.setAttribute("position",new Da(a,3)),this.setAttribute("uv",new Da(s,2)),this.setAttribute("normal",new Da(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new of(e.points,e.segments,e.phiStart,e.phiLength)}}class lf extends of{constructor(e=1,t=1,n=4,i=8){const r=new sf;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new lf(e.radius,e.length,e.capSegments,e.radialSegments)}}class cf extends Wa{constructor(e=1,t=32,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],a=[],s=[],o=[],l=new $i,c=new mi;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const r=n+u/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new Da(a,3)),this.setAttribute("normal",new Da(s,3)),this.setAttribute("uv",new Da(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class uf extends Wa{constructor(e=1,t=1,n=1,i=32,r=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let v=0;function g(){const a=new $i,g=new $i;let y=0;const _=(t-e)/n;for(let l=0;l<=r;l++){const c=[],v=l/r,y=v*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*o+s,l=Math.sin(r),f=Math.cos(r);g.x=y*l,g.y=-v*n+m,g.z=y*f,u.push(g.x,g.y,g.z),a.set(l,_,f).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-v),c.push(p++)}f.push(c)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=f[t][e],i=f[t+1][e],r=f[t+1][e+1],a=f[t][e+1];c.push(n,i,a),c.push(i,r,a),y+=6}l.addGroup(v,y,0),v+=y}function y(n){const r=p,a=new mi,f=new $i;let g=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*_,0),d.push(0,_,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=i;e++){const t=e/i,n=t*o+s,r=Math.cos(n),l=Math.sin(n);f.x=y*l,f.y=m*_,f.z=y*r,u.push(f.x,f.y,f.z),d.push(0,_,0),a.x=.5*r+.5,a.y=.5*l*_+.5,h.push(a.x,a.y),p++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),g+=3}l.addGroup(v,g,!0===n?1:2),v+=g}g(),!1===a&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Da(u,3)),this.setAttribute("normal",new Da(d,3)),this.setAttribute("uv",new Da(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class df extends uf{constructor(e=1,t=1,n=32,i=1,r=!1,a=0,s=2*Math.PI){super(0,e,t,n,i,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}static fromJSON(e){return new df(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hf extends Wa{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],a=[];function s(e){const n=new $i,i=new $i,r=new $i;for(let a=0;a<t.length;a+=3)h(t[a+0],n),h(t[a+1],i),h(t[a+2],r),o(n,i,r,e)}function o(e,t,n,i){const r=i+1,a=[];for(let s=0;s<=r;s++){a[s]=[];const i=e.clone().lerp(n,s/r),o=t.clone().lerp(n,s/r),l=r-s;for(let e=0;e<=l;e++)a[s][e]=0===e&&s===r?i:i.clone().lerp(o,e/l)}for(let s=0;s<r;s++)for(let e=0;e<2*(r-s)-1;e++){const t=Math.floor(e/2);e%2===0?(d(a[s][t+1]),d(a[s+1][t]),d(a[s][t])):(d(a[s][t+1]),d(a[s+1][t+1]),d(a[s+1][t]))}}function l(e){const t=new $i;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}function c(){const e=new $i;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];const n=m(e)/2/Math.PI+.5,i=v(e)/Math.PI+.5;a.push(n,1-i)}p(),u()}function u(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),s=Math.min(t,n,i);r>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}function d(e){r.push(e.x,e.y,e.z)}function h(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function p(){const e=new $i,t=new $i,n=new $i,i=new $i,s=new mi,o=new mi,l=new mi;for(let c=0,u=0;c<r.length;c+=9,u+=6){e.set(r[c+0],r[c+1],r[c+2]),t.set(r[c+3],r[c+4],r[c+5]),n.set(r[c+6],r[c+7],r[c+8]),s.set(a[u+0],a[u+1]),o.set(a[u+2],a[u+3]),l.set(a[u+4],a[u+5]),i.copy(e).add(t).add(n).divideScalar(3);const d=m(i);f(s,u+0,e,d),f(o,u+2,t,d),f(l,u+4,n,d)}}function f(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}s(i),l(n),c(),this.setAttribute("position",new Da(r,3)),this.setAttribute("normal",new Da(r.slice(),3)),this.setAttribute("uv",new Da(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hf(e.vertices,e.indices,e.radius,e.details)}}class pf extends hf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pf(e.radius,e.detail)}}const ff=new $i,mf=new $i,vf=new $i,gf=new oa;class yf extends Wa{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(Gn*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=gf;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),gf.getNormal(vf),u[0]=`${Math.round(t.x*i)},${Math.round(t.y*i)},${Math.round(t.z*i)}`,u[1]=`${Math.round(n.x*i)},${Math.round(n.y*i)},${Math.round(n.z*i)}`,u[2]=`${Math.round(o.x*i)},${Math.round(o.y*i)},${Math.round(o.z*i)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],a=gf[c[e]],s=gf[c[t]],o=`${n}_${i}`,p=`${i}_${n}`;p in d&&d[p]?(vf.dot(d[p].normal)<=r&&(h.push(a.x,a.y,a.z),h.push(s.x,s.y,s.z)),d[p]=null):o in d||(d[o]={index0:l[e],index1:l[t],normal:vf.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];ff.fromBufferAttribute(s,t),mf.fromBufferAttribute(s,n),h.push(ff.x,ff.y,ff.z),h.push(mf.x,mf.y,mf.z)}this.setAttribute("position",new Da(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class _f extends sf{constructor(e){super(e),this.uuid=Xn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new sf).fromJSON(n))}return this}}const bf={triangulate:function(e,t,n=2){const i=t&&t.length,r=i?t[0]*n:e.length;let a=xf(e,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,d,h,p;if(i&&(a=Cf(e,t,a,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)d=e[t],h=e[t+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-o,u-l),p=0!==p?32767/p:0}return Mf(a,s,n,o,l,p,0),s}};function xf(e,t,n,i,r){let a,s;if(r===Zf(e,t,n,i)>0)for(a=t;a<n;a+=i)s=$f(a,e[a],e[a+1],s);else for(a=n-i;a>=t;a-=i)s=$f(a,e[a],e[a+1],s);return s&&Vf(s,s.next)&&(Yf(s),s=s.next),s}function Sf(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Vf(i,i.next)&&0!==Bf(i.prev,i,i.next))i=i.next;else{if(Yf(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Mf(e,t,n,i,r,a,s){if(!e)return;!s&&a&&Df(e,i,r,a);let o,l,c=e;while(e.prev!==e.next)if(o=e.prev,l=e.next,a?Ef(e,i,r,a):wf(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Yf(e),e=l.next,c=l.next;else if(e=l,e===c){s?1===s?(e=Tf(Sf(e),t,n),Mf(e,t,n,i,r,a,2)):2===s&&Af(e,t,n,i,r,a):Mf(Sf(e),t,n,i,r,a,1);break}}function wf(e){const t=e.prev,n=e,i=e.next;if(Bf(t,n,i)>=0)return!1;const r=t.x,a=n.x,s=i.x,o=t.y,l=n.y,c=i.y,u=r<a?r<s?r:s:a<s?a:s,d=o<l?o<c?o:c:l<c?l:c,h=r>a?r>s?r:s:a>s?a:s,p=o>l?o>c?o:c:l>c?l:c;let f=i.next;while(f!==t){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Ff(r,o,a,l,s,c,f.x,f.y)&&Bf(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Ef(e,t,n,i){const r=e.prev,a=e,s=e.next;if(Bf(r,a,s)>=0)return!1;const o=r.x,l=a.x,c=s.x,u=r.y,d=a.y,h=s.y,p=o<l?o<c?o:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=o>l?o>c?o:c:l>c?l:c,v=u>d?u>h?u:h:d>h?d:h,g=Nf(p,f,t,n,i),y=Nf(m,v,t,n,i);let _=e.prevZ,b=e.nextZ;while(_&&_.z>=g&&b&&b.z<=y){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=v&&_!==r&&_!==s&&Ff(o,u,l,d,c,h,_.x,_.y)&&Bf(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=v&&b!==r&&b!==s&&Ff(o,u,l,d,c,h,b.x,b.y)&&Bf(b.prev,b,b.next)>=0)return!1;b=b.nextZ}while(_&&_.z>=g){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=v&&_!==r&&_!==s&&Ff(o,u,l,d,c,h,_.x,_.y)&&Bf(_.prev,_,_.next)>=0)return!1;_=_.prevZ}while(b&&b.z<=y){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=v&&b!==r&&b!==s&&Ff(o,u,l,d,c,h,b.x,b.y)&&Bf(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Tf(e,t,n){let i=e;do{const r=i.prev,a=i.next.next;!Vf(r,a)&&zf(r,i,i.next,a)&&jf(r,a)&&jf(a,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),Yf(i),Yf(i.next),i=e=a),i=i.next}while(i!==e);return Sf(i)}function Af(e,t,n,i,r,a){let s=e;do{let e=s.next.next;while(e!==s.prev){if(s.i!==e.i&&Uf(s,e)){let o=qf(s,e);return s=Sf(s,s.next),o=Sf(o,o.next),Mf(s,t,n,i,r,a,0),void Mf(o,t,n,i,r,a,0)}e=e.next}s=s.next}while(s!==e)}function Cf(e,t,n,i){const r=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*i,l=a<s-1?t[a+1]*i:e.length,c=xf(e,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(kf(c));for(r.sort(Rf),a=0;a<r.length;a++)n=Lf(r[a],n);return n}function Rf(e,t){return e.x-t.x}function Lf(e,t){const n=Pf(e,t);if(!n)return t;const i=qf(n,e);return Sf(i,i.next),Sf(n,n.next)}function Pf(e,t){let n,i=t,r=-1/0;const a=e.x,s=e.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){const e=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=a&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===a))return n}i=i.next}while(i!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,d=1/0;i=n;do{a>=i.x&&i.x>=l&&a!==i.x&&Ff(s<c?a:r,s,l,c,s<c?r:a,s,i.x,i.y)&&(u=Math.abs(s-i.y)/(a-i.x),jf(i,e)&&(u<d||u===d&&(i.x>n.x||i.x===n.x&&If(n,i)))&&(n=i,d=u)),i=i.next}while(i!==o);return n}function If(e,t){return Bf(e.prev,e,t.prev)<0&&Bf(t.next,e,e.next)<0}function Df(e,t,n,i){let r=e;do{0===r.z&&(r.z=Nf(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,Of(r)}function Of(e){let t,n,i,r,a,s,o,l,c=1;do{n=e,e=null,a=null,s=0;while(n){for(s++,i=n,o=0,t=0;t<c;t++)if(o++,i=i.nextZ,!i)break;l=c;while(o>0||l>0&&i)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(s>1);return e}function Nf(e,t,n,i,r){return e=(e-n)*r|0,t=(t-i)*r|0,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function kf(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ff(e,t,n,i,r,a,s,o){return(r-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(i-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(r-s)*(i-o)}function Uf(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Gf(e,t)&&(jf(e,t)&&jf(t,e)&&Xf(e,t)&&(Bf(e.prev,e,t.prev)||Bf(e,t.prev,t))||Vf(e,t)&&Bf(e.prev,e,e.next)>0&&Bf(t.prev,t,t.next)>0)}function Bf(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Vf(e,t){return e.x===t.x&&e.y===t.y}function zf(e,t,n,i){const r=Hf(Bf(e,t,n)),a=Hf(Bf(e,t,i)),s=Hf(Bf(n,i,e)),o=Hf(Bf(n,i,t));return r!==a&&s!==o||(!(0!==r||!Wf(e,n,t))||(!(0!==a||!Wf(e,i,t))||(!(0!==s||!Wf(n,e,i))||!(0!==o||!Wf(n,t,i)))))}function Wf(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Hf(e){return e>0?1:e<0?-1:0}function Gf(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&zf(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function jf(e,t){return Bf(e.prev,e,e.next)<0?Bf(e,t,e.next)>=0&&Bf(e,e.prev,t)>=0:Bf(e,t,e.prev)<0||Bf(e,e.next,t)<0}function Xf(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}function qf(e,t){const n=new Kf(e.i,e.x,e.y),i=new Kf(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function $f(e,t,n,i){const r=new Kf(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Yf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Kf(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zf(e,t,n,i){let r=0;for(let a=t,s=n-i;a<n;a+=i)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}class Jf{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return Jf.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];Qf(e),em(n,e);let a=e.length;t.forEach(Qf);for(let o=0;o<t.length;o++)i.push(a),a+=t[o].length,em(n,t[o]);const s=bf.triangulate(n,i);for(let o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}}function Qf(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function em(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class tm extends Wa{constructor(e=new _f([new mi(.5,.5),new mi(-.5,.5),new mi(-.5,-.5),new mi(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let s=0,o=e.length;s<o;s++){const t=e[s];a(t)}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:nm;let v,g,y,_,b,x=!1;f&&(v=f.getSpacedPoints(o),x=!0,c=!1,g=f.computeFrenetFrames(o,!1),y=new $i,_=new $i,b=new $i),c||(p=0,u=0,d=0,h=0);const S=e.extractPoints(s);let M=S.shape;const w=S.holes,E=!Jf.isClockWise(M);if(E){M=M.reverse();for(let e=0,t=w.length;e<t;e++){const t=w[e];Jf.isClockWise(t)&&(w[e]=t.reverse())}}const T=Jf.triangulateShape(M,w),A=M;for(let t=0,n=w.length;t<n;t++){const e=w[t];M=M.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const R=M.length,L=T.length;function P(e,t,n){let i,r,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+o*o,d=s*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-o/d,f=t.y+s/d,m=n.x-c/h,v=n.y+l/h,g=((m-p)*c-(v-f)*l)/(s*c-o*l);i=p+s*g-e.x,r=f+o*g-e.y;const y=i*i+r*r;if(y<=2)return new mi(i,r);a=Math.sqrt(y/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=s,a=Math.sqrt(u)):(i=s,r=o,a=Math.sqrt(u/2))}return new mi(i/a,r/a)}const I=[];for(let t=0,n=A.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=P(A[t],A[i],A[r]);const D=[];let O,N=I.concat();for(let t=0,n=w.length;t<n;t++){const e=w[t];O=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),O[t]=P(e[t],e[i],e[r]);D.push(O),N=N.concat(O)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=A.length;t<r;t++){const e=C(A[t],I[t],i);V(e.x,e.y,-n)}for(let t=0,r=w.length;t<r;t++){const e=w[t];O=D[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],O[t],i);V(r.x,r.y,-n)}}}const k=d+h;for(let t=0;t<R;t++){const e=c?C(M[t],N[t],k):M[t];x?(_.copy(g.normals[0]).multiplyScalar(e.x),y.copy(g.binormals[0]).multiplyScalar(e.y),b.copy(v[0]).add(_).add(y),V(b.x,b.y,b.z)):V(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<R;e++){const n=c?C(M[e],N[e],k):M[e];x?(_.copy(g.normals[t]).multiplyScalar(n.x),y.copy(g.binormals[t]).multiplyScalar(n.y),b.copy(v[t]).add(_).add(y),V(b.x,b.y,b.z)):V(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=A.length;t<r;t++){const e=C(A[t],I[t],i);V(e.x,e.y,l+n)}for(let t=0,r=w.length;t<r;t++){const e=w[t];O=D[t];for(let t=0,r=e.length;t<r;t++){const r=C(e[t],O[t],i);x?V(r.x,r.y+v[o-1].y,v[o-1].x+n):V(r.x,r.y,l+n)}}}function F(){const e=i.length/3;if(c){let e=0,t=R*e;for(let n=0;n<L;n++){const e=T[n];z(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=R*e;for(let n=0;n<L;n++){const e=T[n];z(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<L;e++){const t=T[e];z(t[2],t[1],t[0])}for(let e=0;e<L;e++){const t=T[e];z(t[0]+R*o,t[1]+R*o,t[2]+R*o)}}n.addGroup(e,i.length/3-e,0)}function U(){const e=i.length/3;let t=0;B(A,t),t+=A.length;for(let n=0,i=w.length;n<i;n++){const e=w[n];B(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}function B(e,t){let n=e.length;while(--n>=0){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=R*e,a=R*(e+1),s=t+i+n,o=t+r+n,l=t+r+a,c=t+i+a;W(s,o,l,c)}}}function V(e,t,n){a.push(e),a.push(t),a.push(n)}function z(e,t,r){H(e),H(t),H(r);const a=i.length/3,s=m.generateTopUV(n,i,a-3,a-2,a-1);G(s[0]),G(s[1]),G(s[2])}function W(e,t,r,a){H(e),H(t),H(a),H(t),H(r),H(a);const s=i.length/3,o=m.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[3]),G(o[1]),G(o[2]),G(o[3])}function H(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function G(e){r.push(e.x),r.push(e.y)}F(),U()}this.setAttribute("position",new Da(i,3)),this.setAttribute("uv",new Da(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return im(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new rf[i.type]).fromJSON(i)),new tm(n,e.options)}}const nm={generateTopUV:function(e,t,n,i,r){const a=t[3*n],s=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new mi(a,s),new mi(o,l),new mi(c,u)]},generateSideWallUV:function(e,t,n,i,r,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new mi(s,1-l),new mi(c,1-d),new mi(h,1-f),new mi(m,1-g)]:[new mi(o,1-l),new mi(u,1-d),new mi(p,1-f),new mi(v,1-g)]}};function im(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class rm extends hf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rm(e.radius,e.detail)}}class am extends hf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new am(e.radius,e.detail)}}class sm extends Wa{constructor(e=.5,t=1,n=32,i=1,r=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const s=[],o=[],l=[],c=[];let u=e;const d=(t-e)/i,h=new $i,p=new mi;for(let f=0;f<=i;f++){for(let e=0;e<=n;e++){const i=r+e/n*a;h.x=u*Math.cos(i),h.y=u*Math.sin(i),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(let f=0;f<i;f++){const e=f*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,a=i+n+1,o=i+n+2,l=i+1;s.push(r,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new Da(o,3)),this.setAttribute("normal",new Da(l,3)),this.setAttribute("uv",new Da(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class om extends Wa{constructor(e=new _f([new mi(0,.5),new mi(-.5,-.5),new mi(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,o,c),s+=o,o=0;function l(e){const s=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Jf.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===Jf.isClockWise(e)&&(u[t]=e.reverse())}const d=Jf.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),a.push(e.x,e.y)}for(let t=0,i=d.length;t<i;t++){const e=d[t],i=e[0]+s,r=e[1]+s,a=e[2]+s;n.push(i,r,a),o+=3}}this.setIndex(n),this.setAttribute("position",new Da(i,3)),this.setAttribute("normal",new Da(r,3)),this.setAttribute("uv",new Da(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return lm(t,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new om(n,e.curveSegments)}}function lm(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}class cm extends Wa{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new $i,d=new $i,h=[],p=[],f=[],m=[];for(let v=0;v<=n;v++){const h=[],g=v/n;let y=0;0===v&&0===a?y=.5/t:v===n&&o===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(a+g*s),u.y=e*Math.cos(a+g*s),u.z=e*Math.sin(i+o*r)*Math.sin(a+g*s),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(o+y,1-g),h.push(l++)}c.push(h)}for(let v=0;v<n;v++)for(let e=0;e<t;e++){const t=c[v][e+1],i=c[v][e],r=c[v+1][e],s=c[v+1][e+1];(0!==v||a>0)&&h.push(t,i,s),(v!==n-1||o<Math.PI)&&h.push(i,r,s)}this.setIndex(h),this.setAttribute("position",new Da(p,3)),this.setAttribute("normal",new Da(f,3)),this.setAttribute("uv",new Da(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class um extends hf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new um(e.radius,e.detail)}}class dm extends Wa{constructor(e=1,t=.4,n=12,i=48,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],o=[],l=[],c=new $i,u=new $i,d=new $i;for(let h=0;h<=n;h++)for(let a=0;a<=i;a++){const p=a/i*r,f=h/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),s.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),o.push(d.x,d.y,d.z),l.push(a/i),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=i;e++){const t=(i+1)*h+e-1,n=(i+1)*(h-1)+e-1,r=(i+1)*(h-1)+e,s=(i+1)*h+e;a.push(t,n,s),a.push(n,r,s)}this.setIndex(a),this.setAttribute("position",new Da(s,3)),this.setAttribute("normal",new Da(o,3)),this.setAttribute("uv",new Da(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class hm extends Wa{constructor(e=1,t=.4,n=64,i=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],l=[],c=[],u=new $i,d=new $i,h=new $i,p=new $i,f=new $i,m=new $i,v=new $i;for(let y=0;y<=n;++y){const s=y/n*r*Math.PI*2;g(s,r,a,e,h),g(s+.01,r,a,e,p),m.subVectors(p,h),v.addVectors(p,h),f.crossVectors(m,v),v.crossVectors(f,m),f.normalize(),v.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,a=-t*Math.cos(r),s=t*Math.sin(r);u.x=h.x+(a*v.x+s*f.x),u.y=h.y+(a*v.y+s*f.y),u.z=h.z+(a*v.z+s*f.z),o.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(y/n),c.push(e/i)}}for(let y=1;y<=n;y++)for(let e=1;e<=i;e++){const t=(i+1)*(y-1)+(e-1),n=(i+1)*y+(e-1),r=(i+1)*y+e,a=(i+1)*(y-1)+e;s.push(t,n,a),s.push(n,r,a)}function g(e,t,n,i,r){const a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new Da(o,3)),this.setAttribute("normal",new Da(l,3)),this.setAttribute("uv",new Da(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class pm extends Wa{constructor(e=new tf(new $i(-1,-1,0),new $i(-1,1,0),new $i(1,1,0)),t=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new $i,o=new $i,l=new mi;let c=new $i;const u=[],d=[],h=[],p=[];function f(){for(let e=0;e<t;e++)m(e);m(!1===r?t:0),g(),v()}function m(r){c=e.getPointAt(r/t,c);const l=a.normals[r],h=a.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+r*h.x,o.y=a*l.y+r*h.y,o.z=a*l.z+r*h.z,o.normalize(),d.push(o.x,o.y,o.z),s.x=c.x+n*o.x,s.y=c.y+n*o.y,s.z=c.z+n*o.z,u.push(s.x,s.y,s.z)}}function v(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),a=(i+1)*e+t,s=(i+1)*(e-1)+t;p.push(n,r,s),p.push(r,a,s)}}function g(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,h.push(l.x,l.y)}f(),this.setIndex(p),this.setAttribute("position",new Da(u,3)),this.setAttribute("normal",new Da(d,3)),this.setAttribute("uv",new Da(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new pm((new rf[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fm extends Wa{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new $i,r=new $i;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start,u=l.count;for(let e=c,o=c+u;e<o;e+=3)for(let l=0;l<3;l++){const o=s.getX(e+l),c=s.getX(e+(l+1)%3);i.fromBufferAttribute(a,o),r.fromBufferAttribute(a,c),!0===mm(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;i.fromBufferAttribute(a,s),r.fromBufferAttribute(a,l),!0===mm(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Da(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function mm(e,t,n){const i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var vm=Object.freeze({__proto__:null,BoxGeometry:cs,CapsuleGeometry:lf,CircleGeometry:cf,ConeGeometry:df,CylinderGeometry:uf,DodecahedronGeometry:pf,EdgesGeometry:yf,ExtrudeGeometry:tm,IcosahedronGeometry:rm,LatheGeometry:of,OctahedronGeometry:am,PlaneGeometry:Os,PolyhedronGeometry:hf,RingGeometry:sm,ShapeGeometry:om,SphereGeometry:cm,TetrahedronGeometry:um,TorusGeometry:dm,TorusKnotGeometry:hm,TubeGeometry:pm,WireframeGeometry:fm});class gm extends ma{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ha(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ym extends gs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _m extends ma{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ha(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ha(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new mi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bm extends _m{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mi(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ha(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ha(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ha(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class xm extends ma{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ha(16777215),this.specular=new ha(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ha(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new mi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sm extends ma{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ha(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ha(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new mi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Mm extends ma{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new mi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wm extends ma{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ha(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ha(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new mi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Em extends ma{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ha(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jt,this.normalScale=new mi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tm extends op{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Am(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Cm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rm(e){function t(t,n){return e[t]-e[n]}const n=e.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(t),i}function Lm(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,s=0;s!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r}function Pm(e,t,n,i){let r=1,a=e[0];while(void 0!==a&&void 0===a[i])a=e[r++];if(void 0===a)return;let s=a[i];if(void 0!==s)if(Array.isArray(s))do{s=a[i],void 0!==s&&(t.push(a.time),n.push.apply(n,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[i],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{s=a[i],void 0!==s&&(t.push(a.time),n.push(s)),a=e[r++]}while(void 0!==a)}function Im(e,t,n,i,r=30){const a=e.clone();a.name=t;const s=[];for(let l=0;l<a.tracks.length;++l){const e=a.tracks[l],t=e.getValueSize(),o=[],c=[];for(let a=0;a<e.times.length;++a){const s=e.times[a]*r;if(!(s<n||s>=i)){o.push(e.times[a]);for(let n=0;n<t;++n)c.push(e.values[a*t+n])}}0!==o.length&&(e.times=Am(o,e.times.constructor),e.values=Am(c,e.values.constructor),s.push(e))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function Dm(e,t=0,n=e,i=30){i<=0&&(i=30);const r=n.tracks.length,a=t/i;for(let s=0;s<r;++s){const t=n.tracks[s],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===r)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=t.times.length-1;let h;if(a<=t.times[0]){const e=o,n=l-o;h=t.values.slice(e,n)}else if(a>=t.times[d]){const e=d*l+o,n=e+l-o;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,i=l-o;e.evaluate(a),h=e.resultBuffer.slice(n,i)}if("quaternion"===i){const e=(new qi).fromArray(h).normalize().conjugate();e.toArray(h)}const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)qi.multiplyQuaternionsFlat(r.values,t,h,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=h[n]}}}return e.blendMode=Ft,e}const Om={convertArray:Am,isTypedArray:Cm,getKeyframeOrder:Rm,sortedArray:Lm,flattenJSON:Pm,subclip:Im,makeClipAdditive:Dm};class Nm{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=r)){const s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}while(n<a){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let a=0;a!==i;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class km extends Nm{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dt,endingEnd:Dt}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case Ot:r=e,s=2*t-n;break;case Nt:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Ot:a=e,o=2*n-t;break;case Nt:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,v=-d*m+2*d*f-d*p,g=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,_=h*m-h*f;for(let b=0;b!==s;++b)r[b]=v*a[c+b]+g*a[l+b]+y*a[o+b]+_*a[u+b];return r}}class Fm extends Nm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(i-t),u=1-c;for(let d=0;d!==s;++d)r[d]=a[l+d]*u+a[o+d]*c;return r}}class Um extends Nm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Bm{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Am(t,this.TimeBufferType),this.values=Am(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Am(e.times,Array),values:Am(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Um(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Fm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new km(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Lt:t=this.InterpolantFactoryMethodDiscrete;break;case Pt:t=this.InterpolantFactoryMethodLinear;break;case It:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lt;case this.InterpolantFactoryMethodLinear:return Pt;case this.InterpolantFactoryMethodSmooth:return It}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;while(r!==i&&n[r]<e)++r;while(-1!==a&&n[a]>t)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==r;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,a),e=!1;break}a=t}if(void 0!==i&&Cm(i))for(let s=0,o=i.length;s!==o;++s){const t=i[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===It,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s],l=e[s+1];if(o!==l&&(1!==s||o!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const i=s*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,s=0;s!==n;++s)t[i+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Bm.prototype.TimeBufferType=Float32Array,Bm.prototype.ValueBufferType=Float32Array,Bm.prototype.DefaultInterpolation=Pt;class Vm extends Bm{}Vm.prototype.ValueTypeName="bool",Vm.prototype.ValueBufferType=Array,Vm.prototype.DefaultInterpolation=Lt,Vm.prototype.InterpolantFactoryMethodLinear=void 0,Vm.prototype.InterpolantFactoryMethodSmooth=void 0;class zm extends Bm{}zm.prototype.ValueTypeName="color";class Wm extends Bm{}Wm.prototype.ValueTypeName="number";class Hm extends Nm{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(i-t);let l=e*s;for(let c=l+s;l!==c;l+=4)qi.slerpFlat(r,0,a,l-s,a,l,o);return r}}class Gm extends Bm{InterpolantFactoryMethodLinear(e){return new Hm(this.times,this.values,this.getValueSize(),e)}}Gm.prototype.ValueTypeName="quaternion",Gm.prototype.DefaultInterpolation=Pt,Gm.prototype.InterpolantFactoryMethodSmooth=void 0;class jm extends Bm{}jm.prototype.ValueTypeName="string",jm.prototype.ValueBufferType=Array,jm.prototype.DefaultInterpolation=Lt,jm.prototype.InterpolantFactoryMethodLinear=void 0,jm.prototype.InterpolantFactoryMethodSmooth=void 0;class Xm extends Bm{}Xm.prototype.ValueTypeName="vector";class qm{constructor(e,t=-1,n,i=kt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Xn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,s=n.length;a!==s;++a)t.push(Ym(n[a]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=n.length;r!==a;++r)t.push(Bm.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let s=0;s<r;s++){let e=[],o=[];e.push((s+r-1)%r,s,(s+1)%r),o.push(0,1,0);const l=Rm(e);e=Lm(e,1,l),o=Lm(o,1,l),i||0!==e[0]||(e.push(r),o.push(o[0])),a.push(new Wm(".morphTargetInfluences["+t[s].name+"]",e,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){const t=e[s],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const a=[];for(const s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],s=[];Pm(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},i=[],r=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const e=l[u].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],a=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),a.push(i.morphTarget===r?1:0)}i.push(new Wm(".morphTargetInfluence["+r+"]",t,a))}o=t.length*a}else{const r=".bones["+t[u].name+"]";n(Xm,r+".position",e,"pos",i),n(Gm,r+".quaternion",e,"rot",i),n(Xm,r+".scale",e,"scl",i)}}if(0===i.length)return null;const c=new this(r,o,i,s);return c}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function $m(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wm;case"vector":case"vector2":case"vector3":case"vector4":return Xm;case"color":return zm;case"quaternion":return Gm;case"bool":case"boolean":return Vm;case"string":return jm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Ym(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=$m(e.type);if(void 0===e.times){const t=[],n=[];Pm(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Km={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Zm{constructor(e,t,n){const i=this;let r,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const Jm=new Zm;class Qm{constructor(e){this.manager=void 0!==e?e:Jm,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Qm.DEFAULT_MATERIAL_NAME="__DEFAULT";const ev={};class tv extends Error{constructor(e,t){super(e),this.response=t}}class nv extends Qm{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Km.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==ev[e])return void ev[e].push({onLoad:t,onProgress:n,onError:i});ev[e]=[],ev[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=ev[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){function t(){i.read().then(({done:i,value:r})=>{if(i)e.close();else{o+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(r),t()}})}t()}});return new Response(l)}throw new tv(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>{const t=new DOMParser;return t.parseFromString(e,s)});case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i,n=t.exec(s),i=n&&n[1]?n[1].toLowerCase():void 0,r=new TextDecoder(i);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{Km.add(e,t);const n=ev[e];delete ev[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=ev[e];if(void 0===n)throw this.manager.itemError(e),t;delete ev[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class iv extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new nv(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=qm.parse(e[n]);t.push(i)}return t}}class rv extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=this,a=[],s=new Ap,o=new nv(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],function(e){const n=r.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=Se),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,i)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)c(u);else o.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Se),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,i);return s}}class av extends Qm{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Km.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s=xi("img");function o(){c(),Km.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class sv extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=new Ms;r.colorSpace=$t;const a=new av(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(e[n],function(e){r.images[n]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)o(l);return r}}class ov extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new $h,s=new nv(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(e){let n;try{n=r.parse(e)}catch(s){if(void 0===i)return void console.error(s);i(s)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:me,a.wrapT=void 0!==n.wrapT?n.wrapT:me,a.magFilter=void 0!==n.magFilter?n.magFilter:Se,a.minFilter=void 0!==n.minFilter?n.minFilter:Se,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?a.colorSpace=n.colorSpace:void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Ee),1===n.mipmapCount&&(a.minFilter=Se),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,i),a}}class lv extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=new Ui,a=new av(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class cv extends Yr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ha(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class uv extends cv{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Yr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ha(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const dv=new wr,hv=new $i,pv=new $i;class fv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mi(512,512),this.map=null,this.mapPass=null,this.matrix=new wr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ps,this._frameExtents=new mi(1,1),this._viewportCount=1,this._viewports=[new Bi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;hv.setFromMatrixPosition(e.matrixWorld),t.position.copy(hv),pv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pv),t.updateMatrixWorld(),dv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(dv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class mv extends fv{constructor(){super(new _s(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*jn*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class vv extends cv{constructor(e,t,n=0,i=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Yr.DEFAULT_UP),this.updateMatrix(),this.target=new Yr,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new mv}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const gv=new wr,yv=new $i,_v=new $i;class bv extends fv{constructor(){super(new _s(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mi(4,2),this._viewportCount=6,this._viewports=[new Bi(2,1,1,1),new Bi(0,1,1,1),new Bi(3,1,1,1),new Bi(1,1,1,1),new Bi(3,0,1,1),new Bi(1,0,1,1)],this._cubeDirections=[new $i(1,0,0),new $i(-1,0,0),new $i(0,0,1),new $i(0,0,-1),new $i(0,1,0),new $i(0,-1,0)],this._cubeUps=[new $i(0,1,0),new $i(0,1,0),new $i(0,1,0),new $i(0,1,0),new $i(0,0,1),new $i(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),yv.setFromMatrixPosition(e.matrixWorld),n.position.copy(yv),_v.copy(n.position),_v.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_v),n.updateMatrixWorld(),i.makeTranslation(-yv.x,-yv.y,-yv.z),gv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gv)}}class xv extends cv{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new bv}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Sv extends fv{constructor(){super(new Mc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Mv extends cv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yr.DEFAULT_UP),this.updateMatrix(),this.target=new Yr,this.shadow=new Sv}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class wv extends cv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ev extends cv{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Tv{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $i)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class Av extends cv{constructor(e=new Tv,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Cv extends Qm{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,a=new nv(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=Cv.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new ha).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new ha).setHex(t.value);break;case"v2":i.uniforms[r].value=(new mi).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new $i).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new Bi).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new vi).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new wr).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new mi).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new mi).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:gm,SpriteMaterial:yh,RawShaderMaterial:ym,ShaderMaterial:gs,PointsMaterial:yp,MeshPhysicalMaterial:bm,MeshStandardMaterial:_m,MeshPhongMaterial:xm,MeshToonMaterial:Sm,MeshNormalMaterial:Mm,MeshLambertMaterial:wm,MeshDepthMaterial:$d,MeshDistanceMaterial:Yd,MeshBasicMaterial:va,MeshMatcapMaterial:Em,LineDashedMaterial:Tm,LineBasicMaterial:op,Material:ma};return new t[e]}}class Rv{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Lv extends Wa{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Pv extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new nv(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(e,n){if(void 0!==t[n])return t[n];const i=e.interleavedBuffers,a=i[n],s=r(e,a.buffer),o=bi(a.type,s),l=new mh(o,a.stride);return l.uuid=a.uuid,t[n]=l,l}function r(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],a=new Uint32Array(r).buffer;return n[t]=a,a}const a=e.isInstancedBufferGeometry?new Lv:new Wa,s=e.data.index;if(void 0!==s){const e=bi(s.type,s.array);a.setIndex(new wa(e,1))}const o=e.data.attributes;for(const h in o){const t=o[h];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new gh(r,t.itemSize,t.offset,t.normalized)}else{const e=bi(t.type,t.array),i=t.isInstancedBufferAttribute?Jh:wa;n=new i(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),a.setAttribute(h,n)}const l=e.data.morphAttributes;if(l)for(const h in l){const t=l[h],n=[];for(let r=0,a=t.length;r<a;r++){const a=t[r];let s;if(a.isInterleavedBufferAttribute){const t=i(e.data,a.data);s=new gh(t,a.itemSize,a.offset,a.normalized)}else{const e=bi(a.type,a.array);s=new wa(e,a.itemSize,a.normalized)}void 0!==a.name&&(s.name=a.name),n.push(s)}a.morphAttributes[h]=n}const c=e.data.morphTargetsRelative;c&&(a.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(let h=0,p=u.length;h!==p;++h){const e=u[h];a.addGroup(e.start,e.count,e.materialIndex)}const d=e.data.boundingSphere;if(void 0!==d){const e=new $i;void 0!==d.center&&e.fromArray(d.center),a.boundingSphere=new mr(e,d.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Iv extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=this,a=""===this.path?Rv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new nv(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(o){return void 0!==i&&i(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}const s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(a,t)},n,i)}async loadAsync(e,t){const n=this,i=""===this.path?Rv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const r=new nv(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(e,t),s=JSON.parse(a),o=s.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,i,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new _f).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let r=0,a=e.length;r<a;r++){const t=(new Zh).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new Pv;for(let r=0,a=e.length;r<a;r++){let a;const s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;default:s.type in vm?a=vm[s.type].fromJSON(s,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new Cv;r.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=qm.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function a(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}function s(e){if("string"===typeof e){const t=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t;return a(i)}return e.data?{data:bi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Zm(t);r=new av(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=r[t],i=s(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new $h(i.data,i.width,i.height)))}i[n.uuid]=new Ni(e)}else{const e=s(n.url);i[n.uuid]=new Ni(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:bi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new av(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],a=i.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new $h(i.data,i.width,i.height)))}n[i.uuid]=new Ni(e)}else{const e=await r(i.url);n[i.uuid]=new Ni(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,a=e.length;r<a;r++){const a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=t[a.image],o=s.data;let l;Array.isArray(o)?(l=new Ms,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new $h:new Ui,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,Dv)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],Ov),l.wrapT=n(a.wrap[1],Ov)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,Nv)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,Nv)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),i[a.uuid]=l}return i}parseObject(e,t,n,i,r){let a,s,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new fh,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new ha(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new ph(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new hh(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new _s(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Mc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new wv(e.color,e.intensity);break;case"DirectionalLight":a=new Mv(e.color,e.intensity);break;case"PointLight":a=new xv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Ev(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new vv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new uv(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Av).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),o=c(e.material),a=new Xh(s,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),o=c(e.material),a=new ss(s,o);break;case"InstancedMesh":s=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;a=new sp(s,o,t),a.instanceMatrix=new Jh(new Float32Array(n.array),16),void 0!==i&&(a.instanceColor=new Jh(new Float32Array(i.array),i.itemSize));break;case"LOD":a=new kh;break;case"Line":a=new pp(l(e.geometry),c(e.material));break;case"LineLoop":a=new gp(l(e.geometry),c(e.material));break;case"LineSegments":a=new vp(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new Mp(l(e.geometry),c(e.material));break;case"Sprite":a=new Ih(c(e.material));break;case"Group":a=new ih;break;case"Bone":a=new qh;break;default:a=new Yr}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=a.getObjectByProperty("uuid",n.object);void 0!==i&&a.addLevel(i,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}}const Dv={UVMapping:le,CubeReflectionMapping:ce,CubeRefractionMapping:ue,EquirectangularReflectionMapping:de,EquirectangularRefractionMapping:he,CubeUVReflectionMapping:pe},Ov={RepeatWrapping:fe,ClampToEdgeWrapping:me,MirroredRepeatWrapping:ve},Nv={NearestFilter:ge,NearestMipmapNearestFilter:ye,NearestMipmapLinearFilter:be,LinearFilter:Se,LinearMipmapNearestFilter:Me,LinearMipmapLinearFilter:Ee};class kv extends Qm{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Km.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){Km.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}let Fv;class Uv{static getContext(){return void 0===Fv&&(Fv=new(window.AudioContext||window.webkitAudioContext)),Fv}static setContext(e){Fv=e}}class Bv extends Qm{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new nv(this.manager);function s(t){i?i(t):console.error(t),r.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{const n=e.slice(0),i=Uv.getContext();i.decodeAudioData(n,function(e){t(e)},s)}catch(n){s(n)}},n,i)}}const Vv=new wr,zv=new wr,Wv=new wr;class Hv{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _s,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _s,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache,n=t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep;if(n){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Wv.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(Gn*t.fov*.5)/t.zoom;let a,s;zv.elements[12]=-n,Vv.elements[12]=n,a=-r*t.aspect+i,s=r*t.aspect+i,Wv.elements[0]=2*t.near/(s-a),Wv.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(Wv),a=-r*t.aspect-i,s=r*t.aspect-i,Wv.elements[0]=2*t.near/(s-a),Wv.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(Wv)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(zv),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Vv)}}class Gv{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=jv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=jv();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function jv(){return("undefined"===typeof performance?Date:performance).now()}const Xv=new $i,qv=new qi,$v=new $i,Yv=new $i;class Kv extends Yr{constructor(){super(),this.type="AudioListener",this.context=Uv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Gv}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xv,qv,$v),Yv.set(0,0,-1).applyQuaternion(qv),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Xv.x,e),t.positionY.linearRampToValueAtTime(Xv.y,e),t.positionZ.linearRampToValueAtTime(Xv.z,e),t.forwardX.linearRampToValueAtTime(Yv.x,e),t.forwardY.linearRampToValueAtTime(Yv.y,e),t.forwardZ.linearRampToValueAtTime(Yv.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Xv.x,Xv.y,Xv.z),t.setOrientation(Yv.x,Yv.y,Yv.z,n.x,n.y,n.z)}}class Zv extends Yr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Jv=new $i,Qv=new qi,eg=new $i,tg=new $i;class ng extends Zv{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Jv,Qv,eg),tg.set(0,0,1).applyQuaternion(Qv);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Jv.x,e),t.positionY.linearRampToValueAtTime(Jv.y,e),t.positionZ.linearRampToValueAtTime(Jv.z,e),t.orientationX.linearRampToValueAtTime(tg.x,e),t.orientationY.linearRampToValueAtTime(tg.y,e),t.orientationZ.linearRampToValueAtTime(tg.z,e)}else t.setPosition(Jv.x,Jv.y,Jv.z),t.setOrientation(tg.x,tg.y,tg.z)}}class ig{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class rg{constructor(e,t,n){let i,r,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)n[r+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){qi.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const a=this._workIndex*r;qi.multiplyQuaternionsFlat(e,a,e,t,e,n),qi.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*a+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[n+a]*i}}}const ag="\\[\\]\\.:\\/",sg=new RegExp("["+ag+"]","g"),og="[^"+ag+"]",lg="[^"+ag.replace("\\.","")+"]",cg=/((?:WC+[\/:])*)/.source.replace("WC",og),ug=/(WCOD+)?/.source.replace("WCOD",lg),dg=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",og),hg=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",og),pg=new RegExp("^"+cg+ug+dg+hg+"$"),fg=["material","materials","bones","map"];class mg{constructor(e,t,n){const i=n||vg.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class vg{constructor(e,t,n){this.path=t,this.parsedPath=n||vg.parseTrackName(t),this.node=vg.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new vg.Composite(e,t,n):new vg(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(sg,"")}static parseTrackName(e){const t=pg.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==fg.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=vg.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vg.Composite=mg,vg.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vg.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vg.prototype.GetterByBindingType=[vg.prototype._getValue_direct,vg.prototype._getValue_array,vg.prototype._getValue_arrayElement,vg.prototype._getValue_toArray],vg.prototype.SetterByBindingTypeAndVersioning=[[vg.prototype._setValue_direct,vg.prototype._setValue_direct_setNeedsUpdate,vg.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vg.prototype._setValue_array,vg.prototype._setValue_array_setNeedsUpdate,vg.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vg.prototype._setValue_arrayElement,vg.prototype._setValue_arrayElement_setNeedsUpdate,vg.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vg.prototype._setValue_fromArray,vg.prototype._setValue_fromArray_setNeedsUpdate,vg.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class gg{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Xn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let s,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=o++,t[d]=h,e.push(u);for(let e=0,t=a;e!==t;++e)r[e].push(new vg(u,n[e],i[e]))}else if(h<l){s=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[d]=o,e[o]=u;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[o];let s=t[h];t[h]=a,void 0===s&&(s=new vg(u,n[e],i[e])),t[o]=s}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=r){const a=r++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[l];t[l]=i,t[a]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],l=o.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<r){const s=--r,o=e[s],l=--a,u=e[l];t[o.uuid]=c,e[c]=o,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[l];t[c]=i,t[s]=r,t.pop()}}else{const r=--a,s=e[r];r>0&&(t[s.uuid]=c),e[c]=s,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[c]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,a.push(e),s.push(t),r.push(u);for(let d=c,h=o.length;d!==h;++d){const n=o[d];u[d]=new vg(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s],l=e[s];t[l]=n,a[n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}class yg{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,a=r.length,s=new Array(a),o={endingStart:Dt,endingEnd:Dt};for(let l=0;l!==a;++l){const e=r[l].createInterpolant(null);s[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ct,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,a=n/i;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case Ft:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);break;case kt:default:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=n===Rt;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(n===At){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Ot,i.endingEnd=Ot):(i.endingStart=e?this.zeroSlopeAtStart?Ot:Dt:Nt,i.endingEnd=t?this.zeroSlopeAtEnd?Ot:Dt:Nt)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=n,this}}const _g=new Float32Array(1);class bg extends zn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,a[u]=l;else{if(l=a[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}const i=t&&t._propertyBindings[u].binding.parsedPath;l=new rg(vg.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),a[u]=l}s[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;const u=s.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Fm(new Float32Array(2),new Float32Array(2),1,_g),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let a="string"===typeof e?qm.findByName(i,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:kt),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new yg(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?qm.findByName(n,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l){const n=t[l];n._update(i,e,r,a)}const s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const e=n[a].actionByRoot,i=e[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName,r=i[t];if(void 0!==r)for(const a in r){const e=r[a];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class xg{constructor(e){this.value=e}clone(){return new xg(void 0===this.value.clone?this.value:this.value.clone())}}let Sg=0;class Mg extends zn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Sg++}),this.name="",this.usage=An,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return(new this.constructor).copy(this)}}class wg extends mh{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Eg{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Tg{constructor(e,t,n=0,i=1/0){this.ray=new Mr(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Nr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Cg(e,this,n,t),n.sort(Ag),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)Cg(e[i],this,n,t);return n.sort(Ag),n}}function Ag(e,t){return e.distance-t.distance}function Cg(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Cg(i[e],t,n,!0)}}class Rg{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(qn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Lg{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const Pg=new mi;class Ig{constructor(e=new mi(1/0,1/0),t=new mi(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Pg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pg).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Dg=new $i,Og=new $i;class Ng{constructor(e=new $i,t=new $i){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Dg.subVectors(e,this.start),Og.subVectors(this.end,this.start);const n=Og.dot(Og),i=Og.dot(Dg);let r=i/n;return t&&(r=qn(r,0,1)),r}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const kg=new $i;class Fg extends Yr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Wa,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){const e=a/o*Math.PI*2,t=s/o*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Da(i,3));const r=new op({fog:!1,toneMapped:!1});this.cone=new vp(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),kg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(kg),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ug=new $i,Bg=new wr,Vg=new wr;class zg extends vp{constructor(e){const t=Wg(e),n=new Wa,i=[],r=[],a=new ha(0,0,1),s=new ha(0,1,0);for(let l=0;l<t.length;l++){const e=t[l];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}n.setAttribute("position",new Da(i,3)),n.setAttribute("color",new Da(r,3));const o=new op({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Vg.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(Bg.multiplyMatrices(Vg,e.matrixWorld),Ug.setFromMatrixPosition(Bg),i.setXYZ(a,Ug.x,Ug.y,Ug.z),Bg.multiplyMatrices(Vg,e.parent.matrixWorld),Ug.setFromMatrixPosition(Bg),i.setXYZ(a+1,Ug.x,Ug.y,Ug.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Wg(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Wg(e.children[n]));return t}class Hg extends ss{constructor(e,t,n){const i=new cm(t,4,2),r=new va({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Gg=new $i,jg=new ha,Xg=new ha;class qg extends Yr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new am(t);i.rotateY(.5*Math.PI),this.material=new va({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new wa(a,3)),this.add(new ss(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");jg.copy(this.light.color),Xg.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?jg:Xg;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Gg.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $g extends vp{constructor(e=10,t=10,n=4473924,i=8947848){n=new ha(n),i=new ha(i);const r=t/2,a=e/t,s=e/2,o=[],l=[];for(let d=0,h=0,p=-s;d<=t;d++,p+=a){o.push(-s,0,p,s,0,p),o.push(p,0,-s,p,0,s);const e=d===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new Wa;c.setAttribute("position",new Da(o,3)),c.setAttribute("color",new Da(l,3));const u=new op({vertexColors:!0,toneMapped:!1});super(c,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yg extends vp{constructor(e=10,t=16,n=8,i=64,r=4473924,a=8947848){r=new ha(r),a=new ha(a);const s=[],o=[];if(t>1)for(let u=0;u<t;u++){const n=u/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(i,0,l);const c=1&u?r:a;o.push(c.r,c.g,c.b),o.push(c.r,c.g,c.b)}for(let u=0;u<n;u++){const t=1&u?r:a,l=e-e/n*u;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,a=Math.cos(n)*l;s.push(r,0,a),o.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,a=Math.cos(n)*l,s.push(r,0,a),o.push(t.r,t.g,t.b)}}const l=new Wa;l.setAttribute("position",new Da(s,3)),l.setAttribute("color",new Da(o,3));const c=new op({vertexColors:!0,toneMapped:!1});super(l,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Kg=new $i,Zg=new $i,Jg=new $i;class Qg extends Yr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new Wa;i.setAttribute("position",new Da([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new op({fog:!1,toneMapped:!1});this.lightPlane=new pp(i,r),this.add(this.lightPlane),i=new Wa,i.setAttribute("position",new Da([0,0,0,0,0,1],3)),this.targetLine=new pp(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Kg.setFromMatrixPosition(this.light.matrixWorld),Zg.setFromMatrixPosition(this.light.target.matrixWorld),Jg.subVectors(Zg,Kg),this.lightPlane.lookAt(Zg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Zg),this.targetLine.scale.z=Jg.length()}}const ey=new $i,ty=new ys;class ny extends vp{constructor(e){const t=new Wa,n=new op({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={};function s(e,t){o(e),o(t)}function o(e){i.push(0,0,0),r.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Da(i,3)),t.setAttribute("color",new Da(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new ha(16755200),c=new ha(16711680),u=new ha(43775),d=new ha(16777215),h=new ha(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,i,r){const a=this.geometry,s=a.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;ty.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),iy("c",t,e,ty,0,0,-1),iy("t",t,e,ty,0,0,1),iy("n1",t,e,ty,-n,-i,-1),iy("n2",t,e,ty,n,-i,-1),iy("n3",t,e,ty,-n,i,-1),iy("n4",t,e,ty,n,i,-1),iy("f1",t,e,ty,-n,-i,1),iy("f2",t,e,ty,n,-i,1),iy("f3",t,e,ty,-n,i,1),iy("f4",t,e,ty,n,i,1),iy("u1",t,e,ty,.7*n,1.1*i,-1),iy("u2",t,e,ty,.7*-n,1.1*i,-1),iy("u3",t,e,ty,0,2*i,-1),iy("cf1",t,e,ty,-n,0,1),iy("cf2",t,e,ty,n,0,1),iy("cf3",t,e,ty,0,-i,1),iy("cf4",t,e,ty,0,i,1),iy("cn1",t,e,ty,-n,0,-1),iy("cn2",t,e,ty,n,0,-1),iy("cn3",t,e,ty,0,-i,-1),iy("cn4",t,e,ty,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function iy(e,t,n,i,r,a,s){ey.set(r,a,s).unproject(i);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],ey.x,ey.y,ey.z)}}const ry=new Zi;class ay extends vp{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Wa;r.setIndex(new wa(n,1)),r.setAttribute("position",new wa(i,3)),super(r,new op({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ry.setFromObject(this.object),ry.isEmpty())return;const t=ry.min,n=ry.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sy extends vp{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Wa;r.setIndex(new wa(n,1)),r.setAttribute("position",new Da(i,3)),super(r,new op({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class oy extends pp{constructor(e,t=1,n=16776960){const i=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Wa;a.setAttribute("position",new Da(r,3)),a.computeBoundingSphere(),super(a,new op({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],o=new Wa;o.setAttribute("position",new Da(s,3)),o.computeBoundingSphere(),this.add(new ss(o,new va({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const ly=new $i;let cy,uy;class dy extends Yr{constructor(e=new $i(0,0,1),t=new $i(0,0,0),n=1,i=16776960,r=.2*n,a=.2*r){super(),this.type="ArrowHelper",void 0===cy&&(cy=new Wa,cy.setAttribute("position",new Da([0,0,0,0,1,0],3)),uy=new uf(0,.5,1,5,1),uy.translate(0,-.5,0)),this.position.copy(t),this.line=new pp(cy,new op({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ss(uy,new va({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ly.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ly,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class hy extends vp{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Wa;i.setAttribute("position",new Da(t,3)),i.setAttribute("color",new Da(n,3));const r=new op({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(e,t,n){const i=new ha,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class py{constructor(){this.type="ShapePath",this.color=new ha,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new sf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new _f;r.curves=i.curves,t.push(r)}return t}function n(e,t){const n=t.length;let i=!1;for(let r=n-1,a=0;a<n;r=a++){let n=t[r],s=t[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],o=-o,s=t[r],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return i}const i=Jf.isClockWise,r=this.subPaths;if(0===r.length)return[];let a,s,o;const l=[];if(1===r.length)return s=r[0],o=new _f,o.curves=s.curves,l.push(o),l;let c=!i(r[0].getPoints());c=e?!c:c;const u=[],d=[];let h,p,f=[],m=0;d[m]=void 0,f[m]=[];for(let v=0,g=r.length;v<g;v++)s=r[v],h=s.getPoints(),a=i(h),a=e?!a:a,a?(!c&&d[m]&&m++,d[m]={s:new _f,p:h},d[m].s.curves=s.curves,c&&m++,f[m]=[]):f[m].push({h:s,p:h[0]});if(!d[0])return t(r);if(d.length>1){let e=!1,t=0;for(let n=0,i=d.length;n<i;n++)u[n]=[];for(let i=0,r=d.length;i<r;i++){const r=f[i];for(let a=0;a<r.length;a++){const s=r[a];let o=!0;for(let r=0;r<d.length;r++)n(s.p,d[r].p)&&(i!==r&&t++,o?(o=!1,u[r].push(s)):e=!0);o&&u[i].push(s)}}t>0&&!1===e&&(f=u)}for(let v=0,g=d.length;v<g;v++){o=d[v].s,l.push(o),p=f[v];for(let e=0,t=p.length;e<t;e++)o.holes.push(p[e].h)}return l}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n),t.ACESFilmicToneMapping=re,t.AddEquation=M,t.AddOperation=Q,t.AdditiveAnimationBlendMode=Ft,t.AdditiveBlending=_,t.AlphaFormat=Ue,t.AlwaysCompare=Tn,t.AlwaysDepth=G,t.AlwaysStencilFunc=yn,t.AmbientLight=wv,t.AnimationAction=yg,t.AnimationClip=qm,t.AnimationLoader=iv,t.AnimationMixer=bg,t.AnimationObjectGroup=gg,t.AnimationUtils=Om,t.ArcCurve=Dp,t.ArrayCamera=nh,t.ArrowHelper=dy,t.AttachedBindMode=se,t.Audio=Zv,t.AudioAnalyser=ig,t.AudioContext=Uv,t.AudioListener=Kv,t.AudioLoader=Bv,t.AxesHelper=hy,t.BackSide=f,t.BasicDepthPacking=Ht,t.BasicShadowMap=c,t.Bone=qh,t.BooleanKeyframeTrack=Vm,t.Box2=Ig,t.Box3=Zi,t.Box3Helper=sy,t.BoxGeometry=cs,t.BoxHelper=ay,t.BufferAttribute=wa,t.BufferGeometry=Wa,t.BufferGeometryLoader=Pv,t.ByteType=Ce,t.Cache=Km,t.Camera=ys,t.CameraHelper=ny,t.CanvasTexture=Lp,t.CapsuleGeometry=lf,t.CatmullRomCurve3=Bp,t.CineonToneMapping=ie,t.CircleGeometry=cf,t.ClampToEdgeWrapping=me,t.Clock=Gv,t.Color=ha,t.ColorKeyframeTrack=zm,t.ColorManagement=Ri,t.CompressedArrayTexture=Cp,t.CompressedCubeTexture=Rp,t.CompressedTexture=Ap,t.CompressedTextureLoader=rv,t.ConeGeometry=df,t.ConstantAlphaFactor=z,t.ConstantColorFactor=B,t.CubeCamera=Ss,t.CubeReflectionMapping=ce,t.CubeRefractionMapping=ue,t.CubeTexture=Ms,t.CubeTextureLoader=sv,t.CubeUVReflectionMapping=pe,t.CubicBezierCurve=Kp,t.CubicBezierCurve3=Zp,t.CubicInterpolant=km,t.CullFaceBack=s,t.CullFaceFront=o,t.CullFaceFrontBack=l,t.CullFaceNone=a,t.Curve=Pp,t.CurvePath=af,t.CustomBlending=S,t.CustomToneMapping=ae,t.CylinderGeometry=uf,t.Cylindrical=Lg,t.Data3DTexture=Gi,t.DataArrayTexture=Wi,t.DataTexture=$h,t.DataTextureLoader=ov,t.DataUtils=xa,t.DecrementStencilOp=on,t.DecrementWrapStencilOp=cn,t.DefaultLoadingManager=Jm,t.DepthFormat=We,t.DepthStencilFormat=He,t.DepthTexture=sh,t.DetachedBindMode=oe,t.DirectionalLight=Mv,t.DirectionalLightHelper=Qg,t.DiscreteInterpolant=Um,t.DisplayP3ColorSpace=Kt,t.DodecahedronGeometry=pf,t.DoubleSide=m,t.DstAlphaFactor=O,t.DstColorFactor=k,t.DynamicCopyUsage=On,t.DynamicDrawUsage=Cn,t.DynamicReadUsage=Pn,t.EdgesGeometry=yf,t.EllipseCurve=Ip,t.EqualCompare=xn,t.EqualDepth=q,t.EqualStencilFunc=pn,t.EquirectangularReflectionMapping=de,t.EquirectangularRefractionMapping=he,t.Euler=Or,t.EventDispatcher=zn,t.ExtrudeGeometry=tm,t.FileLoader=nv,t.Float16BufferAttribute=Ia,t.Float32BufferAttribute=Da,t.Float64BufferAttribute=Oa,t.FloatType=De,t.Fog=ph,t.FogExp2=hh,t.FramebufferTexture=Tp,t.FrontSide=p,t.Frustum=Ps,t.GLBufferAttribute=Eg,t.GLSL1=kn,t.GLSL3=Fn,t.GreaterCompare=Mn,t.GreaterDepth=Y,t.GreaterEqualCompare=En,t.GreaterEqualDepth=$,t.GreaterEqualStencilFunc=gn,t.GreaterStencilFunc=mn,t.GridHelper=$g,t.Group=ih,t.HalfFloatType=Oe,t.HemisphereLight=uv,t.HemisphereLightHelper=qg,t.IcosahedronGeometry=rm,t.ImageBitmapLoader=kv,t.ImageLoader=av,t.ImageUtils=Di,t.IncrementStencilOp=sn,t.IncrementWrapStencilOp=ln,t.InstancedBufferAttribute=Jh,t.InstancedBufferGeometry=Lv,t.InstancedInterleavedBuffer=wg,t.InstancedMesh=sp,t.Int16BufferAttribute=Ca,t.Int32BufferAttribute=La,t.Int8BufferAttribute=Ea,t.IntType=Pe,t.InterleavedBuffer=mh,t.InterleavedBufferAttribute=gh,t.Interpolant=Nm,t.InterpolateDiscrete=Lt,t.InterpolateLinear=Pt,t.InterpolateSmooth=It,t.InvertStencilOp=un,t.KeepStencilOp=rn,t.KeyframeTrack=Bm,t.LOD=kh,t.LatheGeometry=of,t.Layers=Nr,t.LessCompare=bn,t.LessDepth=j,t.LessEqualCompare=Sn,t.LessEqualDepth=X,t.LessEqualStencilFunc=fn,t.LessStencilFunc=hn,t.Light=cv,t.LightProbe=Av,t.Line=pp,t.Line3=Ng,t.LineBasicMaterial=op,t.LineCurve=Jp,t.LineCurve3=Qp,t.LineDashedMaterial=Tm,t.LineLoop=gp,t.LineSegments=vp,t.LinearDisplayP3ColorSpace=Zt,t.LinearEncoding=zt,t.LinearFilter=Se,t.LinearInterpolant=Fm,t.LinearMipMapLinearFilter=Te,t.LinearMipMapNearestFilter=we,t.LinearMipmapLinearFilter=Ee,t.LinearMipmapNearestFilter=Me,t.LinearSRGBColorSpace=Yt,t.LinearToneMapping=te,t.LinearTransfer=Jt,t.Loader=Qm,t.LoaderUtils=Rv,t.LoadingManager=Zm,t.LoopOnce=At,t.LoopPingPong=Rt,t.LoopRepeat=Ct,t.LuminanceAlphaFormat=ze,t.LuminanceFormat=Ve,t.MOUSE=i,t.Material=ma,t.MaterialLoader=Cv,t.MathUtils=fi,t.Matrix3=vi,t.Matrix4=wr,t.MaxEquation=A,t.Mesh=ss,t.MeshBasicMaterial=va,t.MeshDepthMaterial=$d,t.MeshDistanceMaterial=Yd,t.MeshLambertMaterial=wm,t.MeshMatcapMaterial=Em,t.MeshNormalMaterial=Mm,t.MeshPhongMaterial=xm,t.MeshPhysicalMaterial=bm,t.MeshStandardMaterial=_m,t.MeshToonMaterial=Sm,t.MinEquation=T,t.MirroredRepeatWrapping=ve,t.MixOperation=J,t.MultiplyBlending=x,t.MultiplyOperation=Z,t.NearestFilter=ge,t.NearestMipMapLinearFilter=xe,t.NearestMipMapNearestFilter=_e,t.NearestMipmapLinearFilter=be,t.NearestMipmapNearestFilter=ye,t.NeverCompare=_n,t.NeverDepth=H,t.NeverStencilFunc=dn,t.NoBlending=g,t.NoColorSpace=qt,t.NoToneMapping=ee,t.NormalAnimationBlendMode=kt,t.NormalBlending=y,t.NotEqualCompare=wn,t.NotEqualDepth=K,t.NotEqualStencilFunc=vn,t.NumberKeyframeTrack=Wm,t.Object3D=Yr,t.ObjectLoader=Iv,t.ObjectSpaceNormalMap=Xt,t.OctahedronGeometry=am,t.OneFactor=R,t.OneMinusConstantAlphaFactor=W,t.OneMinusConstantColorFactor=V,t.OneMinusDstAlphaFactor=N,t.OneMinusDstColorFactor=F,t.OneMinusSrcAlphaFactor=D,t.OneMinusSrcColorFactor=P,t.OrthographicCamera=Mc,t.P3Primaries=tn,t.PCFShadowMap=u,t.PCFSoftShadowMap=d,t.PMREMGenerator=Nc,t.Path=sf,t.PerspectiveCamera=_s,t.Plane=Cs,t.PlaneGeometry=Os,t.PlaneHelper=oy,t.PointLight=xv,t.PointLightHelper=Hg,t.Points=Mp,t.PointsMaterial=yp,t.PolarGridHelper=Yg,t.PolyhedronGeometry=hf,t.PositionalAudio=ng,t.PropertyBinding=vg,t.PropertyMixer=rg,t.QuadraticBezierCurve=ef,t.QuadraticBezierCurve3=tf,t.Quaternion=qi,t.QuaternionKeyframeTrack=Gm,t.QuaternionLinearInterpolant=Hm,t.RED_GREEN_RGTC2_Format=Et,t.RED_RGTC1_Format=Mt,t.REVISION=n,t.RGBADepthPacking=Gt,t.RGBAFormat=Be,t.RGBAIntegerFormat=$e,t.RGBA_ASTC_10x10_Format=gt,t.RGBA_ASTC_10x5_Format=ft,t.RGBA_ASTC_10x6_Format=mt,t.RGBA_ASTC_10x8_Format=vt,t.RGBA_ASTC_12x10_Format=yt,t.RGBA_ASTC_12x12_Format=_t,t.RGBA_ASTC_4x4_Format=st,t.RGBA_ASTC_5x4_Format=ot,t.RGBA_ASTC_5x5_Format=lt,t.RGBA_ASTC_6x5_Format=ct,t.RGBA_ASTC_6x6_Format=ut,t.RGBA_ASTC_8x5_Format=dt,t.RGBA_ASTC_8x6_Format=ht,t.RGBA_ASTC_8x8_Format=pt,t.RGBA_BPTC_Format=bt,t.RGBA_ETC2_EAC_Format=at,t.RGBA_PVRTC_2BPPV1_Format=nt,t.RGBA_PVRTC_4BPPV1_Format=tt,t.RGBA_S3TC_DXT1_Format=Ke,t.RGBA_S3TC_DXT3_Format=Ze,t.RGBA_S3TC_DXT5_Format=Je,t.RGB_BPTC_SIGNED_Format=xt,t.RGB_BPTC_UNSIGNED_Format=St,t.RGB_ETC1_Format=it,t.RGB_ETC2_Format=rt,t.RGB_PVRTC_2BPPV1_Format=et,t.RGB_PVRTC_4BPPV1_Format=Qe,t.RGB_S3TC_DXT1_Format=Ye,t.RGFormat=Xe,t.RGIntegerFormat=qe,t.RawShaderMaterial=ym,t.Ray=Mr,t.Raycaster=Tg,t.Rec709Primaries=en,t.RectAreaLight=Ev,t.RedFormat=Ge,t.RedIntegerFormat=je,t.ReinhardToneMapping=ne,t.RenderTarget=Vi,t.RepeatWrapping=fe,t.ReplaceStencilOp=an,t.ReverseSubtractEquation=E,t.RingGeometry=sm,t.SIGNED_RED_GREEN_RGTC2_Format=Tt,t.SIGNED_RED_RGTC1_Format=wt,t.SRGBColorSpace=$t,t.SRGBTransfer=Qt,t.Scene=fh,t.ShaderChunk=pc,t.ShaderLib=mc,t.ShaderMaterial=gs,t.ShadowMaterial=gm,t.Shape=_f,t.ShapeGeometry=om,t.ShapePath=py,t.ShapeUtils=Jf,t.ShortType=Re,t.Skeleton=Zh,t.SkeletonHelper=zg,t.SkinnedMesh=Xh,t.Source=Ni,t.Sphere=mr,t.SphereGeometry=cm,t.Spherical=Rg,t.SphericalHarmonics3=Tv,t.SplineCurve=nf,t.SpotLight=vv,t.SpotLightHelper=Fg,t.Sprite=Ih,t.SpriteMaterial=yh,t.SrcAlphaFactor=I,t.SrcAlphaSaturateFactor=U,t.SrcColorFactor=L,t.StaticCopyUsage=Dn,t.StaticDrawUsage=An,t.StaticReadUsage=Ln,t.StereoCamera=Hv,t.StreamCopyUsage=Nn,t.StreamDrawUsage=Rn,t.StreamReadUsage=In,t.StringKeyframeTrack=jm,t.SubtractEquation=w,t.SubtractiveBlending=b,t.TOUCH=r,t.TangentSpaceNormalMap=jt,t.TetrahedronGeometry=um,t.Texture=Ui,t.TextureLoader=lv,t.TorusGeometry=dm,t.TorusKnotGeometry=hm,t.Triangle=oa,t.TriangleFanDrawMode=Vt,t.TriangleStripDrawMode=Bt,t.TrianglesDrawMode=Ut,t.TubeGeometry=pm,t.TwoPassDoubleSide=v,t.UVMapping=le,t.Uint16BufferAttribute=Ra,t.Uint32BufferAttribute=Pa,t.Uint8BufferAttribute=Ta,t.Uint8ClampedBufferAttribute=Aa,t.Uniform=xg,t.UniformsGroup=Mg,t.UniformsLib=fc,t.UniformsUtils=fs,t.UnsignedByteType=Ae,t.UnsignedInt248Type=Fe,t.UnsignedIntType=Ie,t.UnsignedShort4444Type=Ne,t.UnsignedShort5551Type=ke,t.UnsignedShortType=Le,t.VSMShadowMap=h,t.Vector2=mi,t.Vector3=$i,t.Vector4=Bi,t.VectorKeyframeTrack=Xm,t.VideoTexture=Ep,t.WebGL1Renderer=dh,t.WebGL3DRenderTarget=ji,t.WebGLArrayRenderTarget=Hi,t.WebGLCoordinateSystem=Bn,t.WebGLCubeRenderTarget=ws,t.WebGLMultipleRenderTargets=Xi,t.WebGLRenderTarget=zi,t.WebGLRenderer=uh,t.WebGLUtils=th,t.WebGPUCoordinateSystem=Vn,t.WireframeGeometry=fm,t.WrapAroundEnding=Nt,t.ZeroCurvatureEnding=Dt,t.ZeroFactor=C,t.ZeroSlopeEnding=Ot,t.ZeroStencilOp=nn,t._SRGBAFormat=Un,t.createCanvasElement=Si,t.sRGBEncoding=Wt},7250:function(e,t,n){function i(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}n(4114),e.exports=i},7305:function(e){function t(e,t){var n=-1,i=Array(e);while(++n<e)i[n]=t(n);return i}e.exports=t},7347:function(e,t,n){"use strict";var i=n(3724),r=n(9565),a=n(8773),s=n(6980),o=n(5397),l=n(6969),c=n(9297),u=n(5917),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=o(e),t=l(t),u)try{return d(e,t)}catch(n){}if(c(e,t))return s(!r(a.f,e,t),e[t])}},7354:function(e,t,n){"use strict";n.d(t,{n:function(){return E},A:function(){return T}});var i=n(7443);const r=Symbol("rippleStop"),a=80;function s(e,t){e.style.transform=t,e.style.webkitTransform=t}function o(e){return"TouchEvent"===e.constructor.name}function l(e){return"KeyboardEvent"===e.constructor.name}const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=0,r=0;if(!l(e)){const n=t.getBoundingClientRect(),a=o(e)?e.touches[e.touches.length-1]:e;i=a.clientX-n.left,r=a.clientY-n.top}let a=0,s=.3;t._ripple?.circle?(s=.15,a=t.clientWidth/2,a=n.center?a:a+Math.sqrt((i-a)**2+(r-a)**2)/4):a=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const c=(t.clientWidth-2*a)/2+"px",u=(t.clientHeight-2*a)/2+"px",d=n.center?c:i-a+"px",h=n.center?u:r-a+"px";return{radius:a,scale:s,x:d,y:h,centerX:c,centerY:u}},u={show(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t?._ripple?.enabled)return;const i=document.createElement("span"),r=document.createElement("span");i.appendChild(r),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:a,scale:o,x:l,y:u,centerX:d,centerY:h}=c(e,t,n),p=2*a+"px";r.className="v-ripple__animation",r.style.width=p,r.style.height=p,t.appendChild(i);const f=window.getComputedStyle(t);f&&"static"===f.position&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),s(r,`translate(${l}, ${u}) scale3d(${o},${o},${o})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),s(r,`translate(${d}, ${h}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(0===t.length)return;const n=Array.from(t).findLast(e=>!e.dataset.isHiding);if(!n)return;n.dataset.isHiding="true";const i=performance.now()-Number(n.dataset.activated),r=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{const t=e.getElementsByClassName("v-ripple__animation");1===t.length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function d(e){return"undefined"===typeof e||!!e}function h(e){const t={},n=e.currentTarget;if(n?._ripple&&!n._ripple.touched&&!e[r]){if(e[r]=!0,o(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||l(e),n._ripple.class&&(t.class=n._ripple.class),o(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{u.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},a)}else u.show(e,n,t)}}function p(e){e[r]=!0}function f(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=window.setTimeout(()=>{f(e)}));window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),u.hide(t)}}function m(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let v=!1;function g(e,t){!v&&t.includes(e.key)&&(v=!0,h(e))}function y(e){v=!1,f(e)}function _(e){v&&(v=!1,f(e))}function b(e,t,n){const{value:r,modifiers:a}=t,s=d(r);s||u.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=s,e._ripple.centered=a.center,e._ripple.circle=a.circle;const o=(0,i.Gv)(r)?r:{};o.class&&(e._ripple.class=o.class);const l=o.keys??["Enter","Space"];if(e._ripple.keyDownHandler=e=>g(e,l),s&&!n){if(a.stop)return e.addEventListener("touchstart",p,{passive:!0}),void e.addEventListener("mousedown",p);e.addEventListener("touchstart",h,{passive:!0}),e.addEventListener("touchend",f,{passive:!0}),e.addEventListener("touchmove",m,{passive:!0}),e.addEventListener("touchcancel",f),e.addEventListener("mousedown",h),e.addEventListener("mouseup",f),e.addEventListener("mouseleave",f),e.addEventListener("keydown",e=>g(e,l)),e.addEventListener("keyup",y),e.addEventListener("blur",_),e.addEventListener("dragstart",f,{passive:!0})}else!s&&n&&x(e)}function x(e){e.removeEventListener("mousedown",h),e.removeEventListener("touchstart",h),e.removeEventListener("touchend",f),e.removeEventListener("touchmove",m),e.removeEventListener("touchcancel",f),e.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",f),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",y),e.removeEventListener("dragstart",f),e.removeEventListener("blur",_)}function S(e,t){b(e,t,!1)}function M(e){x(e),delete e._ripple}function w(e,t){if(t.value===t.oldValue)return;const n=d(t.oldValue);b(e,t,n)}const E={mounted:S,unmounted:M,updated:w};var T=E},7382:function(e,t,n){var i=n(9531),r=n(8606),a=i(r,"WeakMap");e.exports=a},7394:function(e,t,n){"use strict";var i=n(4576),r=n(6706),a=n(2195),s=i.ArrayBuffer,o=i.TypeError;e.exports=s&&r(s.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==a(e))throw new o("ArrayBuffer expected");return e.byteLength}},7400:function(e,t,n){"use strict";n.d(t,{_:function(){return o},f:function(){return s}});var i=n(6768),r=n(144),a=n(8392);const s=(0,a.j)({eager:Boolean},"lazy");function o(e,t){const n=(0,r.IJ)(!1),a=(0,r.lW)(()=>n.value||e.eager||t.value);function s(){e.eager||(n.value=!1)}return(0,i.wB)(t,()=>n.value=!0),{isBooted:n,hasContent:a,onAfterLeave:s}}},7443:function(e,t,n){"use strict";n.d(t,{$m:function(){return k},Ai:function(){return E},B5:function(){return se},BN:function(){return D},CF:function(){return U},CZ:function(){return q},D9:function(){return z},Dg:function(){return g},Gv:function(){return y},HP:function(){return S},Im:function(){return re},K7:function(){return x},Mp:function(){return C},O$:function(){return ge},OW:function(){return te},P:function(){return ee},Pv:function(){return P},RG:function(){return le},Sd:function(){return v},T4:function(){return oe},TD:function(){return m},T_:function(){return me},Up:function(){return w},_p:function(){return b},bD:function(){return p},bF:function(){return ve},bq:function(){return ie},cJ:function(){return T},e9:function(){return W},eX:function(){return ne},e_:function(){return $},eq:function(){return Z},f:function(){return F},fX:function(){return H},hA:function(){return V},if:function(){return G},iv:function(){return B},jF:function(){return ue},kb:function(){return fe},lQ:function(){return ae},lm:function(){return Q},m:function(){return de},mK:function(){return K},no:function(){return f},ph:function(){return I},qE:function(){return N},qr:function(){return he},sO:function(){return pe},sg:function(){return O},uR:function(){return J},v6:function(){return ce},yc:function(){return Y},zy:function(){return M}});n(4114),n(8111),n(1148),n(2489),n(7588),n(1701),n(3579);var i=n(6768),r=n(144),a=n(4232),s=n(8306);function o(e,t,n){l(e,t),t.set(e,n)}function l(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,n){return e.set(d(e,t),n),n}function u(e,t){return e.get(d(e,t))}function d(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function h(e,t,n){const i=t.length-1;if(i<0)return void 0===e?n:e;for(let r=0;r<i;r++){if(null==e)return n;e=e[t[r]]}return null==e||void 0===e[t[i]]?n:e[t[i]]}function p(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime())return!1;if(e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length===Object.keys(t).length&&n.every(n=>p(e[n],t[n]))}function f(e,t,n){return null!=e&&t&&"string"===typeof t?void 0!==e[t]?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),h(e,t.split("."),n)):n}function m(e,t,n){if(!0===t)return void 0===e?n:e;if(null==t||"boolean"===typeof t)return n;if(e!==Object(e)){if("function"!==typeof t)return n;const i=t(e,n);return"undefined"===typeof i?n:i}if("string"===typeof t)return f(e,t,n);if(Array.isArray(t))return h(e,t,n);if("function"!==typeof t)return n;const i=t(e,n);return"undefined"===typeof i?n:i}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:e},(e,n)=>t+n)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";if(null==e||""===e)return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function y(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)}function _(e){let t;return null!==e&&"object"===typeof e&&((t=Object.getPrototypeOf(e))===Object.prototype||null===t)}function b(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});const x=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function S(e){return Object.keys(e)}function M(e,t){return t.every(t=>e.hasOwnProperty(t))}function w(e,t){const n={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function E(e,t,n){const i=Object.create(null),r=Object.create(null);for(const a in e)t.some(e=>e instanceof RegExp?e.test(a):e===a)&&!n?.some(e=>e===a)?i[a]=e[a]:r[a]=e[a];return[i,r]}function T(e,t){const n={...e};return t.forEach(e=>delete n[e]),n}const A=/^on[^a-z]/,C=e=>A.test(e),R=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],L=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function P(e){return e.isComposing&&L.includes(e.key)}function I(e){const[t,n]=E(e,[A]),i=T(t,R),[r,a]=E(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(a,i),[r,a]}function D(e){return null==e?[]:Array.isArray(e)?e:[e]}function O(e,t){let n=0;const i=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];clearTimeout(n),n=setTimeout(()=>e(...a),(0,r.R1)(t))};return i.clear=()=>{clearTimeout(n)},i.immediate=e,i}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(n,e))}function k(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return n.repeat(Math.max(0,t-e.length))+e}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[];let i=0;while(i<e.length)n.push(e.substr(i,t)),i+=t;return n}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(e<t)return`${e} B`;const n=1024===t?["Ki","Mi","Gi"]:["k","M","G"];let i=-1;while(Math.abs(e)>=t&&i<n.length-1)e/=t,++i;return`${e.toFixed(1)} ${n[i]}B`}function z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i={};for(const r in e)i[r]=e[r];for(const r in t){const a=e[r],s=t[r];_(a)&&_(s)?i[r]=z(a,s,n):n&&Array.isArray(a)&&Array.isArray(s)?i[r]=n(a,s):i[r]=s}return i}function W(e){return e.map(e=>e.type===i.FK?W(e.children):e).flat()}function H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(H.cache.has(e))return H.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return H.cache.set(e,t),t}function G(e,t){if(!t||"object"!==typeof t)return[];if(Array.isArray(t))return t.map(t=>G(e,t)).flat(1);if(t.suspense)return G(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(t=>G(e,t)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return G(e,t.component.subTree).flat(1)}return[]}H.cache=new Map;var j=new WeakMap,X=new WeakMap;class q{constructor(e){o(this,j,[]),o(this,X,0),this.size=e}get isFull(){return u(j,this).length===this.size}push(e){u(j,this)[u(X,this)]=e,c(X,this,(u(X,this)+1)%this.size)}values(){return u(j,this).slice(u(X,this)).concat(u(j,this).slice(0,u(X,this)))}clear(){u(j,this).length=0,c(X,this,0)}}function $(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function Y(e){const t=(0,r.Kh)({});(0,i.nT)(()=>{const n=e();for(const e in n)t[e]=n[e]},{flush:"sync"});const n={};for(const i in t)n[i]=(0,r.lW)(()=>t[i]);return n}function K(e,t){return e.includes(t)}function Z(e){return e[2].toLowerCase()+e.slice(3)}const J=()=>[Function,Array];function Q(e,t){return t="on"+(0,a.ZH)(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Array.isArray(e))for(const r of e)r(...n);else"function"===typeof e&&e(...n)}function te(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(e=>`${e}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function ne(e,t,n){let i,r=e.indexOf(document.activeElement);const a="next"===t?1:-1;do{r+=a,i=e[r]}while((!i||null==i.offsetParent||!(n?.(i)??1))&&r<e.length&&r>=0);return i}function ie(e,t){const n=te(e);if(null==t)e!==document.activeElement&&e.contains(document.activeElement)||n[0]?.focus();else if("first"===t)n[0]?.focus();else if("last"===t)n.at(-1)?.focus();else if("number"===typeof t)n[t]?.focus();else{const i=ne(n,t);i?i.focus():ie(e,"next"===t?"first":"last")}}function re(e){return null===e||void 0===e||"string"===typeof e&&""===e.trim()}function ae(){}function se(e,t){const n=s.ZK&&"undefined"!==typeof CSS&&"undefined"!==typeof CSS.supports&&CSS.supports(`selector(${t})`);if(!n)return null;try{return!!e&&e.matches(t)}catch(i){return null}}function oe(e){return e.some(e=>!(0,i.vv)(e)||e.type!==i.Mw&&(e.type!==i.FK||oe(e.children)))?e:null}function le(e,t,n){return e?.(t)??n?.(t)}function ce(e,t){if(!s.ZK||0===e)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function ue(e,t){const n=e.clientX,i=e.clientY,r=t.getBoundingClientRect(),a=r.left,s=r.top,o=r.right,l=r.bottom;return n>=a&&n<=o&&i>=s&&i<=l}function de(){const e=(0,r.IJ)(),t=t=>{e.value=t};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:t=>e.value=t}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>b(e.value)}),t}function he(e){const t=1===e.key.length,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function pe(e){return"string"===typeof e||"number"===typeof e||"boolean"===typeof e||"bigint"===typeof e}function fe(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function me(e,t,n){const i=new RegExp(`[\\d\\-${fe(n)}]`),r=e.split("").filter(e=>i.test(e)).filter((e,t,i)=>0===t&&/[-]/.test(e)||e===n&&t===i.indexOf(e)||/\d/.test(e)).join("");if(0===t)return r.split(n)[0];const a=new RegExp(`${fe(n)}\\d`);if(null!==t&&a.test(r)){const e=r.split(n);return[e[0],e[1].substring(0,t)].join(n)}return r}function ve(e){const t={};for(const n in e)t[(0,a.PT)(n)]=e[n];return t}function ge(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(e=>{let[n,i]=e;return t.includes(n)?!!i:void 0!==i}))}},7476:function(e,t,n){"use strict";var i=n(2195),r=n(9504);e.exports=function(e){if("Function"===i(e))return r(e)}},7525:function(e,t,n){var i=n(9531),r=n(8606),a=i(r,"Promise");e.exports=a},7546:function(e,t,n){var i=n(9531),r=n(8606),a=i(r,"Map");e.exports=a},7565:function(e,t,n){"use strict";n.d(t,{Kz:function(){return f},aF:function(){return c},pP:function(){return v}});var i=n(6768),r=n(144),a=n(2046),s=n(6455),o=n(1101),l=n(7443);const c=Symbol.for("vuetify:goto");function u(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:o.v_}}function d(e){return h(e)??(document.scrollingElement||document.body)}function h(e){return"string"===typeof e?document.querySelector(e):(0,l._p)(e)}function p(e,t,n){if("number"===typeof e)return t&&n?-e:e;let i=h(e),r=0;while(i)r+=t?i.offsetLeft:i.offsetTop,i=i.offsetParent;return r}function f(e,t){return{rtl:t.isRtl,options:(0,l.D9)(u(),e)}}async function m(e,t,n,i){const r=n?"scrollLeft":"scrollTop",a=(0,l.D9)(i?.options??u(),t),o=i?.rtl.value,c=("number"===typeof e?e:h(e))??0,f="parent"===a.container&&c instanceof HTMLElement?c.parentElement:d(a.container),m="function"===typeof a.easing?a.easing:a.patterns[a.easing];if(!m)throw new TypeError(`Easing function "${a.easing}" not found.`);let v;if("number"===typeof c)v=p(c,n,o);else if(v=p(c,n,o)-p(f,n,o),a.layout){const e=window.getComputedStyle(c),t=e.getPropertyValue("--v-layout-top");t&&(v-=parseInt(t,10))}v+=a.offset,v=g(f,v,!!o,!!n);const y=f[r]??0;if(v===y)return Promise.resolve(v);const _=performance.now();return new Promise(e=>requestAnimationFrame(function t(n){const i=n-_,o=i/a.duration,c=Math.floor(y+(v-y)*m((0,l.qE)(o,0,1)));return f[r]=c,o>=1&&Math.abs(c-f[r])<10?e(v):o>2?((0,s.OP)("Scroll target is not reachable"),e(f[r])):void requestAnimationFrame(t)}))}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,i.WQ)(c),{isRtl:n}=(0,a.IA)();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const s={...t,rtl:(0,r.lW)(()=>t.rtl.value||n.value)};async function o(t,n){return m(t,(0,l.D9)(e,n),!1,s)}return o.horizontal=async(t,n)=>m(t,(0,l.D9)(e,n),!0,s),o}function g(e,t,n,i){const{scrollWidth:r,scrollHeight:a}=e,[s,o]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let c,u;return i?n?(c=-(r-s),u=0):(c=0,u=r-s):(c=0,u=a+-o),(0,l.qE)(t,c,u)}},7566:function(e,t,n){"use strict";var i=n(6840),r=n(9504),a=n(655),s=n(2812),o=URLSearchParams,l=o.prototype,c=r(l.getAll),u=r(l.has),d=new o("a=1");!d.has("a",2)&&d.has("a",void 0)||i(l,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var i=c(this,e);s(t,1);var r=a(n),o=0;while(o<i.length)if(i[o++]===r)return!0;return!1},{enumerable:!0,unsafe:!0})},7579:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var i=n(8392);const r=(0,i.j)({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component")},7588:function(e,t,n){"use strict";var i=n(6518),r=n(9565),a=n(2652),s=n(9306),o=n(8551),l=n(1767),c=n(9539),u=n(4549),d=u("forEach",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(e){o(this);try{s(e)}catch(i){c(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;a(t,function(t){e(t,n++)},{IS_RECORD:!0})}})},7629:function(e,t,n){"use strict";var i=n(6395),r=n(4576),a=n(9433),s="__core-js_shared__",o=e.exports=r[s]||a(s,{});(o.versions||(o.versions=[])).push({version:"3.45.1",mode:i?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:function(e,t,n){"use strict";var i=n(6518),r=n(3440),a=n(9039),s=n(4916),o=!s("difference",function(e){return 0===e.size}),l=o||a(function(){var e={size:1,has:function(){return!0},keys:function(){var e=0;return{next:function(){var n=e++>1;return t.has(1)&&t.clear(),{done:n,value:2}}}}},t=new Set([1,2,3,4]);return 3!==t.difference(e).size});i({target:"Set",proto:!0,real:!0,forced:l},{difference:r})},7657:function(e,t,n){"use strict";var i,r,a,s=n(9039),o=n(4901),l=n(34),c=n(2360),u=n(2787),d=n(6840),h=n(8227),p=n(6395),f=h("iterator"),m=!1;[].keys&&(a=[].keys(),"next"in a?(r=u(u(a)),r!==Object.prototype&&(i=r)):m=!0);var v=!l(i)||s(function(){var e={};return i[f].call(e)!==e});v?i={}:p&&(i=c(i)),o(i[f])||d(i,f,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},7696:function(e,t,n){"use strict";var i=n(1291),r=n(8014),a=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw new a("Wrong length or index");return n}},7740:function(e,t,n){"use strict";var i=n(9297),r=n(5031),a=n(7347),s=n(4913);e.exports=function(e,t,n){for(var o=r(t),l=s.f,c=a.f,u=0;u<o.length;u++){var d=o[u];i(e,d)||n&&i(n,d)||l(e,d,c(t,d))}}},7744:function(e){var t=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function i(e,i){var r=typeof e;return i=null==i?t:i,!!i&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<i}e.exports=i},7750:function(e,t,n){"use strict";var i=n(4117),r=TypeError;e.exports=function(e){if(i(e))throw new r("Can't call method on "+e);return e}},7751:function(e,t,n){"use strict";var i=n(4576),r=n(4901),a=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e]):i[e]&&i[e][t]}},7770:function(e){function t(){return[]}e.exports=t},7811:function(e){"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7830:function(e,t,n){function i(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}n(8111),n(7588),e.exports=i},7874:function(e,t,n){var i=n(8606),r=i.Symbol;e.exports=r},7890:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var i=n(2834),r=n(6768),a=n(144),s=n(8306);function o(){if(!s.ZK)return(0,a.IJ)(!1);const{ssr:e}=(0,i._F)();if(e){const e=(0,a.IJ)(!1);return(0,r.sV)(()=>{e.value=!0}),e}return(0,a.IJ)(!0)}},7911:function(e,t,n){"use strict";n.d(t,{WC:function(){return h},iE:function(){return d},rd:function(){return u},zE:function(){return f}});var i=n(6768),r=n(144),a=n(3398),s=n(8306),o=n(7443),l=n(8392);function c(){const e=(0,a.n)("useRoute");return(0,i.EW)(()=>e?.proxy?.$route)}function u(){return(0,a.n)("useRouter")?.proxy?.$router}function d(e,t){const n=(0,i.$y)("RouterLink"),a=(0,r.lW)(()=>!(!e.href&&!e.to)),s=(0,i.EW)(()=>a?.value||(0,o.lm)(t,"click")||(0,o.lm)(e,"click"));if("string"===typeof n||!("useLink"in n)){const t=(0,r.lW)(()=>e.href);return{isLink:a,isClickable:s,href:t,linkProps:(0,r.Kh)({href:t})}}const l=n.useLink({to:(0,r.lW)(()=>e.to||""),replace:(0,r.lW)(()=>e.replace)}),u=(0,i.EW)(()=>e.to?l:void 0),d=c(),h=(0,i.EW)(()=>!!u.value&&(e.exact?d.value?u.value.isExactActive?.value&&(0,o.bD)(u.value.route.value.query,d.value.query):u.value.isExactActive?.value??!1:u.value.isActive?.value??!1)),p=(0,i.EW)(()=>e.to?u.value?.route.value.href:e.href);return{isLink:a,isClickable:s,isActive:h,route:u.value?.route,navigate:u.value?.navigate,href:p,linkProps:(0,r.Kh)({href:p,"aria-current":(0,r.lW)(()=>h.value?"page":void 0)})}}const h=(0,l.j)({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let p=!1;function f(e,t){let n,a,o=!1;function l(e){e.state?.replaced||(o=!0,setTimeout(()=>o=!1))}s.ZK&&e?.beforeEach&&((0,i.dY)(()=>{window.addEventListener("popstate",l),n=e.beforeEach((e,n,i)=>{p?o?t(i):i():setTimeout(()=>o?t(i):i()),p=!0}),a=e?.afterEach(()=>{p=!1})}),(0,r.jr)(()=>{window.removeEventListener("popstate",l),n?.(),a?.()}))}},7936:function(e,t,n){"use strict";var i=n(6518),r=n(5636);r&&i({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return r(this,arguments.length?arguments[0]:void 0,!1)}})},7966:function(e,t,n){var i=n(9889),r=n(6061),a=Object.prototype,s=a.hasOwnProperty;function o(e,t,n){var a=e[t];s.call(e,t)&&r(a,n)&&(void 0!==n||t in e)||i(e,t,n)}e.exports=o},7979:function(e,t,n){"use strict";var i=n(8551);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},8004:function(e,t,n){"use strict";var i=n(6518),r=n(9039),a=n(8750),s=n(4916),o=!s("intersection",function(e){return 2===e.size&&e.has(1)&&e.has(2)})||r(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))});i({target:"Set",proto:!0,real:!0,forced:o},{intersection:a})},8014:function(e,t,n){"use strict";var i=n(1291),r=Math.min;e.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}},8093:function(e,t,n){"use strict";n.d(t,{BN:function(){return c},C3:function(){return d},RM:function(){return l},Z3:function(){return u},dO:function(){return o},fB:function(){return s}});var i=n(7443);const r=["top","bottom"],a=["start","end","left","right"];function s(e,t){let[n,s]=e.split(" ");return s||(s=(0,i.mK)(r,n)?"start":(0,i.mK)(a,n)?"top":"center"),{side:o(n,t),align:o(s,t)}}function o(e,t){return"start"===e?t?"right":"left":"end"===e?t?"left":"right":e}function l(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function c(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function u(e){return{side:e.align,align:e.side}}function d(e){return(0,i.mK)(r,e.side)?"y":"x"}},8100:function(e,t,n){"use strict";var i=n(6518),r=n(5636);r&&i({target:"ArrayBuffer",proto:!0},{transfer:function(){return r(this,arguments.length?arguments[0]:void 0,!0)}})},8111:function(e,t,n){"use strict";var i=n(6518),r=n(4576),a=n(679),s=n(8551),o=n(4901),l=n(2787),c=n(2106),u=n(4659),d=n(9039),h=n(9297),p=n(8227),f=n(7657).IteratorPrototype,m=n(3724),v=n(6395),g="constructor",y="Iterator",_=p("toStringTag"),b=TypeError,x=r[y],S=v||!o(x)||x.prototype!==f||!d(function(){x({})}),M=function(){if(a(this,f),l(this)===f)throw new b("Abstract class Iterator not directly constructable")},w=function(e,t){m?c(f,e,{configurable:!0,get:function(){return t},set:function(t){if(s(this),this===f)throw new b("You can't redefine this property");h(this,e)?this[e]=t:u(this,e,t)}}):f[e]=t};h(f,_)||w(_,y),!S&&h(f,g)&&f[g]!==Object||w(g,M),M.prototype=f,i({global:!0,constructor:!0,forced:S},{Iterator:M})},8121:function(e,t,n){"use strict";n.d(t,{w1:function(){return ne},H9:function(){return te},JO:function(){return ie},Yu:function(){return re},S_:function(){return se}});n(4114);var i=n(2046),r=n(144),a=n(6768),s=n(7443),o=(n(8111),n(1701),n(6455));function l(e){const t=e.slice(-2).toUpperCase();switch(!0){case"GB-alt-variant"===e:return{firstDay:0,firstWeekSize:4};case"001"===e:return{firstDay:1,firstWeekSize:1};case"AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE\n    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US\n    VE VI WS YE ZA ZW".includes(t):return{firstDay:0,firstWeekSize:1};case"AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV\n    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK".includes(t):return{firstDay:1,firstWeekSize:1};case"AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS\n    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA".includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case"MV"===t:return{firstDay:5,firstWeekSize:1};case"PT"===t:return{firstDay:0,firstWeekSize:4};default:return null}}function c(e,t,n){const i=[];let r=[];const a=h(e),s=p(e),o=n??l(t)?.firstDay??0,c=(a.getDay()-o+7)%7,u=(s.getDay()-o+7)%7;for(let l=0;l<c;l++){const e=new Date(a);e.setDate(e.getDate()-(c-l)),r.push(e)}for(let l=1;l<=s.getDate();l++){const t=new Date(e.getFullYear(),e.getMonth(),l);r.push(t),7===r.length&&(i.push(r),r=[])}for(let l=1;l<7-u;l++){const e=new Date(s);e.setDate(e.getDate()+l),r.push(e)}return r.length>0&&i.push(r),i}function u(e,t,n){let i=(n??l(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(i)||((0,o.OP)("Invalid firstDayOfWeek, expected discrete number in range [0-6]"),i=0);const r=new Date(e);while(r.getDay()!==i)r.setDate(r.getDate()-1);return r}function d(e,t){const n=new Date(e),i=((l(t)?.firstDay??0)+6)%7;while(n.getDay()!==i)n.setDate(n.getDate()+1);return n}function h(e){return new Date(e.getFullYear(),e.getMonth(),1)}function p(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function f(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const m=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function v(e){if(null==e)return new Date;if(e instanceof Date)return e;if("string"===typeof e){let t;if(m.test(e))return f(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const g=new Date(2e3,0,2);function y(e,t,n){const i=t??l(e)?.firstDay??0;return(0,s.Sd)(7).map(t=>{const r=new Date(g);return r.setDate(g.getDate()+i+t),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(r)})}function _(e,t,n,i){const r=v(e)??new Date,a=i?.[t];if("function"===typeof a)return a(r,t,n);let s={};switch(t){case"fullDate":s={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":s={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const e=r.getDate(),t=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${e} ${t}`;case"normalDateWithWeekday":s={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":s={month:"short",day:"numeric"};break;case"year":s={year:"numeric"};break;case"month":s={month:"long"};break;case"monthShort":s={month:"short"};break;case"monthAndYear":s={month:"long",year:"numeric"};break;case"monthAndDate":s={month:"long",day:"numeric"};break;case"weekday":s={weekday:"long"};break;case"weekdayShort":s={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":s={hour:"numeric",hour12:!0};break;case"hours24h":s={hour:"numeric",hour12:!1};break;case"minutes":s={minute:"numeric"};break;case"seconds":s={second:"numeric"};break;case"fullTime":s={hour:"numeric",minute:"numeric"};break;case"fullTime12h":s={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":s={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":s={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":s={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":s={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":s={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,s).format(r).replace(/, /g," ");case"keyboardDateTime12h":return s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,s).format(r).replace(/, /g," ");case"keyboardDateTime24h":return s={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,s).format(r).replace(/, /g," ");default:s=a??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,s).format(r)}function b(e,t){const n=e.toJsDate(t),i=n.getFullYear(),r=(0,s.CF)(String(n.getMonth()+1),2,"0"),a=(0,s.CF)(String(n.getDate()),2,"0");return`${i}-${r}-${a}`}function x(e){const[t,n,i]=e.split("-").map(Number);return new Date(t,n-1,i)}function S(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function M(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function w(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function E(e,t){const n=new Date(e);return n.setDate(n.getDate()+7*t),n}function T(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function A(e){return e.getFullYear()}function C(e){return e.getMonth()}function R(e,t,n,i){const r=l(t),a=n??r?.firstDay??0,s=i??r?.firstWeekSize??1;function o(e){const n=new Date(e,0,1);return 7-X(n,u(n,t,a),"days")}let c=A(e);const d=w(u(e,t,a),6);c<A(d)&&o(c+1)>=s&&c++;const h=new Date(c,0,1),p=o(c),f=w(h,p>=s?p-7:p);return 1+X(Q(e),J(f),"weeks")}function L(e){return e.getDate()}function P(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function I(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function D(e){return e.getHours()}function O(e){return e.getMinutes()}function N(e){return new Date(e.getFullYear(),0,1)}function k(e){return new Date(e.getFullYear(),11,31)}function F(e,t){return B(e,t[0])&&z(e,t[1])}function U(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function B(e,t){return e.getTime()>t.getTime()}function V(e,t){return B(J(e),J(t))}function z(e,t){return e.getTime()<t.getTime()}function W(e,t){return e.getTime()===t.getTime()}function H(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function G(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function j(e,t){return e.getFullYear()===t.getFullYear()}function X(e,t,n){const i=new Date(e),r=new Date(t);switch(n){case"years":return i.getFullYear()-r.getFullYear();case"quarters":return Math.floor((i.getMonth()-r.getMonth()+12*(i.getFullYear()-r.getFullYear()))/4);case"months":return i.getMonth()-r.getMonth()+12*(i.getFullYear()-r.getFullYear());case"weeks":return Math.floor((i.getTime()-r.getTime())/6048e5);case"days":return Math.floor((i.getTime()-r.getTime())/864e5);case"hours":return Math.floor((i.getTime()-r.getTime())/36e5);case"minutes":return Math.floor((i.getTime()-r.getTime())/6e4);case"seconds":return Math.floor((i.getTime()-r.getTime())/1e3);default:return i.getTime()-r.getTime()}}function q(e,t){const n=new Date(e);return n.setHours(t),n}function $(e,t){const n=new Date(e);return n.setMinutes(t),n}function Y(e,t){const n=new Date(e);return n.setMonth(t),n}function K(e,t){const n=new Date(e);return n.setDate(t),n}function Z(e,t){const n=new Date(e);return n.setFullYear(t),n}function J(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function Q(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class ee{constructor(e){this.locale=e.locale,this.formats=e.formats}date(e){return v(e)}toJsDate(e){return e}toISO(e){return b(this,e)}parseISO(e){return x(e)}addMinutes(e,t){return S(e,t)}addHours(e,t){return M(e,t)}addDays(e,t){return w(e,t)}addWeeks(e,t){return E(e,t)}addMonths(e,t){return T(e,t)}getWeekArray(e,t){const n=void 0!==t?Number(t):void 0;return c(e,this.locale,n)}startOfWeek(e,t){const n=void 0!==t?Number(t):void 0;return u(e,this.locale,n)}endOfWeek(e){return d(e,this.locale)}startOfMonth(e){return h(e)}endOfMonth(e){return p(e)}format(e,t){return _(e,t,this.locale,this.formats)}isEqual(e,t){return W(e,t)}isValid(e){return U(e)}isWithinRange(e,t){return F(e,t)}isAfter(e,t){return B(e,t)}isAfterDay(e,t){return V(e,t)}isBefore(e,t){return!B(e,t)&&!W(e,t)}isSameDay(e,t){return H(e,t)}isSameMonth(e,t){return G(e,t)}isSameYear(e,t){return j(e,t)}setMinutes(e,t){return $(e,t)}setHours(e,t){return q(e,t)}setMonth(e,t){return Y(e,t)}setDate(e,t){return K(e,t)}setYear(e,t){return Z(e,t)}getDiff(e,t,n){return X(e,t,n)}getWeekdays(e,t){const n=void 0!==e?Number(e):void 0;return y(this.locale,n,t)}getYear(e){return A(e)}getMonth(e){return C(e)}getWeek(e,t,n){const i=void 0!==t?Number(t):void 0;return R(e,this.locale,i,n)}getDate(e){return L(e)}getNextMonth(e){return P(e)}getPreviousMonth(e){return I(e)}getHours(e){return D(e)}getMinutes(e){return O(e)}startOfDay(e){return J(e)}endOfDay(e){return Q(e)}startOfYear(e){return N(e)}endOfYear(e){return k(e)}}const te=Symbol.for("vuetify:date-options"),ne=Symbol.for("vuetify:date-adapter");function ie(e,t){const n=(0,s.D9)({adapter:ee,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:ae(n,t)}}function re(e,t,n){const i=e.getDiff(e.endOfDay(n??t),e.startOfDay(t),"days"),r=[t];for(let a=1;a<i;a++){const n=e.addDays(t,a);r.push(n)}return n&&r.push(e.endOfDay(n)),r}function ae(e,t){const n=(0,r.Kh)("function"===typeof e.adapter?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return(0,a.wB)(t.current,t=>{n.locale=e.locale[t]??t??n.locale}),n}function se(){const e=(0,a.WQ)(te);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=(0,i.Ym)();return ae(e,t)}},8227:function(e,t,n){"use strict";var i=n(4576),r=n(5745),a=n(9297),s=n(3392),o=n(4495),l=n(7040),c=i.Symbol,u=r("wks"),d=l?c["for"]||c:c&&c.withoutSetter||s;e.exports=function(e){return a(u,e)||(u[e]=o&&a(c,e)?c[e]:d("Symbol."+e)),u[e]}},8230:function(e){function t(e,t){return function(n){return e(t(n))}}e.exports=t},8237:function(e,t,n){"use strict";var i=n(6518),r=n(2652),a=n(9306),s=n(8551),o=n(1767),l=n(9539),c=n(4549),u=n(8745),d=n(9039),h=TypeError,p=d(function(){[].keys().reduce(function(){},void 0)}),f=!p&&c("reduce",h);i({target:"Iterator",proto:!0,real:!0,forced:p||f},{reduce:function(e){s(this);try{a(e)}catch(d){l(this,"throw",d)}var t=arguments.length<2,n=t?void 0:arguments[1];if(f)return u(f,this,t?[e]:[e,n]);var i=o(this),c=0;if(r(i,function(i){t?(t=!1,n=i):n=e(n,i,c),c++},{IS_RECORD:!0}),t)throw new h("Reduce of empty iterator with no initial value");return n}})},8283:function(e,t,n){"use strict";n.d(t,{Ay:function(){return rn}});n(4114),n(8111),n(2489),n(7588);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function a(e){var t=r(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n(116),n(1701),n(8237),n(3579);var u="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,d=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(u&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();function h(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}function p(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},d))}}var f=u&&window.Promise,m=f?h:p;function v(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function g(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView,i=n.getComputedStyle(e,null);return t?i[t]:i}function y(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function _(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=g(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?e:_(y(e))}function b(e){return e&&e.referenceNode?e.referenceNode:e}var x=u&&!(!window.MSInputMethodContext||!document.documentMode),S=u&&/MSIE 10/.test(navigator.userAgent);function M(e){return 11===e?x:10===e?S:x||S}function w(e){if(!e)return document.documentElement;var t=M(10)?document.body:null,n=e.offsetParent||null;while(n===t&&e.nextElementSibling)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===g(n,"position")?w(n):n:e?e.ownerDocument.documentElement:document.documentElement}function E(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||w(e.firstElementChild)===e)}function T(e){return null!==e.parentNode?T(e.parentNode):e}function A(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,r=n?t:e,a=document.createRange();a.setStart(i,0),a.setEnd(r,0);var s=a.commonAncestorContainer;if(e!==s&&t!==s||i.contains(r))return E(s)?s:w(s);var o=T(e);return o.host?A(o.host,t):A(e,T(t).host)}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"===i||"HTML"===i){var r=e.ownerDocument.documentElement,a=e.ownerDocument.scrollingElement||r;return a[n]}return e[n]}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=C(t,"top"),r=C(t,"left"),a=n?-1:1;return e.top+=i*a,e.bottom+=i*a,e.left+=r*a,e.right+=r*a,e}function L(e,t){var n="x"===t?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+i+"Width"])}function P(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],M(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function I(e){var t=e.body,n=e.documentElement,i=M(10)&&getComputedStyle(n);return{height:P("Height",t,n,i),width:P("Width",t,n,i)}}var D=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),N=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function F(e){return k({},e,{right:e.left+e.width,bottom:e.top+e.height})}function U(e){var t={};try{if(M(10)){t=e.getBoundingClientRect();var n=C(e,"top"),i=C(e,"left");t.top+=n,t.left+=i,t.bottom+=n,t.right+=i}else t=e.getBoundingClientRect()}catch(d){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?I(e.ownerDocument):{},s=a.width||e.clientWidth||r.width,o=a.height||e.clientHeight||r.height,l=e.offsetWidth-s,c=e.offsetHeight-o;if(l||c){var u=g(e);l-=L(u,"x"),c-=L(u,"y"),r.width-=l,r.height-=c}return F(r)}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=M(10),r="HTML"===t.nodeName,a=U(e),s=U(t),o=_(e),l=g(t),c=parseFloat(l.borderTopWidth),u=parseFloat(l.borderLeftWidth);n&&r&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var d=F({top:a.top-s.top-c,left:a.left-s.left-u,width:a.width,height:a.height});if(d.marginTop=0,d.marginLeft=0,!i&&r){var h=parseFloat(l.marginTop),p=parseFloat(l.marginLeft);d.top-=c-h,d.bottom-=c-h,d.left-=u-p,d.right-=u-p,d.marginTop=h,d.marginLeft=p}return(i&&!n?t.contains(o):t===o&&"BODY"!==o.nodeName)&&(d=R(d,t)),d}function V(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=B(e,n),r=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),s=t?0:C(n),o=t?0:C(n,"left"),l={top:s-i.top+i.marginTop,left:o-i.left+i.marginLeft,width:r,height:a};return F(l)}function z(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===g(e,"position"))return!0;var n=y(e);return!!n&&z(n)}function W(e){if(!e||!e.parentElement||M())return document.documentElement;var t=e.parentElement;while(t&&"none"===g(t,"transform"))t=t.parentElement;return t||document.documentElement}function H(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},s=r?W(e):A(e,b(t));if("viewport"===i)a=V(s,r);else{var o=void 0;"scrollParent"===i?(o=_(y(t)),"BODY"===o.nodeName&&(o=e.ownerDocument.documentElement)):o="window"===i?e.ownerDocument.documentElement:i;var l=B(o,s,r);if("HTML"!==o.nodeName||z(s))a=l;else{var c=I(e.ownerDocument),u=c.height,d=c.width;a.top+=l.top-l.marginTop,a.bottom=u+l.top,a.left+=l.left-l.marginLeft,a.right=d+l.left}}n=n||0;var h="number"===typeof n;return a.left+=h?n:n.left||0,a.top+=h?n:n.top||0,a.right-=h?n:n.right||0,a.bottom-=h?n:n.bottom||0,a}function G(e){var t=e.width,n=e.height;return t*n}function j(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var s=H(n,i,a,r),o={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},l=Object.keys(o).map(function(e){return k({key:e},o[e],{area:G(o[e])})}).sort(function(e,t){return t.area-e.area}),c=l.filter(function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight}),u=c.length>0?c[0].key:l[0].key,d=e.split("-")[1];return u+(d?"-"+d:"")}function X(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=i?W(t):A(t,b(n));return B(n,r,i)}function q(e){var t=e.ownerDocument.defaultView,n=t.getComputedStyle(e),i=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),r=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0),a={width:e.offsetWidth+r,height:e.offsetHeight+i};return a}function $(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function Y(e,t,n){n=n.split("-")[0];var i=q(e),r={width:i.width,height:i.height},a=-1!==["right","left"].indexOf(n),s=a?"top":"left",o=a?"left":"top",l=a?"height":"width",c=a?"width":"height";return r[s]=t[s]+t[l]/2-i[l]/2,r[o]=n===o?t[o]-i[c]:t[$(o)],r}function K(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function Z(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var i=K(e,function(e){return e[t]===n});return e.indexOf(i)}function J(e,t,n){var i=void 0===n?e:e.slice(0,Z(e,"name",n));return i.forEach(function(e){e["function"]&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e["function"]||e.fn;e.enabled&&v(n)&&(t.offsets.popper=F(t.offsets.popper),t.offsets.reference=F(t.offsets.reference),t=n(t,e))}),t}function Q(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=X(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=j(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=Y(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=J(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function ee(e,t){return e.some(function(e){var n=e.name,i=e.enabled;return i&&n===t})}function te(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var r=t[i],a=r?""+r+n:e;if("undefined"!==typeof document.body.style[a])return a}return null}function ne(){return this.state.isDestroyed=!0,ee(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[te("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function ie(e){var t=e.ownerDocument;return t?t.defaultView:window}function re(e,t,n,i){var r="BODY"===e.nodeName,a=r?e.ownerDocument.defaultView:e;a.addEventListener(t,n,{passive:!0}),r||re(_(a.parentNode),t,n,i),i.push(a)}function ae(e,t,n,i){n.updateBound=i,ie(e).addEventListener("resize",n.updateBound,{passive:!0});var r=_(e);return re(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function se(){this.state.eventsEnabled||(this.state=ae(this.reference,this.options,this.state,this.scheduleUpdate))}function oe(e,t){return ie(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function le(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=oe(this.reference,this.state))}function ce(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function ue(e,t){Object.keys(t).forEach(function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&ce(t[n])&&(i="px"),e.style[n]=t[n]+i})}function de(e,t){Object.keys(t).forEach(function(n){var i=t[n];!1!==i?e.setAttribute(n,t[n]):e.removeAttribute(n)})}function he(e){return ue(e.instance.popper,e.styles),de(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&ue(e.arrowElement,e.arrowStyles),e}function pe(e,t,n,i,r){var a=X(r,t,e,n.positionFixed),s=j(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",s),ue(t,{position:n.positionFixed?"fixed":"absolute"}),n}function fe(e,t){var n=e.offsets,i=n.popper,r=n.reference,a=Math.round,s=Math.floor,o=function(e){return e},l=a(r.width),c=a(i.width),u=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),h=l%2===c%2,p=l%2===1&&c%2===1,f=t?u||d||h?a:s:o,m=t?a:o;return{left:f(p&&!d&&t?i.left-1:i.left),top:m(i.top),bottom:m(i.bottom),right:f(i.right)}}var me=u&&/Firefox/i.test(navigator.userAgent);function ve(e,t){var n=t.x,i=t.y,r=e.offsets.popper,a=K(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==a?a:t.gpuAcceleration,o=w(e.instance.popper),l=U(o),c={position:r.position},u=fe(e,window.devicePixelRatio<2||!me),d="bottom"===n?"top":"bottom",h="right"===i?"left":"right",p=te("transform"),f=void 0,m=void 0;if(m="bottom"===d?"HTML"===o.nodeName?-o.clientHeight+u.bottom:-l.height+u.bottom:u.top,f="right"===h?"HTML"===o.nodeName?-o.clientWidth+u.right:-l.width+u.right:u.left,s&&p)c[p]="translate3d("+f+"px, "+m+"px, 0)",c[d]=0,c[h]=0,c.willChange="transform";else{var v="bottom"===d?-1:1,g="right"===h?-1:1;c[d]=m*v,c[h]=f*g,c.willChange=d+", "+h}var y={"x-placement":e.placement};return e.attributes=k({},y,e.attributes),e.styles=k({},c,e.styles),e.arrowStyles=k({},e.offsets.arrow,e.arrowStyles),e}function ge(e,t,n){var i=K(e,function(e){var n=e.name;return n===t}),r=!!i&&e.some(function(e){return e.name===n&&e.enabled&&e.order<i.order});if(!r){var a="`"+t+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return r}function ye(e,t){var n;if(!ge(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"===typeof i){if(i=e.instance.popper.querySelector(i),!i)return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],a=e.offsets,s=a.popper,o=a.reference,l=-1!==["left","right"].indexOf(r),c=l?"height":"width",u=l?"Top":"Left",d=u.toLowerCase(),h=l?"left":"top",p=l?"bottom":"right",f=q(i)[c];o[p]-f<s[d]&&(e.offsets.popper[d]-=s[d]-(o[p]-f)),o[d]+f>s[p]&&(e.offsets.popper[d]+=o[d]+f-s[p]),e.offsets.popper=F(e.offsets.popper);var m=o[d]+o[c]/2-f/2,v=g(e.instance.popper),y=parseFloat(v["margin"+u]),_=parseFloat(v["border"+u+"Width"]),b=m-e.offsets.popper[d]-y-_;return b=Math.max(Math.min(s[c]-f,b),0),e.arrowElement=i,e.offsets.arrow=(n={},N(n,d,Math.round(b)),N(n,h,""),n),e}function _e(e){return"end"===e?"start":"start"===e?"end":e}var be=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],xe=be.slice(3);function Se(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=xe.indexOf(e),i=xe.slice(n+1).concat(xe.slice(0,n));return t?i.reverse():i}var Me={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function we(e,t){if(ee(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=H(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],r=$(i),a=e.placement.split("-")[1]||"",s=[];switch(t.behavior){case Me.FLIP:s=[i,r];break;case Me.CLOCKWISE:s=Se(i);break;case Me.COUNTERCLOCKWISE:s=Se(i,!0);break;default:s=t.behavior}return s.forEach(function(o,l){if(i!==o||s.length===l+1)return e;i=e.placement.split("-")[0],r=$(i);var c=e.offsets.popper,u=e.offsets.reference,d=Math.floor,h="left"===i&&d(c.right)>d(u.left)||"right"===i&&d(c.left)<d(u.right)||"top"===i&&d(c.bottom)>d(u.top)||"bottom"===i&&d(c.top)<d(u.bottom),p=d(c.left)<d(n.left),f=d(c.right)>d(n.right),m=d(c.top)<d(n.top),v=d(c.bottom)>d(n.bottom),g="left"===i&&p||"right"===i&&f||"top"===i&&m||"bottom"===i&&v,y=-1!==["top","bottom"].indexOf(i),_=!!t.flipVariations&&(y&&"start"===a&&p||y&&"end"===a&&f||!y&&"start"===a&&m||!y&&"end"===a&&v),b=!!t.flipVariationsByContent&&(y&&"start"===a&&f||y&&"end"===a&&p||!y&&"start"===a&&v||!y&&"end"===a&&m),x=_||b;(h||g||x)&&(e.flipped=!0,(h||g)&&(i=s[l+1]),x&&(a=_e(a)),e.placement=i+(a?"-"+a:""),e.offsets.popper=k({},e.offsets.popper,Y(e.instance.popper,e.offsets.reference,e.placement)),e=J(e.instance.modifiers,e,"flip"))}),e}function Ee(e){var t=e.offsets,n=t.popper,i=t.reference,r=e.placement.split("-")[0],a=Math.floor,s=-1!==["top","bottom"].indexOf(r),o=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[o]<a(i[l])&&(e.offsets.popper[l]=a(i[l])-n[c]),n[l]>a(i[o])&&(e.offsets.popper[l]=a(i[o])),e}function Te(e,t,n,i){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+r[1],s=r[2];if(!a)return e;if(0===s.indexOf("%")){var o=void 0;switch(s){case"%p":o=n;break;case"%":case"%r":default:o=i}var l=F(o);return l[t]/100*a}if("vh"===s||"vw"===s){var c=void 0;return c="vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),c/100*a}return a}function Ae(e,t,n,i){var r=[0,0],a=-1!==["right","left"].indexOf(i),s=e.split(/(\+|\-)/).map(function(e){return e.trim()}),o=s.indexOf(K(s,function(e){return-1!==e.search(/,|\s/)}));s[o]&&-1===s[o].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==o?[s.slice(0,o).concat([s[o].split(l)[0]]),[s[o].split(l)[1]].concat(s.slice(o+1))]:[s];return c=c.map(function(e,i){var r=(1===i?!a:a)?"height":"width",s=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,s=!0,e):s?(e[e.length-1]+=t,s=!1,e):e.concat(t)},[]).map(function(e){return Te(e,r,t,n)})}),c.forEach(function(e,t){e.forEach(function(n,i){ce(n)&&(r[t]+=n*("-"===e[i-1]?-1:1))})}),r}function Ce(e,t){var n=t.offset,i=e.placement,r=e.offsets,a=r.popper,s=r.reference,o=i.split("-")[0],l=void 0;return l=ce(+n)?[+n,0]:Ae(n,a,s,o),"left"===o?(a.top+=l[0],a.left-=l[1]):"right"===o?(a.top+=l[0],a.left+=l[1]):"top"===o?(a.left+=l[0],a.top-=l[1]):"bottom"===o&&(a.left+=l[0],a.top+=l[1]),e.popper=a,e}function Re(e,t){var n=t.boundariesElement||w(e.instance.popper);e.instance.reference===n&&(n=w(n));var i=te("transform"),r=e.instance.popper.style,a=r.top,s=r.left,o=r[i];r.top="",r.left="",r[i]="";var l=H(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);r.top=a,r.left=s,r[i]=o,t.boundaries=l;var c=t.priority,u=e.offsets.popper,d={primary:function(e){var n=u[e];return u[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(u[e],l[e])),N({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=u[n];return u[e]>l[e]&&!t.escapeWithReference&&(i=Math.min(u[n],l[e]-("right"===e?u.width:u.height))),N({},n,i)}};return c.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=k({},u,d[t](e))}),e.offsets.popper=u,e}function Le(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets,a=r.reference,s=r.popper,o=-1!==["bottom","top"].indexOf(n),l=o?"left":"top",c=o?"width":"height",u={start:N({},l,a[l]),end:N({},l,a[l]+a[c]-s[c])};e.offsets.popper=k({},s,u[i])}return e}function Pe(e){if(!ge(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=K(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function Ie(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,r=i.popper,a=i.reference,s=-1!==["left","right"].indexOf(n),o=-1===["top","left"].indexOf(n);return r[s?"left":"top"]=a[n]-(o?r[s?"width":"height"]:0),e.placement=$(t),e.offsets.popper=F(r),e}var De={shift:{order:100,enabled:!0,fn:Le},offset:{order:200,enabled:!0,fn:Ce,offset:0},preventOverflow:{order:300,enabled:!0,fn:Re,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Ee},arrow:{order:500,enabled:!0,fn:ye,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:we,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:Ie},hide:{order:800,enabled:!0,fn:Pe},computeStyle:{order:850,enabled:!0,fn:ve,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:he,onLoad:pe,gpuAcceleration:void 0}},Oe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:De},Ne=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};D(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=m(this.update.bind(this)),this.options=k({},e.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(k({},e.Defaults.modifiers,r.modifiers)).forEach(function(t){i.options.modifiers[t]=k({},e.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return k({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&v(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return O(e,[{key:"update",value:function(){return Q.call(this)}},{key:"destroy",value:function(){return ne.call(this)}},{key:"enableEventListeners",value:function(){return se.call(this)}},{key:"disableEventListeners",value:function(){return le.call(this)}}]),e}();Ne.Utils=("undefined"!==typeof window?window:n.g).PopperUtils,Ne.placements=be,Ne.Defaults=Oe;var ke,Fe=Ne,Ue=n(8567),Be=n.n(Ue);function Ve(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):-1}function ze(){ze.init||(ze.init=!0,ke=-1!==Ve())}var We={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},mounted:function(){var e=this;ze(),this.$nextTick(function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight,e.emitOnMount&&e.emitSize()});var t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",ke&&this.$el.appendChild(t),t.data="about:blank",ke||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()},methods:{compareAndNotify:function(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize:function(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!ke&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};function He(e,t,n,i,r,a,s,o,l,c){"boolean"!==typeof s&&(l=o,o=s,s=!1);var u,d="function"===typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,r&&(d.functional=!0)),i&&(d._scopeId=i),a?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=u):t&&(u=s?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),u)if(d.functional){var h=d.render;d.render=function(e,t){return u.call(t),h(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return n}var Ge=We,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},Xe=[];je._withStripped=!0;var qe=void 0,$e="data-v-8859cc6c",Ye=void 0,Ke=!1,Ze=He({render:je,staticRenderFns:Xe},qe,Ge,$e,Ke,Ye,!1,void 0,void 0,void 0);function Je(e){e.component("resize-observer",Ze),e.component("ResizeObserver",Ze)}var Qe={version:"1.0.1",install:Je},et=null;"undefined"!==typeof window?et=window.Vue:"undefined"!==typeof n.g&&(et=n.g.Vue),et&&et.use(Qe);var tt=n(5763),nt=n.n(tt),it=function(){};function rt(e){return"string"===typeof e&&(e=e.split(" ")),e}function at(e,t){var n,i=rt(t);n=e.className instanceof it?rt(e.className.baseVal):rt(e.className),i.forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),e instanceof SVGElement?e.setAttribute("class",n.join(" ")):e.className=n.join(" ")}function st(e,t){var n,i=rt(t);n=e.className instanceof it?rt(e.className.baseVal):rt(e.className),i.forEach(function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}),e instanceof SVGElement?e.setAttribute("class",n.join(" ")):e.className=n.join(" ")}"undefined"!==typeof window&&(it=window.SVGAnimatedString);var ot=!1;if("undefined"!==typeof window){ot=!1;try{var lt=Object.defineProperty({},"passive",{get:function(){ot=!0}});window.addEventListener("test",null,lt)}catch(an){}}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dt={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0},ht=[],pt=function(){function e(t,n){var i=this;o(this,e),s(this,"_events",[]),s(this,"_setTooltipNodeEvent",function(e,t,n,r){var a=e.relatedreference||e.toElement||e.relatedTarget,s=function n(a){var s=a.relatedreference||a.toElement||a.relatedTarget;i._tooltipNode.removeEventListener(e.type,n),t.contains(s)||i._scheduleHide(t,r.delay,r,a)};return!!i._tooltipNode.contains(a)&&(i._tooltipNode.addEventListener(e.type,s),!0)}),n=ut(ut({},dt),n),t.jquery&&(t=t[0]),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.reference=t,this.options=n,this._isOpen=!1,this._init()}return c(e,[{key:"show",value:function(){this._show(this.reference,this.options)}},{key:"hide",value:function(){this._hide()}},{key:"dispose",value:function(){this._dispose()}},{key:"toggle",value:function(){return this._isOpen?this.hide():this.show()}},{key:"setClasses",value:function(e){this._classes=e}},{key:"setContent",value:function(e){this.options.title=e,this._tooltipNode&&this._setContent(e,this.options)}},{key:"setOptions",value:function(e){var t=!1,n=e&&e.classes||Et.options.defaultClass;Be()(this._classes,n)||(this.setClasses(n),t=!0),e=_t(e);var i=!1,r=!1;for(var a in this.options.offset===e.offset&&this.options.placement===e.placement||(i=!0),(this.options.template!==e.template||this.options.trigger!==e.trigger||this.options.container!==e.container||t)&&(r=!0),e)this.options[a]=e[a];if(this._tooltipNode)if(r){var s=this._isOpen;this.dispose(),this._init(),s&&this.show()}else i&&this.popperInstance.update()}},{key:"_init",value:function(){var e="string"===typeof this.options.trigger?this.options.trigger.split(" "):[];this._isDisposed=!1,this._enableDocumentTouch=-1===e.indexOf("manual"),e=e.filter(function(e){return-1!==["click","hover","focus"].indexOf(e)}),this._setEventListeners(this.reference,e,this.options),this.$_originalTitle=this.reference.getAttribute("title"),this.reference.removeAttribute("title"),this.reference.setAttribute("data-original-title",this.$_originalTitle)}},{key:"_create",value:function(e,t){var n=this,i=window.document.createElement("div");i.innerHTML=t.trim();var r=i.childNodes[0];return r.id=this.options.ariaId||"tooltip_".concat(Math.random().toString(36).substr(2,10)),r.setAttribute("aria-hidden","true"),this.options.autoHide&&-1!==this.options.trigger.indexOf("hover")&&(r.addEventListener("mouseenter",function(t){return n._scheduleHide(e,n.options.delay,n.options,t)}),r.addEventListener("click",function(t){return n._scheduleHide(e,n.options.delay,n.options,t)})),r}},{key:"_setContent",value:function(e,t){var n=this;this.asyncContent=!1,this._applyContent(e,t).then(function(){n.popperInstance&&n.popperInstance.update()})}},{key:"_applyContent",value:function(e,t){var n=this;return new Promise(function(i,r){var a=t.html,s=n._tooltipNode;if(s){var o=s.querySelector(n.options.innerSelector);if(1===e.nodeType){if(a){while(o.firstChild)o.removeChild(o.firstChild);o.appendChild(e)}}else{if("function"===typeof e){var l=e();return void(l&&"function"===typeof l.then?(n.asyncContent=!0,t.loadingClass&&at(s,t.loadingClass),t.loadingContent&&n._applyContent(t.loadingContent,t),l.then(function(e){return t.loadingClass&&st(s,t.loadingClass),n._applyContent(e,t)}).then(i).catch(r)):n._applyContent(l,t).then(i).catch(r))}a?o.innerHTML=e:o.innerText=e}i()}})}},{key:"_show",value:function(e,t){if(t&&"string"===typeof t.container){var n=document.querySelector(t.container);if(!n)return}clearTimeout(this._disposeTimer),t=Object.assign({},t),delete t.offset;var i=!0;this._tooltipNode&&(at(this._tooltipNode,this._classes),i=!1);var r=this._ensureShown(e,t);return i&&this._tooltipNode&&at(this._tooltipNode,this._classes),at(e,["v-tooltip-open"]),r}},{key:"_ensureShown",value:function(e,t){var n=this;if(this._isOpen)return this;if(this._isOpen=!0,ht.push(this),this._tooltipNode)return this._tooltipNode.style.display="",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.enableEventListeners(),this.popperInstance.update(),this.asyncContent&&this._setContent(t.title,t),this;var i=e.getAttribute("title")||t.title;if(!i)return this;var r=this._create(e,t.template);this._tooltipNode=r,e.setAttribute("aria-describedby",r.id);var a=this._findContainer(t.container,e);this._append(r,a);var s=ut(ut({},t.popperOptions),{},{placement:t.placement});return s.modifiers=ut(ut({},s.modifiers),{},{arrow:{element:this.options.arrowSelector}}),t.boundariesElement&&(s.modifiers.preventOverflow={boundariesElement:t.boundariesElement}),this.popperInstance=new Fe(e,r,s),this._setContent(i,t),requestAnimationFrame(function(){!n._isDisposed&&n.popperInstance?(n.popperInstance.update(),requestAnimationFrame(function(){n._isDisposed?n.dispose():n._isOpen&&r.setAttribute("aria-hidden","false")})):n.dispose()}),this}},{key:"_noLongerOpen",value:function(){var e=ht.indexOf(this);-1!==e&&ht.splice(e,1)}},{key:"_hide",value:function(){var e=this;if(!this._isOpen)return this;this._isOpen=!1,this._noLongerOpen(),this._tooltipNode.style.display="none",this._tooltipNode.setAttribute("aria-hidden","true"),this.popperInstance&&this.popperInstance.disableEventListeners(),clearTimeout(this._disposeTimer);var t=Et.options.disposeTimeout;return null!==t&&(this._disposeTimer=setTimeout(function(){e._tooltipNode&&(e._tooltipNode.removeEventListener("mouseenter",e.hide),e._tooltipNode.removeEventListener("click",e.hide),e._removeTooltipNode())},t)),st(this.reference,["v-tooltip-open"]),this}},{key:"_removeTooltipNode",value:function(){if(this._tooltipNode){var e=this._tooltipNode.parentNode;e&&(e.removeChild(this._tooltipNode),this.reference.removeAttribute("aria-describedby")),this._tooltipNode=null}}},{key:"_dispose",value:function(){var e=this;return this._isDisposed=!0,this.reference.removeAttribute("data-original-title"),this.$_originalTitle&&this.reference.setAttribute("title",this.$_originalTitle),this._events.forEach(function(t){var n=t.func,i=t.event;e.reference.removeEventListener(i,n)}),this._events=[],this._tooltipNode?(this._hide(),this._tooltipNode.removeEventListener("mouseenter",this.hide),this._tooltipNode.removeEventListener("click",this.hide),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||this._removeTooltipNode()):this._noLongerOpen(),this}},{key:"_findContainer",value:function(e,t){return"string"===typeof e?e=window.document.querySelector(e):!1===e&&(e=t.parentNode),e}},{key:"_append",value:function(e,t){t.appendChild(e)}},{key:"_setEventListeners",value:function(e,t,n){var i=this,r=[],a=[];t.forEach(function(e){switch(e){case"hover":r.push("mouseenter"),a.push("mouseleave"),i.options.hideOnTargetClick&&a.push("click");break;case"focus":r.push("focus"),a.push("blur"),i.options.hideOnTargetClick&&a.push("click");break;case"click":r.push("click"),a.push("click");break}}),r.forEach(function(t){var r=function(t){!0!==i._isOpen&&(t.usedByTooltip=!0,i._scheduleShow(e,n.delay,n,t))};i._events.push({event:t,func:r}),e.addEventListener(t,r)}),a.forEach(function(t){var r=function(t){!0!==t.usedByTooltip&&i._scheduleHide(e,n.delay,n,t)};i._events.push({event:t,func:r}),e.addEventListener(t,r)})}},{key:"_onDocumentTouch",value:function(e){this._enableDocumentTouch&&this._scheduleHide(this.reference,this.options.delay,this.options,e)}},{key:"_scheduleShow",value:function(e,t,n){var i=this,r=t&&t.show||t||0;clearTimeout(this._scheduleTimer),this._scheduleTimer=window.setTimeout(function(){return i._show(e,n)},r)}},{key:"_scheduleHide",value:function(e,t,n,i){var r=this,a=t&&t.hide||t||0;clearTimeout(this._scheduleTimer),this._scheduleTimer=window.setTimeout(function(){if(!1!==r._isOpen&&r._tooltipNode.ownerDocument.body.contains(r._tooltipNode)){if("mouseleave"===i.type){var a=r._setTooltipNodeEvent(i,e,t,n);if(a)return}r._hide(e,n)}},a)}}]),e}();function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}"undefined"!==typeof document&&document.addEventListener("touchstart",function(e){for(var t=0;t<ht.length;t++)ht[t]._onDocumentTouch(e)},!ot||{passive:!0,capture:!0});var vt={enabled:!0},gt=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"],yt={defaultPlacement:"top",defaultClass:"vue-tooltip-theme",defaultTargetClass:"has-tooltip",defaultHtml:!0,defaultTemplate:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',defaultArrowSelector:".tooltip-arrow, .tooltip__arrow",defaultInnerSelector:".tooltip-inner, .tooltip__inner",defaultDelay:0,defaultTrigger:"hover focus",defaultOffset:0,defaultContainer:"body",defaultBoundariesElement:void 0,defaultPopperOptions:{},defaultLoadingClass:"tooltip-loading",defaultLoadingContent:"...",autoHide:!0,defaultHideOnTargetClick:!0,disposeTimeout:5e3,popover:{defaultPlacement:"bottom",defaultClass:"vue-popover-theme",defaultBaseClass:"tooltip popover",defaultWrapperClass:"wrapper",defaultInnerClass:"tooltip-inner popover-inner",defaultArrowClass:"tooltip-arrow popover-arrow",defaultOpenClass:"open",defaultDelay:0,defaultTrigger:"click",defaultOffset:0,defaultContainer:"body",defaultBoundariesElement:void 0,defaultPopperOptions:{},defaultAutoHide:!0,defaultHandleResize:!0}};function _t(e){var t={placement:"undefined"!==typeof e.placement?e.placement:Et.options.defaultPlacement,delay:"undefined"!==typeof e.delay?e.delay:Et.options.defaultDelay,html:"undefined"!==typeof e.html?e.html:Et.options.defaultHtml,template:"undefined"!==typeof e.template?e.template:Et.options.defaultTemplate,arrowSelector:"undefined"!==typeof e.arrowSelector?e.arrowSelector:Et.options.defaultArrowSelector,innerSelector:"undefined"!==typeof e.innerSelector?e.innerSelector:Et.options.defaultInnerSelector,trigger:"undefined"!==typeof e.trigger?e.trigger:Et.options.defaultTrigger,offset:"undefined"!==typeof e.offset?e.offset:Et.options.defaultOffset,container:"undefined"!==typeof e.container?e.container:Et.options.defaultContainer,boundariesElement:"undefined"!==typeof e.boundariesElement?e.boundariesElement:Et.options.defaultBoundariesElement,autoHide:"undefined"!==typeof e.autoHide?e.autoHide:Et.options.autoHide,hideOnTargetClick:"undefined"!==typeof e.hideOnTargetClick?e.hideOnTargetClick:Et.options.defaultHideOnTargetClick,loadingClass:"undefined"!==typeof e.loadingClass?e.loadingClass:Et.options.defaultLoadingClass,loadingContent:"undefined"!==typeof e.loadingContent?e.loadingContent:Et.options.defaultLoadingContent,popperOptions:mt({},"undefined"!==typeof e.popperOptions?e.popperOptions:Et.options.defaultPopperOptions)};if(t.offset){var n=i(t.offset),r=t.offset;("number"===n||"string"===n&&-1===r.indexOf(","))&&(r="0, ".concat(r)),t.popperOptions.modifiers||(t.popperOptions.modifiers={}),t.popperOptions.modifiers.offset={offset:r}}return t.trigger&&-1!==t.trigger.indexOf("click")&&(t.hideOnTargetClick=!1),t}function bt(e,t){for(var n=e.placement,i=0;i<gt.length;i++){var r=gt[i];t[r]&&(n=r)}return n}function xt(e){var t=i(e);return"string"===t?e:!(!e||"object"!==t)&&e.content}function St(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=xt(t),a="undefined"!==typeof t.classes?t.classes:Et.options.defaultClass,s=mt({title:r},_t(mt(mt({},"object"===i(t)?t:{}),{},{placement:bt(t,n)}))),o=e._tooltip=new pt(e,s);o.setClasses(a),o._vueEl=e;var l="undefined"!==typeof t.targetClasses?t.targetClasses:Et.options.defaultTargetClass;return e._tooltipTargetClasses=l,at(e,l),o}function Mt(e){e._tooltip&&(e._tooltip.dispose(),delete e._tooltip,delete e._tooltipOldShow),e._tooltipTargetClasses&&(st(e,e._tooltipTargetClasses),delete e._tooltipTargetClasses)}function wt(e,t){var n=t.value;t.oldValue;var i,r=t.modifiers,a=xt(n);a&&vt.enabled?(e._tooltip?(i=e._tooltip,i.setContent(a),i.setOptions(mt(mt({},n),{},{placement:bt(n,r)}))):i=St(e,n,r),"undefined"!==typeof n.show&&n.show!==e._tooltipOldShow&&(e._tooltipOldShow=n.show,n.show?i.show():i.hide())):Mt(e)}var Et={options:yt,bind:wt,update:wt,unbind:function(e){Mt(e)}};function Tt(e){e.addEventListener("click",Ct),e.addEventListener("touchstart",Rt,!!ot&&{passive:!0})}function At(e){e.removeEventListener("click",Ct),e.removeEventListener("touchstart",Rt),e.removeEventListener("touchend",Lt),e.removeEventListener("touchcancel",Pt)}function Ct(e){var t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function Rt(e){if(1===e.changedTouches.length){var t=e.currentTarget;t.$_vclosepopover_touch=!0;var n=e.changedTouches[0];t.$_vclosepopover_touchPoint=n,t.addEventListener("touchend",Lt),t.addEventListener("touchcancel",Pt)}}function Lt(e){var t=e.currentTarget;if(t.$_vclosepopover_touch=!1,1===e.changedTouches.length){var n=e.changedTouches[0],i=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(n.screenY-i.screenY)<20&&Math.abs(n.screenX-i.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function Pt(e){var t=e.currentTarget;t.$_vclosepopover_touch=!1}var It={bind:function(e,t){var n=t.value,i=t.modifiers;e.$_closePopoverModifiers=i,("undefined"===typeof n||n)&&Tt(e)},update:function(e,t){var n=t.value,i=t.oldValue,r=t.modifiers;e.$_closePopoverModifiers=r,n!==i&&("undefined"===typeof n||n?Tt(e):At(e))},unbind:function(e){At(e)}};function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Nt(e){var t=Et.options.popover[e];return"undefined"===typeof t?Et.options[e]:t}var kt=!1;"undefined"!==typeof window&&"undefined"!==typeof navigator&&(kt=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);var Ft=[],Ut=function(){};"undefined"!==typeof window&&(Ut=window.Element);var Bt={name:"VPopover",components:{ResizeObserver:Ze},props:{open:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placement:{type:String,default:function(){return Nt("defaultPlacement")}},delay:{type:[String,Number,Object],default:function(){return Nt("defaultDelay")}},offset:{type:[String,Number],default:function(){return Nt("defaultOffset")}},trigger:{type:String,default:function(){return Nt("defaultTrigger")}},container:{type:[String,Object,Ut,Boolean],default:function(){return Nt("defaultContainer")}},boundariesElement:{type:[String,Ut],default:function(){return Nt("defaultBoundariesElement")}},popperOptions:{type:Object,default:function(){return Nt("defaultPopperOptions")}},popoverClass:{type:[String,Array],default:function(){return Nt("defaultClass")}},popoverBaseClass:{type:[String,Array],default:function(){return Et.options.popover.defaultBaseClass}},popoverInnerClass:{type:[String,Array],default:function(){return Et.options.popover.defaultInnerClass}},popoverWrapperClass:{type:[String,Array],default:function(){return Et.options.popover.defaultWrapperClass}},popoverArrowClass:{type:[String,Array],default:function(){return Et.options.popover.defaultArrowClass}},autoHide:{type:Boolean,default:function(){return Et.options.popover.defaultAutoHide}},handleResize:{type:Boolean,default:function(){return Et.options.popover.defaultHandleResize}},openGroup:{type:String,default:null},openClass:{type:[String,Array],default:function(){return Et.options.popover.defaultOpenClass}},ariaId:{default:null}},data:function(){return{isOpen:!1,id:Math.random().toString(36).substr(2,10)}},computed:{cssClass:function(){return s({},this.openClass,this.isOpen)},popoverId:function(){return"popover_".concat(null!=this.ariaId?this.ariaId:this.id)}},watch:{open:function(e){e?this.show():this.hide()},disabled:function(e,t){e!==t&&(e?this.hide():this.open&&this.show())},container:function(e){if(this.isOpen&&this.popperInstance){var t=this.$refs.popover,n=this.$refs.trigger,i=this.$_findContainer(this.container,n);if(!i)return void console.warn("No container for popover",this);i.appendChild(t),this.popperInstance.scheduleUpdate()}},trigger:function(e){this.$_removeEventListeners(),this.$_addEventListeners()},placement:function(e){var t=this;this.$_updatePopper(function(){t.popperInstance.options.placement=e})},offset:"$_restartPopper",boundariesElement:"$_restartPopper",popperOptions:{handler:"$_restartPopper",deep:!0}},created:function(){this.$_isDisposed=!1,this.$_mounted=!1,this.$_events=[],this.$_preventOpen=!1},mounted:function(){var e=this.$refs.popover;e.parentNode&&e.parentNode.removeChild(e),this.$_init(),this.open&&this.show()},deactivated:function(){this.hide()},beforeDestroy:function(){this.dispose()},methods:{show:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.event;t.skipDelay;var i=t.force,r=void 0!==i&&i;!r&&this.disabled||(this.$_scheduleShow(n),this.$emit("show")),this.$emit("update:open",!0),this.$_beingShowed=!0,requestAnimationFrame(function(){e.$_beingShowed=!1})},hide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.event;e.skipDelay,this.$_scheduleHide(t),this.$emit("hide"),this.$emit("update:open",!1)},dispose:function(){if(this.$_isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.popperInstance&&(this.popperInstance.destroy(),!this.popperInstance.options.removeOnDestroy)){var e=this.$refs.popover;e.parentNode&&e.parentNode.removeChild(e)}this.$_mounted=!1,this.popperInstance=null,this.isOpen=!1,this.$emit("dispose")},$_init:function(){-1===this.trigger.indexOf("manual")&&this.$_addEventListeners()},$_show:function(){var e=this,t=this.$refs.trigger,n=this.$refs.popover;if(clearTimeout(this.$_disposeTimer),!this.isOpen){if(this.popperInstance&&(this.isOpen=!0,this.popperInstance.enableEventListeners(),this.popperInstance.scheduleUpdate()),!this.$_mounted){var i=this.$_findContainer(this.container,t);if(!i)return void console.warn("No container for popover",this);i.appendChild(n),this.$_mounted=!0,this.isOpen=!1,this.popperInstance&&requestAnimationFrame(function(){e.hidden||(e.isOpen=!0)})}if(!this.popperInstance){var r=Ot(Ot({},this.popperOptions),{},{placement:this.placement});if(r.modifiers=Ot(Ot({},r.modifiers),{},{arrow:Ot(Ot({},r.modifiers&&r.modifiers.arrow),{},{element:this.$refs.arrow})}),this.offset){var a=this.$_getOffset();r.modifiers.offset=Ot(Ot({},r.modifiers&&r.modifiers.offset),{},{offset:a})}this.boundariesElement&&(r.modifiers.preventOverflow=Ot(Ot({},r.modifiers&&r.modifiers.preventOverflow),{},{boundariesElement:this.boundariesElement})),this.popperInstance=new Fe(t,n,r),requestAnimationFrame(function(){if(e.hidden)return e.hidden=!1,void e.$_hide();!e.$_isDisposed&&e.popperInstance?(e.popperInstance.scheduleUpdate(),requestAnimationFrame(function(){if(e.hidden)return e.hidden=!1,void e.$_hide();e.$_isDisposed?e.dispose():e.isOpen=!0})):e.dispose()})}var s=this.openGroup;if(s)for(var o,l=0;l<Ft.length;l++)o=Ft[l],o.openGroup!==s&&(o.hide(),o.$emit("close-group"));Ft.push(this),this.$emit("apply-show")}},$_hide:function(){var e=this;if(this.isOpen){var t=Ft.indexOf(this);-1!==t&&Ft.splice(t,1),this.isOpen=!1,this.popperInstance&&this.popperInstance.disableEventListeners(),clearTimeout(this.$_disposeTimer);var n=Et.options.popover.disposeTimeout||Et.options.disposeTimeout;null!==n&&(this.$_disposeTimer=setTimeout(function(){var t=e.$refs.popover;t&&(t.parentNode&&t.parentNode.removeChild(t),e.$_mounted=!1)},n)),this.$emit("apply-hide")}},$_findContainer:function(e,t){return"string"===typeof e?e=window.document.querySelector(e):!1===e&&(e=t.parentNode),e},$_getOffset:function(){var e=i(this.offset),t=this.offset;return("number"===e||"string"===e&&-1===t.indexOf(","))&&(t="0, ".concat(t)),t},$_addEventListeners:function(){var e=this,t=this.$refs.trigger,n=[],i=[],r="string"===typeof this.trigger?this.trigger.split(" ").filter(function(e){return-1!==["click","hover","focus"].indexOf(e)}):[];r.forEach(function(e){switch(e){case"hover":n.push("mouseenter"),i.push("mouseleave");break;case"focus":n.push("focus"),i.push("blur");break;case"click":n.push("click"),i.push("click");break}}),n.forEach(function(n){var i=function(t){e.isOpen||(t.usedByTooltip=!0,!e.$_preventOpen&&e.show({event:t}),e.hidden=!1)};e.$_events.push({event:n,func:i}),t.addEventListener(n,i)}),i.forEach(function(n){var i=function(t){t.usedByTooltip||(e.hide({event:t}),e.hidden=!0)};e.$_events.push({event:n,func:i}),t.addEventListener(n,i)})},$_scheduleShow:function(){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(clearTimeout(this.$_scheduleTimer),e)this.$_show();else{var t=parseInt(this.delay&&this.delay.show||this.delay||0);this.$_scheduleTimer=setTimeout(this.$_show.bind(this),t)}},$_scheduleHide:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(clearTimeout(this.$_scheduleTimer),n)this.$_hide();else{var i=parseInt(this.delay&&this.delay.hide||this.delay||0);this.$_scheduleTimer=setTimeout(function(){if(e.isOpen){if(t&&"mouseleave"===t.type){var n=e.$_setTooltipNodeEvent(t);if(n)return}e.$_hide()}},i)}},$_setTooltipNodeEvent:function(e){var t=this,n=this.$refs.trigger,i=this.$refs.popover,r=e.relatedreference||e.toElement||e.relatedTarget,a=function r(a){var s=a.relatedreference||a.toElement||a.relatedTarget;i.removeEventListener(e.type,r),n.contains(s)||t.hide({event:a})};return!!i.contains(r)&&(i.addEventListener(e.type,a),!0)},$_removeEventListeners:function(){var e=this.$refs.trigger;this.$_events.forEach(function(t){var n=t.func,i=t.event;e.removeEventListener(i,n)}),this.$_events=[]},$_updatePopper:function(e){this.popperInstance&&(e(),this.isOpen&&this.popperInstance.scheduleUpdate())},$_restartPopper:function(){if(this.popperInstance){var e=this.isOpen;this.dispose(),this.$_isDisposed=!1,this.$_init(),e&&this.show({skipDelay:!0,force:!0})}},$_handleGlobalClose:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$_beingShowed||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),n&&(this.$_preventOpen=!0,setTimeout(function(){t.$_preventOpen=!1},300)))},$_handleResize:function(){this.isOpen&&this.popperInstance&&(this.popperInstance.scheduleUpdate(),this.$emit("resize"))}}};function Vt(e){Wt(e)}function zt(e){Wt(e,!0)}function Wt(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(n){var i=Ft[n];if(i.$refs.popover){var r=i.$refs.popover.contains(e.target);requestAnimationFrame(function(){(e.closeAllPopover||e.closePopover&&r||i.autoHide&&!r)&&i.$_handleGlobalClose(e,t)})}},i=0;i<Ft.length;i++)n(i)}function Ht(e,t,n,i,r,a,s,o,l,c){"boolean"!==typeof s&&(l=o,o=s,s=!1);const u="function"===typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),i&&(u._scopeId=i),a?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=d):t&&(d=s?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}"undefined"!==typeof document&&"undefined"!==typeof window&&(kt?document.addEventListener("touchend",zt,!ot||{passive:!0,capture:!0}):window.addEventListener("click",Vt,!0));var Gt=Bt,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-popover",class:e.cssClass},[n("div",{ref:"trigger",staticClass:"trigger",staticStyle:{display:"inline-block"},attrs:{"aria-describedby":e.isOpen?e.popoverId:void 0,tabindex:-1!==e.trigger.indexOf("focus")?0:void 0}},[e._t("default")],2),e._v(" "),n("div",{ref:"popover",class:[e.popoverBaseClass,e.popoverClass,e.cssClass],style:{visibility:e.isOpen?"visible":"hidden"},attrs:{id:e.popoverId,"aria-hidden":e.isOpen?"false":"true",tabindex:e.autoHide?0:void 0},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.autoHide&&e.hide()}}},[n("div",{class:e.popoverWrapperClass},[n("div",{ref:"inner",class:e.popoverInnerClass,staticStyle:{position:"relative"}},[n("div",[e._t("popover",null,{isOpen:e.isOpen})],2),e._v(" "),e.handleResize?n("ResizeObserver",{on:{notify:e.$_handleResize}}):e._e()],1),e._v(" "),n("div",{ref:"arrow",class:e.popoverArrowClass})])])])},Xt=[];jt._withStripped=!0;var qt=void 0,$t=void 0,Yt=void 0,Kt=!1,Zt=Ht({render:jt,staticRenderFns:Xt},qt,Gt,$t,Kt,Yt,!1,void 0,void 0,void 0);function Jt(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var Qt=".resize-observer[data-v-8859cc6c]{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;border:none;background-color:transparent;pointer-events:none;display:block;overflow:hidden;opacity:0}.resize-observer[data-v-8859cc6c] object{display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1}";function en(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!en.installed){en.installed=!0;var n={};nt()(n,yt,t),tn.options=n,Et.options=n,e.directive("tooltip",Et),e.directive("close-popover",It),e.component("VPopover",Zt)}}Jt(Qt);var tn={install:en,get enabled(){return vt.enabled},set enabled(e){vt.enabled=e}},nn=null;"undefined"!==typeof window?nn=window.Vue:"undefined"!==typeof n.g&&(nn=n.g.Vue),nn&&nn.use(tn);var rn=tn},8306:function(e,t,n){"use strict";n.d(t,{ZK:function(){return i},o$:function(){return s},tB:function(){return r},vd:function(){return a},yS:function(){return o}});const i="undefined"!==typeof window,r=i&&"IntersectionObserver"in window,a=i&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),s=i&&"EyeDropper"in window,o=i&&"matchMedia"in window&&"function"===typeof window.matchMedia},8392:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});n(8111),n(8237);function i(e,t){return n=>Object.keys(e).reduce((i,r)=>{const a="object"===typeof e[r]&&null!=e[r]&&!Array.isArray(e[r]),s=a?e[r]:{type:e[r]};return i[r]=n&&r in n?{...s,default:n[r]}:s,t&&!i[r].source&&(i[r].source=t),i},{})}},8432:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var i=n(9948),r=n(6768),a=n(144),s=n(3398),o=n(7443);function l(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>e;const u=(0,s.n)("useProxiedModel"),d=(0,a.KR)(void 0!==e[t]?e[t]:n),h=(0,o.fX)(t),p=h!==t,f=p?(0,r.EW)(()=>(e[t],!(!u.vnode.props?.hasOwnProperty(t)&&!u.vnode.props?.hasOwnProperty(h)||!u.vnode.props?.hasOwnProperty(`onUpdate:${t}`)&&!u.vnode.props?.hasOwnProperty(`onUpdate:${h}`)))):(0,r.EW)(()=>(e[t],!(!u.vnode.props?.hasOwnProperty(t)||!u.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));(0,i.Y)(()=>!f.value,()=>{(0,r.wB)(()=>e[t],e=>{d.value=e})});const m=(0,r.EW)({get(){const n=e[t];return l(f.value?n:d.value)},set(n){const i=c(n),r=(0,a.ux)(f.value?e[t]:d.value);r!==i&&l(r)!==n&&(d.value=i,u?.emit(`update:${t}`,i))}});return Object.defineProperty(m,"externalValue",{get:()=>f.value?e[t]:d.value}),m}},8465:function(e,t,n){var i=n(4823),r=n(9851);function a(e){return null!=e&&r(e.length)&&!i(e)}e.exports=a},8469:function(e,t,n){"use strict";var i=n(9504),r=n(507),a=n(4402),s=a.Set,o=a.proto,l=i(o.forEach),c=i(o.keys),u=c(new s).next;e.exports=function(e,t,n){return n?r({iterator:c(e),next:u},t):l(e,t)}},8478:function(e,t,n){n(4114);var i=n(1676),r=n(1281),a=n(4032),s=1,o=2;function l(e,t,n,l,c,u){var d=n&s,h=e.length,p=t.length;if(h!=p&&!(d&&p>h))return!1;var f=u.get(e),m=u.get(t);if(f&&m)return f==t&&m==e;var v=-1,g=!0,y=n&o?new i:void 0;u.set(e,t),u.set(t,e);while(++v<h){var _=e[v],b=t[v];if(l)var x=d?l(b,_,v,t,e,u):l(_,b,v,e,t,u);if(void 0!==x){if(x)continue;g=!1;break}if(y){if(!r(t,function(e,t){if(!a(y,t)&&(_===e||c(_,e,n,l,u)))return y.push(t)})){g=!1;break}}else if(_!==b&&!c(_,b,n,l,u)){g=!1;break}}return u["delete"](e),u["delete"](t),g}e.exports=l},8480:function(e,t,n){"use strict";var i=n(1828),r=n(8727),a=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,a)}},8513:function(e,t,n){var i=n(9386),r=Array.prototype,a=r.splice;function s(e){var t=this.__data__,n=i(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():a.call(t,n,1),--this.size,!0}e.exports=s},8527:function(e,t,n){"use strict";var i=n(7080),r=n(4402).has,a=n(5170),s=n(3789),o=n(507),l=n(9539);e.exports=function(e){var t=i(this),n=s(e);if(a(t)<n.size)return!1;var c=n.getIterator();return!1!==o(c,function(e){if(!r(t,e))return l(c,"normal",!1)})}},8551:function(e,t,n){"use strict";var i=n(34),r=String,a=TypeError;e.exports=function(e){if(i(e))return e;throw new a(r(e)+" is not an object")}},8567:function(e,t,n){var i=n(9231);function r(e,t){return i(e,t)}e.exports=r},8574:function(e,t,n){"use strict";var i=n(9504),r=Error,a=i("".replace),s=function(e){return String(new r(e).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,l=o.test(s);e.exports=function(e,t){if(l&&"string"==typeof e&&!r.prepareStackTrace)while(t--)e=a(e,o,"");return e}},8606:function(e,t,n){var i=n(6903),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},8619:function(e){function t(e,t){return null==e?void 0:e[t]}e.exports=t},8622:function(e,t,n){"use strict";var i=n(4576),r=n(4901),a=i.WeakMap;e.exports=r(a)&&/native code/.test(String(a))},8646:function(e,t,n){"use strict";var i=n(9565),r=n(8551),a=n(1767),s=n(851);e.exports=function(e,t){t&&"string"===typeof e||r(e);var n=s(e);return a(r(void 0!==n?i(n,e):e))}},8659:function(e,t,n){n(4114);var i=n(9426),r=n(6409),a=Object.prototype,s=a.hasOwnProperty;function o(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}e.exports=o},8664:function(e,t,n){var i=n(3238),r=n(9136),a=n(8465);function s(e){return a(e)?i(e,!0):r(e)}e.exports=s},8686:function(e,t,n){"use strict";var i=n(3724),r=n(9039);e.exports=i&&r(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8721:function(e,t,n){"use strict";var i=n(3724),r=n(9504),a=n(2106),s=URLSearchParams.prototype,o=r(s.forEach);i&&!("size"in s)&&a(s,"size",{get:function(){var e=0;return o(this,function(){e++}),e},configurable:!0,enumerable:!0})},8727:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8728:function(e,t,n){var i=n(8882);function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}e.exports=r},8745:function(e,t,n){"use strict";var i=n(616),r=Function.prototype,a=r.apply,s=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(a):function(){return s.apply(a,arguments)})},8750:function(e,t,n){"use strict";var i=n(7080),r=n(4402),a=n(5170),s=n(3789),o=n(8469),l=n(507),c=r.Set,u=r.add,d=r.has;e.exports=function(e){var t=i(this),n=s(e),r=new c;return a(t)>n.size?l(n.getIterator(),function(e){d(t,e)&&u(r,e)}):o(t,function(e){n.includes(e)&&u(r,e)}),r}},8773:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},8776:function(e,t,n){"use strict";n.d(t,{$EB:function(){return h},$Kf:function(){return Rd},$_I:function(){return ye},B69:function(){return cr},B6O:function(){return fh},BH$:function(){return eh},BKk:function(){return _a},Cfg:function(){return me},DXC:function(){return Jd},EAD:function(){return Dd},FCc:function(){return Qd},GJx:function(){return ue},Gu$:function(){return vh},HiM:function(){return ap},Hit:function(){return Ph},Ho_:function(){return mh},I46:function(){return Cd},I9Y:function(){return On},IUQ:function(){return ni},JeP:function(){return hd},Kzg:function(){return cp},LoY:function(){return Gr},MBL:function(){return Dh},N1A:function(){return Yd},NRn:function(){return di},NTi:function(){return f},Nwf:function(){return xp},O49:function(){return At},O9p:function(){return $i},ONl:function(){return ah},PJ3:function(){return bt},PTz:function(){return oi},Pq0:function(){return li},Q1f:function(){return Tr},Qev:function(){return sn},RJ4:function(){return Tt},RiT:function(){return Nh},S20:function(){return lh},THS:function(){return Dr},Tap:function(){return qh},V9B:function(){return Lr},Y9S:function(){return jh},YJl:function(){return ad},Z58:function(){return md},ZLX:function(){return Wd},Zr2:function(){return Ft},ZyN:function(){return op},_4j:function(){return gh},aHM:function(){return Wh},bdM:function(){return ka},cj9:function(){return Dn},eB$:function(){return vd},eHs:function(){return yd},eaF:function(){return la},er$:function(){return kt},fTw:function(){return Ep},gPd:function(){return ti},ghU:function(){return de},hB5:function(){return u},hxR:function(){return pe},iNn:function(){return da},imn:function(){return Rr},iyt:function(){return Ri},jUj:function(){return fd},k6q:function(){return ve},kRr:function(){return ge},kTW:function(){return he},kn4:function(){return Ui},lGw:function(){return wh},ljd:function(){return _t},mrM:function(){return Hd},nCl:function(){return ep},pHI:function(){return fe},ppV:function(){return Xn},qUd:function(){return El},qtW:function(){return kr},r6x:function(){return lp},rYR:function(){return Ct},tBo:function(){return Sp},tz3:function(){return kh},uSd:function(){return yh},uWO:function(){return Od},ubm:function(){return xa}});n(4114),n(6573),n(8100),n(7936),n(8111),n(2489),n(116),n(7588),n(1701),n(1806),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(9577),n(1549),n(9797),n(9631),n(5623);
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const i="158",r=0,a=1,s=2,o=1,l=2,c=3,u=0,d=1,h=2,p=0,f=1,m=2,v=3,g=4,y=5,_=100,b=101,x=102,S=103,M=104,w=200,E=201,T=202,A=203,C=204,R=205,L=206,P=207,I=208,D=209,O=210,N=211,k=212,F=213,U=214,B=0,V=1,z=2,W=3,H=4,G=5,j=6,X=7,q=0,$=1,Y=2,K=0,Z=1,J=2,Q=3,ee=4,te=5,ne="attached",ie="detached",re=300,ae=301,se=302,oe=303,le=304,ce=306,ue=1e3,de=1001,he=1002,pe=1003,fe=1004,me=1005,ve=1006,ge=1007,ye=1008,_e=1009,be=1010,xe=1011,Se=1012,Me=1013,we=1014,Ee=1015,Te=1016,Ae=1017,Ce=1018,Re=1020,Le=1021,Pe=1023,Ie=1024,De=1025,Oe=1026,Ne=1027,ke=1028,Fe=1029,Ue=1030,Be=1031,Ve=1033,ze=33776,We=33777,He=33778,Ge=33779,je=35840,Xe=35841,qe=35842,$e=35843,Ye=36196,Ke=37492,Ze=37496,Je=37808,Qe=37809,et=37810,tt=37811,nt=37812,it=37813,rt=37814,at=37815,st=37816,ot=37817,lt=37818,ct=37819,ut=37820,dt=37821,ht=36492,pt=36494,ft=36495,mt=36283,vt=36284,gt=36285,yt=36286,_t=2300,bt=2301,xt=2302,St=2400,Mt=2401,wt=2402,Et=2500,Tt=0,At=1,Ct=2,Rt=3e3,Lt=3001,Pt=3200,It=3201,Dt=0,Ot=1,Nt="",kt="srgb",Ft="srgb-linear",Ut="display-p3",Bt="display-p3-linear",Vt="linear",zt="srgb",Wt="rec709",Ht="p3",Gt=7680,jt=519,Xt=512,qt=513,$t=514,Yt=515,Kt=516,Zt=517,Jt=518,Qt=519,en=35044,tn="300 es",nn=1035,rn=2e3,an=2001;class sn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners,i=n[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);e.target=null}}}const on=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ln=1234567;const cn=Math.PI/180,un=180/Math.PI;function dn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=on[255&e]+on[e>>8&255]+on[e>>16&255]+on[e>>24&255]+"-"+on[255&t]+on[t>>8&255]+"-"+on[t>>16&15|64]+on[t>>24&255]+"-"+on[63&n|128]+on[n>>8&255]+"-"+on[n>>16&255]+on[n>>24&255]+on[255&i]+on[i>>8&255]+on[i>>16&255]+on[i>>24&255];return r.toLowerCase()}function hn(e,t,n){return Math.max(t,Math.min(n,e))}function pn(e,t){return(e%t+t)%t}function fn(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)}function mn(e,t,n){return e!==t?(n-e)/(t-e):0}function vn(e,t,n){return(1-n)*e+n*t}function gn(e,t,n,i){return vn(e,t,1-Math.exp(-n*i))}function yn(e,t=1){return t-Math.abs(pn(e,2*t)-t)}function _n(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function bn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function xn(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Sn(e,t){return e+Math.random()*(t-e)}function Mn(e){return e*(.5-Math.random())}function wn(e){void 0!==e&&(ln=e);let t=ln+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function En(e){return e*cn}function Tn(e){return e*un}function An(e){return 0===(e&e-1)&&0!==e}function Cn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Rn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Ln(e,t,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+i)/2),u=s((t+i)/2),d=a((t-i)/2),h=s((t-i)/2),p=a((i-t)/2),f=s((i-t)/2);switch(r){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Pn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function In(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Dn={DEG2RAD:cn,RAD2DEG:un,generateUUID:dn,clamp:hn,euclideanModulo:pn,mapLinear:fn,inverseLerp:mn,lerp:vn,damp:gn,pingpong:yn,smoothstep:_n,smootherstep:bn,randInt:xn,randFloat:Sn,randFloatSpread:Mn,seededRandom:wn,degToRad:En,radToDeg:Tn,isPowerOfTwo:An,ceilPowerOfTwo:Cn,floorPowerOfTwo:Rn,setQuaternionFromProperEuler:Ln,normalize:In,denormalize:Pn};class On{constructor(e=0,t=0){On.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const e=Math.atan2(-this.y,-this.x)+Math.PI;return e}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Nn{constructor(e,t,n,i,r,a,s,o,l){Nn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l)}set(e,t,n,i,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],_=i[7],b=i[2],x=i[5],S=i[8];return r[0]=a*f+s*g+o*b,r[3]=a*m+s*y+o*x,r[6]=a*v+s*_+o*S,r[1]=l*f+c*g+u*b,r[4]=l*m+c*y+u*x,r[7]=l*v+c*_+u*S,r[2]=d*f+h*g+p*b,r[5]=d*m+h*y+p*x,r[8]=d*v+h*_+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*r*c+n*s*o+i*r*l-i*a*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,d=s*o-c*r,h=l*r-a*o,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(s*n-i*a)*f,e[3]=d*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-s*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(kn.makeScale(e,t)),this}rotate(e){return this.premultiply(kn.makeRotation(-e)),this}translate(e,t){return this.premultiply(kn.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const kn=new Nn;function Fn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Un(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Bn(){const e=Un("canvas");return e.style.display="block",e}const Vn={};function zn(e){e in Vn||(Vn[e]=!0,console.warn(e))}const Wn=(new Nn).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Hn=(new Nn).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Gn={[Ft]:{transfer:Vt,primaries:Wt,toReference:e=>e,fromReference:e=>e},[kt]:{transfer:zt,primaries:Wt,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Bt]:{transfer:Vt,primaries:Ht,toReference:e=>e.applyMatrix3(Hn),fromReference:e=>e.applyMatrix3(Wn)},[Ut]:{transfer:zt,primaries:Ht,toReference:e=>e.convertSRGBToLinear().applyMatrix3(Hn),fromReference:e=>e.applyMatrix3(Wn).convertLinearToSRGB()}},jn=new Set([Ft,Bt]),Xn={enabled:!0,_workingColorSpace:Ft,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!jn.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=Gn[t].toReference,r=Gn[n].fromReference;return r(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Gn[e].primaries},getTransfer:function(e){return e===Nt?Vt:Gn[e].transfer}};function qn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function $n(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Yn;class Kn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Yn&&(Yn=Un("canvas")),Yn.width=e.width,Yn.height=e.height;const n=Yn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Yn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Un("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*qn(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*qn(t[e]/255)):t[e]=qn(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Zn=0;class Jn{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Zn++}),this.uuid=dn(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Qn(i[t].image)):e.push(Qn(i[t]))}else e=Qn(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Qn(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Kn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ei=0;class ti extends sn{constructor(e=ti.DEFAULT_IMAGE,t=ti.DEFAULT_MAPPING,n=de,i=de,r=ve,a=ye,s=Pe,o=_e,l=ti.DEFAULT_ANISOTROPY,c=Nt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ei++}),this.uuid=dn(),this.name="",this.source=new Jn(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new On(0,0),this.repeat=new On(1,1),this.center=new On(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(zn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Lt?kt:Nt),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==re)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ue:e.x=e.x-Math.floor(e.x);break;case de:e.x=e.x<0?0:1;break;case he:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ue:e.y=e.y-Math.floor(e.y);break;case de:e.y=e.y<0?0:1;break;case he:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return zn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===kt?Lt:Rt}set encoding(e){zn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Lt?kt:Nt}}ti.DEFAULT_IMAGE=null,ti.DEFAULT_MAPPING=re,ti.DEFAULT_ANISOTROPY=1;class ni{constructor(e=0,t=0,n=0,i=1){ni.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],f=o[2],m=o[6],v=o[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+h+v-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,g=(v+1)/2,y=(c+d)/4,_=(u+f)/4,b=(p+m)/4;return e>o&&e>g?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=_/n):o>g?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=b/i):g<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=_/r,i=b/r),this.set(n,i,r,t),this}let g=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(g)<.001&&(g=1),this.x=(m-p)/g,this.y=(u-f)/g,this.z=(d-c)/g,this.w=Math.acos((l+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ii extends sn{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ni(0,0,e,t),this.scissorTest=!1,this.viewport=new ni(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(zn("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Lt?kt:Nt),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ve,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new ti(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Jn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ri extends ii{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class ai extends ti{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=pe,this.minFilter=pe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class si extends ti{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=pe,this.minFilter=pe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oi{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,s){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[a+0],h=r[a+1],p=r[a+2],f=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==d||l!==h||c!==p){let e=1-s;const t=o*d+l*h+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[a],d=r[a+1],h=r[a+2],p=r[a+3];return e[t]=s*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-s*h,e[t+2]=l*p+c*h+s*d-o*u,e[t+3]=c*p-s*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),d=o(n/2),h=o(i/2),p=o(r/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+i*l-r*o,this._y=i*c+a*o+r*s-n*l,this._z=r*c+a*l+n*o-i*s,this._w=a*c-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class li{constructor(e=0,t=0,n=0){li.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ui.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ui.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*i-s*n),c=2*(s*t-r*i),u=2*(r*n-a*t);return this.x=t+o*l+a*u-s*c,this.y=n+o*c+s*l-r*u,this.z=i+o*u+r*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ci.copy(this).projectOnVector(e),this.sub(ci)}reflect(e){return this.sub(ci.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ci=new li,ui=new oi;class di{constructor(e=new li(1/0,1/0,1/0),t=new li(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(pi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(pi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=pi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,pi):pi.fromBufferAttribute(i,t),pi.applyMatrix4(e.matrixWorld),this.expandByPoint(pi);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),fi.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),fi.copy(n.boundingBox)),fi.applyMatrix4(e.matrixWorld),this.union(fi)}const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,pi),pi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(xi),Si.subVectors(this.max,xi),mi.subVectors(e.a,xi),vi.subVectors(e.b,xi),gi.subVectors(e.c,xi),yi.subVectors(vi,mi),_i.subVectors(gi,vi),bi.subVectors(mi,gi);let t=[0,-yi.z,yi.y,0,-_i.z,_i.y,0,-bi.z,bi.y,yi.z,0,-yi.x,_i.z,0,-_i.x,bi.z,0,-bi.x,-yi.y,yi.x,0,-_i.y,_i.x,0,-bi.y,bi.x,0];return!!Ei(t,mi,vi,gi,Si)&&(t=[1,0,0,0,1,0,0,0,1],!!Ei(t,mi,vi,gi,Si)&&(Mi.crossVectors(yi,_i),t=[Mi.x,Mi.y,Mi.z],Ei(t,mi,vi,gi,Si)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(pi).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(hi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hi)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hi=[new li,new li,new li,new li,new li,new li,new li,new li],pi=new li,fi=new di,mi=new li,vi=new li,gi=new li,yi=new li,_i=new li,bi=new li,xi=new li,Si=new li,Mi=new li,wi=new li;function Ei(e,t,n,i,r){for(let a=0,s=e.length-3;a<=s;a+=3){wi.fromArray(e,a);const s=r.x*Math.abs(wi.x)+r.y*Math.abs(wi.y)+r.z*Math.abs(wi.z),o=t.dot(wi),l=n.dot(wi),c=i.dot(wi);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Ti=new di,Ai=new li,Ci=new li;class Ri{constructor(e=new li,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Ti.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ai.subVectors(e,this.center);const t=Ai.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Ai,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Ci.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ai.copy(e.center).add(Ci)),this.expandByPoint(Ai.copy(e.center).sub(Ci))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Li=new li,Pi=new li,Ii=new li,Di=new li,Oi=new li,Ni=new li,ki=new li;class Fi{constructor(e=new li,t=new li(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Li)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Li.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Li.copy(this.origin).addScaledVector(this.direction,t),Li.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Pi.copy(e).add(t).multiplyScalar(.5),Ii.copy(t).sub(e).normalize(),Di.copy(this.origin).sub(Pi);const r=.5*e.distanceTo(t),a=-this.direction.dot(Ii),s=Di.dot(this.direction),o=-Di.dot(Ii),l=Di.lengthSq(),c=Math.abs(1-a*a);let u,d,h,p;if(c>0)if(u=a*o-s,d=a*s-o,p=r*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*s)+d*(a*u+d+2*o)+l}else d=r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-a*r+s)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(a*r+s)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=a>0?-r:r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(Pi).addScaledVector(Ii,d),h}intersectSphere(e,t){Li.subVectors(e.center,this.origin);const n=Li.dot(this.direction),i=Li.dot(Li)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;const n=e.normal.dot(this.direction);return n*t<0}intersectBox(e,t){let n,i,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||s>i?null:((s>n||n!==n)&&(n=s),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Li)}intersectTriangle(e,t,n,i,r){Oi.subVectors(t,e),Ni.subVectors(n,e),ki.crossVectors(Oi,Ni);let a,s=this.direction.dot(ki);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Di.subVectors(this.origin,e);const o=a*this.direction.dot(Ni.crossVectors(Di,Ni));if(o<0)return null;const l=a*this.direction.dot(Oi.cross(Di));if(l<0)return null;if(o+l>s)return null;const c=-a*Di.dot(ki);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ui{constructor(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m){Ui.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m)}set(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=s,v[13]=o,v[2]=l,v[6]=c,v[10]=u,v[14]=d,v[3]=h,v[7]=p,v[11]=f,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ui).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Bi.setFromMatrixColumn(e,0).length(),r=1/Bi.setFromMatrixColumn(e,1).length(),a=1/Bi.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*s,t[4]=-a*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(zi,e,Wi)}lookAt(e,t,n){const i=this.elements;return ji.subVectors(e,t),0===ji.lengthSq()&&(ji.z=1),ji.normalize(),Hi.crossVectors(n,ji),0===Hi.lengthSq()&&(1===Math.abs(n.z)?ji.x+=1e-4:ji.z+=1e-4,ji.normalize(),Hi.crossVectors(n,ji)),Hi.normalize(),Gi.crossVectors(ji,Hi),i[0]=Hi.x,i[4]=Gi.x,i[8]=ji.x,i[1]=Hi.y,i[5]=Gi.y,i[9]=ji.y,i[2]=Hi.z,i[6]=Gi.z,i[10]=ji.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],x=i[0],S=i[4],M=i[8],w=i[12],E=i[1],T=i[5],A=i[9],C=i[13],R=i[2],L=i[6],P=i[10],I=i[14],D=i[3],O=i[7],N=i[11],k=i[15];return r[0]=a*x+s*E+o*R+l*D,r[4]=a*S+s*T+o*L+l*O,r[8]=a*M+s*A+o*P+l*N,r[12]=a*w+s*C+o*I+l*k,r[1]=c*x+u*E+d*R+h*D,r[5]=c*S+u*T+d*L+h*O,r[9]=c*M+u*A+d*P+h*N,r[13]=c*w+u*C+d*I+h*k,r[2]=p*x+f*E+m*R+v*D,r[6]=p*S+f*T+m*L+v*O,r[10]=p*M+f*A+m*P+v*N,r[14]=p*w+f*C+m*I+v*k,r[3]=g*x+y*E+_*R+b*D,r[7]=g*S+y*T+_*L+b*O,r[11]=g*M+y*A+_*P+b*N,r[15]=g*w+y*C+_*I+b*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14],p=e[3],f=e[7],m=e[11],v=e[15];return p*(+r*o*u-i*l*u-r*s*d+n*l*d+i*s*h-n*o*h)+f*(+t*o*h-t*l*d+r*a*d-i*a*h+i*l*c-r*o*c)+m*(+t*l*u-t*s*h-r*a*u+n*a*h+r*s*c-n*l*c)+v*(-i*s*c-t*o*u+t*s*d+i*a*u-n*a*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],v=e[15],g=u*m*l-f*d*l+f*o*h-s*m*h-u*o*v+s*d*v,y=p*d*l-c*m*l-p*o*h+a*m*h+c*o*v-a*d*v,_=c*f*l-p*u*l+p*s*h-a*f*h-c*s*v+a*u*v,b=p*u*o-c*f*o-p*s*d+a*f*d+c*s*m-a*u*m,x=t*g+n*y+i*_+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=g*S,e[1]=(f*d*r-u*m*r-f*i*h+n*m*h+u*i*v-n*d*v)*S,e[2]=(s*m*r-f*o*r+f*i*l-n*m*l-s*i*v+n*o*v)*S,e[3]=(u*o*r-s*d*r-u*i*l+n*d*l+s*i*h-n*o*h)*S,e[4]=y*S,e[5]=(c*m*r-p*d*r+p*i*h-t*m*h-c*i*v+t*d*v)*S,e[6]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*v-t*o*v)*S,e[7]=(a*d*r-c*o*r+c*i*l-t*d*l-a*i*h+t*o*h)*S,e[8]=_*S,e[9]=(p*u*r-c*f*r-p*n*h+t*f*h+c*n*v-t*u*v)*S,e[10]=(a*f*r-p*s*r+p*n*l-t*f*l-a*n*v+t*s*v)*S,e[11]=(c*s*r-a*u*r-c*n*l+t*u*l+a*n*h-t*s*h)*S,e[12]=b*S,e[13]=(c*f*i-p*u*i+p*n*d-t*f*d-c*n*m+t*u*m)*S,e[14]=(p*s*i-a*f*i-p*n*o+t*f*o+a*n*m-t*s*m)*S,e[15]=(a*u*i-c*s*i+c*n*o-t*u*o-a*n*d+t*s*d)*S,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,c*s+n,c*o-i*a,0,l*o-i*s,c*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,u=s+s,d=r*l,h=r*c,p=r*u,f=a*c,m=a*u,v=s*u,g=o*l,y=o*c,_=o*u,b=n.x,x=n.y,S=n.z;return i[0]=(1-(f+v))*b,i[1]=(h+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(h-_)*x,i[5]=(1-(d+v))*x,i[6]=(m+g)*x,i[7]=0,i[8]=(p+y)*S,i[9]=(m-g)*S,i[10]=(1-(d+f))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Bi.set(i[0],i[1],i[2]).length();const a=Bi.set(i[4],i[5],i[6]).length(),s=Bi.set(i[8],i[9],i[10]).length(),o=this.determinant();o<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Vi.copy(this);const l=1/r,c=1/a,u=1/s;return Vi.elements[0]*=l,Vi.elements[1]*=l,Vi.elements[2]*=l,Vi.elements[4]*=c,Vi.elements[5]*=c,Vi.elements[6]*=c,Vi.elements[8]*=u,Vi.elements[9]*=u,Vi.elements[10]*=u,t.setFromRotationMatrix(Vi),n.x=r,n.y=a,n.z=s,this}makePerspective(e,t,n,i,r,a,s=rn){const o=this.elements,l=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,p;if(s===rn)h=-(a+r)/(a-r),p=-2*a*r/(a-r);else{if(s!==an)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-a/(a-r),p=-a*r/(a-r)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,a,s=rn){const o=this.elements,l=1/(t-e),c=1/(n-i),u=1/(a-r),d=(t+e)*l,h=(n+i)*c;let p,f;if(s===rn)p=(a+r)*u,f=-2*u;else{if(s!==an)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=r*u,f=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=f,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Bi=new li,Vi=new Ui,zi=new li(0,0,0),Wi=new li(1,1,1),Hi=new li,Gi=new li,ji=new li,Xi=new Ui,qi=new oi;class $i{constructor(e=0,t=0,n=0,i=$i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(hn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-hn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(hn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-hn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(hn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-hn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Xi.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Xi,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return qi.setFromEuler(this),this.setFromQuaternion(qi,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$i.DEFAULT_ORDER="XYZ";class Yi{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let Ki=0;const Zi=new li,Ji=new oi,Qi=new Ui,er=new li,tr=new li,nr=new li,ir=new oi,rr=new li(1,0,0),ar=new li(0,1,0),sr=new li(0,0,1),or={type:"added"},lr={type:"removed"};class cr extends sn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ki++}),this.uuid=dn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DEFAULT_UP.clone();const e=new li,t=new $i,n=new oi,i=new li(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ui},normalMatrix:{value:new Nn}}),this.matrix=new Ui,this.matrixWorld=new Ui,this.matrixAutoUpdate=cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Yi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ji.setFromAxisAngle(e,t),this.quaternion.multiply(Ji),this}rotateOnWorldAxis(e,t){return Ji.setFromAxisAngle(e,t),this.quaternion.premultiply(Ji),this}rotateX(e){return this.rotateOnAxis(rr,e)}rotateY(e){return this.rotateOnAxis(ar,e)}rotateZ(e){return this.rotateOnAxis(sr,e)}translateOnAxis(e,t){return Zi.copy(e).applyQuaternion(this.quaternion),this.position.add(Zi.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(rr,e)}translateY(e){return this.translateOnAxis(ar,e)}translateZ(e){return this.translateOnAxis(sr,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Qi.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?er.copy(e):er.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),tr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qi.lookAt(tr,er,this.up):Qi.lookAt(er,tr,this.up),this.quaternion.setFromRotationMatrix(Qi),i&&(Qi.extractRotation(i.matrixWorld),Ji.setFromRotationMatrix(Qi),this.quaternion.premultiply(Ji.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(or)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(lr)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Qi.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Qi.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qi),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n],r=i.getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(e,t);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tr,e,nr),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tr,ir,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}cr.DEFAULT_UP=new li(0,1,0),cr.DEFAULT_MATRIX_AUTO_UPDATE=!0,cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ur=new li,dr=new li,hr=new li,pr=new li,fr=new li,mr=new li,vr=new li,gr=new li,yr=new li,_r=new li;let br=!1;class xr{constructor(e=new li,t=new li,n=new li){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),ur.subVectors(e,t),i.cross(ur);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){ur.subVectors(i,t),dr.subVectors(n,t),hr.subVectors(e,t);const a=ur.dot(ur),s=ur.dot(dr),o=ur.dot(hr),l=dr.dot(dr),c=dr.dot(hr),u=a*l-s*s;if(0===u)return r.set(-2,-1,-1);const d=1/u,h=(l*o-s*c)*d,p=(a*c-s*o)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,pr),pr.x>=0&&pr.y>=0&&pr.x+pr.y<=1}static getUV(e,t,n,i,r,a,s,o){return!1===br&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),br=!0),this.getInterpolation(e,t,n,i,r,a,s,o)}static getInterpolation(e,t,n,i,r,a,s,o){return this.getBarycoord(e,t,n,i,pr),o.setScalar(0),o.addScaledVector(r,pr.x),o.addScaledVector(a,pr.y),o.addScaledVector(s,pr.z),o}static isFrontFacing(e,t,n,i){return ur.subVectors(n,t),dr.subVectors(e,t),ur.cross(dr).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ur.subVectors(this.c,this.b),dr.subVectors(this.a,this.b),.5*ur.cross(dr).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return!1===br&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),br=!0),xr.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}getInterpolation(e,t,n,i,r){return xr.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return xr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,s;fr.subVectors(i,n),mr.subVectors(r,n),gr.subVectors(e,n);const o=fr.dot(gr),l=mr.dot(gr);if(o<=0&&l<=0)return t.copy(n);yr.subVectors(e,i);const c=fr.dot(yr),u=mr.dot(yr);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(fr,a);_r.subVectors(e,r);const h=fr.dot(_r),p=mr.dot(_r);if(p>=0&&h<=p)return t.copy(r);const f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(mr,s);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return vr.subVectors(r,i),s=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(vr,s);const v=1/(m+f+d);return a=f*v,s=d*v,t.copy(n).addScaledVector(fr,a).addScaledVector(mr,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Sr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mr={h:0,s:0,l:0},wr={h:0,s:0,l:0};function Er(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Tr{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Xn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Xn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Xn.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Xn.workingColorSpace){if(e=pn(e,1),t=hn(t,0,1),n=hn(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Er(r,i,e+1/3),this.g=Er(r,i,e),this.b=Er(r,i,e-1/3)}return Xn.toWorkingColorSpace(this,i),this}setStyle(e,t=kt){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=kt){const n=Sr[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qn(e.r),this.g=qn(e.g),this.b=qn(e.b),this}copyLinearToSRGB(e){return this.r=$n(e.r),this.g=$n(e.g),this.b=$n(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kt){return Xn.fromWorkingColorSpace(Ar.copy(this),e),65536*Math.round(hn(255*Ar.r,0,255))+256*Math.round(hn(255*Ar.g,0,255))+Math.round(hn(255*Ar.b,0,255))}getHexString(e=kt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xn.workingColorSpace){Xn.fromWorkingColorSpace(Ar.copy(this),t);const n=Ar.r,i=Ar.g,r=Ar.b,a=Math.max(n,i,r),s=Math.min(n,i,r);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4;break}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=Xn.workingColorSpace){return Xn.fromWorkingColorSpace(Ar.copy(this),t),e.r=Ar.r,e.g=Ar.g,e.b=Ar.b,e}getStyle(e=kt){Xn.fromWorkingColorSpace(Ar.copy(this),e);const t=Ar.r,n=Ar.g,i=Ar.b;return e!==kt?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(Mr),this.setHSL(Mr.h+e,Mr.s+t,Mr.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Mr),e.getHSL(wr);const n=vn(Mr.h,wr.h,t),i=vn(Mr.s,wr.s,t),r=vn(Mr.l,wr.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ar=new Tr;Tr.NAMES=Sr;let Cr=0;class Rr extends sn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Cr++}),this.uuid=dn(),this.name="",this.type="Material",this.blending=f,this.side=u,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=C,this.blendDst=R,this.blendEquation=_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tr(0,0,0),this.blendAlpha=0,this.depthFunc=W,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jt,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gt,this.stencilZFail=Gt,this.stencilZPass=Gt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==f&&(n.blending=this.blending),this.side!==u&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==C&&(n.blendSrc=this.blendSrc),this.blendDst!==R&&(n.blendDst=this.blendDst),this.blendEquation!==_&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==W&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==jt&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gt&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Gt&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Gt&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Lr extends Rr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Tr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pr=new li,Ir=new On;class Dr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=en,this.updateRange={offset:0,count:-1},this.gpuType=Ee,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ir.fromBufferAttribute(this,t),Ir.applyMatrix3(e),this.setXY(t,Ir.x,Ir.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Pr.fromBufferAttribute(this,t),Pr.applyMatrix3(e),this.setXYZ(t,Pr.x,Pr.y,Pr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Pr.fromBufferAttribute(this,t),Pr.applyMatrix4(e),this.setXYZ(t,Pr.x,Pr.y,Pr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Pr.fromBufferAttribute(this,t),Pr.applyNormalMatrix(e),this.setXYZ(t,Pr.x,Pr.y,Pr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Pr.fromBufferAttribute(this,t),Pr.transformDirection(e),this.setXYZ(t,Pr.x,Pr.y,Pr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Pn(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=In(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Pn(t,this.array)),t}setX(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Pn(t,this.array)),t}setY(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Pn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Pn(t,this.array)),t}setW(e,t){return this.normalized&&(t=In(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),n=In(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),n=In(n,this.array),i=In(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=In(t,this.array),n=In(n,this.array),i=In(i,this.array),r=In(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==en&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class Or extends Dr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Nr extends Dr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class kr extends Dr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Fr=0;const Ur=new Ui,Br=new cr,Vr=new li,zr=new di,Wr=new di,Hr=new li;class Gr extends sn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fr++}),this.uuid=dn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Fn(e)?Nr:Or)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Nn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ur.makeRotationFromQuaternion(e),this.applyMatrix4(Ur),this}rotateX(e){return Ur.makeRotationX(e),this.applyMatrix4(Ur),this}rotateY(e){return Ur.makeRotationY(e),this.applyMatrix4(Ur),this}rotateZ(e){return Ur.makeRotationZ(e),this.applyMatrix4(Ur),this}translate(e,t,n){return Ur.makeTranslation(e,t,n),this.applyMatrix4(Ur),this}scale(e,t,n){return Ur.makeScale(e,t,n),this.applyMatrix4(Ur),this}lookAt(e){return Br.lookAt(e),Br.updateMatrix(),this.applyMatrix4(Br.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vr).negate(),this.translate(Vr.x,Vr.y,Vr.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new kr(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new di);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new li(-1/0,-1/0,-1/0),new li(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];zr.setFromBufferAttribute(e),this.morphTargetsRelative?(Hr.addVectors(this.boundingBox.min,zr.min),this.boundingBox.expandByPoint(Hr),Hr.addVectors(this.boundingBox.max,zr.max),this.boundingBox.expandByPoint(Hr)):(this.boundingBox.expandByPoint(zr.min),this.boundingBox.expandByPoint(zr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ri);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new li,1/0);if(e){const n=this.boundingSphere.center;if(zr.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];Wr.setFromBufferAttribute(n),this.morphTargetsRelative?(Hr.addVectors(zr.min,Wr.min),zr.expandByPoint(Hr),Hr.addVectors(zr.max,Wr.max),zr.expandByPoint(Hr)):(zr.expandByPoint(Wr.min),zr.expandByPoint(Wr.max))}zr.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Hr.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Hr));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)Hr.fromBufferAttribute(a,t),s&&(Vr.fromBufferAttribute(e,t),Hr.add(Vr)),i=Math.max(i,n.distanceToSquared(Hr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Dr(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<s;E++)l[E]=new li,c[E]=new li;const u=new li,d=new li,h=new li,p=new On,f=new On,m=new On,v=new li,g=new li;function y(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(v.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(r),g.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(v),l[t].add(v),l[n].add(v),c[e].add(g),c[t].add(g),c[n].add(g))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start,i=e.count;for(let r=t,a=t+i;r<a;r+=3)y(n[r+0],n[r+1],n[r+2])}const b=new li,x=new li,S=new li,M=new li;function w(e){S.fromArray(r,3*e),M.copy(S);const t=l[e];b.copy(t),b.sub(S.multiplyScalar(S.dot(t))).normalize(),x.crossVectors(M,t);const n=x.dot(c[e]),i=n<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=i}for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start,i=e.count;for(let r=t,a=t+i;r<a;r+=3)w(n[r+0]),w(n[r+1]),w(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Dr(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new li,r=new li,a=new li,s=new li,o=new li,l=new li,c=new li,u=new li;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Hr.fromBufferAttribute(e,t),Hr.normalize(),e.setXYZ(t,Hr.x,Hr.y,Hr.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)a[o++]=n[s++]}return new Dr(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Gr,n=this.index.array,i=this.attributes;for(const s in i){const r=i[s],a=e(r,n);t.setAttribute(s,a)}const r=this.morphAttributes;for(const s in r){const i=[],a=r[s];for(let t=0,r=a.length;t<r;t++){const r=a[t],s=e(r,n);i.push(s)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jr=new Ui,Xr=new Fi,qr=new Ri,$r=new li,Yr=new li,Kr=new li,Zr=new li,Jr=new li,Qr=new li,ea=new On,ta=new On,na=new On,ia=new li,ra=new li,aa=new li,sa=new li,oa=new li;class la extends cr{constructor(e=new Gr,t=new Lr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){Qr.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],o=r[n];0!==i&&(Jr.fromBufferAttribute(o,e),a?Qr.addScaledVector(Jr,i):Qr.addScaledVector(Jr.sub(t),i))}t.add(Qr)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),qr.copy(n.boundingSphere),qr.applyMatrix4(r),Xr.copy(e.ray).recast(e.near),!1===qr.containsPoint(Xr.origin)){if(null===Xr.intersectSphere(qr,$r))return;if(Xr.origin.distanceToSquared($r)>(e.far-e.near)**2)return}jr.copy(r).invert(),Xr.copy(e.ray).applyMatrix4(jr),null!==n.boundingBox&&!1===Xr.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Xr)}}_computeIntersections(e,t,n){let i;const r=this.geometry,a=this.material,s=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,d=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const r=d[p],o=a[r.materialIndex],f=Math.max(r.start,h.start),m=Math.min(s.count,Math.min(r.start+r.count,h.start+h.count));for(let a=f,d=m;a<d;a+=3){const d=s.getX(a),h=s.getX(a+1),p=s.getX(a+2);i=ua(this,o,e,n,l,c,u,d,h,p),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{const r=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);for(let d=r,h=o;d<h;d+=3){const r=s.getX(d),o=s.getX(d+1),h=s.getX(d+2);i=ua(this,a,e,n,l,c,u,r,o,h),i&&(i.faceIndex=Math.floor(d/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const r=d[p],s=a[r.materialIndex],f=Math.max(r.start,h.start),m=Math.min(o.count,Math.min(r.start+r.count,h.start+h.count));for(let a=f,o=m;a<o;a+=3){const o=a,d=a+1,h=a+2;i=ua(this,s,e,n,l,c,u,o,d,h),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{const r=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);for(let o=r,d=s;o<d;o+=3){const r=o,s=o+1,d=o+2;i=ua(this,a,e,n,l,c,u,r,s,d),i&&(i.faceIndex=Math.floor(o/3),t.push(i))}}}}function ca(e,t,n,i,r,a,s,o){let l;if(l=t.side===d?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,t.side===u,o),null===l)return null;oa.copy(o),oa.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(oa);return c<n.near||c>n.far?null:{distance:c,point:oa.clone(),object:e}}function ua(e,t,n,i,r,a,s,o,l,c){e.getVertexPosition(o,Yr),e.getVertexPosition(l,Kr),e.getVertexPosition(c,Zr);const u=ca(e,t,n,i,Yr,Kr,Zr,sa);if(u){r&&(ea.fromBufferAttribute(r,o),ta.fromBufferAttribute(r,l),na.fromBufferAttribute(r,c),u.uv=xr.getInterpolation(sa,Yr,Kr,Zr,ea,ta,na,new On)),a&&(ea.fromBufferAttribute(a,o),ta.fromBufferAttribute(a,l),na.fromBufferAttribute(a,c),u.uv1=xr.getInterpolation(sa,Yr,Kr,Zr,ea,ta,na,new On),u.uv2=u.uv1),s&&(ia.fromBufferAttribute(s,o),ra.fromBufferAttribute(s,l),aa.fromBufferAttribute(s,c),u.normal=xr.getInterpolation(sa,Yr,Kr,Zr,ia,ra,aa,new li),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new li,materialIndex:0};xr.getNormal(Yr,Kr,Zr,e.normal),u.face=e}return u}class da extends Gr{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,i,r,a,p,f,m,v,g){const y=a/m,_=p/v,b=a/2,x=p/2,S=f/2,M=m+1,w=v+1;let E=0,T=0;const A=new li;for(let s=0;s<w;s++){const a=s*_-x;for(let o=0;o<M;o++){const d=o*y-b;A[e]=d*i,A[t]=a*r,A[n]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-s/v),E+=1}}for(let s=0;s<v;s++)for(let e=0;e<m;e++){const t=d+e+M*s,n=d+e+M*(s+1),i=d+(e+1)+M*(s+1),r=d+(e+1)+M*s;o.push(t,n,r),o.push(n,i,r),T+=6}s.addGroup(h,T,g),h+=T,d+=E}p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,i,a,2),p("x","z","y",1,-1,e,n,-t,i,a,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new kr(l,3)),this.setAttribute("normal",new kr(c,3)),this.setAttribute("uv",new kr(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new da(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ha(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function pa(e){const t={};for(let n=0;n<e.length;n++){const i=ha(e[n]);for(const e in i)t[e]=i[e]}return t}function fa(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}function ma(e){return null===e.getRenderTarget()?e.outputColorSpace:Xn.workingColorSpace}const va={clone:ha,merge:pa};var ga="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ya="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class _a extends Rr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ga,this.fragmentShader=ya,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ha(e.uniforms),this.uniformsGroups=fa(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i],r=n.value;r&&r.isTexture?t.uniforms[i]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[i]={type:"m4",value:r.toArray()}:t.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ba extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ui,this.projectionMatrix=new Ui,this.projectionMatrixInverse=new Ui,this.coordinateSystem=rn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class xa extends ba{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*un*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*cn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*un*Math.atan(Math.tan(.5*cn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*cn*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/s,i*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Sa=-90,Ma=1;class wa extends cr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new xa(Sa,Ma,e,t);i.layers=this.layers,this.add(i);const r=new xa(Sa,Ma,e,t);r.layers=this.layers,this.add(r);const a=new xa(Sa,Ma,e,t);a.layers=this.layers,this.add(a);const s=new xa(Sa,Ma,e,t);s.layers=this.layers,this.add(s);const o=new xa(Sa,Ma,e,t);o.layers=this.layers,this.add(o);const l=new xa(Sa,Ma,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,a,s,o]=t;for(const l of t)this.remove(l);if(e===rn)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==an)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,s,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,o),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Ea extends ti{constructor(e,t,n,i,r,a,s,o,l,c){e=void 0!==e?e:[],t=void 0!==t?t:ae,super(e,t,n,i,r,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ta extends ri{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(zn("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Lt?kt:Nt),this.texture=new Ea(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ve}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new da(5,5,5),r=new _a({name:"CubemapFromEquirect",uniforms:ha(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:d,blending:p});r.uniforms.tEquirect.value=t;const a=new la(i,r),s=t.minFilter;t.minFilter===ye&&(t.minFilter=ve);const o=new wa(1,10,this);return o.update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}const Aa=new li,Ca=new li,Ra=new Nn;class La{constructor(e=new li(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Aa.subVectors(n,t).cross(Ca.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Aa),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ra.getNormalMatrix(e),i=this.coplanarPoint(Aa).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Pa=new Ri,Ia=new li;class Da{constructor(e=new La,t=new La,n=new La,i=new La,r=new La,a=new La){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=rn){const n=this.planes,i=e.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],_=i[15];if(n[0].setComponents(o-r,d-l,m-h,_-v).normalize(),n[1].setComponents(o+r,d+l,m+h,_+v).normalize(),n[2].setComponents(o+a,d+c,m+p,_+g).normalize(),n[3].setComponents(o-a,d-c,m-p,_-g).normalize(),n[4].setComponents(o-s,d-u,m-f,_-y).normalize(),t===rn)n[5].setComponents(o+s,d+u,m+f,_+y).normalize();else{if(t!==an)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Pa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Pa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Pa)}intersectsSprite(e){return Pa.center.set(0,0,0),Pa.radius=.7071067811865476,Pa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Pa)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){const e=t[r].distanceToPoint(n);if(e<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ia.x=i.normal.x>0?e.max.x:e.min.x,Ia.y=i.normal.y>0?e.max.y:e.min.y,Ia.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ia)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Oa(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Na(e,t){const n=t.isWebGL2,i=new WeakMap;function r(t,i){const r=t.array,a=t.usage,s=e.createBuffer();let o;if(e.bindBuffer(i,s),e.bufferData(i,r,a),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=e.HALF_FLOAT}else o=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function a(t,i,r){const a=i.array,s=i.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}function s(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)}function o(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))}function l(e,t){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);void 0===n?i.set(e,r(e,t)):n.version<e.version&&(a(n.buffer,e,t),n.version=e.version)}return{get:s,remove:o,update:l}}class ka extends Gr{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,s=Math.floor(n),o=Math.floor(i),l=s+1,c=o+1,u=e/s,d=t/o,h=[],p=[],f=[],m=[];for(let v=0;v<c;v++){const e=v*d-a;for(let t=0;t<l;t++){const n=t*u-r;p.push(n,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-v/o)}}for(let v=0;v<o;v++)for(let e=0;e<s;e++){const t=e+l*v,n=e+l*(v+1),i=e+1+l*(v+1),r=e+1+l*v;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new kr(p,3)),this.setAttribute("normal",new kr(f,3)),this.setAttribute("uv",new kr(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ka(e.width,e.height,e.widthSegments,e.heightSegments)}}var Fa="#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",Ua="#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",Ba="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",Va="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",za="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",Wa="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",Ha="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Ga="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ja="vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",Xa="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",qa="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",$a="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",Ya="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Ka="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Za="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Ja="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Qa="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",es="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",ts="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",ns="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",is="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",rs="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",as="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",ss="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",os="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",ls="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",cs="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",us="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",ds="gl_FragColor = linearToOutputTexel( gl_FragColor );",hs="\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",ps="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",fs="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",ms="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",vs="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",gs="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ys="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",_s="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",bs="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",xs="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Ss="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",Ms="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",ws="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Es="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",Ts="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",As="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",Cs="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",Rs="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Ls="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",Ps="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Is="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",Ds="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",Os="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Ns="\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",ks="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",Fs="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",Us="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Bs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Vs="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",zs="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Ws="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",Hs="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Gs="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",js="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Xs="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",qs="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",$s="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",Ys="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Ks="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Zs="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Js="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",Qs="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",eo="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",to="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",no="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",io="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",ro="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",ao="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",so="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",oo="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",lo="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",co="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",uo="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",ho="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",po="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",fo="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",mo="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",vo="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",go="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",yo="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",_o="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",bo="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",xo="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",So="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",Mo="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",wo="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Eo="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",To="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Ao="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Co="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",Ro="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",Lo="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",Po="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",Io="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",Do="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",Oo="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const No="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ko="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",Fo="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Uo="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",Bo="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Vo="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",zo="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Wo="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Ho="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Go="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",jo="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Xo="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",qo="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",$o="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Yo="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Ko="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Zo="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Jo="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Qo="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",el="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",tl="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",nl="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",il="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",rl="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",al="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",sl="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ol="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ll="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",cl="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",ul="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",dl="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",hl="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",pl="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",fl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",ml={alphahash_fragment:Fa,alphahash_pars_fragment:Ua,alphamap_fragment:Ba,alphamap_pars_fragment:Va,alphatest_fragment:za,alphatest_pars_fragment:Wa,aomap_fragment:Ha,aomap_pars_fragment:Ga,begin_vertex:ja,beginnormal_vertex:Xa,bsdfs:qa,iridescence_fragment:$a,bumpmap_pars_fragment:Ya,clipping_planes_fragment:Ka,clipping_planes_pars_fragment:Za,clipping_planes_pars_vertex:Ja,clipping_planes_vertex:Qa,color_fragment:es,color_pars_fragment:ts,color_pars_vertex:ns,color_vertex:is,common:rs,cube_uv_reflection_fragment:as,defaultnormal_vertex:ss,displacementmap_pars_vertex:os,displacementmap_vertex:ls,emissivemap_fragment:cs,emissivemap_pars_fragment:us,colorspace_fragment:ds,colorspace_pars_fragment:hs,envmap_fragment:ps,envmap_common_pars_fragment:fs,envmap_pars_fragment:ms,envmap_pars_vertex:vs,envmap_physical_pars_fragment:Cs,envmap_vertex:gs,fog_vertex:ys,fog_pars_vertex:_s,fog_fragment:bs,fog_pars_fragment:xs,gradientmap_pars_fragment:Ss,lightmap_fragment:Ms,lightmap_pars_fragment:ws,lights_lambert_fragment:Es,lights_lambert_pars_fragment:Ts,lights_pars_begin:As,lights_toon_fragment:Rs,lights_toon_pars_fragment:Ls,lights_phong_fragment:Ps,lights_phong_pars_fragment:Is,lights_physical_fragment:Ds,lights_physical_pars_fragment:Os,lights_fragment_begin:Ns,lights_fragment_maps:ks,lights_fragment_end:Fs,logdepthbuf_fragment:Us,logdepthbuf_pars_fragment:Bs,logdepthbuf_pars_vertex:Vs,logdepthbuf_vertex:zs,map_fragment:Ws,map_pars_fragment:Hs,map_particle_fragment:Gs,map_particle_pars_fragment:js,metalnessmap_fragment:Xs,metalnessmap_pars_fragment:qs,morphcolor_vertex:$s,morphnormal_vertex:Ys,morphtarget_pars_vertex:Ks,morphtarget_vertex:Zs,normal_fragment_begin:Js,normal_fragment_maps:Qs,normal_pars_fragment:eo,normal_pars_vertex:to,normal_vertex:no,normalmap_pars_fragment:io,clearcoat_normal_fragment_begin:ro,clearcoat_normal_fragment_maps:ao,clearcoat_pars_fragment:so,iridescence_pars_fragment:oo,opaque_fragment:lo,packing:co,premultiplied_alpha_fragment:uo,project_vertex:ho,dithering_fragment:po,dithering_pars_fragment:fo,roughnessmap_fragment:mo,roughnessmap_pars_fragment:vo,shadowmap_pars_fragment:go,shadowmap_pars_vertex:yo,shadowmap_vertex:_o,shadowmask_pars_fragment:bo,skinbase_vertex:xo,skinning_pars_vertex:So,skinning_vertex:Mo,skinnormal_vertex:wo,specularmap_fragment:Eo,specularmap_pars_fragment:To,tonemapping_fragment:Ao,tonemapping_pars_fragment:Co,transmission_fragment:Ro,transmission_pars_fragment:Lo,uv_pars_fragment:Po,uv_pars_vertex:Io,uv_vertex:Do,worldpos_vertex:Oo,background_vert:No,background_frag:ko,backgroundCube_vert:Fo,backgroundCube_frag:Uo,cube_vert:Bo,cube_frag:Vo,depth_vert:zo,depth_frag:Wo,distanceRGBA_vert:Ho,distanceRGBA_frag:Go,equirect_vert:jo,equirect_frag:Xo,linedashed_vert:qo,linedashed_frag:$o,meshbasic_vert:Yo,meshbasic_frag:Ko,meshlambert_vert:Zo,meshlambert_frag:Jo,meshmatcap_vert:Qo,meshmatcap_frag:el,meshnormal_vert:tl,meshnormal_frag:nl,meshphong_vert:il,meshphong_frag:rl,meshphysical_vert:al,meshphysical_frag:sl,meshtoon_vert:ol,meshtoon_frag:ll,points_vert:cl,points_frag:ul,shadow_vert:dl,shadow_frag:hl,sprite_vert:pl,sprite_frag:fl},vl={common:{diffuse:{value:new Tr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nn},normalScale:{value:new On(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0},uvTransform:{value:new Nn}},sprite:{diffuse:{value:new Tr(16777215)},opacity:{value:1},center:{value:new On(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}}},gl={basic:{uniforms:pa([vl.common,vl.specularmap,vl.envmap,vl.aomap,vl.lightmap,vl.fog]),vertexShader:ml.meshbasic_vert,fragmentShader:ml.meshbasic_frag},lambert:{uniforms:pa([vl.common,vl.specularmap,vl.envmap,vl.aomap,vl.lightmap,vl.emissivemap,vl.bumpmap,vl.normalmap,vl.displacementmap,vl.fog,vl.lights,{emissive:{value:new Tr(0)}}]),vertexShader:ml.meshlambert_vert,fragmentShader:ml.meshlambert_frag},phong:{uniforms:pa([vl.common,vl.specularmap,vl.envmap,vl.aomap,vl.lightmap,vl.emissivemap,vl.bumpmap,vl.normalmap,vl.displacementmap,vl.fog,vl.lights,{emissive:{value:new Tr(0)},specular:{value:new Tr(1118481)},shininess:{value:30}}]),vertexShader:ml.meshphong_vert,fragmentShader:ml.meshphong_frag},standard:{uniforms:pa([vl.common,vl.envmap,vl.aomap,vl.lightmap,vl.emissivemap,vl.bumpmap,vl.normalmap,vl.displacementmap,vl.roughnessmap,vl.metalnessmap,vl.fog,vl.lights,{emissive:{value:new Tr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ml.meshphysical_vert,fragmentShader:ml.meshphysical_frag},toon:{uniforms:pa([vl.common,vl.aomap,vl.lightmap,vl.emissivemap,vl.bumpmap,vl.normalmap,vl.displacementmap,vl.gradientmap,vl.fog,vl.lights,{emissive:{value:new Tr(0)}}]),vertexShader:ml.meshtoon_vert,fragmentShader:ml.meshtoon_frag},matcap:{uniforms:pa([vl.common,vl.bumpmap,vl.normalmap,vl.displacementmap,vl.fog,{matcap:{value:null}}]),vertexShader:ml.meshmatcap_vert,fragmentShader:ml.meshmatcap_frag},points:{uniforms:pa([vl.points,vl.fog]),vertexShader:ml.points_vert,fragmentShader:ml.points_frag},dashed:{uniforms:pa([vl.common,vl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ml.linedashed_vert,fragmentShader:ml.linedashed_frag},depth:{uniforms:pa([vl.common,vl.displacementmap]),vertexShader:ml.depth_vert,fragmentShader:ml.depth_frag},normal:{uniforms:pa([vl.common,vl.bumpmap,vl.normalmap,vl.displacementmap,{opacity:{value:1}}]),vertexShader:ml.meshnormal_vert,fragmentShader:ml.meshnormal_frag},sprite:{uniforms:pa([vl.sprite,vl.fog]),vertexShader:ml.sprite_vert,fragmentShader:ml.sprite_frag},background:{uniforms:{uvTransform:{value:new Nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ml.background_vert,fragmentShader:ml.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ml.backgroundCube_vert,fragmentShader:ml.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ml.cube_vert,fragmentShader:ml.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ml.equirect_vert,fragmentShader:ml.equirect_frag},distanceRGBA:{uniforms:pa([vl.common,vl.displacementmap,{referencePosition:{value:new li},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ml.distanceRGBA_vert,fragmentShader:ml.distanceRGBA_frag},shadow:{uniforms:pa([vl.lights,vl.fog,{color:{value:new Tr(0)},opacity:{value:1}}]),vertexShader:ml.shadow_vert,fragmentShader:ml.shadow_frag}};gl.physical={uniforms:pa([gl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nn},clearcoatNormalScale:{value:new On(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nn},sheen:{value:0},sheenColor:{value:new Tr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nn},transmissionSamplerSize:{value:new On},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nn},attenuationDistance:{value:0},attenuationColor:{value:new Tr(0)},specularColor:{value:new Tr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nn},anisotropyVector:{value:new On},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nn}}]),vertexShader:ml.meshphysical_vert,fragmentShader:ml.meshphysical_frag};const yl={r:0,b:0,g:0};function _l(e,t,n,i,r,a,s){const o=new Tr(0);let l,c,h=!0===a?0:1,p=null,f=0,m=null;function v(a,v){let y=!1,_=!0===v.isScene?v.background:null;if(_&&_.isTexture){const e=v.backgroundBlurriness>0;_=(e?n:t).get(_)}null===_?g(o,h):_&&_.isColor&&(g(_,1),y=!0);const b=e.xr.getEnvironmentBlendMode();"additive"===b?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===b&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),_&&(_.isCubeTexture||_.mapping===ce)?(void 0===c&&(c=new la(new da(1,1,1),new _a({name:"BackgroundCubeMaterial",uniforms:ha(gl.backgroundCube.uniforms),vertexShader:gl.backgroundCube.vertexShader,fragmentShader:gl.backgroundCube.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Xn.getTransfer(_.colorSpace)!==zt,p===_&&f===_.version&&m===e.toneMapping||(c.material.needsUpdate=!0,p=_,f=_.version,m=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(void 0===l&&(l=new la(new ka(2,2),new _a({name:"BackgroundMaterial",uniforms:ha(gl.background.uniforms),vertexShader:gl.background.vertexShader,fragmentShader:gl.background.fragmentShader,side:u,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=_,l.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,l.material.toneMapped=Xn.getTransfer(_.colorSpace)!==zt,!0===_.matrixAutoUpdate&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),p===_&&f===_.version&&m===e.toneMapping||(l.material.needsUpdate=!0,p=_,f=_.version,m=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}function g(t,n){t.getRGB(yl,ma(e)),i.buffers.color.setClear(yl.r,yl.g,yl.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),h=t,g(o,h)},getClearAlpha:function(){return h},setClearAlpha:function(e){h=e,g(o,h)},render:v}}function bl(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,o={},l=v(null);let c=l,u=!1;function d(t,i,r,a,o){let l=!1;if(s){const e=m(a,r,i);c!==e&&(c=e,p(c.object)),l=g(t,a,r,o),l&&y(t,a,r,o)}else{const e=!0===i.wireframe;c.geometry===a.id&&c.program===r.id&&c.wireframe===e||(c.geometry=a.id,c.program=r.id,c.wireframe=e,l=!0)}null!==o&&n.update(o,e.ELEMENT_ARRAY_BUFFER),(l||u)&&(u=!1,w(t,i,r,a),null!==o&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(o).buffer))}function h(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function p(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function f(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function m(e,t,n){const i=!0===n.wireframe;let r=o[e.id];void 0===r&&(r={},o[e.id]=r);let a=r[t.id];void 0===a&&(a={},r[t.id]=a);let s=a[i];return void 0===s&&(s=v(h()),a[i]=s),s}function v(e){const t=[],n=[],i=[];for(let a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function g(e,t,n,i){const r=c.attributes,a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){const t=o[l];if(t.location>=0){const t=r[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==i}function y(e,t,n,i){const r={},a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){const t=o[l];if(t.location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[l]=n,s++}}c.attributes=r,c.attributesNum=s,c.index=i}function _(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function b(e){x(e,0)}function x(n,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==r){const a=i.isWebGL2?e:t.get("ANGLE_instanced_arrays");a[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function S(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function M(t,n,i,r,a,s,o){!0===o?e.vertexAttribIPointer(t,n,i,a,s):e.vertexAttribPointer(t,n,i,r,a,s)}function w(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;_();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const a=c[t];if(a.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,p=!0===i.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||s.gpuType===Me);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)x(a.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)b(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)M(a.location+e,l/a.locationSize,d,t,i*h,(c+l/a.locationSize*e)*h,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)x(a.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<a.locationSize;e++)b(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)M(a.location+e,l/a.locationSize,d,t,l*h,l/a.locationSize*e*h,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}S()}function E(){C();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)f(n[e].object),delete n[e];delete t[e]}delete o[e]}}function T(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)f(e[t].object),delete e[t];delete t[n]}delete o[e.id]}function A(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)f(i[e].object),delete i[e];delete n[e.id]}}function C(){R(),u=!0,c!==l&&(c=l,p(c.object))}function R(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:C,resetDefaultState:R,dispose:E,releaseStatesOfGeometry:T,releaseStatesOfProgram:A,initAttributes:_,enableAttribute:b,disableUnusedAttributes:S}}function xl(e,t,n,i){const r=i.isWebGL2;let a;function s(e){a=e}function o(t,i){e.drawArrays(a,t,i),n.update(i,a,1)}function l(i,s,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,i,s,o),n.update(s,a,o)}this.setMode=s,this.render=o,this.renderInstances=l}function Sl(e,t,n){let i;function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let o=void 0!==n.precision?n.precision:"highp";const l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=s||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),v=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),y=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,b=s||t.has("OES_texture_float"),x=_&&b,S=s?e.getParameter(e.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:S}}function Ml(e){const t=this;let n=null,i=0,r=!1,a=!1;const s=new La,o=new Nn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==a;++n,l+=4)s.copy(e[n]).applyMatrix4(r,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(t,s,o){const d=t.clippingPlanes,h=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!r||null===d||0===d.length||a&&!p)a?u(null):c();else{const e=a?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=u(d,s,t,o);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function wl(e){let t=new WeakMap;function n(e,t){return t===oe?e.mapping=ae:t===le&&(e.mapping=se),e}function i(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===oe||a===le){if(t.has(i)){const e=t.get(i).texture;return n(e,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=new Ta(a.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}class El extends ba{constructor(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Tl=4,Al=[.125,.215,.35,.446,.526,.582],Cl=20,Rl=new El,Ll=new Tr;let Pl=null,Il=0,Dl=0;const Ol=(1+Math.sqrt(5))/2,Nl=1/Ol,kl=[new li(1,1,1),new li(-1,1,1),new li(1,1,-1),new li(-1,1,-1),new li(0,Ol,Nl),new li(0,Ol,-Nl),new li(Nl,0,Ol),new li(-Nl,0,Ol),new li(Ol,Nl,0),new li(-Ol,Nl,0)];class Fl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Pl=this._renderer.getRenderTarget(),Il=this._renderer.getActiveCubeFace(),Dl=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Hl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Wl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Pl,Il,Dl),e.scissorTest=!1,Vl(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ae||e.mapping===se?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Pl=this._renderer.getRenderTarget(),Il=this._renderer.getActiveCubeFace(),Dl=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ve,minFilter:ve,generateMipmaps:!1,type:Te,format:Pe,colorSpace:Ft,depthBuffer:!1},i=Bl(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Bl(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ul(i)),this._blurMaterial=zl(i,e,t)}return i}_compileMaterial(e){const t=new la(this._lodPlanes[0],e);this._renderer.compile(t,Rl)}_sceneToCubeUV(e,t,n,i){const r=90,a=1,s=new xa(r,a,t,n),o=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,h=c.toneMapping;c.getClearColor(Ll),c.toneMapping=K,c.autoClear=!1;const p=new Lr({name:"PMREM.Background",side:d,depthWrite:!1,depthTest:!1}),f=new la(new da,p);let m=!1;const v=e.background;v?v.isColor&&(p.color.copy(v),e.background=null,m=!0):(p.color.copy(Ll),m=!0);for(let d=0;d<6;d++){const t=d%3;0===t?(s.up.set(0,o[d],0),s.lookAt(l[d],0,0)):1===t?(s.up.set(0,0,o[d]),s.lookAt(0,l[d],0)):(s.up.set(0,o[d],0),s.lookAt(0,0,l[d]));const n=this._cubeSize;Vl(i,t*n,d>2?n:0,n,n),c.setRenderTarget(i),m&&c.render(f,s),c.render(e,s)}f.geometry.dispose(),f.material.dispose(),c.toneMapping=h,c.autoClear=u,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===ae||e.mapping===se;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Hl()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Wl());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new la(this._lodPlanes[0],r),s=r.uniforms;s["envMap"].value=e;const o=this._cubeSize;Vl(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Rl)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=kl[(i-1)%kl.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new la(this._lodPlanes[i],l),d=l.uniforms,h=this._sizeLods[n]-1,p=isFinite(r)?Math.PI/(2*h):2*Math.PI/(2*Cl-1),f=r/p,m=isFinite(r)?1+Math.floor(c*f):Cl;m>Cl&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Cl}`);const v=[];let g=0;for(let S=0;S<Cl;++S){const e=S/f,t=Math.exp(-e*e/2);v.push(t),0===S?g+=t:S<m&&(g+=2*t)}for(let S=0;S<v.length;S++)v[S]=v[S]/g;d["envMap"].value=e.texture,d["samples"].value=m,d["weights"].value=v,d["latitudinal"].value="latitudinal"===a,s&&(d["poleAxis"].value=s);const{_lodMax:y}=this;d["dTheta"].value=p,d["mipInt"].value=y-n;const _=this._sizeLods[i],b=3*_*(i>y-Tl?i-y+Tl:0),x=4*(this._cubeSize-_);Vl(t,b,x,3*_,2*_),o.setRenderTarget(t),o.render(u,Rl)}}function Ul(e){const t=[],n=[],i=[];let r=e;const a=e-Tl+1+Al.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);n.push(a);let o=1/a;s>e-Tl?o=Al[s-e+Tl-1]:0===s&&(o=0),i.push(o);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,v=1,g=new Float32Array(f*p*h),y=new Float32Array(m*p*h),_=new Float32Array(v*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,f*p*e),y.set(d,m*p*e);const r=[e,e,e,e,e,e];_.set(r,v*p*e)}const b=new Gr;b.setAttribute("position",new Dr(g,f)),b.setAttribute("uv",new Dr(y,m)),b.setAttribute("faceIndex",new Dr(_,v)),t.push(b),r>Tl&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}function Bl(e,t,n){const i=new ri(e,t,n);return i.texture.mapping=ce,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Vl(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function zl(e,t,n){const i=new Float32Array(Cl),r=new li(0,1,0),a=new _a({name:"SphericalGaussianBlur",defines:{n:Cl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Gl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:p,depthTest:!1,depthWrite:!1});return a}function Wl(){return new _a({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Gl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:p,depthTest:!1,depthWrite:!1})}function Hl(){return new _a({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Gl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:p,depthTest:!1,depthWrite:!1})}function Gl(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function jl(e){let t=new WeakMap,n=null;function i(i){if(i&&i.isTexture){const s=i.mapping,o=s===oe||s===le,l=s===ae||s===se;if(o||l){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new Fl(e)),r=o?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const s=i.image;if(o&&s&&s.height>0||l&&s&&r(s)){null===n&&(n=new Fl(e));const r=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,r),i.addEventListener("dispose",a),r.texture}return null}}}return i}function r(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}function a(e){const n=e.target;n.removeEventListener("dispose",a);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}function s(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:i,dispose:s}}function Xl(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function ql(e,t,n,i){const r={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);for(const n in o.morphAttributes){const e=o.morphAttributes[n];for(let n=0,i=e.length;n<i;n++)t.remove(e[n])}o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t}function l(n){const i=n.attributes;for(const a in i)t.update(i[a],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const a in r){const n=r[a];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}}function c(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const o=new(Fn(n)?Nr:Or)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}function u(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&c(e)}else c(e);return a.get(e)}return{get:o,update:l,getWireframeAttribute:u}}function $l(e,t,n,i){const r=i.isWebGL2;let a,s,o;function l(e){a=e}function c(e){s=e.type,o=e.bytesPerElement}function u(t,i){e.drawElements(a,i,s,t*o),n.update(i,a,1)}function d(i,l,c){if(0===c)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,s,i*o,c),n.update(l,a,c)}this.setMode=l,this.setIndex=c,this.render=u,this.renderInstances=d}function Yl(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(t,i,r){switch(n.calls++,i){case e.TRIANGLES:n.triangles+=r*(t/3);break;case e.LINES:n.lines+=r*(t/2);break;case e.LINE_STRIP:n.lines+=r*(t-1);break;case e.LINE_LOOP:n.lines+=r*t;break;case e.POINTS:n.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Kl(e,t){return e[0]-t[0]}function Zl(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Jl(e,t,n){const i={},r=new Float32Array(8),a=new WeakMap,s=new ni,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==h?h.length:0;let f=a.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const g=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,_=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let M=0;!0===g&&(M=1),!0===y&&(M=2),!0===_&&(M=3);let w=c.attributes.position.count*M,E=1;w>t.maxTextureSize&&(E=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);const T=new Float32Array(w*E*4*p),A=new ai(T,w,E,p);A.type=Ee,A.needsUpdate=!0;const C=4*M;for(let L=0;L<p;L++){const P=b[L],I=x[L],D=S[L],O=w*E*4*L;for(let N=0;N<P.count;N++){const k=N*C;!0===g&&(s.fromBufferAttribute(P,N),T[O+k+0]=s.x,T[O+k+1]=s.y,T[O+k+2]=s.z,T[O+k+3]=0),!0===y&&(s.fromBufferAttribute(I,N),T[O+k+4]=s.x,T[O+k+5]=s.y,T[O+k+6]=s.z,T[O+k+7]=0),!0===_&&(s.fromBufferAttribute(D,N),T[O+k+8]=s.x,T[O+k+9]=s.y,T[O+k+10]=s.z,T[O+k+11]=4===D.itemSize?s.w:1)}}function R(){A.dispose(),a.delete(c),c.removeEventListener("dispose",R)}f={count:p,texture:A,size:new On(w,E)},a.set(c,f),c.addEventListener("dispose",R)}let m=0;for(let F=0;F<d.length;F++)m+=d[F];const v=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",v),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const U=void 0===d?0:d.length;let B=i[c.id];if(void 0===B||B.length!==U){B=[];for(let G=0;G<U;G++)B[G]=[G,0];i[c.id]=B}for(let j=0;j<U;j++){const X=B[j];X[0]=j,X[1]=d[j]}B.sort(Zl);for(let q=0;q<8;q++)q<U&&B[q][1]?(o[q][0]=B[q][0],o[q][1]=B[q][1]):(o[q][0]=Number.MAX_SAFE_INTEGER,o[q][1]=0);o.sort(Kl);const V=c.morphAttributes.position,z=c.morphAttributes.normal;let W=0;for(let $=0;$<8;$++){const Y=o[$],K=Y[0],Z=Y[1];K!==Number.MAX_SAFE_INTEGER&&Z?(V&&c.getAttribute("morphTarget"+$)!==V[K]&&c.setAttribute("morphTarget"+$,V[K]),z&&c.getAttribute("morphNormal"+$)!==z[K]&&c.setAttribute("morphNormal"+$,z[K]),r[$]=Z,W+=Z):(V&&!0===c.hasAttribute("morphTarget"+$)&&c.deleteAttribute("morphTarget"+$),z&&!0===c.hasAttribute("morphNormal"+$)&&c.deleteAttribute("morphNormal"+$),r[$]=0)}const H=c.morphTargetsRelative?1:1-W;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}return{update:l}}function Ql(e,t,n,i){let r=new WeakMap;function a(a){const s=i.render.frame,l=a.geometry,c=t.get(a,l);if(r.get(c)!==s&&(t.update(c),r.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),r.get(a)!==s&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),r.set(a,s))),a.isSkinnedMesh){const e=a.skeleton;r.get(e)!==s&&(e.update(),r.set(e,s))}return c}function s(){r=new WeakMap}function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:a,dispose:s}}const ec=new ti,tc=new ai,nc=new si,ic=new Ea,rc=[],ac=[],sc=new Float32Array(16),oc=new Float32Array(9),lc=new Float32Array(4);function cc(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=rc[r];if(void 0===a&&(a=new Float32Array(r),rc[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function uc(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function dc(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function hc(e,t){let n=ac[t];void 0===n&&(n=new Int32Array(t),ac[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function pc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function fc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(uc(n,t))return;e.uniform2fv(this.addr,t),dc(n,t)}}function mc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(uc(n,t))return;e.uniform3fv(this.addr,t),dc(n,t)}}function vc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(uc(n,t))return;e.uniform4fv(this.addr,t),dc(n,t)}}function gc(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(uc(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),dc(n,t)}else{if(uc(n,i))return;lc.set(i),e.uniformMatrix2fv(this.addr,!1,lc),dc(n,i)}}function yc(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(uc(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),dc(n,t)}else{if(uc(n,i))return;oc.set(i),e.uniformMatrix3fv(this.addr,!1,oc),dc(n,i)}}function _c(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(uc(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),dc(n,t)}else{if(uc(n,i))return;sc.set(i),e.uniformMatrix4fv(this.addr,!1,sc),dc(n,i)}}function bc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function xc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(uc(n,t))return;e.uniform2iv(this.addr,t),dc(n,t)}}function Sc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(uc(n,t))return;e.uniform3iv(this.addr,t),dc(n,t)}}function Mc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(uc(n,t))return;e.uniform4iv(this.addr,t),dc(n,t)}}function wc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ec(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(uc(n,t))return;e.uniform2uiv(this.addr,t),dc(n,t)}}function Tc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(uc(n,t))return;e.uniform3uiv(this.addr,t),dc(n,t)}}function Ac(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(uc(n,t))return;e.uniform4uiv(this.addr,t),dc(n,t)}}function Cc(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||ec,r)}function Rc(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||nc,r)}function Lc(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||ic,r)}function Pc(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||tc,r)}function Ic(e){switch(e){case 5126:return pc;case 35664:return fc;case 35665:return mc;case 35666:return vc;case 35674:return gc;case 35675:return yc;case 35676:return _c;case 5124:case 35670:return bc;case 35667:case 35671:return xc;case 35668:case 35672:return Sc;case 35669:case 35673:return Mc;case 5125:return wc;case 36294:return Ec;case 36295:return Tc;case 36296:return Ac;case 35678:case 36198:case 36298:case 36306:case 35682:return Cc;case 35679:case 36299:case 36307:return Rc;case 35680:case 36300:case 36308:case 36293:return Lc;case 36289:case 36303:case 36311:case 36292:return Pc}}function Dc(e,t){e.uniform1fv(this.addr,t)}function Oc(e,t){const n=cc(t,this.size,2);e.uniform2fv(this.addr,n)}function Nc(e,t){const n=cc(t,this.size,3);e.uniform3fv(this.addr,n)}function kc(e,t){const n=cc(t,this.size,4);e.uniform4fv(this.addr,n)}function Fc(e,t){const n=cc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Uc(e,t){const n=cc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Bc(e,t){const n=cc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Vc(e,t){e.uniform1iv(this.addr,t)}function zc(e,t){e.uniform2iv(this.addr,t)}function Wc(e,t){e.uniform3iv(this.addr,t)}function Hc(e,t){e.uniform4iv(this.addr,t)}function Gc(e,t){e.uniform1uiv(this.addr,t)}function jc(e,t){e.uniform2uiv(this.addr,t)}function Xc(e,t){e.uniform3uiv(this.addr,t)}function qc(e,t){e.uniform4uiv(this.addr,t)}function $c(e,t,n){const i=this.cache,r=t.length,a=hc(n,r);uc(i,a)||(e.uniform1iv(this.addr,a),dc(i,a));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||ec,a[s])}function Yc(e,t,n){const i=this.cache,r=t.length,a=hc(n,r);uc(i,a)||(e.uniform1iv(this.addr,a),dc(i,a));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||nc,a[s])}function Kc(e,t,n){const i=this.cache,r=t.length,a=hc(n,r);uc(i,a)||(e.uniform1iv(this.addr,a),dc(i,a));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||ic,a[s])}function Zc(e,t,n){const i=this.cache,r=t.length,a=hc(n,r);uc(i,a)||(e.uniform1iv(this.addr,a),dc(i,a));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||tc,a[s])}function Jc(e){switch(e){case 5126:return Dc;case 35664:return Oc;case 35665:return Nc;case 35666:return kc;case 35674:return Fc;case 35675:return Uc;case 35676:return Bc;case 5124:case 35670:return Vc;case 35667:case 35671:return zc;case 35668:case 35672:return Wc;case 35669:case 35673:return Hc;case 5125:return Gc;case 36294:return jc;case 36295:return Xc;case 36296:return qc;case 35678:case 36198:case 36298:case 36306:case 35682:return $c;case 35679:case 36299:case 36307:return Yc;case 35680:case 36300:case 36308:case 36293:return Kc;case 36289:case 36303:case 36311:case 36292:return Zc}}class Qc{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Ic(t.type)}}class eu{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Jc(t.type)}}class tu{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}}}const nu=/(\w+)(\])?(\[|\.)?/g;function iu(e,t){e.seq.push(t),e.map[t.id]=t}function ru(e,t,n){const i=e.name,r=i.length;nu.lastIndex=0;while(1){const a=nu.exec(i),s=nu.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){iu(n,void 0===c?new Qc(o,e,t):new eu(o,e,t));break}{const e=n.map;let t=e[o];void 0===t&&(t=new tu(o),iu(n,t)),n=t}}}class au{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i),r=e.getUniformLocation(t,n.name);ru(n,r,this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function su(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}const ou=37297;let lu=0;function cu(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let s=r;s<a;s++){const e=s+1;i.push(`${e===t?">":" "} ${e}: ${n[s]}`)}return i.join("\n")}function uu(e){const t=Xn.getPrimaries(Xn.workingColorSpace),n=Xn.getPrimaries(e);let i;switch(t===n?i="":t===Ht&&n===Wt?i="LinearDisplayP3ToLinearSRGB":t===Wt&&n===Ht&&(i="LinearSRGBToLinearDisplayP3"),e){case Ft:case Bt:return[i,"LinearTransferOETF"];case kt:case Ut:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[i,"LinearTransferOETF"]}}function du(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+cu(e.getShaderSource(t),i)}return r}function hu(e,t){const n=uu(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function pu(e,t){let n;switch(t){case Z:n="Linear";break;case J:n="Reinhard";break;case Q:n="OptimizedCineon";break;case ee:n="ACESFilmic";break;case te:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function fu(e){const t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(gu).join("\n")}function mu(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function vu(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}function gu(e){return""!==e}function yu(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function _u(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const bu=/^[ \t]*#include +<([\w\d./]+)>/gm;function xu(e){return e.replace(bu,Mu)}const Su=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Mu(e,t){let n=ml[t];if(void 0===n){const e=Su.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=ml[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return xu(n)}const wu=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Eu(e){return e.replace(wu,Tu)}function Tu(e,t,n,i){let r="";for(let a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Au(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Cu(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===o?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===l?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===c&&(t="SHADOWMAP_TYPE_VSM"),t}function Ru(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ae:case se:t="ENVMAP_TYPE_CUBE";break;case ce:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Lu(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case se:t="ENVMAP_MODE_REFRACTION";break}return t}function Pu(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case q:t="ENVMAP_BLENDING_MULTIPLY";break;case $:t="ENVMAP_BLENDING_MIX";break;case Y:t="ENVMAP_BLENDING_ADD";break}return t}function Iu(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t,r=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:r,texelHeight:i,maxMip:n}}function Du(e,t,n,i){const r=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=Cu(n),c=Ru(n),u=Lu(n),d=Pu(n),h=Iu(n),p=n.isWebGL2?"":fu(n),f=mu(a),m=r.createProgram();let v,g,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(gu).join("\n"),v.length>0&&(v+="\n"),g=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(gu).join("\n"),g.length>0&&(g+="\n")):(v=[Au(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(gu).join("\n"),g=[p,Au(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==K?"#define TONE_MAPPING":"",n.toneMapping!==K?ml["tonemapping_pars_fragment"]:"",n.toneMapping!==K?pu("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ml["colorspace_pars_fragment"],hu("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(gu).join("\n")),s=xu(s),s=yu(s,n),s=_u(s,n),o=xu(o),o=yu(o,n),o=_u(o,n),s=Eu(s),o=Eu(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===tn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const _=y+v+s,b=y+g+o,x=su(r,r.VERTEX_SHADER,_),S=su(r,r.FRAGMENT_SHADER,b);function M(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(m).trim(),i=r.getShaderInfoLog(x).trim(),a=r.getShaderInfoLog(S).trim();let s=!0,o=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,m,x,S);else{const e=du(r,x,"vertex"),t=du(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==a||(o=!1);o&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:i,prefix:v},fragmentShader:{log:a,prefix:g}})}r.deleteShader(x),r.deleteShader(S),w=new au(r,m),E=vu(r,m)}let w,E;r.attachShader(m,x),r.attachShader(m,S),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===w&&M(this),w},this.getAttributes=function(){return void 0===E&&M(this),E};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=r.getProgramParameter(m,ou)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=lu++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=S,this}let Ou=0;class Nu{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new ku(e),t.set(e,n)),n}}class ku{constructor(e){this.id=Ou++,this.code=e,this.usedTimes=0}}function Fu(e,t,n,i,r,a,s){const o=new Yi,l=new Nu,c=[],u=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(e){return 0===e?"uv":`uv${e}`}function _(a,o,c,_,b){const x=_.fog,S=b.geometry,M=a.isMeshStandardMaterial?_.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||M),E=w&&w.mapping===ce?w.image.height:null,T=g[a.type];null!==a.precision&&(v=r.getMaxPrecision(a.precision),v!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",v,"instead."));const A=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,C=void 0!==A?A.length:0;let R,L,P,I,D=0;if(void 0!==S.morphAttributes.position&&(D=1),void 0!==S.morphAttributes.normal&&(D=2),void 0!==S.morphAttributes.color&&(D=3),T){const e=gl[T];R=e.vertexShader,L=e.fragmentShader}else R=a.vertexShader,L=a.fragmentShader,l.update(a),P=l.getVertexShaderID(a),I=l.getFragmentShaderID(a);const O=e.getRenderTarget(),N=!0===b.isInstancedMesh,k=!!a.map,F=!!a.matcap,U=!!w,B=!!a.aoMap,V=!!a.lightMap,z=!!a.bumpMap,W=!!a.normalMap,H=!!a.displacementMap,G=!!a.emissiveMap,j=!!a.metalnessMap,X=!!a.roughnessMap,q=a.anisotropy>0,$=a.clearcoat>0,Y=a.iridescence>0,Z=a.sheen>0,J=a.transmission>0,Q=q&&!!a.anisotropyMap,ee=$&&!!a.clearcoatMap,te=$&&!!a.clearcoatNormalMap,ne=$&&!!a.clearcoatRoughnessMap,ie=Y&&!!a.iridescenceMap,re=Y&&!!a.iridescenceThicknessMap,ae=Z&&!!a.sheenColorMap,se=Z&&!!a.sheenRoughnessMap,oe=!!a.specularMap,le=!!a.specularColorMap,ue=!!a.specularIntensityMap,de=J&&!!a.transmissionMap,he=J&&!!a.thicknessMap,pe=!!a.gradientMap,fe=!!a.alphaMap,me=a.alphaTest>0,ve=!!a.alphaHash,ge=!!a.extensions,ye=!!S.attributes.uv1,_e=!!S.attributes.uv2,be=!!S.attributes.uv3;let xe=K;a.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(xe=e.toneMapping));const Se={isWebGL2:u,shaderID:T,shaderType:a.type,shaderName:a.name,vertexShader:R,fragmentShader:L,defines:a.defines,customVertexShaderID:P,customFragmentShaderID:I,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:v,instancing:N,instancingColor:N&&null!==b.instanceColor,supportsVertexTextures:m,outputColorSpace:null===O?e.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:Ft,map:k,matcap:F,envMap:U,envMapMode:U&&w.mapping,envMapCubeUVHeight:E,aoMap:B,lightMap:V,bumpMap:z,normalMap:W,displacementMap:m&&H,emissiveMap:G,normalMapObjectSpace:W&&a.normalMapType===Ot,normalMapTangentSpace:W&&a.normalMapType===Dt,metalnessMap:j,roughnessMap:X,anisotropy:q,anisotropyMap:Q,clearcoat:$,clearcoatMap:ee,clearcoatNormalMap:te,clearcoatRoughnessMap:ne,iridescence:Y,iridescenceMap:ie,iridescenceThicknessMap:re,sheen:Z,sheenColorMap:ae,sheenRoughnessMap:se,specularMap:oe,specularColorMap:le,specularIntensityMap:ue,transmission:J,transmissionMap:de,thicknessMap:he,gradientMap:pe,opaque:!1===a.transparent&&a.blending===f,alphaMap:fe,alphaTest:me,alphaHash:ve,combine:a.combine,mapUv:k&&y(a.map.channel),aoMapUv:B&&y(a.aoMap.channel),lightMapUv:V&&y(a.lightMap.channel),bumpMapUv:z&&y(a.bumpMap.channel),normalMapUv:W&&y(a.normalMap.channel),displacementMapUv:H&&y(a.displacementMap.channel),emissiveMapUv:G&&y(a.emissiveMap.channel),metalnessMapUv:j&&y(a.metalnessMap.channel),roughnessMapUv:X&&y(a.roughnessMap.channel),anisotropyMapUv:Q&&y(a.anisotropyMap.channel),clearcoatMapUv:ee&&y(a.clearcoatMap.channel),clearcoatNormalMapUv:te&&y(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ne&&y(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ie&&y(a.iridescenceMap.channel),iridescenceThicknessMapUv:re&&y(a.iridescenceThicknessMap.channel),sheenColorMapUv:ae&&y(a.sheenColorMap.channel),sheenRoughnessMapUv:se&&y(a.sheenRoughnessMap.channel),specularMapUv:oe&&y(a.specularMap.channel),specularColorMapUv:le&&y(a.specularColorMap.channel),specularIntensityMapUv:ue&&y(a.specularIntensityMap.channel),transmissionMapUv:de&&y(a.transmissionMap.channel),thicknessMapUv:he&&y(a.thicknessMap.channel),alphaMapUv:fe&&y(a.alphaMap.channel),vertexTangents:!!S.attributes.tangent&&(W||q),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,vertexUv1s:ye,vertexUv2s:_e,vertexUv3s:be,pointsUvs:!0===b.isPoints&&!!S.attributes.uv&&(k||fe),fog:!!x,useFog:!0===a.fog,fogExp2:x&&x.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:p,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==S.morphAttributes.position,morphNormals:void 0!==S.morphAttributes.normal,morphColors:void 0!==S.morphAttributes.color,morphTargetsCount:C,morphTextureStride:D,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:xe,useLegacyLights:e._useLegacyLights,decodeVideoTexture:k&&!0===a.map.isVideoTexture&&Xn.getTransfer(a.map.colorSpace)===zt,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===h,flipSided:a.side===d,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ge&&!0===a.extensions.derivatives,extensionFragDepth:ge&&!0===a.extensions.fragDepth,extensionDrawBuffers:ge&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ge&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return Se}function b(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(x(n,t),S(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()}function x(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}function S(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),t.anisotropy&&o.enable(17),t.alphaHash&&o.enable(18),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.useLegacyLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),t.decodeVideoTexture&&o.enable(19),e.push(o.mask)}function M(e){const t=g[e.type];let n;if(t){const e=gl[t];n=va.clone(e.uniforms)}else n=e.uniforms;return n}function w(t,n){let i;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Du(e,n,t,a),c.push(i)),i}function E(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}}function T(e){l.remove(e)}function A(){l.dispose()}return{getParameters:_,getProgramCacheKey:b,getUniforms:M,acquireProgram:w,releaseProgram:E,releaseShaderCache:T,programs:c,dispose:A}}function Uu(){let e=new WeakMap;function t(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function i(t,n,i){e.get(t)[n]=i}function r(){e=new WeakMap}return{get:t,remove:n,update:i,dispose:r}}function Bu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Vu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function zu(){const e=[];let t=0;const n=[],i=[],r=[];function a(){t=0,n.length=0,i.length=0,r.length=0}function s(n,i,r,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}function o(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)}function l(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)}function c(e,t){n.length>1&&n.sort(e||Bu),i.length>1&&i.sort(t||Vu),r.length>1&&r.sort(t||Vu)}function u(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:o,unshift:l,finish:u,sort:c}}function Wu(){let e=new WeakMap;function t(t,n){const i=e.get(t);let r;return void 0===i?(r=new zu,e.set(t,[r])):n>=i.length?(r=new zu,i.push(r)):r=i[n],r}function n(){e=new WeakMap}return{get:t,dispose:n}}function Hu(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new li,color:new Tr};break;case"SpotLight":n={position:new li,direction:new li,color:new Tr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new li,color:new Tr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new li,skyColor:new Tr,groundColor:new Tr};break;case"RectAreaLight":n={color:new Tr,position:new li,halfWidth:new li,halfHeight:new li};break}return e[t.id]=n,n}}}function Gu(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let ju=0;function Xu(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function qu(e,t){const n=new Hu,i=Gu(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new li);const a=new li,s=new Ui,o=new Ui;function l(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,v=0,g=0,y=0,_=0,b=0;a.sort(Xu);const x=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,S=t.intensity,M=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*S*x,l+=s.g*S*x,c+=s.b*S*x;else if(t.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],S);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(S*x),e.distance=M,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[h]=e;const a=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,a.updateMatrices(t),t.castShadow&&_++),r.spotLightMatrix[h]=a.matrix,t.castShadow){const e=i.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,r.spotShadow[h]=e,r.spotShadowMap[h]=w,g++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(S),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=w,r.pointShadowMatrix[d]=t.shadow.matrix,v++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(S*x),e.groundColor.copy(t.groundColor).multiplyScalar(S*x),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=vl.LTC_FLOAT_1,r.rectAreaLTC2=vl.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=vl.LTC_HALF_1,r.rectAreaLTC2=vl.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const S=r.hash;S.directionalLength===u&&S.pointLength===d&&S.spotLength===h&&S.rectAreaLength===p&&S.hemiLength===f&&S.numDirectionalShadows===m&&S.numPointShadows===v&&S.numSpotShadows===g&&S.numSpotMaps===y&&S.numLightProbes===b||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=d,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=v,r.pointShadowMap.length=v,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=v,r.spotLightMatrix.length=g+y-_,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=_,r.numLightProbes=b,S.directionalLength=u,S.pointLength=d,S.spotLength=h,S.rectAreaLength=p,S.hemiLength=f,S.numDirectionalShadows=m,S.numPointShadows=v,S.numSpotShadows=g,S.numSpotMaps=y,S.numLightProbes=b,r.version=ju++)}function c(e,t){let n=0,i=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o.identity(),s.copy(t.matrixWorld),s.premultiply(d),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),i++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}}return{setup:l,setupView:c,state:r}}function $u(e,t){const n=new qu(e,t),i=[],r=[];function a(){i.length=0,r.length=0}function s(e){i.push(e)}function o(e){r.push(e)}function l(e){n.setup(i,e)}function c(e){n.setupView(i,e)}const u={lightsArray:i,shadowsArray:r,lights:n};return{init:a,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function Yu(e,t){let n=new WeakMap;function i(i,r=0){const a=n.get(i);let s;return void 0===a?(s=new $u(e,t),n.set(i,[s])):r>=a.length?(s=new $u(e,t),a.push(s)):s=a[r],s}function r(){n=new WeakMap}return{get:i,dispose:r}}class Ku extends Rr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Pt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Zu extends Rr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Ju="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Qu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function ed(e,t,n){let i=new Da;const r=new On,a=new On,s=new ni,l=new Ku({depthPacking:It}),f=new Zu,m={},v=n.maxTextureSize,g={[u]:d,[d]:u,[h]:h},y=new _a({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new On},radius:{value:4}},vertexShader:Ju,fragmentShader:Qu}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const b=new Gr;b.setAttribute("position",new Dr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new la(b,y),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=o;let M=this.type;function w(n,i){const a=t.update(x);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,_.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new ri(r.x,r.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,y,x,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,_,x,null)}function E(t,n,i,r){let a=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===i.isPointLight?f:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let i=m[e];void 0===i&&(i={},m[e]=i);let r=i[t];void 0===r&&(r=a.clone(),i[t]=r),a=r}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=r===c?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:g[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial){const t=e.properties.get(a);t.light=i}return a}function T(n,r,a,s,o){if(!1===n.visible)return;const l=n.layers.test(r.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===c)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=E(n,u,s,o);e.renderBufferDirect(a,null,i,t,n,c)}}}else if(r.visible){const t=E(n,r,s,o);e.renderBufferDirect(a,null,i,t,n,null)}}const u=n.children;for(let e=0,t=u.length;e<t;e++)T(u[e],r,a,s,o)}this.render=function(t,n,o){if(!1===S.enabled)return;if(!1===S.autoUpdate&&!1===S.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(p),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const f=M!==c&&this.type===c,m=M===c&&this.type!==c;for(let p=0,g=t.length;p<g;p++){const l=t[p],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const d=u.getFrameExtents();if(r.multiply(d),a.copy(u.mapSize),(r.x>v||r.y>v)&&(r.x>v&&(a.x=Math.floor(v/d.x),r.x=a.x*d.x,u.mapSize.x=a.x),r.y>v&&(a.y=Math.floor(v/d.y),r.y=a.y*d.y,u.mapSize.y=a.y)),null===u.map||!0===f||!0===m){const e=this.type!==c?{minFilter:pe,magFilter:pe}:{};null!==u.map&&u.map.dispose(),u.map=new ri(r.x,r.y,e),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const g=u.getViewportCount();for(let e=0;e<g;e++){const t=u.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),u.updateMatrices(l,e),i=u.getFrustum(),T(n,o,u.camera,l,this.type)}!0!==u.isPointLightShadow&&this.type===c&&w(u,o),u.needsUpdate=!1}M=this.type,S.needsUpdate=!1,e.setRenderTarget(l,u,d)}}function td(e,t,n){const i=n.isWebGL2;function o(){let t=!1;const n=new ni;let i=null;const r=new ni(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}}function l(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?Le(e.DEPTH_TEST):Pe(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case B:e.depthFunc(e.NEVER);break;case V:e.depthFunc(e.ALWAYS);break;case z:e.depthFunc(e.LESS);break;case W:e.depthFunc(e.LEQUAL);break;case H:e.depthFunc(e.EQUAL);break;case G:e.depthFunc(e.GEQUAL);break;case j:e.depthFunc(e.GREATER);break;case X:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function c(){let t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?Le(e.STENCIL_TEST):Pe(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null}}}const u=new o,q=new l,$=new c,Y=new WeakMap,K=new WeakMap;let Z={},J={},Q=new WeakMap,ee=[],te=null,ne=!1,ie=null,re=null,ae=null,se=null,oe=null,le=null,ce=null,ue=new Tr(0,0,0),de=0,he=!1,pe=null,fe=null,me=null,ve=null,ge=null;const ye=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let _e=!1,be=0;const xe=e.getParameter(e.VERSION);-1!==xe.indexOf("WebGL")?(be=parseFloat(/^WebGL (\d)/.exec(xe)[1]),_e=be>=1):-1!==xe.indexOf("OpenGL ES")&&(be=parseFloat(/^OpenGL ES (\d)/.exec(xe)[1]),_e=be>=2);let Se=null,Me={};const we=e.getParameter(e.SCISSOR_BOX),Ee=e.getParameter(e.VIEWPORT),Te=(new ni).fromArray(we),Ae=(new ni).fromArray(Ee);function Ce(t,n,r,a){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<r;l++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const Re={};function Le(t){!0!==Z[t]&&(e.enable(t),Z[t]=!0)}function Pe(t){!1!==Z[t]&&(e.disable(t),Z[t]=!1)}function Ie(t,n){return J[t]!==n&&(e.bindFramebuffer(t,n),J[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(J[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(J[e.DRAW_FRAMEBUFFER]=n)),!0)}function De(i,r){let a=ee,s=!1;if(i)if(a=Q.get(r),void 0===a&&(a=[],Q.set(r,a)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))}function Oe(t){return te!==t&&(e.useProgram(t),te=t,!0)}Re[e.TEXTURE_2D]=Ce(e.TEXTURE_2D,e.TEXTURE_2D,1),Re[e.TEXTURE_CUBE_MAP]=Ce(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Re[e.TEXTURE_2D_ARRAY]=Ce(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),Re[e.TEXTURE_3D]=Ce(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),q.setClear(1),$.setClear(0),Le(e.DEPTH_TEST),q.setFunc(W),Be(!1),Ve(a),Le(e.CULL_FACE),Fe(p);const Ne={[_]:e.FUNC_ADD,[b]:e.FUNC_SUBTRACT,[x]:e.FUNC_REVERSE_SUBTRACT};if(i)Ne[S]=e.MIN,Ne[M]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(Ne[S]=e.MIN_EXT,Ne[M]=e.MAX_EXT)}const ke={[w]:e.ZERO,[E]:e.ONE,[T]:e.SRC_COLOR,[C]:e.SRC_ALPHA,[O]:e.SRC_ALPHA_SATURATE,[I]:e.DST_COLOR,[L]:e.DST_ALPHA,[A]:e.ONE_MINUS_SRC_COLOR,[R]:e.ONE_MINUS_SRC_ALPHA,[D]:e.ONE_MINUS_DST_COLOR,[P]:e.ONE_MINUS_DST_ALPHA,[N]:e.CONSTANT_COLOR,[k]:e.ONE_MINUS_CONSTANT_COLOR,[F]:e.CONSTANT_ALPHA,[U]:e.ONE_MINUS_CONSTANT_ALPHA};function Fe(t,n,i,r,a,s,o,l,c,u){if(t!==p){if(!1===ne&&(Le(e.BLEND),ne=!0),t===y)a=a||n,s=s||i,o=o||r,n===re&&a===oe||(e.blendEquationSeparate(Ne[n],Ne[a]),re=n,oe=a),i===ae&&r===se&&s===le&&o===ce||(e.blendFuncSeparate(ke[i],ke[r],ke[s],ke[o]),ae=i,se=r,le=s,ce=o),!1!==l.equals(ue)&&c===de||(e.blendColor(l.r,l.g,l.b,c),ue.copy(l),de=c),ie=t,he=!1;else if(t!==ie||u!==he){if(re===_&&oe===_||(e.blendEquation(e.FUNC_ADD),re=_,oe=_),u)switch(t){case f:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case m:e.blendFunc(e.ONE,e.ONE);break;case v:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case g:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case f:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case m:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case v:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case g:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}ae=null,se=null,le=null,ce=null,ue.set(0,0,0),de=0,ie=t,he=u}}else!0===ne&&(Pe(e.BLEND),ne=!1)}function Ue(t,n){t.side===h?Pe(e.CULL_FACE):Le(e.CULL_FACE);let i=t.side===d;n&&(i=!i),Be(i),t.blending===f&&!1===t.transparent?Fe(p):Fe(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),q.setFunc(t.depthFunc),q.setTest(t.depthTest),q.setMask(t.depthWrite),u.setMask(t.colorWrite);const r=t.stencilWrite;$.setTest(r),r&&($.setMask(t.stencilWriteMask),$.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),$.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),We(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Le(e.SAMPLE_ALPHA_TO_COVERAGE):Pe(e.SAMPLE_ALPHA_TO_COVERAGE)}function Be(t){pe!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),pe=t)}function Ve(t){t!==r?(Le(e.CULL_FACE),t!==fe&&(t===a?e.cullFace(e.BACK):t===s?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Pe(e.CULL_FACE),fe=t}function ze(t){t!==me&&(_e&&e.lineWidth(t),me=t)}function We(t,n,i){t?(Le(e.POLYGON_OFFSET_FILL),ve===n&&ge===i||(e.polygonOffset(n,i),ve=n,ge=i)):Pe(e.POLYGON_OFFSET_FILL)}function He(t){t?Le(e.SCISSOR_TEST):Pe(e.SCISSOR_TEST)}function Ge(t){void 0===t&&(t=e.TEXTURE0+ye-1),Se!==t&&(e.activeTexture(t),Se=t)}function je(t,n,i){void 0===i&&(i=null===Se?e.TEXTURE0+ye-1:Se);let r=Me[i];void 0===r&&(r={type:void 0,texture:void 0},Me[i]=r),r.type===t&&r.texture===n||(Se!==i&&(e.activeTexture(i),Se=i),e.bindTexture(t,n||Re[t]),r.type=t,r.texture=n)}function Xe(){const t=Me[Se];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function qe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function $e(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ye(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ke(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ze(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Je(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Qe(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function et(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function tt(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function nt(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function it(t){!1===Te.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),Te.copy(t))}function rt(t){!1===Ae.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Ae.copy(t))}function at(t,n){let i=K.get(n);void 0===i&&(i=new WeakMap,K.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))}function st(t,n){const i=K.get(n),r=i.get(t);Y.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),Y.set(n,r))}function ot(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),Z={},Se=null,Me={},J={},Q=new WeakMap,ee=[],te=null,ne=!1,ie=null,re=null,ae=null,se=null,oe=null,le=null,ce=null,ue=new Tr(0,0,0),de=0,he=!1,pe=null,fe=null,me=null,ve=null,ge=null,Te.set(0,0,e.canvas.width,e.canvas.height),Ae.set(0,0,e.canvas.width,e.canvas.height),u.reset(),q.reset(),$.reset()}return{buffers:{color:u,depth:q,stencil:$},enable:Le,disable:Pe,bindFramebuffer:Ie,drawBuffers:De,useProgram:Oe,setBlending:Fe,setMaterial:Ue,setFlipSided:Be,setCullFace:Ve,setLineWidth:ze,setPolygonOffset:We,setScissorTest:He,activeTexture:Ge,bindTexture:je,unbindTexture:Xe,compressedTexImage2D:qe,compressedTexImage3D:$e,texImage2D:tt,texImage3D:nt,updateUBOMapping:at,uniformBlockBinding:st,texStorage2D:Qe,texStorage3D:et,texSubImage2D:Ye,texSubImage3D:Ke,compressedTexSubImage2D:Ze,compressedTexSubImage3D:Je,scissor:it,viewport:rt,reset:ot}}function nd(e,t,n,i,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ae){}function y(e,t){return g?new OffscreenCanvas(e,t):Un("canvas")}function _(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?Rn:Math.floor,a=i(r*e.width),s=i(r*e.height);void 0===m&&(m=y(a,s));const o=n?y(a,s):m;o.width=a,o.height=s;const l=o.getContext("2d");return l.drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return An(e.width)&&An(e.height)}function x(e){return!o&&(e.wrapS!==de||e.wrapT!==de||e.minFilter!==pe&&e.minFilter!==ve)}function S(e,t){return e.generateMipmaps&&t&&e.minFilter!==pe&&e.minFilter!==ve}function M(t){e.generateMipmap(t)}function w(n,i,r,a,s=!1){if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(l=e.R8UI),r===e.UNSIGNED_SHORT&&(l=e.R16UI),r===e.UNSIGNED_INT&&(l=e.R32UI),r===e.BYTE&&(l=e.R8I),r===e.SHORT&&(l=e.R16I),r===e.INT&&(l=e.R32I)),i===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA){const t=s?Vt:Xn.getTransfer(a);r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=t===zt?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===S(e,n)||e.isFramebufferTexture&&e.minFilter!==pe&&e.minFilter!==ve?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(t){return t===pe||t===fe||t===me?e.NEAREST:e.LINEAR}function A(e){const t=e.target;t.removeEventListener("dispose",A),R(t),t.isVideoTexture&&f.delete(t)}function C(e){const t=e.target;t.removeEventListener("dispose",C),P(t)}function R(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=v.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&L(e),0===Object.keys(r).length&&v.delete(n)}i.remove(e)}function L(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source,a=v.get(r);delete a[n.__cacheKey],s.memory.textures--}function P(t){const n=t.texture,r=i.get(t),a=i.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(r.__webglFramebuffer[i]))for(let t=0;t<r.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(r.__webglFramebuffer[i][t]);else e.deleteFramebuffer(r.__webglFramebuffer[i]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[i])}else{if(Array.isArray(r.__webglFramebuffer))for(let t=0;t<r.__webglFramebuffer.length;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=i.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),i.remove(n[o])}i.remove(n),i.remove(t)}let I=0;function D(){I=0}function O(){const e=I;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),I+=1,e}function N(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}function k(t,r){const a=i.get(t);if(t.isVideoTexture&&ie(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void j(a,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}function F(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?j(a,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)}function U(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?j(a,t,r):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)}function B(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?X(a,t,r):n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+r)}const V={[ue]:e.REPEAT,[de]:e.CLAMP_TO_EDGE,[he]:e.MIRRORED_REPEAT},z={[pe]:e.NEAREST,[fe]:e.NEAREST_MIPMAP_NEAREST,[me]:e.NEAREST_MIPMAP_LINEAR,[ve]:e.LINEAR,[ge]:e.LINEAR_MIPMAP_NEAREST,[ye]:e.LINEAR_MIPMAP_LINEAR},W={[Xt]:e.NEVER,[Qt]:e.ALWAYS,[qt]:e.LESS,[Yt]:e.LEQUAL,[$t]:e.EQUAL,[Jt]:e.GEQUAL,[Kt]:e.GREATER,[Zt]:e.NOTEQUAL};function H(n,a,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,V[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,V[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,V[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,z[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,z[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===de&&a.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T(a.minFilter)),a.minFilter!==pe&&a.minFilter!==ve&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,W[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===pe)return;if(a.minFilter!==me&&a.minFilter!==ye)return;if(a.type===Ee&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===Te&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function G(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",A));const r=n.source;let a=v.get(r);void 0===a&&(a={},v.set(r,a));const o=N(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&L(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return i}function j(t,r,s){let l=e.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=e.TEXTURE_3D);const c=G(t,r),d=r.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=i.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=Xn.getPrimaries(Xn.workingColorSpace),i=r.colorSpace===Nt?null:Xn.getPrimaries(r.colorSpace),p=r.colorSpace===Nt||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=x(r)&&!1===b(r.image);let m=_(r.image,f,!1,u);m=re(r,m);const v=b(m)||o,g=a.convert(r.format,r.colorSpace);let y,T=a.convert(r.type),A=w(r.internalFormat,g,T,r.colorSpace,r.isVideoTexture);H(l,r,v);const C=r.mipmaps,R=o&&!0!==r.isVideoTexture,L=void 0===h.__version||!0===c,P=E(r,m,v);if(r.isDepthTexture)A=e.DEPTH_COMPONENT,o?A=r.type===Ee?e.DEPTH_COMPONENT32F:r.type===we?e.DEPTH_COMPONENT24:r.type===Re?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:r.type===Ee&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Oe&&A===e.DEPTH_COMPONENT&&r.type!==Se&&r.type!==we&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=we,T=a.convert(r.type)),r.format===Ne&&A===e.DEPTH_COMPONENT&&(A=e.DEPTH_STENCIL,r.type!==Re&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Re,T=a.convert(r.type))),L&&(R?n.texStorage2D(e.TEXTURE_2D,1,A,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,A,m.width,m.height,0,g,T,null));else if(r.isDataTexture)if(C.length>0&&v){R&&L&&n.texStorage2D(e.TEXTURE_2D,P,A,C[0].width,C[0].height);for(let t=0,i=C.length;t<i;t++)y=C[t],R?n.texSubImage2D(e.TEXTURE_2D,t,0,0,y.width,y.height,g,T,y.data):n.texImage2D(e.TEXTURE_2D,t,A,y.width,y.height,0,g,T,y.data);r.generateMipmaps=!1}else R?(L&&n.texStorage2D(e.TEXTURE_2D,P,A,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,g,T,m.data)):n.texImage2D(e.TEXTURE_2D,0,A,m.width,m.height,0,g,T,m.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){R&&L&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,A,C[0].width,C[0].height,m.depth);for(let t=0,i=C.length;t<i;t++)y=C[t],r.format!==Pe?null!==g?R?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,y.width,y.height,m.depth,g,y.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,A,y.width,y.height,m.depth,0,y.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,y.width,y.height,m.depth,g,T,y.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,A,y.width,y.height,m.depth,0,g,T,y.data)}else{R&&L&&n.texStorage2D(e.TEXTURE_2D,P,A,C[0].width,C[0].height);for(let t=0,i=C.length;t<i;t++)y=C[t],r.format!==Pe?null!==g?R?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,y.width,y.height,g,y.data):n.compressedTexImage2D(e.TEXTURE_2D,t,A,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?n.texSubImage2D(e.TEXTURE_2D,t,0,0,y.width,y.height,g,T,y.data):n.texImage2D(e.TEXTURE_2D,t,A,y.width,y.height,0,g,T,y.data)}else if(r.isDataArrayTexture)R?(L&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,A,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,g,T,m.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,A,m.width,m.height,m.depth,0,g,T,m.data);else if(r.isData3DTexture)R?(L&&n.texStorage3D(e.TEXTURE_3D,P,A,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,g,T,m.data)):n.texImage3D(e.TEXTURE_3D,0,A,m.width,m.height,m.depth,0,g,T,m.data);else if(r.isFramebufferTexture){if(L)if(R)n.texStorage2D(e.TEXTURE_2D,P,A,m.width,m.height);else{let t=m.width,i=m.height;for(let r=0;r<P;r++)n.texImage2D(e.TEXTURE_2D,r,A,t,i,0,g,T,null),t>>=1,i>>=1}}else if(C.length>0&&v){R&&L&&n.texStorage2D(e.TEXTURE_2D,P,A,C[0].width,C[0].height);for(let t=0,i=C.length;t<i;t++)y=C[t],R?n.texSubImage2D(e.TEXTURE_2D,t,0,0,g,T,y):n.texImage2D(e.TEXTURE_2D,t,A,g,T,y);r.generateMipmaps=!1}else R?(L&&n.texStorage2D(e.TEXTURE_2D,P,A,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,g,T,m)):n.texImage2D(e.TEXTURE_2D,0,A,g,T,m);S(r,v)&&M(l),h.__version=d.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function X(t,r,s){if(6!==r.image.length)return;const l=G(t,r),u=r.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const d=i.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=Xn.getPrimaries(Xn.workingColorSpace),i=r.colorSpace===Nt?null:Xn.getPrimaries(r.colorSpace),h=r.colorSpace===Nt||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=r.isCompressedTexture||r.image[0].isCompressedTexture,f=r.image[0]&&r.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=p||f?f?r.image[e].image:r.image[e]:_(r.image[e],!1,!0,c),m[e]=re(r,m[e]);const v=m[0],g=b(v)||o,y=a.convert(r.format,r.colorSpace),x=a.convert(r.type),T=w(r.internalFormat,y,x,r.colorSpace),A=o&&!0!==r.isVideoTexture,C=void 0===d.__version||!0===l;let R,L=E(r,v,g);if(H(e.TEXTURE_CUBE_MAP,r,g),p){A&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,L,T,v.width,v.height);for(let t=0;t<6;t++){R=m[t].mipmaps;for(let i=0;i<R.length;i++){const a=R[i];r.format!==Pe?null!==y?A?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,y,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,T,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,y,x,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,T,a.width,a.height,0,y,x,a.data)}}}else{R=r.mipmaps,A&&C&&(R.length>0&&L++,n.texStorage2D(e.TEXTURE_CUBE_MAP,L,T,m[0].width,m[0].height));for(let t=0;t<6;t++)if(f){A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,y,x,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,m[t].width,m[t].height,0,y,x,m[t].data);for(let i=0;i<R.length;i++){const r=R[i],a=r.image[t].image;A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,a.width,a.height,y,x,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,T,a.width,a.height,0,y,x,a.data)}}else{A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,y,x,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,y,x,m[t]);for(let i=0;i<R.length;i++){const r=R[i];A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,y,x,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,T,y,x,r.image[t])}}}S(r,g)&&M(e.TEXTURE_CUBE_MAP),d.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function q(t,r,s,o,l,c){const u=a.convert(s.format,s.colorSpace),d=a.convert(s.type),p=w(s.internalFormat,u,d,s.colorSpace),f=i.get(r);if(!f.__hasExternalTextures){const t=Math.max(1,r.width>>c),i=Math.max(1,r.height>>c);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,c,p,t,i,r.depth,0,u,d,null):n.texImage2D(l,c,p,t,i,0,u,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),ne(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,i.get(s).__webglTexture,0,te(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,i.get(s).__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function $(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=!0===o?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||ne(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Ee?r=e.DEPTH_COMPONENT32F:t.type===we&&(r=e.DEPTH_COMPONENT24));const i=te(n);ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=te(n);i&&!1===ne(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const s=t[r],o=a.convert(s.format,s.colorSpace),l=a.convert(s.type),c=w(s.internalFormat,o,l,s.colorSpace),u=te(n);i&&!1===ne(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function Y(t,r){const a=r&&r.isWebGLCubeRenderTarget;if(a)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),k(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,o=te(r);if(r.depthTexture.format===Oe)ne(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==Ne)throw new Error("Unknown depthTexture format");ne(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function K(t){const r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");Y(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),$(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),$(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function Z(t,n,r){const a=i.get(t);void 0!==n&&q(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&K(t)}function J(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=b(t)||o;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===ne(t)){const i=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=w(r.internalFormat,s,o,r.colorSpace,!0===t.isXRRenderTarget),u=te(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),$(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),H(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)q(c.__webglFramebuffer[n][i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else q(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);S(l,p)&&M(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const r=t.texture;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),H(e.TEXTURE_2D,s,p),q(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),S(s,p)&&M(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),H(i,l,p),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)q(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,i,n);else q(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i,0);S(l,p)&&M(i),n.unbindTexture()}t.depthBuffer&&K(t)}function Q(t){const r=b(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(S(o,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),M(r),n.unbindTexture()}}}function ee(t){if(o&&t.samples>0&&!1===ne(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),d){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}}function te(e){return Math.min(d,e.samples)}function ne(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ie(e){const t=s.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}function re(e,n){const i=e.colorSpace,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===nn||i!==Ft&&i!==Nt&&(Xn.getTransfer(i)===zt?!1===o?!0===t.has("EXT_sRGB")&&r===Pe?(e.format=nn,e.minFilter=ve,e.generateMipmaps=!1):n=Kn.sRGBToLinear(n):r===Pe&&a===_e||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=O,this.resetTextureUnits=D,this.setTexture2D=k,this.setTexture2DArray=F,this.setTexture3D=U,this.setTextureCube=B,this.rebindTextures=Z,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=ee,this.setupDepthRenderbuffer=K,this.setupFrameBufferTexture=q,this.useMultisampledRTT=ne}function id(e,t,n){const i=n.isWebGL2;function r(n,r=Nt){let a;const s=Xn.getTransfer(r);if(n===_e)return e.UNSIGNED_BYTE;if(n===Ae)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ce)return e.UNSIGNED_SHORT_5_5_5_1;if(n===be)return e.BYTE;if(n===xe)return e.SHORT;if(n===Se)return e.UNSIGNED_SHORT;if(n===Me)return e.INT;if(n===we)return e.UNSIGNED_INT;if(n===Ee)return e.FLOAT;if(n===Te)return i?e.HALF_FLOAT:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(n===Le)return e.ALPHA;if(n===Pe)return e.RGBA;if(n===Ie)return e.LUMINANCE;if(n===De)return e.LUMINANCE_ALPHA;if(n===Oe)return e.DEPTH_COMPONENT;if(n===Ne)return e.DEPTH_STENCIL;if(n===nn)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(n===ke)return e.RED;if(n===Fe)return e.RED_INTEGER;if(n===Ue)return e.RG;if(n===Be)return e.RG_INTEGER;if(n===Ve)return e.RGBA_INTEGER;if(n===ze||n===We||n===He||n===Ge)if(s===zt){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===ze)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===We)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===He)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ge)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===ze)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===We)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===He)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ge)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===je||n===Xe||n===qe||n===$e){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===je)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Xe)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===qe)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===$e)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ye)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Ke||n===Ze){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===Ke)return s===zt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===Ze)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===Je||n===Qe||n===et||n===tt||n===nt||n===it||n===rt||n===at||n===st||n===ot||n===lt||n===ct||n===ut||n===dt){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===Je)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Qe)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===et)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===tt)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===nt)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===it)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===rt)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===at)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===st)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ot)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===lt)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ct)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===ut)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===dt)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ht||n===pt||n===ft){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(n===ht)return s===zt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===pt)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===ft)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===mt||n===vt||n===gt||n===yt){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(n===ht)return a.COMPRESSED_RED_RGTC1_EXT;if(n===vt)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===gt)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===yt)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Re?i?e.UNSIGNED_INT_24_8:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}return{convert:r}}class rd extends xa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ad extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sd={type:"move"};class od{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ad,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ad,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new li,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new li),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ad,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new li,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new li),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),i=this._getHandJoint(l,a);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(sd)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new ad;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ld extends ti{constructor(e,t,n,i,r,a,s,o,l,c){if(c=void 0!==c?c:Oe,c!==Oe&&c!==Ne)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Oe&&(n=we),void 0===n&&c===Ne&&(n=Re),super(null,i,r,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:pe,this.minFilter=void 0!==o?o:pe,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class cd extends sn{constructor(e,t){super();const n=this;let i=null,r=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let m=null,v=null;const g=[],y=[],_=new xa;_.layers.enable(1),_.viewport=new ni;const b=new xa;b.layers.enable(2),b.viewport=new ni;const x=[_,b],S=new rd;S.layers.enable(1),S.layers.enable(2);let M=null,w=null;function E(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function T(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",T),i.removeEventListener("inputsourceschange",A);for(let e=0;e<g.length;e++){const t=y[e];null!==t&&(y[e]=null,g[e].disconnect(t))}M=null,w=null,e.setRenderTarget(m),h=null,d=null,u=null,i=null,v=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=y.indexOf(n);i>=0&&(y[i]=null,g[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=y.indexOf(n);if(-1===i){for(let e=0;e<g.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}const r=g[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new od,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new od,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new od,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",T),i.addEventListener("inputsourceschange",A),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),v=new ri(h.framebufferWidth,h.framebufferHeight,{format:Pe,type:_e,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,a=null,s=null;f.depth&&(s=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?Ne:Oe,a=f.stencil?Re:we);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(o),i.updateRenderState({layers:[d]}),v=new ri(d.textureWidth,d.textureHeight,{format:Pe,type:_e,depthTexture:new ld(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});const l=e.properties.get(v);l.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),N.setContext(i),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const C=new li,R=new li;function L(e,t,n){C.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const i=C.distanceTo(R),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=s*u,p=s*d,f=i/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const v=s+f,g=o+f,y=h-m,_=p+(i-m),b=l*o/g*v,x=c*o/g*v;e.projectionMatrix.makePerspective(y,_,b,x,v,g),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}function I(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*un*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}this.updateCamera=function(e){if(null===i)return;S.near=b.near=_.near=e.near,S.far=b.far=_.far=e.far,M===S.near&&w===S.far||(i.updateRenderState({depthNear:S.near,depthFar:S.far}),M=S.near,w=S.far);const t=e.parent,n=S.cameras;P(S,t);for(let i=0;i<n.length;i++)P(n[i],t);2===n.length?L(S,_,b):S.projectionMatrix.copy(_.projectionMatrix),I(e,S,t)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let D=null;function O(t,i){if(c=i.getViewerPose(l||a),p=i,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let a=null;if(null!==h)a=h.getViewport(r);else{const t=u.getViewSubImage(d,r);a=t.viewport,0===i&&(e.setRenderTargetTextures(v,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let s=x[i];void 0===s&&(s=new xa,s.layers.enable(i),s.viewport=new ni,x[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===i&&(S.matrix.copy(s.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(s)}}for(let e=0;e<g.length;e++){const t=y[e],n=g[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}D&&D(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null}const N=new Oa;N.setAnimationLoop(O),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function ud(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(t,n){n.color.getRGB(t.fogColor.value,ma(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)}function r(e,t,n,i,r){t.isMeshBasicMaterial||t.isMeshLambertMaterial?a(e,t):t.isMeshToonMaterial?(a(e,t),h(e,t)):t.isMeshPhongMaterial?(a(e,t),u(e,t)):t.isMeshStandardMaterial?(a(e,t),p(e,t),t.isMeshPhysicalMaterial&&f(e,t,r)):t.isMeshMatcapMaterial?(a(e,t),m(e,t)):t.isMeshDepthMaterial?a(e,t):t.isMeshDistanceMaterial?(a(e,t),v(e,t)):t.isMeshNormalMaterial?a(e,t):t.isLineBasicMaterial?(s(e,t),t.isLineDashedMaterial&&o(e,t)):t.isPointsMaterial?l(e,t,n,i):t.isSpriteMaterial?c(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function a(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===d&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===d&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const a=t.get(r).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}function s(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}function o(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function l(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function c(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function u(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}function h(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function p(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform)),e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));const r=t.get(i).envMap;r&&(e.envMapIntensity.value=i.envMapIntensity)}function f(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===d&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}function m(e,t){t.matcap&&(e.matcap.value=t.matcap)}function v(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function dd(e,t,n,i){let r={},a={},s=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t){const n=t.program;i.uniformBlockBinding(e,n)}function c(e,n){let s=r[e.id];void 0===s&&(f(e),s=u(e),r[e.id]=s,e.addEventListener("dispose",v));const o=n.program;i.updateUBOMapping(e,o);const l=t.render.frame;a[e.id]!==l&&(h(e),a[e.id]=l)}function u(t){const n=d();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}function d(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(t){const n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,s=i.length;r<s;r++){const t=i[r];if(!0===p(t,r,a)){const n=t.__offset,i=Array.isArray(t.value)?t.value:[t.value];let r=0;for(let a=0;a<i.length;a++){const s=i[a],o=m(s);"number"===typeof s?(t.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,n+r,t.__data)):s.isMatrix3?(t.__data[0]=s.elements[0],t.__data[1]=s.elements[1],t.__data[2]=s.elements[2],t.__data[3]=s.elements[0],t.__data[4]=s.elements[3],t.__data[5]=s.elements[4],t.__data[6]=s.elements[5],t.__data[7]=s.elements[0],t.__data[8]=s.elements[6],t.__data[9]=s.elements[7],t.__data[10]=s.elements[8],t.__data[11]=s.elements[0]):(s.toArray(t.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,n,t.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}function p(e,t,n){const i=e.value;if(void 0===n[t]){if("number"===typeof i)n[t]=i;else{const e=Array.isArray(i)?i:[i],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());n[t]=r}return!0}if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],r=Array.isArray(i)?i:[i];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(r[t]))return n.copy(r[t]),!0}}return!1}function f(e){const t=e.uniforms;let n=0;const i=16;let r=0;for(let a=0,s=t.length;a<s;a++){const e=t[a],s={boundary:0,storage:0},o=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=o.length;t<n;t++){const e=o[t],n=m(e);s.boundary+=n.boundary,s.storage+=n.storage}if(e.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,a>0){r=n%i;const t=i-r;0!==r&&t-s.boundary<0&&(n+=i-r,e.__offset=n)}n+=s.storage}return r=n%i,r>0&&(n+=i-r),e.__size=n,e.__cache={},this}function m(e){const t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function v(t){const n=t.target;n.removeEventListener("dispose",v);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}function g(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},a={}}return{bind:l,update:c,dispose:g}}class hd{constructor(e={}){const{canvas:t=Bn(),context:n=null,depth:r=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:f=!1}=e;let m;this.isWebGLRenderer=!0,m=null!==n?n.getContextAttributes().alpha:s;const v=new Uint32Array(4),g=new Int32Array(4);let y=null,_=null;const b=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kt,this._useLegacyLights=!1,this.toneMapping=K,this.toneMappingExposure=1;const S=this;let M=!1,w=0,E=0,T=null,A=-1,C=null;const R=new ni,L=new ni;let P=null;const I=new Tr(0);let D=0,O=t.width,N=t.height,k=1,F=null,U=null;const B=new ni(0,0,O,N),V=new ni(0,0,O,N);let z=!1;const W=new Da;let H=!1,G=!1,j=null;const X=new Ui,q=new On,$=new li,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Z(){return null===T?k:1}let J,Q,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ve,ge,be,xe,Me,Le,Ie=n;function De(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:p,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${i}`),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",Ue,!1),t.addEventListener("webglcontextcreationerror",ze,!1),null===Ie){const t=["webgl2","webgl","experimental-webgl"];if(!0===S.isWebGL1Renderer&&t.shift(),Ie=De(t,e),null===Ie)throw De(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&Ie instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Ie.getShaderPrecisionFormat&&(Ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(lt){throw console.error("THREE.WebGLRenderer: "+lt.message),lt}function Oe(){J=new Xl(Ie),Q=new Sl(Ie,J,e),J.init(Q),xe=new id(Ie,J,Q),ee=new td(Ie,J,Q),te=new Yl(Ie),ne=new Uu,ie=new nd(Ie,J,ee,ne,Q,xe,te),re=new wl(S),ae=new jl(S),se=new Na(Ie,Q),Me=new bl(Ie,J,se,Q),oe=new ql(Ie,se,te,Me),le=new Ql(Ie,oe,se,te),ve=new Jl(Ie,Q,ie),pe=new Ml(ne),ce=new Fu(S,re,ae,J,Q,Me,pe),ue=new ud(S,ne),de=new Wu,he=new Yu(J,Q),me=new _l(S,re,ae,ee,le,m,l),fe=new ed(S,le,Q),Le=new dd(Ie,te,Q,ee),ge=new xl(Ie,J,te,Q),be=new $l(Ie,J,te,Q),te.programs=ce.programs,S.capabilities=Q,S.extensions=J,S.properties=ne,S.renderLists=de,S.shadowMap=fe,S.state=ee,S.info=te}Oe();const Ne=new cd(S,Ie);function ke(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Ue(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const e=te.autoReset,t=fe.enabled,n=fe.autoUpdate,i=fe.needsUpdate,r=fe.type;Oe(),te.autoReset=e,fe.enabled=t,fe.autoUpdate=n,fe.needsUpdate=i,fe.type=r}function ze(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function We(e){const t=e.target;t.removeEventListener("dispose",We),He(t)}function He(e){Ge(e),ne.remove(e)}function Ge(e){const t=ne.get(e).programs;void 0!==t&&(t.forEach(function(e){ce.releaseProgram(e)}),e.isShaderMaterial&&ce.releaseShaderCache(e))}function je(e,t,n){!0===e.transparent&&e.side===h&&!1===e.forceSinglePass?(e.side=d,e.needsUpdate=!0,nt(e,t,n),e.side=u,e.needsUpdate=!0,nt(e,t,n),e.side=h):nt(e,t,n)}this.xr=Ne,this.getContext=function(){return Ie},this.getContextAttributes=function(){return Ie.getContextAttributes()},this.forceContextLoss=function(){const e=J.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=J.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(O,N,!1))},this.getSize=function(e){return e.set(O,N)},this.setSize=function(e,n,i=!0){Ne.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=e,N=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(O*k,N*k).floor()},this.setDrawingBufferSize=function(e,n,i){O=e,N=n,k=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(R)},this.getViewport=function(e){return e.copy(B)},this.setViewport=function(e,t,n,i){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,n,i),ee.viewport(R.copy(B).multiplyScalar(k).floor())},this.getScissor=function(e){return e.copy(V)},this.setScissor=function(e,t,n,i){e.isVector4?V.set(e.x,e.y,e.z,e.w):V.set(e,t,n,i),ee.scissor(L.copy(V).multiplyScalar(k).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(e){ee.setScissorTest(z=e)},this.setOpaqueSort=function(e){F=e},this.setTransparentSort=function(e){U=e},this.getClearColor=function(e){return e.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==T){const t=T.texture.format;e=t===Ve||t===Be||t===Fe}if(e){const e=T.texture.type,t=e===_e||e===we||e===Se||e===Re||e===Ae||e===Ce,n=me.getClearColor(),i=me.getClearAlpha(),r=n.r,a=n.g,s=n.b;t?(v[0]=r,v[1]=a,v[2]=s,v[3]=i,Ie.clearBufferuiv(Ie.COLOR,0,v)):(g[0]=r,g[1]=a,g[2]=s,g[3]=i,Ie.clearBufferiv(Ie.COLOR,0,g))}else i|=Ie.COLOR_BUFFER_BIT}t&&(i|=Ie.DEPTH_BUFFER_BIT),n&&(i|=Ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ie.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",Ue,!1),t.removeEventListener("webglcontextcreationerror",ze,!1),de.dispose(),he.dispose(),ne.dispose(),re.dispose(),ae.dispose(),le.dispose(),Me.dispose(),Le.dispose(),ce.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",$e),Ne.removeEventListener("sessionend",Ye),j&&(j.dispose(),j=null),Ke.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=Y);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=at(e,t,n,i,r);ee.setMaterial(i,s);let l=n.index,c=1;if(!0===i.wireframe){if(l=oe.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let m;Me.setup(r,i,o,n,l);let v=ge;if(null!==l&&(m=se.get(l),v=be,v.setIndex(m)),r.isMesh)!0===i.wireframe?(ee.setLineWidth(i.wireframeLinewidth*Z()),v.setMode(Ie.LINES)):v.setMode(Ie.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),ee.setLineWidth(e*Z()),r.isLineSegments?v.setMode(Ie.LINES):r.isLineLoop?v.setMode(Ie.LINE_LOOP):v.setMode(Ie.LINE_STRIP)}else r.isPoints?v.setMode(Ie.POINTS):r.isSprite&&v.setMode(Ie.TRIANGLES);if(r.isInstancedMesh)v.renderInstances(h,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,f,t)}else v.render(h,f)},this.compile=function(e,t,n=null){null===n&&(n=e),_=he.get(n),_.init(),x.push(_),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))}),_.setupLights(S._useLegacyLights);const i=new Set;return e.traverse(function(e){const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];je(a,n,e),i.add(a)}else je(t,n,e),i.add(t)}),x.pop(),_=null,i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){const t=ne.get(e),n=t.currentProgram;n.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==J.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Xe=null;function qe(e){Xe&&Xe(e)}function $e(){Ke.stop()}function Ye(){Ke.start()}const Ke=new Oa;function Ze(e,t,n,i){if(!1===e.visible)return;const r=e.layers.test(t.layers);if(r)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)_.pushLight(e),e.castShadow&&_.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||W.intersectsSprite(e)){i&&$.setFromMatrixPosition(e.matrixWorld).applyMatrix4(X);const t=le.update(e),r=e.material;r.visible&&y.push(e,t,r,n,$.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||W.intersectsObject(e))){const t=le.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),$.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),$.copy(t.boundingSphere.center)),$.applyMatrix4(e.matrixWorld).applyMatrix4(X)),Array.isArray(r)){const i=t.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&y.push(e,t,o,n,$.z,s)}}else r.visible&&y.push(e,t,r,n,$.z,null)}const a=e.children;for(let s=0,o=a.length;s<o;s++)Ze(a[s],t,n,i)}function Je(e,t,n,i){const r=e.opaque,a=e.transmissive,s=e.transparent;_.setupLightsView(n),!0===H&&pe.setGlobalState(S.clippingPlanes,n),a.length>0&&Qe(r,a,t,n),i&&ee.viewport(R.copy(i)),r.length>0&&et(r,t,n),a.length>0&&et(a,t,n),s.length>0&&et(s,t,n),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function Qe(e,t,n,i){const r=!0===n.isScene?n.overrideMaterial:null;if(null!==r)return;const a=Q.isWebGL2;null===j&&(j=new ri(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?Te:_e,minFilter:ye,samples:a?4:0})),S.getDrawingBufferSize(q),a?j.setSize(q.x,q.y):j.setSize(Rn(q.x),Rn(q.y));const s=S.getRenderTarget();S.setRenderTarget(j),S.getClearColor(I),D=S.getClearAlpha(),D<1&&S.setClearColor(16777215,.5),S.clear();const o=S.toneMapping;S.toneMapping=K,et(e,n,i),ie.updateMultisampleRenderTarget(j),ie.updateRenderTargetMipmap(j);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],r=e.object,a=e.geometry,s=e.material,o=e.group;if(s.side===h&&r.layers.test(i.layers)){const e=s.side;s.side=d,s.needsUpdate=!0,tt(r,n,i,a,s,o),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(ie.updateMultisampleRenderTarget(j),ie.updateRenderTargetMipmap(j)),S.setRenderTarget(s),S.setClearColor(I,D),S.toneMapping=o}function et(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===i?a.material:i,c=a.group;s.layers.test(n.layers)&&tt(s,t,n,o,l,c)}}function tt(e,t,n,i,r,a){e.onBeforeRender(S,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(S,t,n,i,e,a),!0===r.transparent&&r.side===h&&!1===r.forceSinglePass?(r.side=d,r.needsUpdate=!0,S.renderBufferDirect(n,t,i,r,e,a),r.side=u,r.needsUpdate=!0,S.renderBufferDirect(n,t,i,r,e,a),r.side=h):S.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(S,t,n,i,r,a)}function nt(e,t,n){!0!==t.isScene&&(t=Y);const i=ne.get(e),r=_.state.lights,a=_.state.shadowsArray,s=r.state.version,o=ce.getParameters(e,r.state,a,t,n),l=ce.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ae:re).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",We),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===s)return rt(e,o),u}else o.uniforms=ce.getUniforms(e),e.onBuild(n,o,S),e.onBeforeCompile(o,S),u=ce.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const d=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=pe.uniform),rt(e,o),i.needsLights=ot(e),i.lightsStateVersion=s,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function it(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=au.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function rt(e,t){const n=ne.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function at(e,t,n,i,r){!0!==t.isScene&&(t=Y),ie.resetTextureUnits();const a=t.fog,s=i.isMeshStandardMaterial?t.environment:null,o=null===T?S.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:Ft,l=(i.isMeshStandardMaterial?ae:re).get(i.envMap||s),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=K;i.toneMapped&&(null!==T&&!0!==T.isXRRenderTarget||(f=S.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,g=ne.get(i),y=_.state.lights;if(!0===H&&(!0===G||e!==C)){const t=e===C&&i.id===A;pe.setState(i,e,t)}let b=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputColorSpace!==o||r.isInstancedMesh&&!1===g.instancing?b=!0:r.isInstancedMesh||!0!==g.instancing?r.isSkinnedMesh&&!1===g.skinning?b=!0:r.isSkinnedMesh||!0!==g.skinning?r.isInstancedMesh&&!0===g.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===g.instancingColor&&null!==r.instanceColor||g.envMap!==l||!0===i.fog&&g.fog!==a?b=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===pe.numPlanes&&g.numIntersection===pe.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==u||g.morphTargets!==d||g.morphNormals!==h||g.morphColors!==p||g.toneMapping!==f||!0===Q.isWebGL2&&g.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,g.__version=i.version);let x=g.currentProgram;!0===b&&(x=nt(i,t,r));let M=!1,w=!1,E=!1;const R=x.getUniforms(),L=g.uniforms;if(ee.useProgram(x.program)&&(M=!0,w=!0,E=!0),i.id!==A&&(A=i.id,w=!0),M||C!==e){R.setValue(Ie,"projectionMatrix",e.projectionMatrix),R.setValue(Ie,"viewMatrix",e.matrixWorldInverse);const t=R.map.cameraPosition;void 0!==t&&t.setValue(Ie,$.setFromMatrixPosition(e.matrixWorld)),Q.logarithmicDepthBuffer&&R.setValue(Ie,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&R.setValue(Ie,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,w=!0,E=!0)}if(r.isSkinnedMesh){R.setOptional(Ie,r,"bindMatrix"),R.setOptional(Ie,r,"bindMatrixInverse");const e=r.skeleton;e&&(Q.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(Ie,"boneTexture",e.boneTexture,ie),R.setValue(Ie,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const P=n.morphAttributes;if((void 0!==P.position||void 0!==P.normal||void 0!==P.color&&!0===Q.isWebGL2)&&ve.update(r,n,x),(w||g.receiveShadow!==r.receiveShadow)&&(g.receiveShadow=r.receiveShadow,R.setValue(Ie,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),w&&(R.setValue(Ie,"toneMappingExposure",S.toneMappingExposure),g.needsLights&&st(L,E),a&&!0===i.fog&&ue.refreshFogUniforms(L,a),ue.refreshMaterialUniforms(L,i,k,N,j),au.upload(Ie,it(g),L,ie)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(au.upload(Ie,it(g),L,ie),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&R.setValue(Ie,"center",r.center),R.setValue(Ie,"modelViewMatrix",r.modelViewMatrix),R.setValue(Ie,"normalMatrix",r.normalMatrix),R.setValue(Ie,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Q.isWebGL2){const n=e[t];Le.update(n,x),Le.bind(n,x)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return x}function st(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function ot(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ke.setAnimationLoop(qe),"undefined"!==typeof self&&Ke.setContext(self),this.setAnimationLoop=function(e){Xe=e,Ne.setAnimationLoop(e),null===e?Ke.stop():Ke.start()},Ne.addEventListener("sessionstart",$e),Ne.addEventListener("sessionend",Ye),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===M)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ne.enabled&&!0===Ne.isPresenting&&(!0===Ne.cameraAutoUpdate&&Ne.updateCamera(t),t=Ne.getCamera()),!0===e.isScene&&e.onBeforeRender(S,e,t,T),_=he.get(e,x.length),_.init(),x.push(_),X.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),W.setFromProjectionMatrix(X),G=this.localClippingEnabled,H=pe.init(this.clippingPlanes,G),y=de.get(e,b.length),y.init(),b.push(y),Ze(e,t,0,S.sortObjects),y.finish(),!0===S.sortObjects&&y.sort(F,U),this.info.render.frame++,!0===H&&pe.beginShadows();const n=_.state.shadowsArray;if(fe.render(n,e,t),!0===H&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset(),me.render(y,e),_.setupLights(S._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Je(y,e,i,i.viewport)}}else Je(y,e,t);null!==T&&(ie.updateMultisampleRenderTarget(T),ie.updateRenderTargetMipmap(T)),!0===e.isScene&&e.onAfterRender(S,e,t),Me.resetDefaultState(),A=-1,C=null,x.pop(),_=x.length>0?x[x.length-1]:null,b.pop(),y=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(e,t,n){ne.get(e.texture).__webglTexture=t,ne.get(e.depthTexture).__webglTexture=n;const i=ne.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=ne.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){T=e,w=t,E=n;let i=!0,r=null,a=!1,s=!1;if(e){const o=ne.get(e);void 0!==o.__useDefaultFramebuffer?(ee.bindFramebuffer(Ie.FRAMEBUFFER,null),i=!1):void 0===o.__webglFramebuffer?ie.setupRenderTarget(e):o.__hasExternalTextures&&ie.rebindTextures(e,ne.get(e.texture).__webglTexture,ne.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=ne.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],a=!0):r=Q.isWebGL2&&e.samples>0&&!1===ie.useMultisampledRTT(e)?ne.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,R.copy(e.viewport),L.copy(e.scissor),P=e.scissorTest}else R.copy(B).multiplyScalar(k).floor(),L.copy(V).multiplyScalar(k).floor(),P=z;const o=ee.bindFramebuffer(Ie.FRAMEBUFFER,r);if(o&&Q.drawBuffers&&i&&ee.drawBuffers(e,r),ee.viewport(R),ee.scissor(L),ee.setScissorTest(P),a){const i=ne.get(e.texture);Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=ne.get(e.texture),r=t||0;Ie.framebufferTextureLayer(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}A=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=ne.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){ee.bindFramebuffer(Ie.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==Pe&&xe.convert(o)!==Ie.getParameter(Ie.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Te&&(J.has("EXT_color_buffer_half_float")||Q.isWebGL2&&J.has("EXT_color_buffer_float"));if(l!==_e&&xe.convert(l)!==Ie.getParameter(Ie.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==Ee||!(Q.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Ie.readPixels(t,n,i,r,xe.convert(o),xe.convert(l),a)}finally{const e=null!==T?ne.get(T).__webglFramebuffer:null;ee.bindFramebuffer(Ie.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);ie.setTexture2D(t,0),Ie.copyTexSubImage2D(Ie.TEXTURE_2D,n,0,0,e.x,e.y,r,a),ee.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,a=t.image.height,s=xe.convert(n.format),o=xe.convert(n.type);ie.setTexture2D(n,0),Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,n.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?Ie.texSubImage2D(Ie.TEXTURE_2D,i,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?Ie.compressedTexSubImage2D(Ie.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):Ie.texSubImage2D(Ie.TEXTURE_2D,i,e.x,e.y,s,o,t.image),0===i&&n.generateMipmaps&&Ie.generateMipmap(Ie.TEXTURE_2D),ee.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(S.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=xe.convert(i.format),c=xe.convert(i.type);let u;if(i.isData3DTexture)ie.setTexture3D(i,0),u=Ie.TEXTURE_3D;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ie.setTexture2DArray(i,0),u=Ie.TEXTURE_2D_ARRAY}Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,i.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,i.unpackAlignment);const d=Ie.getParameter(Ie.UNPACK_ROW_LENGTH),h=Ie.getParameter(Ie.UNPACK_IMAGE_HEIGHT),p=Ie.getParameter(Ie.UNPACK_SKIP_PIXELS),f=Ie.getParameter(Ie.UNPACK_SKIP_ROWS),m=Ie.getParameter(Ie.UNPACK_SKIP_IMAGES),v=n.isCompressedTexture?n.mipmaps[0]:n.image;Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,v.width),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,v.height),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,e.min.x),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,e.min.y),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?Ie.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ie.compressedTexSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,v.data)):Ie.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,v),Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,d),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,h),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,p),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,f),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&Ie.generateMipmap(u),ee.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?ie.setTextureCube(e,0):e.isData3DTexture?ie.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ie.setTexture2DArray(e,0):ie.setTexture2D(e,0),ee.unbindTexture()},this.resetState=function(){w=0,E=0,T=null,ee.reset(),Me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return rn}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Ut?"display-p3":"srgb",t.unpackColorSpace=Xn.workingColorSpace===Bt?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===kt?Lt:Rt}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Lt?kt:Ft}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class pd extends hd{}pd.prototype.isWebGL1Renderer=!0;class fd{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Tr(e),this.near=t,this.far=n}clone(){return new fd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class md extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class vd{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=en,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=dn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const gd=new li;class yd{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)gd.fromBufferAttribute(this,t),gd.applyMatrix4(e),this.setXYZ(t,gd.x,gd.y,gd.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)gd.fromBufferAttribute(this,t),gd.applyNormalMatrix(e),this.setXYZ(t,gd.x,gd.y,gd.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)gd.fromBufferAttribute(this,t),gd.transformDirection(e),this.setXYZ(t,gd.x,gd.y,gd.z);return this}setX(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=In(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Pn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Pn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Pn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Pn(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),n=In(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),n=In(n,this.array),i=In(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=In(t,this.array),n=In(n,this.array),i=In(i,this.array),r=In(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Dr(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const _d=new li,bd=new ni,xd=new ni,Sd=new li,Md=new Ui,wd=new li,Ed=new Ri,Td=new Ui,Ad=new Fi;class Cd extends la{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ne,this.bindMatrix=new Ui,this.bindMatrixInverse=new Ui,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new di),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,wd),this.boundingBox.expandByPoint(wd)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Ri),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,wd),this.boundingSphere.expandByPoint(wd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ed.copy(this.boundingSphere),Ed.applyMatrix4(i),!1!==e.ray.intersectsSphere(Ed)&&(Td.copy(i).invert(),Ad.copy(e.ray).applyMatrix4(Td),null!==this.boundingBox&&!1===Ad.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Ad)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ni,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ne?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ie?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;bd.fromBufferAttribute(i.attributes.skinIndex,e),xd.fromBufferAttribute(i.attributes.skinWeight,e),_d.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=xd.getComponent(r);if(0!==e){const i=bd.getComponent(r);Md.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Sd.copy(_d).applyMatrix4(Md),e)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Rd extends cr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ld extends ti{constructor(e=null,t=1,n=1,i,r,a,s,o,l=pe,c=pe,u,d){super(null,a,s,o,l,c,i,r,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Pd=new Ui,Id=new Ui;class Dd{constructor(e=[],t=[]){this.uuid=dn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ui)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Ui;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const i=e[r]?e[r].matrixWorld:Id;Pd.multiplyMatrices(i,t[r]),Pd.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new Dd(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Cn(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ld(t,e,e,Pe,Ee);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Rd),this.bones.push(r),this.boneInverses.push((new Ui).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class Od extends Dr{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Nd=new Ui,kd=new Ui,Fd=[],Ud=new di,Bd=new Ui,Vd=new la,zd=new Ri;class Wd extends la{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Od(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Bd)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new di),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Nd),Ud.copy(e.boundingBox).applyMatrix4(Nd),this.boundingBox.union(Ud)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Ri),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Nd),zd.copy(e.boundingSphere).applyMatrix4(Nd),this.boundingSphere.union(zd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Vd.geometry=this.geometry,Vd.material=this.material,void 0!==Vd.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),zd.copy(this.boundingSphere),zd.applyMatrix4(n),!1!==e.ray.intersectsSphere(zd)))for(let r=0;r<i;r++){this.getMatrixAt(r,Nd),kd.multiplyMatrices(n,Nd),Vd.matrixWorld=kd,Vd.raycast(e,Fd);for(let e=0,n=Fd.length;e<n;e++){const n=Fd[e];n.instanceId=r,n.object=this,t.push(n)}Fd.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Od(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Hd extends Rr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Gd=new li,jd=new li,Xd=new Ui,qd=new Fi,$d=new Ri;class Yd extends cr{constructor(e=new Gr,t=new Hd){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Gd.fromBufferAttribute(t,e-1),jd.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Gd.distanceTo(jd);e.setAttribute("lineDistance",new kr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),$d.copy(n.boundingSphere),$d.applyMatrix4(i),$d.radius+=r,!1===e.ray.intersectsSphere($d))return;Xd.copy(i).invert(),qd.copy(e.ray).applyMatrix4(Xd);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new li,c=new li,u=new li,d=new li,h=this.isLineSegments?2:1,p=n.index,f=n.attributes,m=f.position;if(null!==p){const n=Math.max(0,a.start),i=Math.min(p.count,a.start+a.count);for(let r=n,a=i-1;r<a;r+=h){const n=p.getX(r),i=p.getX(r+1);l.fromBufferAttribute(m,n),c.fromBufferAttribute(m,i);const a=qd.distanceSqToSegment(l,c,d,u);if(a>o)continue;d.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(d);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,a.start),i=Math.min(m.count,a.start+a.count);for(let r=n,a=i-1;r<a;r+=h){l.fromBufferAttribute(m,r),c.fromBufferAttribute(m,r+1);const n=qd.distanceSqToSegment(l,c,d,u);if(n>o)continue;d.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}}const Kd=new li,Zd=new li;class Jd extends Yd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Kd.fromBufferAttribute(t,e),Zd.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Kd.distanceTo(Zd);e.setAttribute("lineDistance",new kr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Qd extends Yd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class eh extends Rr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Tr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const th=new Ui,nh=new Fi,ih=new Ri,rh=new li;class ah extends cr{constructor(e=new Gr,t=new eh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ih.copy(n.boundingSphere),ih.applyMatrix4(i),ih.radius+=r,!1===e.ray.intersectsSphere(ih))return;th.copy(i).invert(),nh.copy(e.ray).applyMatrix4(th);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes,u=c.position;if(null!==l){const n=Math.max(0,a.start),r=Math.min(l.count,a.start+a.count);for(let a=n,s=r;a<s;a++){const n=l.getX(a);rh.fromBufferAttribute(u,n),sh(rh,n,o,i,e,t,this)}}else{const n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let a=n,s=r;a<s;a++)rh.fromBufferAttribute(u,a),sh(rh,a,o,i,e,t,this)}}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}}function sh(e,t,n,i,r,a,s){const o=nh.distanceSqToPoint(e);if(o<n){const n=new li;nh.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}class oh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let s,o=0,l=r-1;while(o<=l)if(i=Math.floor(o+(l-o)/2),s=n[i]-a,s<0)o=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===a)return i/(r-1);const c=n[i],u=n[i+1],d=u-c,h=(a-c)/d,p=(i+h)/(r-1);return p}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),s=this.getPoint(r),o=t||(a.isVector2?new On:new li);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new li,i=[],r=[],a=[],s=new li,o=new Ui;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new li)}r[0]=new li,a[0]=new li;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),a[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),a[h]=a[h-1].clone(),s.crossVectors(i[h-1],i[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(hn(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(o.makeRotationAxis(s,e))}a[h].crossVectors(i[h],r[h])}if(!0===t){let t=Math.acos(hn(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class lh extends oh{constructor(e=0,t=0,n=1,i=1,r=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new On,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;while(r<0)r+=i;while(r>i)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function ch(){let e=0,t=0,n=0,i=0;function r(r,a,s,o){e=r,t=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(i-t)/(s+o)+(i-n)/o;l*=s,c*=s,r(t,n,l,c)},calc:function(r){const a=r*r,s=a*r;return e+t*r+n*a+i*s}}}const uh=new li,dh=new ch,hh=new ch,ph=new ch;class fh extends oh{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new li){const n=t,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=i[(l-1)%r]:(uh.subVectors(i[0],i[1]).add(i[0]),s=uh);const u=i[l%r],d=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(uh.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=uh),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),i=Math.pow(d.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),dh.initNonuniformCatmullRom(s.x,u.x,d.x,o.x,t,n,i),hh.initNonuniformCatmullRom(s.y,u.y,d.y,o.y,t,n,i),ph.initNonuniformCatmullRom(s.z,u.z,d.z,o.z,t,n,i)}else"catmullrom"===this.curveType&&(dh.initCatmullRom(s.x,u.x,d.x,o.x,this.tension),hh.initCatmullRom(s.y,u.y,d.y,o.y,this.tension),ph.initCatmullRom(s.z,u.z,d.z,o.z,this.tension));return n.set(dh.calc(c),hh.calc(c),ph.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new li).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}class mh extends Gr{constructor(e=1,t=1,n=1,i=32,r=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let v=0;function g(){const a=new li,g=new li;let y=0;const _=(t-e)/n;for(let l=0;l<=r;l++){const c=[],v=l/r,y=v*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*o+s,l=Math.sin(r),f=Math.cos(r);g.x=y*l,g.y=-v*n+m,g.z=y*f,u.push(g.x,g.y,g.z),a.set(l,_,f).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-v),c.push(p++)}f.push(c)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=f[t][e],i=f[t+1][e],r=f[t+1][e+1],a=f[t][e+1];c.push(n,i,a),c.push(i,r,a),y+=6}l.addGroup(v,y,0),v+=y}function y(n){const r=p,a=new On,f=new li;let g=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*_,0),d.push(0,_,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=i;e++){const t=e/i,n=t*o+s,r=Math.cos(n),l=Math.sin(n);f.x=y*l,f.y=m*_,f.z=y*r,u.push(f.x,f.y,f.z),d.push(0,_,0),a.x=.5*r+.5,a.y=.5*l*_+.5,h.push(a.x,a.y),p++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),g+=3}l.addGroup(v,g,!0===n?1:2),v+=g}g(),!1===a&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new kr(u,3)),this.setAttribute("normal",new kr(d,3)),this.setAttribute("uv",new kr(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vh extends Gr{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new li,d=new li,h=[],p=[],f=[],m=[];for(let v=0;v<=n;v++){const h=[],g=v/n;let y=0;0===v&&0===a?y=.5/t:v===n&&o===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(a+g*s),u.y=e*Math.cos(a+g*s),u.z=e*Math.sin(i+o*r)*Math.sin(a+g*s),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(o+y,1-g),h.push(l++)}c.push(h)}for(let v=0;v<n;v++)for(let e=0;e<t;e++){const t=c[v][e+1],i=c[v][e],r=c[v+1][e],s=c[v+1][e+1];(0!==v||a>0)&&h.push(t,i,s),(v!==n-1||o<Math.PI)&&h.push(i,r,s)}this.setIndex(h),this.setAttribute("position",new kr(p,3)),this.setAttribute("normal",new kr(f,3)),this.setAttribute("uv",new kr(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class gh extends Rr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Tr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dt,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yh extends gh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new On(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Tr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Tr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Tr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function _h(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function bh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xh(e){function t(t,n){return e[t]-e[n]}const n=e.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(t),i}function Sh(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,s=0;s!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r}function Mh(e,t,n,i){let r=1,a=e[0];while(void 0!==a&&void 0===a[i])a=e[r++];if(void 0===a)return;let s=a[i];if(void 0!==s)if(Array.isArray(s))do{s=a[i],void 0!==s&&(t.push(a.time),n.push.apply(n,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[i],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{s=a[i],void 0!==s&&(t.push(a.time),n.push(s)),a=e[r++]}while(void 0!==a)}class wh{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=r)){const s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}while(n<a){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let a=0;a!==i;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Eh extends wh{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:St,endingEnd:St}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case Mt:r=e,s=2*t-n;break;case wt:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Mt:a=e,o=2*n-t;break;case wt:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,v=-d*m+2*d*f-d*p,g=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,_=h*m-h*f;for(let b=0;b!==s;++b)r[b]=v*a[c+b]+g*a[l+b]+y*a[o+b]+_*a[u+b];return r}}class Th extends wh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(i-t),u=1-c;for(let d=0;d!==s;++d)r[d]=a[l+d]*u+a[o+d]*c;return r}}class Ah extends wh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ch{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_h(t,this.TimeBufferType),this.values=_h(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:_h(e.times,Array),values:_h(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Ah(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Th(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Eh(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _t:t=this.InterpolantFactoryMethodDiscrete;break;case bt:t=this.InterpolantFactoryMethodLinear;break;case xt:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _t;case this.InterpolantFactoryMethodLinear:return bt;case this.InterpolantFactoryMethodSmooth:return xt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;while(r!==i&&n[r]<e)++r;while(-1!==a&&n[a]>t)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==r;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,a),e=!1;break}a=t}if(void 0!==i&&bh(i))for(let s=0,o=i.length;s!==o;++s){const t=i[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===xt,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s],l=e[s+1];if(o!==l&&(1!==s||o!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const i=s*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,s=0;s!==n;++s)t[i+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ch.prototype.TimeBufferType=Float32Array,Ch.prototype.ValueBufferType=Float32Array,Ch.prototype.DefaultInterpolation=bt;class Rh extends Ch{}Rh.prototype.ValueTypeName="bool",Rh.prototype.ValueBufferType=Array,Rh.prototype.DefaultInterpolation=_t,Rh.prototype.InterpolantFactoryMethodLinear=void 0,Rh.prototype.InterpolantFactoryMethodSmooth=void 0;class Lh extends Ch{}Lh.prototype.ValueTypeName="color";class Ph extends Ch{}Ph.prototype.ValueTypeName="number";class Ih extends wh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(i-t);let l=e*s;for(let c=l+s;l!==c;l+=4)oi.slerpFlat(r,0,a,l-s,a,l,o);return r}}class Dh extends Ch{InterpolantFactoryMethodLinear(e){return new Ih(this.times,this.values,this.getValueSize(),e)}}Dh.prototype.ValueTypeName="quaternion",Dh.prototype.DefaultInterpolation=bt,Dh.prototype.InterpolantFactoryMethodSmooth=void 0;class Oh extends Ch{}Oh.prototype.ValueTypeName="string",Oh.prototype.ValueBufferType=Array,Oh.prototype.DefaultInterpolation=_t,Oh.prototype.InterpolantFactoryMethodLinear=void 0,Oh.prototype.InterpolantFactoryMethodSmooth=void 0;class Nh extends Ch{}Nh.prototype.ValueTypeName="vector";class kh{constructor(e,t=-1,n,i=Et){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=dn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,s=n.length;a!==s;++a)t.push(Uh(n[a]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=n.length;r!==a;++r)t.push(Ch.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let s=0;s<r;s++){let e=[],o=[];e.push((s+r-1)%r,s,(s+1)%r),o.push(0,1,0);const l=xh(e);e=Sh(e,1,l),o=Sh(o,1,l),i||0!==e[0]||(e.push(r),o.push(o[0])),a.push(new Ph(".morphTargetInfluences["+t[s].name+"]",e,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){const t=e[s],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const a=[];for(const s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],s=[];Mh(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},i=[],r=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const e=l[u].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],a=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),a.push(i.morphTarget===r?1:0)}i.push(new Ph(".morphTargetInfluence["+r+"]",t,a))}o=t.length*a}else{const r=".bones["+t[u].name+"]";n(Nh,r+".position",e,"pos",i),n(Dh,r+".quaternion",e,"rot",i),n(Nh,r+".scale",e,"scl",i)}}if(0===i.length)return null;const c=new this(r,o,i,s);return c}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Fh(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ph;case"vector":case"vector2":case"vector3":case"vector4":return Nh;case"color":return Lh;case"quaternion":return Dh;case"bool":case"boolean":return Rh;case"string":return Oh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Uh(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Fh(e.type);if(void 0===e.times){const t=[],n=[];Mh(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Bh={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Vh{constructor(e,t,n){const i=this;let r,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const zh=new Vh;class Wh{constructor(e){this.manager=void 0!==e?e:zh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Wh.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hh={};class Gh extends Error{constructor(e,t){super(e),this.response=t}}class jh extends Wh{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Bh.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==Hh[e])return void Hh[e].push({onLoad:t,onProgress:n,onError:i});Hh[e]=[],Hh[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Hh[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){function t(){i.read().then(({done:i,value:r})=>{if(i)e.close();else{o+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(r),t()}})}t()}});return new Response(l)}throw new Gh(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>{const t=new DOMParser;return t.parseFromString(e,s)});case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i,n=t.exec(s),i=n&&n[1]?n[1].toLowerCase():void 0,r=new TextDecoder(i);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{Bh.add(e,t);const n=Hh[e];delete Hh[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=Hh[e];if(void 0===n)throw this.manager.itemError(e),t;delete Hh[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Xh extends Wh{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Bh.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s=Un("img");function o(){c(),Bh.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class qh extends Wh{constructor(e){super(e)}load(e,t,n,i){const r=new ti,a=new Xh(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class $h extends cr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Tr(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const Yh=new Ui,Kh=new li,Zh=new li;class Jh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new On(512,512),this.map=null,this.mapPass=null,this.matrix=new Ui,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Da,this._frameExtents=new On(1,1),this._viewportCount=1,this._viewports=[new ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Kh.setFromMatrixPosition(e.matrixWorld),t.position.copy(Kh),Zh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Zh),t.updateMatrixWorld(),Yh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Yh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Qh extends Jh{constructor(){super(new xa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*un*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ep extends $h{constructor(e,t,n=0,i=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new Qh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tp=new Ui,np=new li,ip=new li;class rp extends Jh{constructor(){super(new xa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new On(4,2),this._viewportCount=6,this._viewports=[new ni(2,1,1,1),new ni(0,1,1,1),new ni(3,1,1,1),new ni(1,1,1,1),new ni(3,0,1,1),new ni(1,0,1,1)],this._cubeDirections=[new li(1,0,0),new li(-1,0,0),new li(0,0,1),new li(0,0,-1),new li(0,1,0),new li(0,-1,0)],this._cubeUps=[new li(0,1,0),new li(0,1,0),new li(0,1,0),new li(0,1,0),new li(0,0,1),new li(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),np.setFromMatrixPosition(e.matrixWorld),n.position.copy(np),ip.copy(n.position),ip.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ip),n.updateMatrixWorld(),i.makeTranslation(-np.x,-np.y,-np.z),tp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tp)}}class ap extends $h{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new rp}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class sp extends Jh{constructor(){super(new El(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class op extends $h{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.shadow=new sp}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class lp{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class cp extends Wh{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Bh.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){Bh.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}const up="\\[\\]\\.:\\/",dp=new RegExp("["+up+"]","g"),hp="[^"+up+"]",pp="[^"+up.replace("\\.","")+"]",fp=/((?:WC+[\/:])*)/.source.replace("WC",hp),mp=/(WCOD+)?/.source.replace("WCOD",pp),vp=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hp),gp=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hp),yp=new RegExp("^"+fp+mp+vp+gp+"$"),_p=["material","materials","bones","map"];class bp{constructor(e,t,n){const i=n||xp.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class xp{constructor(e,t,n){this.path=t,this.parsedPath=n||xp.parseTrackName(t),this.node=xp.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new xp.Composite(e,t,n):new xp(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(dp,"")}static parseTrackName(e){const t=yp.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==_p.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=xp.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xp.Composite=bp,xp.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},xp.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},xp.prototype.GetterByBindingType=[xp.prototype._getValue_direct,xp.prototype._getValue_array,xp.prototype._getValue_arrayElement,xp.prototype._getValue_toArray],xp.prototype.SetterByBindingTypeAndVersioning=[[xp.prototype._setValue_direct,xp.prototype._setValue_direct_setNeedsUpdate,xp.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xp.prototype._setValue_array,xp.prototype._setValue_array_setNeedsUpdate,xp.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xp.prototype._setValue_arrayElement,xp.prototype._setValue_arrayElement_setNeedsUpdate,xp.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xp.prototype._setValue_fromArray,xp.prototype._setValue_fromArray_setNeedsUpdate,xp.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class Sp{constructor(e,t,n=0,i=1/0){this.ray=new Fi(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Yi,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return wp(e,this,n,t),n.sort(Mp),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)wp(e[i],this,n,t);return n.sort(Mp),n}}function Mp(e,t){return e.distance-t.distance}function wp(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)wp(i[e],t,n,!0)}}class Ep extends Jd{constructor(e=10,t=10,n=4473924,i=8947848){n=new Tr(n),i=new Tr(i);const r=t/2,a=e/t,s=e/2,o=[],l=[];for(let d=0,h=0,p=-s;d<=t;d++,p+=a){o.push(-s,0,p,s,0,p),o.push(p,0,-s,p,0,s);const e=d===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new Gr;c.setAttribute("position",new kr(o,3)),c.setAttribute("color",new kr(l,3));const u=new Hd({vertexColors:!0,toneMapped:!1});super(c,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i)},8780:function(e,t,n){var i=n(1683),r=n(7136),a=n(9426);function s(e){return"function"!=typeof e.constructor||a(e)?{}:i(r(e))}e.exports=s},8843:function(e,t,n){var i=n(9315),r=n(5091),a="[object Arguments]";function s(e){return r(e)&&i(e)==a}e.exports=s},8882:function(e,t,n){var i=n(3559);function r(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}e.exports=r},8926:function(e,t,n){"use strict";n.d(t,{L:function(){return ge},D:function(){return ve}});var i=n(6768),r=n(5130),a=(n(4114),n(8111),n(1701),n(8237),n(9948)),s=n(144);function o(e,t){return{x:e.x+t.x,y:e.y+t.y}}function l(e,t){return{x:e.x-t.x,y:e.y-t.y}}function c(e,t){if("top"===e.side||"bottom"===e.side){const{side:n,align:i}=e,r="left"===i?0:"center"===i?t.width/2:"right"===i?t.width:i,a="top"===n?0:"bottom"===n?t.height:n;return o({x:r,y:a},t)}if("left"===e.side||"right"===e.side){const{side:n,align:i}=e,r="left"===n?0:"right"===n?t.width:n,a="top"===i?0:"center"===i?t.height/2:"bottom"===i?t.height:i;return o({x:r,y:a},t)}return o({x:t.width/2,y:t.height/2},t)}var u=n(8392),d=n(8306),h=n(2512);function p(e){while(e){if("fixed"===window.getComputedStyle(e).position)return!0;e=e.offsetParent}return!1}var f=n(7443),m=n(8093),v=n(3939),g=n(6455),y=n(955);const _={static:S,connected:w},b=(0,u.j)({locationStrategy:{type:[String,Function],default:"static",validator:e=>"function"===typeof e||e in _},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function x(e,t){const n=(0,s.KR)({}),r=(0,s.KR)();function o(e){r.value?.(e)}function l(e){r.value?.(e)}function c(e){r.value?.(e)}return d.ZK&&(0,a.Y)(()=>!(!t.isActive.value||!e.locationStrategy),a=>{(0,i.wB)(()=>e.locationStrategy,a),(0,s.jr)(()=>{window.removeEventListener("resize",o),visualViewport?.removeEventListener("resize",l),visualViewport?.removeEventListener("scroll",c),r.value=void 0}),window.addEventListener("resize",o,{passive:!0}),visualViewport?.addEventListener("resize",l,{passive:!0}),visualViewport?.addEventListener("scroll",c,{passive:!0}),"function"===typeof e.locationStrategy?r.value=e.locationStrategy(t,e,n)?.updateLocation:r.value=_[e.locationStrategy](t,e,n)?.updateLocation}),{contentStyles:n,updateLocation:r}}function S(){}function M(e,t){const n=(0,h.P)(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function w(e,t,n){const r=Array.isArray(e.target.value)||p(e.target.value);r&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:a,preferredOrigin:o}=(0,f.yc)(()=>{const n=(0,m.fB)(t.location,e.isRtl.value),i="overlap"===t.origin?n:"auto"===t.origin?(0,m.RM)(n):(0,m.fB)(t.origin,e.isRtl.value);return n.side===i.side&&n.align===(0,m.BN)(i).align?{preferredAnchor:(0,m.Z3)(n),preferredOrigin:(0,m.Z3)(i)}:{preferredAnchor:n,preferredOrigin:i}}),[u,d,h,_]=["minWidth","minHeight","maxWidth","maxHeight"].map(e=>(0,i.EW)(()=>{const n=parseFloat(t[e]);return isNaN(n)?1/0:n})),b=(0,i.EW)(()=>{if(Array.isArray(t.offset))return t.offset;if("string"===typeof t.offset){const e=t.offset.split(" ").map(parseFloat);return e.length<2&&e.push(0),e}return"number"===typeof t.offset?[t.offset,0]:[0,0]});let x=!1,S=-1;const w=new f.CZ(4),A=new ResizeObserver(()=>{if(!x)return;if(requestAnimationFrame(e=>{e!==S&&w.clear(),requestAnimationFrame(e=>{S=e})}),w.isFull){const e=w.values();if((0,f.bD)(e.at(-1),e.at(-3))&&!(0,f.bD)(e.at(-1),e.at(-2)))return}const e=R();e&&w.push(e.flipped)});let C=new y.az({x:0,y:0,width:0,height:0});function R(){if(x=!1,requestAnimationFrame(()=>x=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(C=(0,y.Li)(e.target.value));const t=M(e.contentEl.value,e.isRtl.value),i=(0,v.Rd)(e.contentEl.value),r=12;i.length||(i.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(t.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),t.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const s=i.reduce((e,t)=>{const n=(0,y.Qm)(t);return e?new y.az({x:Math.max(e.left,n.left),y:Math.max(e.top,n.top),width:Math.min(e.right,n.right)-Math.max(e.left,n.left),height:Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)}):n},void 0);s.x+=r,s.y+=r,s.width-=2*r,s.height-=2*r;let p={anchor:a.value,origin:o.value};function S(e){const n=new y.az(t),i=c(e.anchor,C),r=c(e.origin,n);let{x:a,y:o}=l(i,r);switch(e.anchor.side){case"top":o-=b.value[0];break;case"bottom":o+=b.value[0];break;case"left":a-=b.value[0];break;case"right":a+=b.value[0];break}switch(e.anchor.align){case"top":o-=b.value[1];break;case"bottom":o+=b.value[1];break;case"left":a-=b.value[1];break;case"right":a+=b.value[1];break}n.x+=a,n.y+=o,n.width=Math.min(n.width,h.value),n.height=Math.min(n.height,_.value);const u=(0,y.vJ)(n,s);return{overflows:u,x:a,y:o}}let w=0,A=0;const R={x:0,y:0},L={x:!1,y:!1};let P=-1;while(1){if(P++>10){(0,g.yA)("Infinite loop detected in connectedLocationStrategy");break}const{x:e,y:n,overflows:i}=S(p);w+=e,A+=n,t.x+=e,t.y+=n;{const e=(0,m.C3)(p.anchor),t=i.x.before||i.x.after,n=i.y.before||i.y.after;let r=!1;if(["x","y"].forEach(a=>{if("x"===a&&t&&!L.x||"y"===a&&n&&!L.y){const t={anchor:{...p.anchor},origin:{...p.origin}},n="x"===a?"y"===e?m.BN:m.RM:"y"===e?m.RM:m.BN;t.anchor=n(t.anchor),t.origin=n(t.origin);const{overflows:s}=S(t);(s[a].before<=i[a].before&&s[a].after<=i[a].after||s[a].before+s[a].after<(i[a].before+i[a].after)/2)&&(p=t,r=L[a]=!0)}}),r)continue}i.x.before&&(w+=i.x.before,t.x+=i.x.before),i.x.after&&(w-=i.x.after,t.x-=i.x.after),i.y.before&&(A+=i.y.before,t.y+=i.y.before),i.y.after&&(A-=i.y.after,t.y-=i.y.after);{const e=(0,y.vJ)(t,s);R.x=s.width-e.x.before-e.x.after,R.y=s.height-e.y.before-e.y.after,w+=e.x.before,t.x+=e.x.before,A+=e.y.before,t.y+=e.y.before}break}const I=(0,m.C3)(p.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${p.anchor.side} ${p.anchor.align}`,transformOrigin:`${p.origin.side} ${p.origin.align}`,top:(0,f.Dg)(E(A)),left:e.isRtl.value?void 0:(0,f.Dg)(E(w)),right:e.isRtl.value?(0,f.Dg)(E(-w)):void 0,minWidth:(0,f.Dg)("y"===I?Math.min(u.value,C.width):u.value),maxWidth:(0,f.Dg)(T((0,f.qE)(R.x,u.value===1/0?0:u.value,h.value))),maxHeight:(0,f.Dg)(T((0,f.qE)(R.y,d.value===1/0?0:d.value,_.value)))}),{available:R,contentBox:t,flipped:L}}return(0,i.wB)(e.target,(e,t)=>{t&&!Array.isArray(t)&&A.unobserve(t),Array.isArray(e)?(0,f.bD)(e,t)||R():e&&A.observe(e)},{immediate:!0}),(0,i.wB)(e.contentEl,(e,t)=>{t&&A.unobserve(t),e&&A.observe(e)},{immediate:!0}),(0,s.jr)(()=>{A.disconnect()}),(0,i.wB)(()=>[a.value,o.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>R()),(0,i.dY)(()=>{const e=R();if(!e)return;const{available:t,contentBox:n}=e;n.height>t.y&&requestAnimationFrame(()=>{R(),requestAnimationFrame(()=>{R()})})}),{updateLocation:R}}function E(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function T(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}n(116),n(7588),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);let A=!0;const C=[];function R(e){!A||C.length?(C.push(e),P()):(A=!1,e(),P())}let L=-1;function P(){cancelAnimationFrame(L),L=requestAnimationFrame(()=>{const e=C.shift();e&&e(),C.length?P():A=!0})}const I={none:null,close:N,block:k,reposition:F},D=(0,u.j)({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"===typeof e||e in I}},"VOverlay-scroll-strategies");function O(e,t){if(!d.ZK)return;let n;(0,i.nT)(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=(0,s.uY)(),await new Promise(e=>setTimeout(e)),n.active&&n.run(()=>{"function"===typeof e.scrollStrategy?e.scrollStrategy(t,e,n):I[e.scrollStrategy]?.(t,e,n)}))}),(0,s.jr)(()=>{n?.stop()})}function N(e){function t(t){e.isActive.value=!1}B(U(e.target.value,e.contentEl.value),t)}function k(e,t){const n=e.root.value?.offsetParent,i=U(e.target.value,e.contentEl.value),r=[...new Set([...(0,v.Rd)(i,t.contained?n:void 0),...(0,v.Rd)(e.contentEl.value,t.contained?n:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,o=(e=>(0,v.D_)(e)&&e)(n||document.documentElement);o&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((e,t)=>{e.style.setProperty("--v-body-scroll-x",(0,f.Dg)(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",(0,f.Dg)(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",(0,f.Dg)(a)),e.classList.add("v-overlay-scroll-blocked")}),(0,s.jr)(()=>{r.forEach((e,t)=>{const n=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),i=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),r=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-n,e.scrollTop=-i,e.style.scrollBehavior=r}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function F(e,t,n){let i=!1,r=-1,a=-1;function o(t){R(()=>{const n=performance.now();e.updateLocation.value?.(t);const r=performance.now()-n;i=r/(1e3/60)>2})}a=("undefined"===typeof requestIdleCallback?e=>e():requestIdleCallback)(()=>{n.run(()=>{B(U(e.target.value,e.contentEl.value),e=>{i?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{o(e)})})):o(e)})})}),(0,s.jr)(()=>{"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(a),cancelAnimationFrame(r)})}function U(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(e=>!t?.contains(e)):e??t}function B(e,t){const n=[document,...(0,v.Rd)(e)];n.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),(0,s.jr)(()=>{n.forEach(e=>{e.removeEventListener("scroll",t)})})}var V=n(9091),z=n(9491),W=n(3398);const H=new WeakMap;function G(e,t){Object.keys(t).forEach(n=>{if((0,f.Mp)(n)){const i=(0,f.eq)(n),r=H.get(e);if(null==t[n])r?.forEach(t=>{const[n,a]=t;n===i&&(e.removeEventListener(i,a),r.delete(t))});else if(!r||![...r]?.some(e=>e[0]===i&&e[1]===t[n])){e.addEventListener(i,t[n]);const a=r||new Set;a.add([i,t[n]]),H.has(e)||H.set(e,a)}}else null==t[n]?e.removeAttribute(n):e.setAttribute(n,t[n])})}function j(e,t){Object.keys(t).forEach(t=>{if((0,f.Mp)(t)){const n=(0,f.eq)(t),i=H.get(e);i?.forEach(t=>{const[r,a]=t;r===n&&(e.removeEventListener(n,a),i.delete(t))})}else e.removeAttribute(t)})}const X=(0,u.j)({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...(0,z.e)()},"VOverlay-activator");function q(e,t){let{isActive:n,isTop:r,contentEl:a}=t;const o=(0,W.n)("useActivator"),l=(0,s.KR)();let c=!1,u=!1,h=!0;const p=(0,i.EW)(()=>e.openOnFocus||null==e.openOnFocus&&e.openOnHover),m=(0,i.EW)(()=>e.openOnClick||null==e.openOnClick&&!e.openOnHover&&!p.value),{runOpenDelay:v,runCloseDelay:g}=(0,z.Z)(e,t=>{t!==(e.openOnHover&&c||p.value&&u)||e.openOnHover&&n.value&&!r.value||(n.value!==t&&(h=!0),n.value=t)}),y=(0,s.KR)(),_={onClick:e=>{e.stopPropagation(),l.value=e.currentTarget||e.target,n.value||(y.value=[e.clientX,e.clientY]),n.value=!n.value},onMouseenter:e=>{e.sourceCapabilities?.firesTouchEvents||(c=!0,l.value=e.currentTarget||e.target,v())},onMouseleave:e=>{c=!1,g()},onFocus:e=>{!1!==(0,f.B5)(e.target,":focus-visible")&&(u=!0,e.stopPropagation(),l.value=e.currentTarget||e.target,v())},onBlur:e=>{u=!1,e.stopPropagation(),g()}},b=(0,i.EW)(()=>{const t={};return m.value&&(t.onClick=_.onClick),e.openOnHover&&(t.onMouseenter=_.onMouseenter,t.onMouseleave=_.onMouseleave),p.value&&(t.onFocus=_.onFocus,t.onBlur=_.onBlur),t}),x=(0,i.EW)(()=>{const t={};if(e.openOnHover&&(t.onMouseenter=()=>{c=!0,v()},t.onMouseleave=()=>{c=!1,g()}),p.value&&(t.onFocusin=()=>{u=!0,v()},t.onFocusout=()=>{u=!1,g()}),e.closeOnContentClick){const e=(0,i.WQ)(V.S,null);t.onClick=()=>{n.value=!1,e?.closeParents()}}return t}),S=(0,i.EW)(()=>{const t={};return e.openOnHover&&(t.onMouseenter=()=>{h&&(c=!0,h=!1,v())},t.onMouseleave=()=>{c=!1,g()}),t});(0,i.wB)(r,t=>{!t||(!e.openOnHover||c||p.value&&u)&&(!p.value||u||e.openOnHover&&c)||a.value?.contains(document.activeElement)||(n.value=!1)}),(0,i.wB)(n,e=>{e||setTimeout(()=>{y.value=void 0})},{flush:"post"});const M=(0,f.m)();(0,i.nT)(()=>{M.value&&(0,i.dY)(()=>{l.value=M.el})});const w=(0,f.m)(),E=(0,i.EW)(()=>"cursor"===e.target&&y.value?y.value:w.value?w.el:Y(e.target,o)||l.value),T=(0,i.EW)(()=>Array.isArray(E.value)?void 0:E.value);let A;return(0,i.wB)(()=>!!e.activator,t=>{t&&d.ZK?(A=(0,s.uY)(),A.run(()=>{$(e,o,{activatorEl:l,activatorEvents:b})})):A&&A.stop()},{flush:"post",immediate:!0}),(0,s.jr)(()=>{A?.stop()}),{activatorEl:l,activatorRef:M,target:E,targetEl:T,targetRef:w,activatorEvents:b,contentEvents:x,scrimEvents:S}}function $(e,t,n){let{activatorEl:r,activatorEvents:a}=n;function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&G(t,(0,i.v6)(a.value,n))}function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&j(t,(0,i.v6)(a.value,n))}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.activator;const i=Y(n,t);return r.value=i?.nodeType===Node.ELEMENT_NODE?i:void 0,r.value}(0,i.wB)(()=>e.activator,(e,t)=>{if(t&&e!==t){const e=c(t);e&&l(e)}e&&(0,i.dY)(()=>o())},{immediate:!0}),(0,i.wB)(()=>e.activatorProps,()=>{o()}),(0,s.jr)(()=>{l()})}function Y(e,t){if(!e)return;let n;if("parent"===e){let e=t?.proxy?.$el?.parentNode;while(e?.hasAttribute("data-no-activator"))e=e.parentNode;n=e}else n="string"===typeof e?document.querySelector(e):"$el"in e?e.$el:e;return n}var K=n(5043),Z=n(7579),J=n(3627),Q=n(7890),ee=n(7400),te=n(2046),ne=n(8432),ie=n(7911),re=n(6349);const ae=Symbol.for("vuetify:stack"),se=(0,s.Kh)([]);function oe(e,t,n){const r=(0,W.n)("useStack"),o=!n,l=(0,i.WQ)(ae,void 0),c=(0,s.Kh)({activeChildren:new Set});(0,i.Gt)(ae,c);const u=(0,s.IJ)(Number((0,s.BA)(t)));(0,a.Y)(e,()=>{const e=se.at(-1)?.[1];u.value=e?e+10:Number((0,s.BA)(t)),o&&se.push([r.uid,u.value]),l?.activeChildren.add(r.uid),(0,s.jr)(()=>{if(o){const e=(0,s.ux)(se).findIndex(e=>e[0]===r.uid);se.splice(e,1)}l?.activeChildren.delete(r.uid)})});const d=(0,s.IJ)(!0);o&&(0,i.nT)(()=>{const e=se.at(-1)?.[0]===r.uid;setTimeout(()=>d.value=e)});const h=(0,s.lW)(()=>!c.activeChildren.size);return{globalTop:(0,s.tB)(d),localTop:h,stackStyles:(0,s.lW)(()=>({zIndex:u.value}))}}function le(e){const t=(0,i.EW)(()=>{const t=e();if(!0===t||!d.ZK)return;const n=!1===t?document.body:"string"===typeof t?document.querySelector(t):t;if(null==n)return void(0,i.R8)(`Unable to locate target ${t}`);let r=[...n.children].find(e=>e.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",n.appendChild(r)),r});return{teleportTarget:t}}var ce=n(2225),ue=n(5937),de=n(1397),he=n(4396),pe=n(1101),fe=n(5081);function me(e){const{modelValue:t,color:n,...a}=e;return(0,i.bF)(r.eB,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&(0,i.Lk)("div",(0,i.v6)({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const ve=(0,u.j)({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...X(),...(0,Z.u)(),...(0,J.X)(),...(0,ee.f)(),...b(),...D(),...(0,ce.yx)(),...(0,ue.m)()},"VOverlay"),ge=(0,he.RW)()({name:"VOverlay",directives:{vClickOutside:de.A},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...ve()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:o,emit:l}=t;const c=(0,W.n)("VOverlay"),u=(0,s.KR)(),p=(0,s.KR)(),m=(0,s.KR)(),g=(0,ne.q)(e,"modelValue"),y=(0,i.EW)({get:()=>g.value,set:t=>{t&&e.disabled||(g.value=t)}}),{themeClasses:_}=(0,ce.NX)(e),{rtlClasses:b,isRtl:S}=(0,te.IA)(),{hasContent:M,onAfterLeave:w}=(0,ee._)(e,y),E=(0,K.z6)(()=>"string"===typeof e.scrim?e.scrim:null),{globalTop:T,localTop:A,stackStyles:C}=oe(y,()=>e.zIndex,e._disableGlobalStack),{activatorEl:R,activatorRef:L,target:P,targetEl:I,targetRef:D,activatorEvents:N,contentEvents:k,scrimEvents:F}=q(e,{isActive:y,isTop:A,contentEl:m}),{teleportTarget:U}=le(()=>{const t=e.attach||e.contained;if(t)return t;const n=R?.value?.getRootNode()||c.proxy?.$el?.getRootNode();return n instanceof ShadowRoot&&n}),{dimensionStyles:B}=(0,J.S)(e),V=(0,Q.S)(),{scopeId:z}=(0,re.b)();(0,i.wB)(()=>e.disabled,e=>{e&&(y.value=!1)});const{contentStyles:H,updateLocation:G}=x(e,{isRtl:S,contentEl:m,target:P,isActive:y});function j(t){l("click:outside",t),e.persistent?se():y.value=!1}function X(t){return y.value&&T.value&&(!e.scrim||t.target===p.value||t instanceof MouseEvent&&t.shadowTarget===p.value)}function $(t){"Escape"===t.key&&T.value&&(m.value?.contains(document.activeElement)||l("keydown",t),e.persistent?se():(y.value=!1,m.value?.contains(document.activeElement)&&R.value?.focus()))}function Y(e){("Escape"!==e.key||T.value)&&l("keydown",e)}O(e,{root:u,contentEl:m,targetEl:I,target:P,isActive:y,updateLocation:G}),d.ZK&&(0,i.wB)(y,e=>{e?window.addEventListener("keydown",$):window.removeEventListener("keydown",$)},{immediate:!0}),(0,i.xo)(()=>{d.ZK&&window.removeEventListener("keydown",$)});const Z=(0,ie.rd)();(0,a.Y)(()=>e.closeOnBack,()=>{(0,ie.zE)(Z,t=>{T.value&&y.value?(t(!1),e.persistent?se():y.value=!1):t()})});const ae=(0,s.KR)();function se(){e.noClickAnimation||m.value&&(0,h.i)(m.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:pe.B2})}function he(){l("afterEnter")}function ve(){w(),l("afterLeave")}return(0,i.wB)(()=>y.value&&(e.absolute||e.contained)&&null==U.value,e=>{if(e){const e=(0,v.mH)(u.value);e&&e!==document.scrollingElement&&(ae.value=e.scrollTop)}}),(0,fe.C)(()=>(0,i.Lk)(i.FK,null,[n.activator?.({isActive:y.value,targetRef:D,props:(0,i.v6)({ref:L},N.value,e.activatorProps)}),V.value&&M.value&&(0,i.bF)(i.Im,{disabled:!U.value,to:U.value},{default:()=>[(0,i.Lk)("div",(0,i.v6)({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":y.value,"v-overlay--contained":e.contained},_.value,b.value,e.class],style:[C.value,{"--v-overlay-opacity":e.opacity,top:(0,f.Dg)(ae.value)},e.style],ref:u,onKeydown:Y},z,o),[(0,i.bF)(me,(0,i.v6)({color:E,modelValue:y.value&&!!e.scrim,ref:p},F.value),null),(0,i.bF)(ue.M,{appear:!0,persisted:!0,transition:e.transition,target:P.value,onAfterEnter:he,onAfterLeave:ve},{default:()=>[(0,i.bo)((0,i.Lk)("div",(0,i.v6)({ref:m,class:["v-overlay__content",e.contentClass],style:[B.value,H.value]},k.value,e.contentProps),[n.default?.({isActive:y})]),[[r.aG,y.value],[de.A,{handler:j,closeConditional:X,include:()=>[R.value]}]])]})])]})])),{activatorEl:R,scrimEl:p,target:P,animateClick:se,contentEl:m,globalTop:T,localTop:A,updateLocation:G}}})},8981:function(e,t,n){"use strict";var i=n(7750),r=Object;e.exports=function(e){return r(i(e))}},8987:function(e,t,n){var i=n(3238),r=n(8659),a=n(8465);function s(e){return a(e)?i(e):r(e)}e.exports=s},9039:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},9065:function(e){function t(){this.__data__=[],this.size=0}e.exports=t},9091:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});const i=Symbol.for("vuetify:v-menu")},9136:function(e,t,n){n(4114);var i=n(9692),r=n(9426),a=n(7250),s=Object.prototype,o=s.hasOwnProperty;function l(e){if(!i(e))return a(e);var t=r(e),n=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&n.push(s);return n}e.exports=l},9143:function(e,t,n){"use strict";var i=n(4576),r=n(9504),a=n(3972),s=n(3463),o=n(9297),l=n(2804),c=n(944),u=n(5169),d=l.c2i,h=l.c2iUrl,p=i.SyntaxError,f=i.TypeError,m=r("".charAt),v=function(e,t){for(var n=e.length;t<n;t++){var i=m(e,t);if(" "!==i&&"\t"!==i&&"\n"!==i&&"\f"!==i&&"\r"!==i)break}return t},g=function(e,t,n){var i=e.length;i<4&&(e+=2===i?"AA":"A");var r=(t[m(e,0)]<<18)+(t[m(e,1)]<<12)+(t[m(e,2)]<<6)+t[m(e,3)],a=[r>>16&255,r>>8&255,255&r];if(2===i){if(n&&0!==a[1])throw new p("Extra bits");return[a[0]]}if(3===i){if(n&&0!==a[2])throw new p("Extra bits");return[a[0],a[1]]}return a},y=function(e,t,n){for(var i=t.length,r=0;r<i;r++)e[n+r]=t[r];return n+i};e.exports=function(e,t,n,i){s(e),a(t);var r="base64"===c(t)?d:h,l=t?t.lastChunkHandling:void 0;if(void 0===l&&(l="loose"),"loose"!==l&&"strict"!==l&&"stop-before-partial"!==l)throw new f("Incorrect `lastChunkHandling` option");n&&u(n.buffer);var _=e.length,b=n||[],x=0,S=0,M="",w=0;if(i)while(1){if(w=v(e,w),w===_){if(M.length>0){if("stop-before-partial"===l)break;if("loose"!==l)throw new p("Missing padding");if(1===M.length)throw new p("Malformed padding: exactly one additional character");x=y(b,g(M,r,!1),x)}S=_;break}var E=m(e,w);if(++w,"="===E){if(M.length<2)throw new p("Padding is too early");if(w=v(e,w),2===M.length){if(w===_){if("stop-before-partial"===l)break;throw new p("Malformed padding: only one =")}"="===m(e,w)&&(++w,w=v(e,w))}if(w<_)throw new p("Unexpected character after padding");x=y(b,g(M,r,"strict"===l),x),S=_;break}if(!o(r,E))throw new p("Unexpected character");var T=i-x;if(1===T&&2===M.length||2===T&&3===M.length)break;if(M+=E,4===M.length&&(x=y(b,g(M,r,!1),x),M="",S=w,x===i))break}return{bytes:b,read:S,written:x}}},9231:function(e,t,n){var i=n(6817),r=n(5091);function a(e,t,n,s,o){return e===t||(null==e||null==t||!r(e)&&!r(t)?e!==e&&t!==t:i(e,t,n,s,a,o))}e.exports=a},9276:function(e,t,n){var i=n(6636);function r(e){return i(this,e).has(e)}e.exports=r},9283:function(e,t,n){"use strict";n.d(t,{y:function(){return f}});var i=n(6768),r=n(8926),a=n(6315),s=n(8432),o=n(6349),l=n(144),c=n(8392),u=n(7443),d=n(4396),h=n(5081);const p=(0,c.j)({id:String,interactive:Boolean,text:String,...(0,u.cJ)((0,r.D)({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),f=(0,d.RW)()({name:"VTooltip",props:p(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const c=(0,s.q)(e,"modelValue"),{scopeId:u}=(0,o.b)(),d=(0,i.Bi)(),p=(0,l.lW)(()=>e.id||`v-tooltip-${d}`),f=(0,l.KR)(),m=(0,i.EW)(()=>e.location.split(" ").length>1?e.location:e.location+" center"),v=(0,i.EW)(()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),g=(0,l.lW)(()=>null!=e.transition?e.transition:c.value?"scale-transition":"fade-transition"),y=(0,i.EW)(()=>(0,i.v6)({"aria-describedby":p.value},e.activatorProps));return(0,h.C)(()=>{const t=r.L.filterProps(e);return(0,i.bF)(r.L,(0,i.v6)({ref:f,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:p.value},t,{modelValue:c.value,"onUpdate:modelValue":e=>c.value=e,transition:g.value,absolute:!0,location:m.value,origin:v.value,persistent:!0,role:"tooltip",activatorProps:y.value,_disableGlobalStack:!0},u),{activator:n.activator,default:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n.default?.(...i)??e.text}})}),(0,a.O)({},f)}})},9286:function(e,t,n){"use strict";var i=n(4402),r=n(8469),a=i.Set,s=i.add;e.exports=function(e){var t=new a;return r(e,function(e){s(t,e)}),t}},9297:function(e,t,n){"use strict";var i=n(9504),r=n(8981),a=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(r(e),t)}},9306:function(e,t,n){"use strict";var i=n(4901),r=n(6823),a=TypeError;e.exports=function(e){if(i(e))return e;throw new a(r(e)+" is not a function")}},9315:function(e,t,n){var i=n(7874),r=n(38),a=n(5677),s="[object Null]",o="[object Undefined]",l=i?i.toStringTag:void 0;function c(e){return null==e?void 0===e?o:s:l&&l in Object(e)?r(e):a(e)}e.exports=c},9386:function(e,t,n){var i=n(6061);function r(e,t){var n=e.length;while(n--)if(i(e[n][0],t))return n;return-1}e.exports=r},9426:function(e){var t=Object.prototype;function n(e){var n=e&&e.constructor,i="function"==typeof n&&n.prototype||t;return e===i}e.exports=n},9429:function(e,t,n){"use strict";var i=n(4576),r=n(6193);e.exports=function(e){if(r){try{return i.process.getBuiltinModule(e)}catch(t){}try{return Function('return require("'+e+'")')()}catch(t){}}}},9433:function(e,t,n){"use strict";var i=n(4576),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},9462:function(e,t,n){"use strict";var i=n(9565),r=n(2360),a=n(6699),s=n(6279),o=n(8227),l=n(1181),c=n(5966),u=n(7657).IteratorPrototype,d=n(2529),h=n(9539),p=n(1385),f=o("toStringTag"),m="IteratorHelper",v="WrapForValidIterator",g="normal",y="throw",_=l.set,b=function(e){var t=l.getterFor(e?v:m);return s(r(u),{next:function(){var n=t(this);if(e)return n.nextHandler();if(n.done)return d(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:d(i,n.done)}catch(r){throw n.done=!0,r}},return:function(){var n=t(this),r=n.iterator;if(n.done=!0,e){var a=c(r,"return");return a?i(a,r):d(void 0,!0)}if(n.inner)try{h(n.inner.iterator,g)}catch(s){return h(r,y,s)}if(n.openIters)try{p(n.openIters,g)}catch(s){return h(r,y,s)}return r&&h(r,g),d(void 0,!0)}})},x=b(!0),S=b(!1);a(S,f,"Iterator Helper"),e.exports=function(e,t,n){var i=function(i,r){r?(r.iterator=i.iterator,r.next=i.next):r=i,r.type=t?v:m,r.returnHandlerResult=!!n,r.nextHandler=e,r.counter=0,r.done=!1,_(this,r)};return i.prototype=t?x:S,i}},9476:function(e){function t(e){return function(t,n,i){var r=-1,a=Object(t),s=i(t),o=s.length;while(o--){var l=s[e?o:++r];if(!1===n(a[l],l,a))break}return t}}e.exports=t},9486:function(e,t,n){"use strict";var i=n(6518),r=n(4576),a=n(9504),s=n(3972),o=n(4154),l=n(5169),c=n(2804),u=n(944),d=c.i2c,h=c.i2cUrl,p=a("".charAt),f=r.Uint8Array,m=!f||!f.prototype.toBase64||!function(){try{var e=new f;e.toBase64(null)}catch(t){return!0}}();f&&i({target:"Uint8Array",proto:!0,forced:m},{toBase64:function(){var e=o(this),t=arguments.length?s(arguments[0]):void 0,n="base64"===u(t)?d:h,i=!!t&&!!t.omitPadding;l(this.buffer);for(var r,a="",c=0,f=e.length,m=function(e){return p(n,r>>6*e&63)};c+2<f;c+=3)r=(e[c]<<16)+(e[c+1]<<8)+e[c+2],a+=m(3)+m(2)+m(1)+m(0);return c+2===f?(r=(e[c]<<16)+(e[c+1]<<8),a+=m(3)+m(2)+m(1)+(i?"":"=")):c+1===f&&(r=e[c]<<16,a+=m(3)+m(2)+(i?"":"==")),a}})},9491:function(e,t,n){"use strict";n.d(t,{Z:function(){return s},e:function(){return a}});var i=n(7443),r=n(8392);const a=(0,r.j)({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function s(e,t){let n=()=>{};function r(r){n?.();const a=Number(r?e.openDelay:e.closeDelay);return new Promise(e=>{n=(0,i.v6)(a,()=>{t?.(r),e(r)})})}function a(){return r(!0)}function s(){return r(!1)}return{clearDelay:n,runOpenDelay:a,runCloseDelay:s}}},9496:function(e,t,n){var i=n(9386);function r(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}e.exports=r},9504:function(e,t,n){"use strict";var i=n(616),r=Function.prototype,a=r.call,s=i&&r.bind.bind(a,a);e.exports=i?s:function(e){return function(){return a.apply(e,arguments)}}},9519:function(e,t,n){"use strict";var i,r,a=n(4576),s=n(2839),o=a.process,l=a.Deno,c=o&&o.versions||l&&l.version,u=c&&c.v8;u&&(i=u.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(i=s.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),e.exports=r},9531:function(e,t,n){var i=n(1976),r=n(8619);function a(e,t){var n=r(e,t);return i(n)?n:void 0}e.exports=a},9539:function(e,t,n){"use strict";var i=n(9565),r=n(8551),a=n(5966);e.exports=function(e,t,n){var s,o;r(e);try{if(s=a(e,"return"),!s){if("throw"===t)throw n;return n}s=i(s,e)}catch(l){o=!0,s=l}if("throw"===t)throw n;if(o)throw s;return r(s),n}},9562:function(e,t,n){var i=n(658),r=n(4276),a=n(770),s=a&&a.isTypedArray,o=s?r(s):i;e.exports=o},9565:function(e,t,n){"use strict";var i=n(616),r=Function.prototype.call;e.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},9577:function(e,t,n){"use strict";var i=n(9928),r=n(4644),a=n(1108),s=n(1291),o=n(5854),l=r.aTypedArray,c=r.getTypedArrayConstructor,u=r.exportTypedArrayMethod,d=function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}(),h=d&&function(){try{new Int8Array(1)["with"](-.5,1)}catch(e){return!0}}();u("with",{with:function(e,t){var n=l(this),r=s(e),u=a(n)?o(t):+t;return i(n,c(n),r,u)}}["with"],!d||h)},9617:function(e,t,n){"use strict";var i=n(5397),r=n(5610),a=n(6198),s=function(e){return function(t,n,s){var o=i(t),l=a(o);if(0===l)return!e&&-1;var c,u=r(s,l);if(e&&n!==n){while(l>u)if(c=o[u++],c!==c)return!0}else for(;l>u;u++)if((e||u in o)&&o[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},9631:function(e,t,n){"use strict";n(9486)},9692:function(e){function t(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=t},9765:function(e,t,n){var i=n(4794),r=n(1643),a=n(8728),s=n(5522),o=n(8780),l=n(5219),c=n(5366),u=n(5390),d=n(317),h=n(4823),p=n(9692),f=n(712),m=n(9562),v=n(3227),g=n(2911);function y(e,t,n,y,_,b,x){var S=v(e,n),M=v(t,n),w=x.get(M);if(w)i(e,n,w);else{var E=b?b(S,M,n+"",e,t,x):void 0,T=void 0===E;if(T){var A=c(M),C=!A&&d(M),R=!A&&!C&&m(M);E=M,A||C||R?c(S)?E=S:u(S)?E=s(S):C?(T=!1,E=r(M,!0)):R?(T=!1,E=a(M,!0)):E=[]:f(M)||l(M)?(E=S,l(S)?E=g(S):p(S)&&!h(S)||(E=o(M))):T=!1}T&&(x.set(M,E),_(E,M,y,b,x),x["delete"](M)),i(e,n,E)}}e.exports=y},9797:function(e,t,n){"use strict";n(4226)},9804:function(e,t,n){var i=n(9386);function r(e){return i(this.__data__,e)>-1}e.exports=r},9835:function(e){"use strict";e.exports=function(e){try{var t=new Set,n={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return t.clear(),t.add(4),function(){return{done:!0}}}})}},i=t[e](n);return 1===i.size&&4===i.values().next().value}catch(r){return!1}}},9851:function(e){var t=9007199254740991;function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}e.exports=n},9889:function(e,t,n){var i=n(5556);function r(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}e.exports=r},9915:function(e,t,n){var i=n(4391),r=n(7770),a=Object.prototype,s=a.propertyIsEnumerable,o=Object.getOwnPropertySymbols,l=o?function(e){return null==e?[]:(e=Object(e),i(o(e),function(t){return s.call(e,t)}))}:r;e.exports=l},9928:function(e,t,n){"use strict";var i=n(6198),r=n(1291),a=RangeError;e.exports=function(e,t,n,s){var o=i(e),l=r(n),c=l<0?o+l:l;if(c>=o||c<0)throw new a("Incorrect index");for(var u=new t(o),d=0;d<o;d++)u[d]=d===c?s:e[d];return u}},9948:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i=n(6768),r=n(144);function a(e,t){let n;function a(){n=(0,r.uY)(),n.run(()=>t.length?t(()=>{n?.stop(),a()}):t())}(0,i.wB)(e,e=>{e&&!n?a():e||(n?.stop(),n=void 0)},{immediate:!0}),(0,r.jr)(()=>{n?.stop()})}}}]);
//# sourceMappingURL=chunk-vendors.39b3916d.js.map