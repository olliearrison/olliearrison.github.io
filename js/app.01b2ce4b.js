(function(){"use strict";var e={4358:function(e,t,n){var i=n(9242),o=n(3396);const a={id:"app"};function s(e,t,n,i,s,r){const l=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(l)])}var r={name:"App"},l=n(89);const d=(0,l.Z)(r,[["render",s]]);var c=d,u=(n(9773),n(8727)),h=n(3447),m=n(8600),g=n(2483);const p=e=>((0,o.dD)("data-v-7a2105e2"),e=e(),(0,o.Cn)(),e),w=p((()=>(0,o._)("h1",null,"Ollie Arrison Portfolio",-1))),f=["src"],v=["src"],y=p((()=>(0,o._)("footer",null,[(0,o._)("p",null,"Â© 2023. All rights reserved.")],-1)));function x(e,t,n,i,a,s){const r=(0,o.up)("router-link"),l=(0,o.up)("v-card-title"),d=(0,o.up)("v-card-text"),c=(0,o.up)("v-card"),u=(0,o.up)("v-col"),h=(0,o.up)("v-row"),m=(0,o.up)("v-container");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("header",null,[w,(0,o._)("nav",null,[(0,o._)("ul",null,[(0,o._)("li",null,[(0,o.Wm)(r,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(r,{to:"/sura-demo"},{default:(0,o.w5)((()=>[(0,o.Uk)("SURA Research Demo")])),_:1})])])])]),(0,o._)("main",null,[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"headline"},{default:(0,o.w5)((()=>[(0,o.Uk)("SURA")])),_:1}),(0,o._)("iframe",{width:"560",height:"315",src:a.video1,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,f),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" This was the project I completed for my Summer Undergraduate Research Apprenticeship. This application enables users to seemlessly blend 2D and 3D animation techniques. ")])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"headline"},{default:(0,o.w5)((()=>[(0,o.Uk)("Procreate 112 ")])),_:1}),(0,o._)("iframe",{width:"560",height:"315",src:a.video2,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,v),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" This application was based on ProCreate, a drawing software I frequently use. I created this for my 15-112 term project, and it received first place at the showcase. ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),y])}var k={data(){return{video1:"https://www.youtube.com/embed/kbTDAeA7Vwo",video2:"https://www.youtube.com/embed/BWXgj853jWI?si=alCqZqZwd2kL5UkU"}}};const C=(0,l.Z)(k,[["render",x],["__scopeId","data-v-7a2105e2"]]);var _=C;const W={id:"arcballContainer"};function b(e,t,n,i,a,s){const r=(0,o.up)("UserInput"),l=(0,o.up)("DrawingInput"),d=(0,o.up)("GridBackground"),c=(0,o.up)("Arcball");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r),(0,o.Wm)(l),(0,o.Wm)(d,{"camera-position":a.camera.position,"camera-angle":a.camera.angle},null,8,["camera-position","camera-angle"]),(0,o._)("div",W,[(0,o.Wm)(c,{ref:"arcball","camera-position":a.camera.position,"camera-angle":a.camera.angle,onCameraUpdated:s.updateCamera},null,8,["camera-position","camera-angle","onCameraUpdated"])])])}const P={class:"drawing-input"};function F(e,t,n,i,a,s){return(0,o.wg)(),(0,o.iD)("div",P)}var A={methods:{inCanvas(e){var t=Ee.domElement.getBoundingClientRect(),n=t.left+t.width/2,i=t.top+t.height/2;const o=e.clientX-n,a=e.clientY-i,s=Math.sqrt(o*o+a*a);return!(s<t.width/2)}}};const z=(0,l.Z)(A,[["render",F]]);var M=z,S=n(7139);const U=e=>((0,o.dD)("data-v-aaf6af6e"),e=e(),(0,o.Cn)(),e),I={class:"drawing-input"},G=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),D=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),T=U((()=>(0,o._)("span",null,"Current Value: ",-1))),j=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),L=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),E=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),R=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),H=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),V=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),O=U((()=>(0,o._)("div",{class:"spacer"},null,-1))),$=U((()=>(0,o._)("div",{class:"spacer"},null,-1)));function Z(e,t,n,i,a,s){const r=(0,o.up)("LayerViewer"),l=(0,o.up)("v-color-picker"),d=(0,o.up)("v-icon"),c=(0,o.up)("v-btn"),u=(0,o.up)("v-spacer"),h=(0,o.up)("v-slider"),m=(0,o.up)("v-tooltip"),g=(0,o.up)("v-app-bar"),p=(0,o.up)("v-col"),w=(0,o.up)("v-row"),f=(0,o.up)("v-container"),v=(0,o.up)("v-card"),y=(0,o.up)("v-app");return(0,o.wg)(),(0,o.iD)("div",I,[(0,o.Wm)(r,{onCardSelected:s.handleCardSelected,ref:"layerViewer"},null,8,["onCardSelected"]),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[a.showColorPicker?((0,o.wg)(),(0,o.j4)(l,{key:0,modelValue:s.color,"onUpdate:modelValue":t[0]||(t[0]=e=>s.color=e)},null,8,["modelValue"])):(0,o.kq)("",!0),(0,o.Wm)(g,{class:"small-bar justify-center"},{default:(0,o.w5)((()=>[G,(0,o.Wm)(c,{icon:"",class:"fixed-button",to:"/"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-home")])),_:1})])),_:1}),D,(0,o.Wm)(c,{icon:"",class:"fixed-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-file")])),_:1})])),_:1}),(0,o.Wm)(u),(0,o.Wm)(m,{bottom:""},{activator:(0,o.w5)((({attrs:e})=>[(0,o.Wm)(h,(0,o.dG)({"show-ticks":"",class:"my-slider",color:"blue-grey-lighten-3",density:"compact","track-size":"15",modelValue:a.cameraDistance,"onUpdate:modelValue":t[1]||(t[1]=e=>a.cameraDistance=e),step:.1,min:.4,max:10},e,{onClick:s.updateCameraDistance}),null,16,["modelValue","onClick"])])),default:(0,o.w5)((()=>[T])),_:1}),j,(0,o.Wm)(h,{"show-ticks":"",class:"my-slider",color:"blue-grey-lighten-3",density:"compact","track-size":"15",modelValue:a.sizeMultiplier,"onUpdate:modelValue":t[2]||(t[2]=e=>a.sizeMultiplier=e),step:.1,min:.4,max:1.5,onClick:s.updateSizeMultiplier},null,8,["modelValue","onClick"]),L,(0,o.Wm)(h,{"show-ticks":"",class:"my-slider",color:"blue-grey-lighten-3",density:"compact","track-size":"15",modelValue:a.sizeMultiplier,"onUpdate:modelValue":t[3]||(t[3]=e=>a.sizeMultiplier=e),step:.1,min:.4,max:1.5,onClick:s.updateSizeMultiplier},null,8,["modelValue","onClick"]),E,(0,o.Wm)(c,{icon:"",class:"fixed-button",onClick:s.toggleNewMode},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,S.zw)(a.newMode?"mdi-toggle-switch-outline":"mdi-toggle-switch-off-outline"),1)])),_:1})])),_:1},8,["onClick"]),R,(0,o.Wm)(c,{icon:"",class:"fixed-button",onClick:s.loadCameraPosition},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-target")])),_:1})])),_:1},8,["onClick"]),H,(0,o.Wm)(c,{icon:"",class:"fixed-button",onClick:s.goToGuide},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-target-variant")])),_:1})])),_:1},8,["onClick"]),V,(0,o.Wm)(c,{icon:"",class:"fixed-button",ref:"eraserButton",onClick:s.toggleEraserMode},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,S.zw)(a.stroke.eraser?"mdi-eraser":"mdi-brush-outline"),1)])),_:1})])),_:1},8,["onClick"]),O,(0,o.Wm)(c,{icon:"",class:"fixed-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-layers-outline")])),_:1})])),_:1}),$,(0,o.Wm)(c,{icon:"",class:"fixed-button",onClick:s.toggleOnionSkin},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,S.zw)(a.onionSkin?"mdi-animation":"mdi-animation-outline"),1)])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,o.Wm)(v,{class:"pa-2",outlined:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{cols:"12",sm:"6",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{"show-ticks":"",class:"my-slider",color:"blue-grey-lighten-3",density:"compact","track-size":"15",direction:"vertical",modelValue:a.sizeMultiplier,"onUpdate:modelValue":t[4]||(t[4]=e=>a.sizeMultiplier=e),step:.1,min:.4,max:1.5,onClick:s.updateSizeMultiplier},null,8,["modelValue","onClick"])])),_:1})])),_:1}),(0,o.Wm)(w,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{cols:"12",sm:"6",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"",class:"fixed-button",onClick:t[5]||(t[5]=e=>a.showColorPicker=!a.showColorPicker)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-palette")])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{cols:"12",sm:"6",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"",class:"fixed-button",onClick:s.nextIcon},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,S.zw)(a.icons[a.currentIconIndex]),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(w,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{cols:"12",sm:"6",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"",class:"fixed-button custom-button",style:(0,S.j5)({color:a.canRedo?"#B0BEC5":"#78909C"}),onClick:s.redo},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-arrow-u-right-top")])),_:1})])),_:1},8,["style","onClick"])])),_:1})])),_:1}),(0,o.Wm)(w,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{cols:"12",sm:"6",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"",class:"fixed-button custom-button",style:(0,S.j5)({color:a.canUndo?"#B0BEC5":"#78909C"}),onClick:s.undo},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-arrow-u-left-top")])),_:1})])),_:1},8,["style","onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w,{class:"bottom-buttons"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"fixed-button",onClick:s.backward,large:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" mdi-minus ")])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(u),(0,o.Wm)(c,{class:"fixed-button",onClick:s.forward,large:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" mdi-plus ")])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(u),(0,o.Wm)(c,{class:"fixed-button",onClick:s.play,large:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,S.zw)(a.rotatingCondition?"mdi-pause":"mdi-play"),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])}const B=e=>((0,o.dD)("data-v-f4c3745c"),e=e(),(0,o.Cn)(),e),Y={class:"layer-viewer"},q={class:"card-content"},X={class:"card-text"},N=B((()=>(0,o._)("div",{class:"d-flex fill-height align-center justify-center"},null,-1)));function K(e,t,n,i,a,s){const r=(0,o.up)("v-card"),l=(0,o.up)("v-slide-group-item"),d=(0,o.up)("v-slide-group"),c=(0,o.up)("v-sheet");return(0,o.wg)(),(0,o.iD)("div",Y,[(0,o.Wm)(c,{class:"mx-auto",elevation:"0","max-width":"800","max-height":"100"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:a.model,"onUpdate:modelValue":t[0]||(t[0]=e=>a.model=e),class:"pa-4","show-arrows":""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.layerLength,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{key:e},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"card-wrapper",ref_for:!0,ref:"cardElements"},[(0,o.Wm)(r,{width:"60",height:"60",class:(0,S.C_)([["selected-card",{"transparent-card":t===a.model}],"ma-4"]),variant:t===a.model?"outlined":void 0,onClick:e=>s.selectCard(t)},{default:(0,o.w5)((()=>[(0,o._)("div",q,[(0,o._)("span",X,(0,S.zw)(e),1),N])])),_:2},1032,["class","variant","onClick"])],512)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1})])}var J={data(){return{model:0,renderers:[],layerLength:1}},methods:{updateLayers(){console.log("update"),this.layerLength=Xe.frameList.length,this.model=Xe.index},selectCard(e){this.model==e&&(console.log("???"),Xe.updateCamera()),this.model=e,this.$emit("card-selected",e)}}};const Q=(0,l.Z)(J,[["render",K],["__scopeId","data-v-f4c3745c"]]);var ee=Q,te=(n(4224),n(1121),n(7133),n(1114)),ne=n(1444);let ie=new te.cPb(75,window.innerWidth/window.innerHeight,.1,1e3);ie.position.set(0,0,5),ie.rotation.set(0,0,0);const oe={class:"grid"},ae=(0,o._)("div",{id:"rendererElement",class:"renderer"},null,-1),se=(0,o._)("div",{id:"drawRendererElement",class:"renderer"},null,-1),re=[ae,se];function le(e,t,n,i,a,s){return(0,o.wg)(),(0,o.iD)("div",oe,re)}function de(){const e="xzy",t=e.slice(0,2),n=new te.Ilk("#6699CC"),i=1,o=5,a=80,s=new te.jyz({side:te.ehD,uniforms:{uSize1:{value:i},uSize2:{value:o},uColor:{value:n},uDistance:{value:a}},transparent:!0,vertexShader:`\n    \n    varying vec3 worldPosition;\n\n    uniform float uDistance;\n    \n    void main() {\n    \n            vec3 pos = position.${e} * uDistance;\n            pos.${t} += cameraPosition.${t};\n            \n            worldPosition = pos;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    \n    }\n    `,fragmentShader:`\n    \n    varying vec3 worldPosition;\n    \n    uniform float uSize1;\n    uniform float uSize2;\n    uniform vec3 uColor;\n    uniform float uDistance;\n        \n        \n        \n        float getGrid(float size) {\n        \n            vec2 r = worldPosition.${t} / size;\n            \n            \n            vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n            float line = min(grid.x, grid.y);\n            \n        \n            return 1.0 - min(line, 1.0);\n        }\n        \n    void main() {\n    \n            \n            float d = 1.0 - min(distance(cameraPosition.${t}, worldPosition.${t}) / uDistance, 1.0);\n            \n            float g1 = getGrid(uSize1);\n            float g2 = getGrid(uSize2);\n            \n            \n            gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n            gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n            \n            if ( gl_FragColor.a <= 0.0 ) discard;\n            \n    \n    }\n    \n    `,extensions:{derivatives:!0}}),r=new te._12(2,2,1,1),l=new te.Kj0(r,s);return l}var ce=de,ue=n(9469);let he=ce(),me=new te.Tme;var ge={name:"GridBackground",props:{cameraPosition:{type:Object,required:!0},cameraAngle:{type:Object,required:!0}},mounted(){je.setSize(this.$el.clientWidth,this.$el.clientHeight),je.setPixelRatio(window.devicePixelRatio),Re.setSize(this.$el.clientWidth,this.$el.clientHeight),Re.setPixelRatio(window.devicePixelRatio);let e=document.getElementById("rendererElement"),t=document.getElementById("drawRendererElement");e.appendChild(je.domElement),t.appendChild(Re.domElement),ie.rotation.order="XYZ",ie.position.set(this.cameraPosition.x,this.cameraPosition.y,this.cameraPosition.z),ie.rotation.set(new te.USm(this.cameraAngle.x,this.cameraAngle.y,this.cameraAngle.z)),je.setClearColor(new te.Ilk(16777215)),Le.add(he);const n=new ue.E;n.load("./model.glb",(function(e){console.log("getting model"),me=e.scene}),void 0,(function(e){console.error(e)}));const i=this;function o(){if(Xe.play){ie.position.copy(Xe.currentPos);const e=Xe.currentAngle;ie.rotation.set(e.x,e.y,e.z)}else ie.position.copy(i.cameraPosition),ie.rotation.set(i.cameraAngle.x,i.cameraAngle.y,i.cameraAngle.z);qe[ye].rotation.set(i.cameraAngle.x,i.cameraAngle.y,i.cameraAngle.z);const e=new te.Pa4(0,0,ve),t=ie.position.clone().add(ie.getWorldDirection(new te.Pa4).multiplyScalar(e.z));qe[ye].position.copy(t),je.render(Le,ie);const n=Xe.getFrameScene().add(me);let a=new te.ZAu,s=Xe.getFrame().guidePoint,r=Xe.allGhostGuides;Xe.play||(n.add(qe[ye]),n.add(s),n.add(r),Xe.onion&&(a=Xe.allGhostGroups,n.add(a))),Re.render(n,ie),n.remove(me),n.remove(s),n.remove(r),Xe.onion&&n.remove(a),Xe.getFrameScene().remove(qe[ye]),requestAnimationFrame(o)}this.windowResizeHandler(),o(),window.addEventListener("resize",this.windowResizeHandler)},beforeUnmount(){window.removeEventListener("resize",this.windowResizeHandler)},methods:{windowResizeHandler(){const e=this.$el.clientWidth,t=this.$el.clientHeight;ie.aspect=e/t,ie.updateProjectionMatrix(),je.setSize(e,t),Re.setSize(e,t)}}};const pe=(0,l.Z)(ge,[["render",le]]);var we=pe;let fe={l:void 0,draw:class{constructor(e){this.stroke=e,this.line=new ne.MeshLine,this.geometry=new te.u9r,this.vertices=[],this.lineWidths=[],this.geometry.setAttribute("position",new te.TlE(new Float32Array(this.vertices),3)),this.material=new ne.MeshLineMaterial({lineWidth:this.stroke.show_stroke?this.stroke.lineWidth:.01,sizeAttenuation:1,color:this.stroke.show_stroke?this.stroke.color:16777215,side:te.ehD,fog:!0,wireframe:!1,alphaTest:0,blending:te.bdR,transparent:!1,resolution:new te.FM8(window.innerWidth,window.innerHeight),repeat:new te.FM8(.1,.1),opacity:1}),this.mesh=new te.Kj0(this.line.geometry,this.material),this.mesh.raycast=ne.MeshLineRaycast,this.eraserGroup=new te.ZAu}translate(e,t){var n=new te.Pa4;n.set(e/window.innerWidth*2-1,-t/window.innerHeight*2+1,4);const i=new te.iMs;i.setFromCamera(n,ie);var o=i.intersectObject(qe[ye]);const a=o.map((e=>e.point));return a}start(){Xe.getFrameScene().add(this.mesh)}move(e,t,n,i){this.vertices=[...this.vertices,e,t,n],this.geometry.setAttribute("position",new te.TlE(new Float32Array(this.vertices),3));var o=i.lineWidth;this.lineWidths=[...this.lineWidths,o];var a=e=>this.lineWidths[Math.floor(e*this.lineWidths.length)];this.line.setGeometry(this.geometry,a)}erase(e,t){var n=new te.Pa4;n.set(e/window.innerWidth*2-1,-t/window.innerHeight*2+1,.5);const i=new te.iMs;i.params.Line.threshold=.1,i.setFromCamera(n,ie);for(var o=i.intersectObjects(Xe.getFrameScene().children,!1),a=0;a<o.length;a++){var s=o[a].object;s!==qe[ye]&&s!==he&&(Xe.getFrameScene().remove(s),this.eraserGroup.add(s),console.log("removed"))}}end(e){return this.vertices.length>=3&&this.geometry.computeBoundingBox(),e?0===this.eraserGroup.children.length?[!1,!1]:["remove",this.eraserGroup]:void 0===this.geometry||0===this.vertices.length?[!1,!1]:(console.log(this.mesh.id),console.log("ahhhhhhhhhhh*****"),["add",this.mesh.id])}},onStart:function(e,t,n){if(n.eraser)this.l.erase(e,t);else{this.l=new this.draw(n);var i=this.l.translate(e,t);i.length>0&&(this.l.move(i[0].x,i[0].y,i[0].z,n),this.l.start())}},onMove:function(e,t,n){if(void 0!==this.l)if(n.eraser)this.l.erase(e,t);else{var i=this.l.translate(e,t);i.length>0&&this.l.move(i[0].x,i[0].y,i[0].z,n)}},onEnd:function(e){return this.l.end(e.eraser)},getCoors:function(e,t){if(this.l){var n=this.l.translate(e,t);return n.length>0?{x:n[0].x,y:n[0].y,z:n[0].z}:void 0}}},ve=4,ye=0,xe=!1,ke=!1,Ce=null;var _e={name:"DrawingInput",components:{LayerViewer:ee},data(){return{icons:["mdi-square-outline","mdi-sphere","mdi-cylinder"],currentIconIndex:0,isDrawing:!1,rotatingCondition:!1,stroke:{show_stroke:!0,lineWidth:.125,color:0,eraser:!1},showColorPicker:!1,onionSkin:!1,canUndo:!1,canRedo:!1,sizeMultiplier:.5,newMode:!1,value:25,cameraDistance:4}},computed:{color:{get(){return"#"+this.stroke.color.toString(16).padStart(6,"0")},set(e){this.stroke.color=parseInt(e.slice(1),16)}}},mounted(){this.$watch((()=>this.rotatingCondition),(e=>{Xe.calculateAnimation(),e?null==Ce&&(Ce=setInterval((()=>{Xe.updateAnimationFrame();const e=this.$refs.layerViewer;e.updateLayers()}),1e3/Xe.animationDetail)):null!=Ce&&(clearInterval(Ce),Ce=null)})),document.body.addEventListener("contextmenu",(e=>{xe=!1,ke=!0,e.preventDefault(),this.addGuidePoint(e),ke=!1})),document.body.addEventListener("mouseup",(e=>{const t=e.clientX,n=e.clientY;this.inCanvas(t,n)&&xe&&!ke&&(this.handleMouseUp(),xe=!1)})),document.body.addEventListener("mousedown",(e=>{const t=e.clientX,n=e.clientY;this.inCanvas(t,n)&&!ke&&(xe=!0,this.handleMouseDown(t,n))})),document.body.addEventListener("touchstart",(e=>{const t=e.targetTouches[0]?e.targetTouches[0].pageX:e.changedTouches[e.changedTouches.length-1].pageX,n=e.targetTouches[0]?e.targetTouches[0].pageY:e.changedTouches[e.changedTouches.length-1].pageY;this.inCanvas(t,n)&&!ke&&(xe=!0,this.handleMouseDown(t,n)),xe=!0})),document.body.addEventListener("touchmove",(e=>{const t=e.targetTouches[0]?e.targetTouches[0].pageX:e.changedTouches[e.changedTouches.length-1].pageX,n=e.targetTouches[0]?e.targetTouches[0].pageY:e.changedTouches[e.changedTouches.length-1].pageY;this.inCanvas(t,n)?xe&&!ke&&this.handleMouseMove(t,n):xe&&(this.handleMouseUp(),xe=!1)})),document.body.addEventListener("touchend",(e=>{const t=e.targetTouches[0]?e.targetTouches[0].pageX:e.changedTouches[e.changedTouches.length-1].pageX,n=e.targetTouches[0]?e.targetTouches[0].pageY:e.changedTouches[e.changedTouches.length-1].pageY;this.inCanvas(t,n)&&xe&&!ke&&(this.handleMouseUp(),xe=!1)})),document.body.addEventListener("pointermove",(e=>{e.pressure>0&&(this.stroke.lineWidth=.5*e.pressure*this.sizeMultiplier)})),document.body.addEventListener("mousemove",(e=>{const t=e.clientX,n=e.clientY;this.inCanvas(t,n)?xe&&!ke&&this.handleMouseMove(t,n):xe&&(this.handleMouseUp(),xe=!1)}))},methods:{updateCameraDistance(){console.log("updating",ve),ve=this.cameraDistance,Xe.updateGuide()},goToGuide(){Xe.updateGuide()},addGuidePoint(e){const t=fe.getCoors(e.clientX,e.clientY);t&&Xe.getFrame().setGuidePoint(t)},inCanvas(e,t){var n=Ee.domElement.getBoundingClientRect(),i=n.left+n.width/2,o=n.top+n.height/2;const a=e-i,s=t-o,r=Math.sqrt(a*a+s*s);return!(r<n.width/2)},handleMouseMove(e,t){this.isDrawing&&fe.onMove(e,t,this.stroke)},handleMouseDown(e,t){this.isDrawing=!0,fe.onStart(e,t,this.stroke),this.canUndo=Xe.getFrame().history.canUndo(),this.canRedo=Xe.getFrame().history.canRedo()},handleMouseUp(){this.isDrawing=!1;let e=fe.onEnd(this.stroke);0!=e[0]&&Xe.getFrame().history.action(e),this.canUndo=Xe.getFrame().history.canUndo(),this.canRedo=Xe.getFrame().history.canRedo()},toggleEraserMode(){this.stroke.eraser=!this.stroke.eraser},toggleColorSelect(){console.log(this.showColorPicker),this.showColorPicker=!this.showColorPicker},toggleOnionSkin(){this.onionSkin=!this.onionSkin,Xe.onion=!Xe.onion},toggleNewMode(){this.newMode=!this.newMode},backward(){Xe.delFrame();const e=this.$refs.layerViewer;e.updateLayers()},forward(){Xe.addFrame();const e=this.$refs.layerViewer;e.updateLayers()},play(){this.rotatingCondition=!this.rotatingCondition,this.isDrawing=this.rotatingCondition,Xe.play=this.rotatingCondition},undo(){Xe.getFrame().history.undo(),this.canRedo=Xe.getFrame().history.canRedo()},redo(){Xe.getFrame().history.redo(),this.canUndo=Xe.getFrame().history.canUndo()},updateSizeMultiplier(){this.stroke.lineWidth=.25*this.sizeMultiplier},handleCardSelected(e){console.log("Selected index:",e),Xe.setIndex(e)},nextIcon(){this.currentIconIndex=(this.currentIconIndex+1)%this.icons.length,console.log("index changed",this.currentIconIndex),ye=this.currentIconIndex},loadCameraPosition(){console.log("saving position");const e=ie.position.clone(),t=ie.rotation.clone();Xe.setPos(e),Xe.setAngle(t)}}};const We=(0,l.Z)(_e,[["render",Z],["__scopeId","data-v-aaf6af6e"]]);var be=We;const Pe={class:"arc",ref:"arcball"};function Fe(e,t,n,i,a,s){return(0,o.wg)(),(0,o.iD)("div",Pe,null,512)}var Ae=n(924);let ze,Me;var Se={name:"ArcballControl",props:{cameraPosition:{type:Object,required:!0},cameraAngle:{type:Object,required:!0}},mounted(){Ee.setSize(this.$el.clientWidth,this.$el.clientHeight),Ee.setPixelRatio(window.devicePixelRatio),this.$el.appendChild(Ee.domElement),ze=new te.xsS,Me=new Ae.A(ie,Ee.domElement,ze),Me.target.set(10,1,0),Me.addEventListener("change",this.handleCameraChange),ie.position.set(0,0,5),this.windowResizeHandler(),Me.update(),this.animate(),window.addEventListener("resize",this.windowResizeHandler)},beforeUnmount(){window.removeEventListener("resize",this.windowResizeHandler),Me.removeEventListener("change",this.handleCameraChange)},methods:{handleCameraChange(){if(Xe.needsUpdate){ie.position.copy(Xe.getFrame().pos);const e=Xe.getFrame().angle;ie.rotation.set(e.x,e.y,e.z),ie.updateProjectionMatrix();const t=new te.Pa4(0,0,ve),n=ie.position.clone().add(ie.getWorldDirection(new te.Pa4).multiplyScalar(t.z));Me.target.copy(n),Me.update(),Xe.needsUpdate=!1}if(Xe.guideNeedsUpdate){const e=Xe.getFrame().angle;ie.rotation.set(e.x,e.y,e.z);const t=Xe.getFrame().guidePointPosition,n=new te.Pa4(0,0,-ve),i=t.clone().add(ie.getWorldDirection(new te.Pa4).multiplyScalar(n.z));ie.position.copy(i),ie.updateProjectionMatrix(),Me.target.copy(t),Me.update(),Xe.guideNeedsUpdate=!1}const e=ie.position.clone(),t=ie.rotation.clone();this.$emit("camera-updated",{position:e,angle:t}),Ee.render(ze,ie)},windowResizeHandler(){const e=this.$el.clientWidth,t=this.$el.clientHeight;Ee.setSize(e,t),Ee.setPixelRatio(window.devicePixelRatio)},animate(){requestAnimationFrame(this.animate),(Xe.needsUpdate||Xe.guideNeedsUpdate)&&this.handleCameraChange();const e=new te.Pa4(0,0,ve),t=ie.position.clone().add(ie.getWorldDirection(new te.Pa4).multiplyScalar(e.z));Me.target.copy(t),Me.update(),Ee.render(ze,ie)}}};const Ue=(0,l.Z)(Se,[["render",Fe]]);var Ie=Ue;n(560);class Ge{constructor(){this.undoHistory=[],this.redoHistory=[]}canUndo(){return this.undoHistory.length>0}canRedo(){return this.redoHistory.length>0}undo(){if(!this.canUndo())return;let e=this.undoHistory.pop(),t=e[0],n=e[1];if("add"===t){let e=Xe.getFrameScene().getObjectById(n);Xe.getFrameScene().remove(e),this.redoHistory.push(["remove",e])}else"remove"===t&&(Xe.getFrameScene().add(n),this.redoHistory.push(["add",n]))}redo(){if(!this.canRedo())return;let e=this.redoHistory.pop(),t=e[0],n=e[1];if("add"===t){let e=Xe.getFrameScene().getObjectById(n);this.undoHistory.push(["remove",n]),Xe.getFrameScene().remove(e)}else"remove"===t&&(Xe.getFrameScene().add(n),this.undoHistory.push(["add",n]))}action(e){this.undoHistory.push(e)}}class De{constructor(){this.history=new Ge,this.scene=new te.xsS,this.ghostGroup=new te.ZAu,this.pos=ie.position.clone(),this.angle=ie.rotation.clone(),this.guidePoint=new te.ZAu,this.guidePointPosition=new te.Pa4,this.guidePointGhost=new te.ZAu}setGuidePoint(e){this.guidePointPosition=new te.Pa4(e.x,e.y,e.z);let t=new te.u9r;const n=new Float32Array([e.x,e.y,e.z]);t.setAttribute("position",new te.TlE(n,3));let i=new te.UY4({color:16777215,size:.05});this.guidePoint=new te.woe(t,i)}getGuidePointGhost(e){let t=new te.u9r;const n=new Float32Array([this.guidePointPosition.x,this.guidePointPosition.y,this.guidePointPosition.z]);t.setAttribute("position",new te.TlE(n,3));let i=new te.UY4({color:16777215,size:.05,transparent:!0,opacity:e});return new te.woe(t,i)}getGhostGroup(e){return this.ghostGroup=new te.ZAu,this.scene.traverse((t=>{if(t.isMesh){let n=t.clone(),i=new ne.MeshLineMaterial({lineWidth:n.material.lineWidth,sizeAttenuation:1,color:new te.Ltg(1,0,0,1),side:te.ehD,fog:!0,wireframe:!1,alphaTest:0,blending:te.bdR,transparent:!0,resolution:new te.FM8(window.innerWidth,window.innerHeight),repeat:new te.FM8(.1,.1),opacity:e});n.material=i,n.material.color=new te.Pa4(1,0,0),this.ghostGroup.add(n)}})),console.log(this.ghostGroup,e),this.ghostGroup}}class Te{constructor(){this.frameList=[new De],this.index=0,this.allGhostGroups=new te.ZAu,this.allGhostGuides=new te.ZAu,this.onionSkinDepth=3,this.onion=!0,this.play=!1,this.animationPos=[],this.animationAngle=[],this.animationDetail=0,this.animationFPS=10,this.drawingFPS=5,this.currentPos=new te.Pa4,this.currentAngle=new te.USm,this.animationIndex=0,this.needsUpdate=!1,this.guideNeedsUpdate=!1,this.animationMoments=0}updateAllGhostGuides(){const e=Math.max(0,this.index-this.onionSkinDepth),t=Math.min(this.frameList.length,this.index+this.onionSkinDepth);this.allGhostGuides=new te.ZAu;for(let n=e;n<t;n++)if(n!=this.index){let e=.3/Math.abs(this.index-n);this.allGhostGuides.add(this.getFrameAtIndex(n).getGuidePointGhost(e))}}updateAllGhostGroups(){this.updateAllGhostGuides();const e=Math.max(0,this.index-this.onionSkinDepth),t=Math.min(this.frameList.length,this.index+this.onionSkinDepth);this.allGhostGroups=new te.ZAu;for(let n=e;n<t;n++)if(n!=this.index){let e=.3/Math.abs(this.index-n);this.allGhostGroups.add(this.getFrameAtIndex(n).getGhostGroup(e))}}updateGuide(){this.guideNeedsUpdate=!0}updateCamera(){this.needsUpdate=!0}calculateAnimation(){this.animationIndex=0;const e=[],t=[];for(let o=0;o<this.frameList.length;o++){const n=this.getFrameAtIndex(o);e.push(n.pos);const i=new te.Pa4;i.setFromEuler(n.angle),t.push(i)}console.log(e,t),this.animationDetail=this.animationFPS*this.drawingFPS,this.animationMoments=this.animationDetail*this.frameList.length;const n=new te.YT8(e),i=new te.YT8(t);this.animationPos=n.getPoints(this.animationMoments),this.animationAngle=i.getPoints(this.animationMoments)}updateAnimationFrame(){this.currentPos=this.animationPos[this.animationIndex],this.currentAngle=this.animationAngle[this.animationIndex],this.animationIndex%this.animationDetail==0&&this.setIndex((this.index+1)%this.frameList.length),this.animationIndex=(this.animationIndex+1)%this.animationMoments}setPos(e){this.setPosAtFrame(e,this.index)}setPosAtFrame(e,t){this.getFrameAtIndex(t).pos=e}setAngle(e){this.setAngleAtFrame(e,this.index)}setAngleAtFrame(e,t){this.getFrameAtIndex(t).angle=e}addIndex(){this.setIndex(1+this.index)}subIndex(){this.setIndex(-1+this.index)}setIndex(e){this.check(e),this.index=e,this.updateAllGhostGroups()}getFrameScene(){return this.getFrame().scene}getFrame(){return this.getFrameAtIndex(this.index)}getFrameAtIndex(e){return this.check(e),this.frameList[e]}addFrame(){this.addFrameAtIndex(this.index)}addFrameAtIndex(e){console.log(e),this.check(e),this.frameList.splice(e+1,0,new De),this.addIndex()}delFrame(){this.delFrameAtIndex(this.index)}delFrameAtIndex(e){this.check(e),this.index>0&&e>0&&(this.frameList.splice(e,1),this.subIndex)}check(e){(e<0||e>=this.frameList.length)&&console.log("frame accessed out of bounds",e)}}n(8556);let je=new te.CP7,Le=new te.xsS,Ee=new te.CP7({alpha:!0,antialias:!0}),Re=new te.CP7({alpha:!0,antialias:!0});const He=new te._12(4,4),Ve=new te.vBJ({color:7626201,side:te.ehD,opacity:.25,transparent:!0}),Oe=new te.Kj0(He,Ve),$e=new te.xo$(1,32,16),Ze=new te.Kj0($e,Ve),Be=new te.fHI(1,1,2,32),Ye=new te.Kj0(Be,Ve);let qe=[Oe,Ze,Ye],Xe=new Te;var Ne={name:"App",components:{UserInput:M,DrawingInput:be,Arcball:Ie,GridBackground:we},data(){return{camera:{position:{x:0,y:0,z:5},angle:{x:0,y:0,z:0}}}},mounted(){Oe.rotateX(Math.PI/2)},methods:{updateCamera({position:e,angle:t}){this.camera.position=e,this.camera.angle=t},logCameraPosition(){console.log("Logging camera position")}}};const Ke=(0,l.Z)(Ne,[["render",b]]);var Je=Ke;const Qe=[{path:"/",component:_},{path:"/sura-demo",component:Je}],et=(0,g.p7)({history:(0,g.PO)(),routes:Qe}),tt=(0,u.Rd)({components:h,directives:m,theme:{defaultTheme:"light",themes:{light:{"light-color":"#FFFFFF"},dark:{"light-color":"#FFFFFF"}}}});(0,i.ri)(c).use(tt).use(et).mount("#app")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,a){if(!i){var s=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],a=e[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(r=!1,a<s&&(s=a));if(r){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,s=i[0],r=i[1],l=i[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var c=l(n)}for(t&&t(i);d<s.length;d++)a=s[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},i=self["webpackChunkolliearrison_github_io"]=self["webpackChunkolliearrison_github_io"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(4358)}));i=n.O(i)})();
//# sourceMappingURL=app.01b2ce4b.js.map